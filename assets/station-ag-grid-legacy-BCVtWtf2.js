!function(){function e(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,t)}return n}function r(r){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?e(Object(a),!0).forEach(function(e){n(r,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach(function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(a,e))})}return r}function n(e,r,n){return(r=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var t=n.call(e,r||"default");if("object"!=typeof t)return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(r))in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}System.register(["./chakra-legacy-DVL9H2dO.js","./index-legacy-BI-vPK8I.js","./react-legacy-B8c4_Whb.js","./app-router-legacy-Bpjo0aZd.js","./ag-grid-react-legacy-CylK2hBa.js","./ag-grid-community-legacy-51mSNOf7.js","./param-selector-legacy-Bd7OgHMI.js"],function(e,n){"use strict";var t,a,l,o,i,s,c,d,u,p,g,m,h,f,b,v,y,j,x,S,w,R,N;return{setters:[e=>{t=e.ag,a=e.u,l=e.j,o=e.B,i=e.h,s=e.ao},e=>{c=e.d,d=e.u,u=e.e,p=e.aZ,g=e.i,m=e.a6,h=e.a5,f=e.ac,b=e.a_},e=>{v=e.u,y=e.a},e=>{j=e.g,x=e.R},e=>{S=e.A},e=>{w=e.M,R=e.z,N=e.D},null],execute:function(){e("default",function(e){const{branchIndex:t}=e,{t:a,i18n:o}=v(),i=c(),w=d(e=>e.app.sidePanelMode),{style:R,theme:N,stn_list:P,line_num:M,coline:k}=d(e=>e.param),A=d(e=>e.helper.branches),[G,T]=y.useState([]);y.useEffect(()=>{const e=A[t].reduce((e,n)=>["linestart","lineend"].includes(n)?e:[...e,r(r({},P[n]),{},{id:n,rowSpan:i(j(n,t))})],[]);T(e)},[A,t,P]);const D=y.useMemo(()=>[{headerName:a("StationAgGrid.num"),field:"num",cellRenderer:({value:e})=>l.jsx(O,{lineNumber:M,stationNumber:e,lineColour:N[2]}),pinned:"left",minWidth:110,hide:![u.GZMTR].includes(R)},{headerName:a("Chinese name"),field:"localisedName",valueFormatter:({value:e,data:r})=>{var n;return e.zh+(R===u.GZMTR&&null!=r&&null!==(n=r.localisedSecondaryName)&&void 0!==n&&n.zh?` (${r.localisedSecondaryName.zh})`:"")}},{headerName:a("English name"),cellRenderer:({data:e})=>{var r;return l.jsx(x,{text:e.localisedName.en+(R===u.GZMTR&&null!==(r=e.localisedSecondaryName)&&void 0!==r&&r.en?` (${e.localisedSecondaryName.en})`:"")})},minWidth:300},{headerName:a("StationAgGrid.interchange"),cellRenderer:({data:e})=>l.jsx(s,{children:e.transfer.groups.map(e=>{var r;return null!==(r=e.lines)&&void 0!==r?r:[]}).flat().map((e,r)=>{var n,t,a,o;return l.jsx(p,{name:e.name,bg:null!==(n=null===(t=e.theme)||void 0===t?void 0:t[2])&&void 0!==n?n:"#aaaaaa",fg:null!==(a=null===(o=e.theme)||void 0===o?void 0:o[3])&&void 0!==a?a:g.white,showShortName:!0},r)})})},{headerName:a("StationAgGrid.coline"),rowSpan:({data:e})=>{var r;return null!==(r=null==e?void 0:e.rowSpan[0])&&void 0!==r?r:0},cellClassRules:{"rmg-ag-grid--spanned-cell":({data:e})=>!!e&&e.rowSpan[0]>0},cellRenderer:({data:e})=>{var r;return l.jsx(s,{children:null===(r=k[e.rowSpan[1]])||void 0===r||null===(r=r.colors)||void 0===r?void 0:r.map((e,r)=>l.jsx(p,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},r))})},hide:![u.SHMetro].includes(R)}],[R,N.toString(),o.language,M]),z=y.useRef(null),E=y.useRef(!1);y.useEffect(()=>{if(E.current&&z.current){1===z.current.api.getSelectedRows().length&&w!==m.STATION&&z.current.api.deselectAll()}},[E.current,w]);const[I]=y.useState({resizable:!0}),Z=y.useCallback(()=>{E.current=!0},[E.current]),H=y.useCallback(({api:e})=>{var r;const n=null===(r=e.getSelectedRows())||void 0===r?void 0:r.map(e=>e.id);console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",n),null!=n&&n.length&&(i(h(m.STATION)),i(f(n[0])),i(b(void 0)))},[]),W=y.useCallback(({data:e})=>e.id,[]);return l.jsx(n,{children:l.jsx(S,{ref:z,rowData:G,defaultColDef:I,columnDefs:D,getRowId:W,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:C,onSelectionChanged:H,onGridReady:Z,debug:!1})})});var n=function(e){var r=e.children,n=t().colorMode,i=a("RmgAgGrid");return l.jsx(o,{className:"light"===n?"ag-theme-alpine":"ag-theme-alpine-dark",sx:i,children:r})};function O(e){const{lineNumber:r,stationNumber:n,lineColour:t}=e,a={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:t,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return l.jsxs(i,{sx:a,children:[l.jsx("span",{children:r}),l.jsx("span",{children:n})]})}w.registerModules([R]),N({theme:"legacy"});const C={mode:"singleRow",checkboxes:!1,enableClickSelection:!0}}}})}();
