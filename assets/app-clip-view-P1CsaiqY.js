import{j as e,U as R,V as S,c as _,D as M,ao as A,a2 as u,t as P}from"./chakra-jT2-teuD.js";import{r as n,E as m,aP as y,a5 as b,aU as k}from"./index-HyGScCuj.js";import{u as L,s as z,a as s}from"./react-BNX4K-US.js";import{c as g,P as D,e as O,u as V}from"./param-selector-Co1Y1OOn.js";const w="rmg-bridge--",B={overflow:"hidden",flex:1,px:2,pb:2,"& > div":{m:0,h:"100%","& > div":{h:"100%"}}};function H(){const{t:a}=L(),[p]=z(),h=p.get("parentId"),o=p.get("parentComponent"),[x,d]=s.useState([]),[t,c]=s.useState(),[f,i]=s.useState(!1),r=s.useRef();s.useEffect(()=>(r.current=new BroadcastChannel(w+h),n.event(m.APP_CLIP_VIEW_OPENED,{parentComponent:o}),d(g()),()=>{r.current?.close()}),[]);const v=()=>{if(!t)return;const{config:C,param:l}=O(t);try{r.current?.postMessage({event:"IMPORT",meta:C,data:l&&V(l)}),n.event(m.APP_CLIP_VIEW_IMPORT,{parentComponent:o}),c(void 0),i(!1)}catch(E){console.error("Unable to update param",E),i(!0)}},I=()=>{r.current?.postMessage({event:"CLOSE"}),n.event(m.APP_CLIP_VIEW_CLOSED,{parentComponent:o}),c(void 0),i(!1)},j=()=>{n.openApp({appId:"rmg"})};return e.jsxs(y,{children:[f&&e.jsxs(R,{status:"error",variant:"solid",size:"xs",pl:3,pr:1,py:1,children:[e.jsx(S,{}),a("Project selected is invalid or corrupted.")]}),e.jsx(_.div,{sx:B,children:e.jsx(D,{paramRegistry:x,selectedParam:t,onParamSelect:c})}),e.jsx(M,{}),e.jsxs(A,{p:2,children:[e.jsx(u,{variant:"ghost",size:"sm","aria-label":a("Manage"),title:a("Manage"),icon:e.jsx(b,{}),onClick:j}),e.jsx(u,{variant:"ghost",size:"sm","aria-label":a("Reload"),title:a("Reload"),icon:e.jsx(k,{}),onClick:()=>d(g())}),e.jsx(P,{size:"sm",onClick:I,ml:"auto",children:a("Close")}),e.jsx(P,{size:"sm",colorScheme:"primary",isDisabled:!t,onClick:v,children:a("Import")})]})]})}export{H as default};
