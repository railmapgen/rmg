import{b as a,r as t,a as Te,d as $e}from"./react-BGwHOppr.js";import{_ as Je,M as Ke,a as ge,C as Re,E as ue,A as ae,H as Ae,b as qe,G as Qe,c as Ye,R as Ze,d as Xe,T as et,e as tt,f as st,g as rt,h as nt,B as ot,V as at,i as ct,j as lt,k as it,F as ut,O as dt,l as pt,m as mt,n as ht,o as we,p as ft,q as Ct,r as gt,s as Rt}from"./ag-grid-community-BZGUBSmq.js";var Z=a.createContext({}),he=(e,s,r,o)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const m=e.newAgStackInstance();if(m==null)return;let i,c,d=!1;return m.then(l=>{if(d){s.destroyBean(l);return}i=l,c=i.getGui(),r.appendChild(c),Ge(o,i)}),()=>{var l;d=!0,i&&((l=c==null?void 0:c.parentElement)==null||l.removeChild(c),s.destroyBean(i),o&&Ge(o,void 0))}},Ge=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},se=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),te=class Ne{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const n=new Ne;return n.classesMap={...this.classesMap},n.classesMap[s]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},de=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},We,Ee=(We=a.version)==null?void 0:We.split(".")[0],yt=Ee==="16"||Ee==="17";function vt(){return Ee==="19"}var Ce=!1;function wt(e){return Ce||setTimeout(()=>Ce=!1,0),Ce=!0,e()}var be=(e,s)=>{!yt&&e&&!Ce?$e.flushSync(s):s()};function Pe(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const o=[],n=[],m=new Map,i=new Map;for(let c=0;c<s.length;c++){const d=s[c];i.set(d.instanceId,d)}for(let c=0;c<e.length;c++){const d=e[c];m.set(d.instanceId,d),i.has(d.instanceId)&&o.push(d)}for(let c=0;c<s.length;c++){const d=s[c],l=d.instanceId;m.has(l)||n.push(d)}return o.length===e.length&&n.length===0?e:o.length===0&&n.length===s.length?s:o.length===0?n:n.length===0?o:[...o,...n]}var He=t.forwardRef((e,s)=>{var x;const{ctrlsFactory:r,context:o}=t.useContext(Z),n=t.useRef(null),m=t.useRef(null),i=t.useRef(null),c=t.useRef(null),d=t.useRef(null),l=t.useRef(),[u,R]=t.useState(),[E,w]=t.useState(),[C,g]=t.useState(),[p,f]=t.useState(()=>new te),[y,v]=t.useState(()=>new te("ag-hidden")),[h,S]=t.useState(()=>new te("ag-hidden")),[D,b]=t.useState(()=>new te("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>he(u,o,m.current),[u]);const F=t.useCallback(I=>{if(n.current=I,!I){l.current=o.destroyBean(l.current);return}const H={setInnerRenderer:(V,T)=>{R(V),g(T)},setChildCount:V=>w(V),addOrRemoveCssClass:(V,T)=>f(X=>X.setClass(V,T)),setContractedDisplayed:V=>S(T=>T.setClass("ag-hidden",!V)),setExpandedDisplayed:V=>v(T=>T.setClass("ag-hidden",!V)),setCheckboxVisible:V=>b(T=>T.setClass("ag-invisible",!V))},_=r.getInstance("groupCellRendererCtrl");_&&(l.current=o.createBean(_),l.current.init(H,I,i.current,c.current,d.current,He,e))},[]),N=t.useMemo(()=>"ag-cell-wrapper ".concat(p.toString()),[p]),M=t.useMemo(()=>"ag-group-expanded ".concat(y.toString()),[y]),P=t.useMemo(()=>"ag-group-contracted ".concat(h.toString()),[h]),A=t.useMemo(()=>"ag-group-checkbox ".concat(D.toString()),[D]),L=u&&u.componentFromFramework,W=L?u.componentClass:void 0,B=u==null&&C!=null,k=Je(C,!0);return a.createElement("span",{className:N,ref:F,...e.colDef?{}:{role:(x=l.current)==null?void 0:x.getCellAriaRole()}},a.createElement("span",{className:M,ref:c}),a.createElement("span",{className:P,ref:d}),a.createElement("span",{className:A,ref:i}),a.createElement("span",{className:"ag-group-value",ref:m},B&&a.createElement(a.Fragment,null,k),L&&a.createElement(W,{...u.params})),a.createElement("span",{className:"ag-group-child-count"},E))}),xe=He,ke=t.createContext({setMethods:()=>{}}),St=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:o,setMethods:n}=e,[{key:m,...i},c]=t.useState(s);return t.useEffect(()=>{r(d=>c(d))},[]),a.createElement(ke.Provider,{value:{setMethods:n}},a.createElement(o,{key:m,...i}))},Et=t.memo(St),bt=0;function Ie(){return"agPortalKey_".concat(++bt)}var Ue=class{constructor(e,s,r,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Ie(),this.portalKey=Ie(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(ge('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(ge('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(s=>this.eParentElement.classList.add(s))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const o=r[e];if(o)return o.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{var r;this.componentInstance=s,this.addParentContainerStyleAndClasses(),(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Te.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this["".concat(e,"Component")]}};function Me(e,s,r){e.forEach(o=>{const n=s[o];n&&(r[o]=n)})}var oe=class extends Ue{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Et}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Me(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Pt=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},kt=class extends oe{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Mt=class extends oe{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:o}=this;return e.label=s,e.icon=r,e.shake=o,e}},Ft=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var s;this.expectingNewMethods===!1&&this.hasBeenActive&&((s=this.providedMethods)==null?void 0:s.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function Ve(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Bt=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Ve(this.floatingFilterParams,e)}},At=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Ve(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Gt=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},xt=class extends oe{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},It=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},Ot=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Dt=class extends oe{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Fe(){ge("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var Wt=1e3,Tt=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Wt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Nt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Z),o=s?e.getColId():void 0,[n,m]=t.useState(),i=t.useRef(),c=t.useRef(null),d=t.useRef(null),l=t.useRef(null),u=t.useRef(),R=t.useRef();s&&!R.current&&(R.current=new Re(()=>c.current));const E=t.useCallback(p=>{var v;if(c.current=p,i.current=p?r.createBean(new ue):r.destroyBean(i.current),!p||!s)return;const f={setWidth:h=>{c.current&&(c.current.style.width=h)},addOrRemoveCssClass:(h,S)=>R.current.addOrRemoveCssClass(h,S),setAriaSort:h=>{c.current&&(h?ct(c.current,h):lt(c.current))},setUserCompDetails:h=>m(h),getUserCompInstance:()=>u.current||void 0};e.setComp(f,p,d.current,l.current,i.current);const y=e.getSelectAllGui();(v=d.current)==null||v.insertAdjacentElement("afterend",y),i.current.addDestroyFunc(()=>y.remove())},[]);t.useLayoutEffect(()=>he(n,r,l.current,u),[n]),t.useEffect(()=>{e.setDragSource(c.current)},[n]);const w=t.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&de(n.componentClass)),[n]),C=n&&n.componentFromFramework,g=n&&n.componentClass;return a.createElement("div",{ref:E,className:"ag-header-cell","col-id":o,role:"columnheader"},a.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:l,className:"ag-header-cell-comp-wrapper",role:"presentation"},C&&w&&a.createElement(g,{...n.params}),C&&!w&&a.createElement(g,{...n.params,ref:u})))},Ht=t.memo(Nt),Ut=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Z),[o,n]=t.useState(()=>new te("ag-header-cell","ag-floating-filter")),[m,i]=t.useState(()=>new te),[c,d]=t.useState(()=>new te("ag-floating-filter-button","ag-hidden")),[l,u]=t.useState("false"),[R,E]=t.useState(),[,w]=t.useState(1),C=t.useRef(),g=t.useRef(null),p=t.useRef(null),f=t.useRef(null),y=t.useRef(null),v=t.useRef(),h=t.useRef(),S=k=>{k!=null&&v.current&&v.current(k)},D=t.useCallback(k=>{if(g.current=k,C.current=k?s.createBean(new ue):s.destroyBean(C.current),!k)return;h.current=new ae(I=>{v.current=I});const x={addOrRemoveCssClass:(I,H)=>n(_=>_.setClass(I,H)),addOrRemoveBodyCssClass:(I,H)=>i(_=>_.setClass(I,H)),setButtonWrapperDisplayed:I=>{d(H=>H.setClass("ag-hidden",!I)),u(I?"false":"true")},setWidth:I=>{g.current&&(g.current.style.width=I)},setCompDetails:I=>E(I),getFloatingFilterComp:()=>h.current?h.current:null,setMenuIcon:I=>{var H;return(H=y.current)==null?void 0:H.appendChild(I)}};e.setComp(x,k,y.current,p.current,C.current)},[]);t.useLayoutEffect(()=>he(R,s,p.current,S),[R]);const b=t.useMemo(()=>o.toString(),[o]),F=t.useMemo(()=>m.toString(),[m]),N=t.useMemo(()=>c.toString(),[c]),M=t.useMemo(()=>!!(R&&R.componentFromFramework&&de(R.componentClass)),[R]),P=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),A=t.useMemo(()=>{if(R)if(P){const k=new Bt(R.params,()=>w(x=>x+1));return S(k),k}else R.componentFromFramework&&Fe()},[R]),L=A==null?void 0:A.getProps(),W=R&&R.componentFromFramework,B=R&&R.componentClass;return a.createElement("div",{ref:D,className:b,role:"gridcell"},a.createElement("div",{ref:p,className:F,role:"presentation"},W&&!P&&a.createElement(B,{...R.params,ref:M?()=>{}:S}),W&&P&&a.createElement(ke.Provider,{value:{setMethods:k=>A.setMethods(k)}},a.createElement(B,{...L}))),a.createElement("div",{ref:f,"aria-hidden":l,className:N,role:"presentation"},a.createElement("button",{ref:y,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Vt=t.memo(Ut),Lt=({ctrl:e})=>{const{context:s}=t.useContext(Z),[r,o]=t.useState(()=>new te),[n,m]=t.useState(()=>new te),[i,c]=t.useState("false"),[d,l]=t.useState(),[u,R]=t.useState(),E=t.useMemo(()=>e.getColId(),[]),w=t.useRef(),C=t.useRef(null),g=t.useRef(null),p=t.useRef(null),f=t.useRef(),y=t.useCallback(F=>{if(C.current=F,w.current=F?s.createBean(new ue):s.destroyBean(w.current),!F)return;const N={setWidth:M=>{C.current&&(C.current.style.width=M)},addOrRemoveCssClass:(M,P)=>o(A=>A.setClass(M,P)),setHeaderWrapperHidden:M=>{const P=p.current;P&&(M?P.style.setProperty("display","none"):P.style.removeProperty("display"))},setHeaderWrapperMaxHeight:M=>{const P=p.current;P&&(M!=null?P.style.setProperty("max-height","".concat(M,"px")):P.style.removeProperty("max-height"),P.classList.toggle("ag-header-cell-comp-wrapper-limited-height",M!=null))},setUserCompDetails:M=>R(M),setResizableDisplayed:M=>{m(P=>P.setClass("ag-hidden",!M)),c(M?"false":"true")},setAriaExpanded:M=>l(M),getUserCompInstance:()=>f.current||void 0};e.setComp(N,F,g.current,p.current,w.current)},[]);t.useLayoutEffect(()=>he(u,s,p.current),[u]),t.useEffect(()=>{C.current&&e.setDragSource(C.current)},[u]);const v=t.useMemo(()=>!!((u==null?void 0:u.componentFromFramework)&&de(u.componentClass)),[u]),h=t.useMemo(()=>"ag-header-group-cell "+r.toString(),[r]),S=t.useMemo(()=>"ag-header-cell-resize "+n.toString(),[n]),D=u&&u.componentFromFramework,b=u&&u.componentClass;return a.createElement("div",{ref:y,className:h,"col-id":E,role:"columnheader","aria-expanded":d},a.createElement("div",{ref:p,className:"ag-header-cell-comp-wrapper",role:"presentation"},D&&v&&a.createElement(b,{...u.params}),D&&!v&&a.createElement(b,{...u.params,ref:f})),a.createElement("div",{ref:g,"aria-hidden":i,className:S}))},_t=t.memo(Lt),jt=({ctrl:e})=>{const{context:s}=t.useContext(Z),{topOffset:r,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),m=e.getHeaderRowClass(),[i,c]=t.useState(()=>o+"px"),[d,l]=t.useState(()=>r+"px"),u=t.useRef(null),R=t.useRef(null),[E,w]=t.useState(()=>e.getHeaderCtrls()),C=t.useRef(),g=t.useRef(null),p=t.useCallback(v=>{if(g.current=v,C.current=v?s.createBean(new ue):s.destroyBean(C.current),!v)return;const h={setHeight:S=>c(S),setTop:S=>l(S),setHeaderCtrls:(S,D,b)=>{R.current=u.current,u.current=S;const F=Pe(R.current,S,D);F!==R.current&&be(b,()=>w(F))},setWidth:S=>{g.current&&(g.current.style.width=S)}};e.setComp(h,C.current,!1)},[]),f=t.useMemo(()=>({height:i,top:d}),[i,d]),y=t.useCallback(v=>{switch(e.getType()){case Ae.COLUMN_GROUP:return a.createElement(_t,{ctrl:v,key:v.instanceId});case Ae.FLOATING_FILTER:return a.createElement(Vt,{ctrl:v,key:v.instanceId});default:return a.createElement(Ht,{ctrl:v,key:v.instanceId})}},[]);return a.createElement("div",{ref:p,className:m,role:"row",style:f,"aria-rowindex":n},E.map(y))},zt=t.memo(jt),$t=({pinned:e})=>{const[s,r]=t.useState(!0),[o,n]=t.useState([]),{context:m}=t.useContext(Z),i=t.useRef(null),c=t.useRef(null),d=t.useRef(),l=e==="left",u=e==="right",R=!l&&!u,E=t.useCallback(g=>{if(i.current=g,d.current=g?m.createBean(new qe(e)):m.destroyBean(d.current),!g)return;const p={setDisplayed:r,setCtrls:f=>n(f),setCenterWidth:f=>{c.current&&(c.current.style.width=f)},setViewportScrollLeft:f=>{i.current&&(i.current.scrollLeft=f)},setPinnedContainerWidth:f=>{i.current&&(i.current.style.width=f,i.current.style.minWidth=f,i.current.style.maxWidth=f)}};d.current.setComp(p,i.current)},[]),w=s?"":"ag-hidden",C=()=>o.map(g=>a.createElement(zt,{ctrl:g,key:g.instanceId}));return a.createElement(a.Fragment,null,l&&a.createElement("div",{ref:E,className:"ag-pinned-left-header "+w,"aria-hidden":!s,role:"rowgroup"},C()),u&&a.createElement("div",{ref:E,className:"ag-pinned-right-header "+w,"aria-hidden":!s,role:"rowgroup"},C()),R&&a.createElement("div",{ref:E,className:"ag-header-viewport "+w,role:"presentation"},a.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},C())))},Se=t.memo($t),Jt=()=>{const[e,s]=t.useState(()=>new te),[r,o]=t.useState(),{context:n}=t.useContext(Z),m=t.useRef(null),i=t.useRef(),c=t.useCallback(u=>{if(m.current=u,i.current=u?n.createBean(new Qe):n.destroyBean(i.current),!u)return;const R={addOrRemoveCssClass:(E,w)=>s(C=>C.setClass(E,w)),setHeightAndMinHeight:E=>o(E)};i.current.setComp(R,u,u)},[]),d=t.useMemo(()=>"ag-header "+e.toString(),[e]),l=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:c,className:d,style:l,role:"presentation"},a.createElement(Se,{pinned:"left"}),a.createElement(Se,{pinned:null}),a.createElement(Se,{pinned:"right"}))},Kt=t.memo(Jt),qt=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const o=r.parentElement;if(o){const n=document.createComment(e);return o.insertBefore(n,r),()=>{o.removeChild(n)}}}},[e])},le=qt,Qt=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Me(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var s;this.componentInstance=e,(s=this.resolveInstanceCreated)==null||s.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},Yt=e=>{const s=t.useRef(e),r=t.useRef(),o=t.useRef(!1),n=t.useRef(!1),[,m]=t.useState(0);o.current&&(n.current=!0),t.useEffect(()=>(o.current||(r.current=s.current(),o.current=!0),m(i=>i+1),()=>{var i;n.current&&((i=r.current)==null||i.call(r))}),[])},Zt=e=>{const[s,r]=t.useState(),{context:o,popupService:n,localeService:m,gos:i,editService:c}=t.useContext(Z);return Yt(()=>{var h,S;const{editDetails:d,cellCtrl:l,eParentCell:u}=e,{compDetails:R}=d,E=i.get("stopEditingWhenCellsLoseFocus"),w=o.createBean(c.createPopupEditorWrapper(R.params)),C=w.getGui();if(e.jsChildComp){const D=e.jsChildComp.getGui();D&&C.appendChild(D)}const g={column:l.getColumn(),rowNode:l.getRowNode(),type:"popupCellEditor",eventSource:u,ePopup:C,position:d.popupPosition,keepWithinBounds:!0},p=n.positionPopupByComponent.bind(n,g),f=m.getLocaleTextFunc(),y=n.addPopup({modal:E,eChild:C,closeOnEsc:!0,closedCallback:()=>{l.onPopupEditorClosed()},anchorToElement:u,positionCallback:p,ariaLabel:f("ariaLabelCellEditor","Cell Editor")}),v=y?y.hideFunc:void 0;return r(w),(S=(h=e.jsChildComp)==null?void 0:h.afterGuiAttached)==null||S.call(h),()=>{v==null||v(),o.destroyBean(w)}}),a.createElement(a.Fragment,null,s&&e.wrappedContent&&Te.createPortal(e.wrappedContent,s.getGui()))},Oe=t.memo(Zt),Xt=(e,s,r,o,n,m)=>{const{context:i}=t.useContext(Z),c=t.useCallback(()=>{const d=n.current;if(!d)return;const l=d.getGui();l&&l.parentElement&&l.parentElement.removeChild(l),i.destroyBean(d),n.current=void 0},[]);t.useEffect(()=>{const d=e!=null,l=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,u=s&&r==null;if(!(d&&l&&!u)){c();return}const E=e.compDetails;if(n.current){const C=n.current,p=C.refresh!=null&&e.force==!1?C.refresh(E.params):!1;if(p===!0||p===void 0)return;c()}const w=E.newAgStackInstance();w!=null&&w.then(C=>{if(!C)return;const g=C.getGui();if(!g)return;(s?r:m.current).appendChild(g),n.current=C})},[e,s,o]),t.useEffect(()=>c,[])},es=Xt,ts=(e,s,r)=>{const{compProxy:o}=e;r(o);const n=o.getProps(),m=de(s);return a.createElement(ke.Provider,{value:{setMethods:i=>o.setMethods(i)}},m?a.createElement(s,{...n}):a.createElement(s,{...n,ref:i=>o.setRef(i)}))},De=(e,s,r)=>{const o=e.compProxy;return a.createElement(a.Fragment,null,o?ts(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}))},ss=(e,s,r,o,n)=>{const m=e.compDetails,i=m.componentClass,c=m.componentFromFramework&&!e.popup,d=m.componentFromFramework&&e.popup,l=!m.componentFromFramework&&e.popup;return a.createElement(a.Fragment,null,c&&De(e,i,s),d&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,wrappedContent:De(e,i,s)}),l&&n&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,jsChildComp:n}))},rs=(e,s,r,o,n,m,i)=>{const{compDetails:c,value:d}=e,l=!c,u=c&&c.componentFromFramework,R=c&&c.componentClass,E=d!=null&&d.toString?d.toString():d,w=()=>a.createElement(a.Fragment,null,l&&a.createElement(a.Fragment,null,E),u&&!m&&a.createElement(R,{...c.params,key:s,ref:o}),u&&m&&a.createElement(R,{...c.params,key:s}));return a.createElement(a.Fragment,null,n?a.createElement("span",{role:"presentation",id:"cell-".concat(r),className:"ag-cell-value",ref:i},w()):w())},ns=({cellCtrl:e,printLayout:s,editingRow:r})=>{const{context:o}=t.useContext(Z),{colIdSanitised:n,instanceId:m}=e,i=t.useRef(),[c,d]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[l,u]=t.useState(),[R,E]=t.useState(1),[w,C]=t.useState(),[g,p]=t.useState(!1),[f,y]=t.useState(!1),[v,h]=t.useState(!1),[S,D]=t.useState(),b=t.useMemo(()=>e.isForceWrapper(),[e]),F=t.useMemo(()=>e.getCellAriaRole(),[e]),N=t.useRef(null),M=t.useRef(null),P=t.useRef(),A=t.useRef(),L=t.useRef(),W=t.useRef([]),B=t.useRef(),[k,x]=t.useState(0),I=t.useCallback(U=>{B.current=U,x(q=>q+1)},[]),H=c!=null&&(g||v||f),_=b||H,V=t.useCallback(U=>{if(A.current=U,U){const q=U.isCancelBeforeStart&&U.isCancelBeforeStart();setTimeout(()=>{q?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),T=t.useRef();T.current||(T.current=new Re(()=>N.current)),es(c,_,B.current,k,P,N);const X=t.useRef();t.useLayoutEffect(()=>{var Y;const U=X.current,q=c;if(X.current=c,U==null||U.compDetails==null||q==null||q.compDetails==null)return;const Q=U.compDetails,O=q.compDetails;if(Q.componentClass!=O.componentClass||((Y=M.current)==null?void 0:Y.refresh)==null)return;M.current.refresh(O.params)!=!0&&E(J=>J+1)},[c]),t.useLayoutEffect(()=>{if(!(l&&!l.compDetails.componentFromFramework))return;const q=l.compDetails,Q=l.popup===!0,O=q.newAgStackInstance();return O.then($=>{if(!$)return;const Y=$.getGui();if(V($),!Q){const J=(b?L:N).current;J==null||J.appendChild(Y),$.afterGuiAttached&&$.afterGuiAttached()}D($)}),()=>{O.then($=>{var J;const Y=$.getGui();o.destroyBean($),V(void 0),D(void 0),(J=Y==null?void 0:Y.parentElement)==null||J.removeChild(Y)})}},[l]);const G=t.useCallback(U=>{if(L.current=U,!U){W.current.forEach(Q=>Q()),W.current=[];return}const q=Q=>{if(Q){const O=Q.getGui();U.insertAdjacentElement("afterbegin",O),W.current.push(()=>{o.destroyBean(Q),it(O)})}return Q};if(g){const Q=e.createSelectionCheckbox();q(Q)}v&&q(e.createDndSource()),f&&q(e.createRowDragComp())},[e,o,v,f,g]),j=t.useCallback(U=>{if(N.current=U,i.current=U?o.createBean(new ue):o.destroyBean(i.current),!U||!e)return;const q={addOrRemoveCssClass:(O,$)=>T.current.addOrRemoveCssClass(O,$),setUserStyles:O=>C(O),getFocusableElement:()=>N.current,setIncludeSelection:O=>p(O),setIncludeRowDrag:O=>y(O),setIncludeDndSource:O=>h(O),getCellEditor:()=>A.current||null,getCellRenderer:()=>{var O;return(O=M.current)!=null?O:P.current},getParentOfValue:()=>{var O,$;return($=(O=B.current)!=null?O:L.current)!=null?$:N.current},setRenderDetails:(O,$,Y)=>{d(J=>(J==null?void 0:J.compDetails)!==O||(J==null?void 0:J.value)!==$||(J==null?void 0:J.force)!==Y?{value:$,compDetails:O,force:Y}:J)},setEditDetails:(O,$,Y,J)=>{if(O){let ce;J?ce=new Qt(O.params,()=>E(ye=>ye+1)):O.componentFromFramework&&Fe(),u({compDetails:O,popup:$,popupPosition:Y,compProxy:ce}),$||d(void 0)}else u(ce=>{ce!=null&&ce.compProxy&&(A.current=void 0)})}},Q=L.current||void 0;e.setComp(q,U,Q,s,r,i.current)},[]),z=t.useMemo(()=>{var q;return!!(((q=c==null?void 0:c.compDetails)==null?void 0:q.componentFromFramework)&&de(c.compDetails.componentClass))},[c]);t.useLayoutEffect(()=>{var U;N.current&&(T.current.addOrRemoveCssClass("ag-cell-value",!_),T.current.addOrRemoveCssClass("ag-cell-inline-editing",!!l&&!l.popup),T.current.addOrRemoveCssClass("ag-cell-popup-editing",!!l&&!!l.popup),T.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!l||!!l.popup),(U=e.getRowCtrl())==null||U.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.isEditing()&&N.current.focus({preventScroll:!0}))});const re=()=>a.createElement(a.Fragment,null,c!=null&&rs(c,R,m,M,_,z,I),l!=null&&ss(l,V,N.current,e,S)),ie=t.useCallback(()=>e.onFocusOut(),[]);return a.createElement("div",{ref:j,style:w,role:F,"col-id":n,onBlur:ie},_?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:G},re()):re())},os=t.memo(ns),as=({rowCtrl:e,containerType:s})=>{const{context:r,gos:o}=t.useContext(Z),n=t.useRef(),m=t.useRef(e.getDomOrder()),i=e.isFullWidth(),c=e.getRowNode().displayed,[d,l]=t.useState(()=>c?e.getRowIndex():null),[u,R]=t.useState(()=>e.getRowId()),[E,w]=t.useState(()=>e.getBusinessKey()),[C,g]=t.useState(()=>e.getRowStyles()),p=t.useRef(null),f=t.useRef(null),[y,v]=t.useState(()=>null),[h,S]=t.useState(),[D,b]=t.useState(()=>c?e.getInitialRowTop(s):void 0),[F,N]=t.useState(()=>c?e.getInitialTransform(s):void 0),M=t.useRef(null),P=t.useRef(),A=t.useRef(!1),[L,W]=t.useState(0);t.useEffect(()=>{var j;if(A.current||!h||L>10)return;const G=(j=M.current)==null?void 0:j.firstChild;G?(e.setupDetailRowAutoHeight(G),A.current=!0):W(z=>z+1)},[h,L]);const B=t.useRef();B.current||(B.current=new Re(()=>M.current));const k=t.useCallback(G=>{if(M.current=G,n.current=G?r.createBean(new ue):r.destroyBean(n.current),!G){e.unsetComp(s);return}if(!e.isAlive())return;const j={setTop:b,setTransform:N,addOrRemoveCssClass:(z,re)=>B.current.addOrRemoveCssClass(z,re),setDomOrder:z=>m.current=z,setRowIndex:l,setRowId:R,setRowBusinessKey:w,setUserStyles:g,setCellCtrls:(z,re)=>{f.current=p.current,p.current=z;const ie=Pe(f.current,z,m.current);ie!==f.current&&be(re,()=>v(ie))},showFullWidth:z=>S(z),getFullWidthCellRenderer:()=>P.current,refreshFullWidth:z=>V.current?(S(re=>({...re,params:z()})),!0):!P.current||!P.current.refresh?!1:P.current.refresh(z())};e.setComp(j,G,s,n.current)},[]);t.useLayoutEffect(()=>he(h,r,M.current,P),[h]);const x=t.useMemo(()=>{const G={top:D,transform:F};return Object.assign(G,C),G},[D,F,C]),I=i&&(h==null?void 0:h.componentFromFramework),H=!i&&y!=null,_=t.useMemo(()=>!!((h==null?void 0:h.componentFromFramework)&&de(h.componentClass)),[h]),V=t.useRef(!1);t.useEffect(()=>{V.current=_&&!!h&&!!o.get("reactiveCustomComponents")},[_,h]);const T=()=>y==null?void 0:y.map(G=>a.createElement(os,{cellCtrl:G,editingRow:e.isEditing(),printLayout:e.isPrintLayout(),key:G.instanceId})),X=()=>{const G=h.componentClass;return a.createElement(a.Fragment,null,_?a.createElement(G,{...h.params}):a.createElement(G,{...h.params,ref:P}))};return a.createElement("div",{ref:k,role:"row",style:x,"row-index":d,"row-id":u,"row-business-key":E},H&&T(),I&&X())},cs=t.memo(as),ls=({name:e})=>{const{context:s}=t.useContext(Z),r=t.useMemo(()=>Ye(e),[e]),o=t.useRef(null),n=t.useRef(null),m=t.useRef([]),i=t.useRef([]),[c,d]=t.useState(()=>[]),l=t.useRef(!1),u=t.useRef(),R=t.useMemo(()=>se(r.viewport),[r]),E=t.useMemo(()=>se(r.container),[r]),w=r.type==="center",C=w?o:n;le(" AG Row Container "+e+" ",C);const g=t.useCallback(()=>w?o.current!=null&&n.current!=null:n.current!=null,[]),p=t.useCallback(()=>w?o.current==null&&n.current==null:n.current==null,[]),f=t.useCallback(()=>{if(p()&&(u.current=s.destroyBean(u.current)),g()){const S=b=>{const F=Pe(i.current,m.current,l.current);F!==i.current&&(i.current=F,be(b,()=>d(F)))},D={setHorizontalScroll:b=>{o.current&&(o.current.scrollLeft=b)},setViewportHeight:b=>{o.current&&(o.current.style.height=b)},setRowCtrls:({rowCtrls:b,useFlushSync:F})=>{const N=!!F&&m.current.length>0&&b.length>0;m.current=b,S(N)},setDomOrder:b=>{l.current!=b&&(l.current=b,S(!1))},setContainerWidth:b=>{n.current&&(n.current.style.width=b)},setOffsetTop:b=>{n.current&&(n.current.style.transform="translateY(".concat(b,")"))}};u.current=s.createBean(new Ze(e)),u.current.setComp(D,n.current,o.current)}},[g,p]),y=t.useCallback(S=>{n.current=S,f()},[f]),v=t.useCallback(S=>{o.current=S,f()},[f]),h=()=>a.createElement("div",{className:E,ref:y,role:"rowgroup"},c.map(S=>a.createElement(cs,{rowCtrl:S,containerType:r.type,key:S.instanceId})));return a.createElement(a.Fragment,null,w?a.createElement("div",{className:R,ref:v,role:"presentation"},h()):h())},is=t.memo(ls),us=()=>{const{context:e,resizeObserverService:s}=t.useContext(Z),[r,o]=t.useState(""),[n,m]=t.useState(0),[i,c]=t.useState(0),[d,l]=t.useState("0px"),[u,R]=t.useState("0px"),[E,w]=t.useState("100%"),[C,g]=t.useState("0px"),[p,f]=t.useState("0px"),[y,v]=t.useState("100%"),[h,S]=t.useState(""),[D,b]=t.useState(""),[F,N]=t.useState(null),[M,P]=t.useState(""),[A,L]=t.useState(null),[W,B]=t.useState("ag-layout-normal"),k=t.useRef();k.current||(k.current=new Re(()=>x.current));const x=t.useRef(null),I=t.useRef(null),H=t.useRef(null),_=t.useRef(null),V=t.useRef(null),T=t.useRef(null),X=t.useRef(null),G=t.useRef([]),j=t.useRef([]);le(" AG Grid Body ",x),le(" AG Pinned Top ",I),le(" AG Sticky Top ",H),le(" AG Middle ",T),le(" AG Pinned Bottom ",X);const z=t.useCallback(ne=>{if(x.current=ne,!ne){G.current=e.destroyBeans(G.current),j.current.forEach(K=>K()),j.current=[];return}if(!e)return;const fe=(K,ee)=>{K.appendChild(ee),j.current.push(()=>K.removeChild(ee))},ve=K=>{const ee=e.createBean(new K);return G.current.push(ee),ee},me=(K,ee,ze)=>{fe(K,document.createComment(ze)),fe(K,ve(ee).getGui())};me(ne,ut," AG Fake Horizontal Scroll "),me(ne,dt," AG Overlay Wrapper "),V.current&&me(V.current,pt," AG Fake Vertical Scroll ");const je={setRowAnimationCssOnBodyViewport:o,setColumnCount:K=>{x.current&&mt(x.current,K)},setRowCount:K=>{x.current&&ht(x.current,K)},setTopHeight:m,setBottomHeight:c,setStickyTopHeight:l,setStickyTopTop:R,setStickyTopWidth:w,setTopDisplay:S,setBottomDisplay:b,setColumnMovingCss:(K,ee)=>k.current.addOrRemoveCssClass(K,ee),updateLayoutClasses:B,setAlwaysVerticalScrollClass:N,setPinnedTopBottomOverflowY:P,setCellSelectableCss:(K,ee)=>L(ee?K:null),setBodyViewportWidth:K=>{T.current&&(T.current.style.width=K)},registerBodyViewportResizeListener:K=>{if(T.current){const ee=s.observeResize(T.current,K);j.current.push(()=>ee())}},setStickyBottomHeight:g,setStickyBottomBottom:f,setStickyBottomWidth:v},Be=e.createBean(new Xe);G.current.push(Be),Be.setComp(je,ne,T.current,I.current,X.current,H.current,_.current)},[]),re=t.useMemo(()=>se("ag-root","ag-unselectable",W),[W]),ie=t.useMemo(()=>se("ag-body-viewport",r,W,F,A),[r,W,F,A]),U=t.useMemo(()=>se("ag-body",W),[W]),q=t.useMemo(()=>se("ag-floating-top",A),[A]),Q=t.useMemo(()=>se("ag-sticky-top",A),[A]),O=t.useMemo(()=>se("ag-sticky-bottom",C==="0px"?"ag-hidden":null,A),[A,C]),$=t.useMemo(()=>se("ag-floating-bottom",A),[A]),Y=t.useMemo(()=>({height:n,minHeight:n,display:h,overflowY:M}),[n,h,M]),J=t.useMemo(()=>({height:d,top:u,width:E}),[d,u,E]),ce=t.useMemo(()=>({height:C,bottom:p,width:y}),[C,p,y]),ye=t.useMemo(()=>({height:i,minHeight:i,display:D,overflowY:M}),[i,D,M]),_e=ne=>a.createElement(is,{name:ne,key:"".concat(ne,"-container")}),pe=({section:ne,children:fe,className:ve,style:me})=>a.createElement("div",{ref:ne,className:ve,role:"presentation",style:me},fe.map(_e));return a.createElement("div",{ref:z,className:re,role:"treegrid"},a.createElement(Kt,null),pe({section:I,className:q,style:Y,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:U,ref:V,role:"presentation"},pe({section:T,className:ie,children:["left","center","right","fullWidth"]})),pe({section:H,className:Q,style:J,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),pe({section:_,className:O,style:ce,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),pe({section:X,className:$,style:ye,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},ds=t.memo(us),ps=(e,s)=>{const{children:r,eFocusableElement:o,onTabKeyDown:n,gridCtrl:m,forceFocusOutWhenTabGuardsAreEmpty:i}=e,{context:c}=t.useContext(Z),d=t.useRef(null),l=t.useRef(null),u=t.useRef(),R=p=>{const f=p==null?void 0:parseInt(p,10).toString();[d,l].forEach(y=>{var v,h;f===void 0?(v=y.current)==null||v.removeAttribute("tabindex"):(h=y.current)==null||h.setAttribute("tabindex",f)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(p){var f;(f=u.current)==null||f.forceFocusOutOfContainer(p)}}));const E=t.useCallback(()=>{const p=d.current,f=l.current;if(!p&&!f){u.current=c.destroyBean(u.current);return}if(p&&f){const y={setTabIndex:R};u.current=c.createBean(new et({comp:y,eTopGuard:p,eBottomGuard:f,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:i,focusInnerElement:v=>m.focusInnerElement(v)}))}},[]),w=t.useCallback(p=>{d.current=p,E()},[E]),C=t.useCallback(p=>{l.current=p,E()},[E]),g=p=>{const f=p==="top"?we.TAB_GUARD_TOP:we.TAB_GUARD_BOTTOM;return a.createElement("div",{className:"".concat(we.TAB_GUARD," ").concat(f),role:"presentation",ref:p==="top"?w:C})};return a.createElement(a.Fragment,null,g("top"),r,g("bottom"))},ms=t.forwardRef(ps),hs=t.memo(ms),fs=({context:e})=>{const[s,r]=t.useState(""),[o,n]=t.useState(""),[m,i]=t.useState(""),[c,d]=t.useState(null),[l,u]=t.useState(null),[R,E]=t.useState(!1),[w,C]=t.useState(),g=t.useRef(),p=t.useRef(null),f=t.useRef(),[y,v]=t.useState(null),h=t.useRef(()=>{}),S=t.useRef(),D=t.useRef([]),b=t.useCallback(()=>{},[]),F=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);le(" AG Grid ",p);const N=t.useCallback(W=>{if(p.current=W,g.current=W?e.createBean(new tt):e.destroyBean(g.current),!W||e.isDestroyed())return;const B=g.current;h.current=B.focusInnerElement.bind(B);const k={destroyGridUi:()=>{},setRtlClass:r,setGridThemeClass:n,forceFocusOutOfContainer:x=>{var I,H;if(!x&&((I=S.current)!=null&&I.isDisplayed())){S.current.forceFocusOutOfContainer(x);return}(H=f.current)==null||H.forceFocusOutOfContainer(x)},updateLayoutClasses:i,getFocusableContainers:()=>{var H;const x=[],I=(H=p.current)==null?void 0:H.querySelector(".ag-root");return I&&x.push({getGui:()=>I}),D.current.forEach(_=>{_.isDisplayed()&&x.push(_)}),x},setCursor:d,setUserSelect:u};B.setComp(k,W,W),E(!0)},[]);t.useEffect(()=>{const W=g.current,B=p.current;if(!w||!F||!W||!y||!B)return;const k=[],{watermarkSelector:x,paginationSelector:I,sideBarSelector:H,statusBarSelector:_,gridHeaderDropZonesSelector:V}=W.getOptionalSelectors(),T=[];if(V){const G=e.createBean(new V.component),j=G.getGui();B.insertAdjacentElement("afterbegin",j),T.push(j),k.push(G)}if(H){const G=e.createBean(new H.component),j=G.getGui(),z=y.querySelector(".ag-tab-guard-bottom");z&&(z.insertAdjacentElement("beforebegin",j),T.push(j)),k.push(G),D.current.push(G)}const X=G=>{const j=e.createBean(new G),z=j.getGui();return B.insertAdjacentElement("beforeend",z),T.push(z),k.push(j),j};if(_&&X(_.component),I){const G=X(I.component);S.current=G,D.current.push(G)}return x&&X(x.component),()=>{e.destroyBeans(k),T.forEach(G=>{var j;(j=G.parentElement)==null||j.removeChild(G)})}},[w,y,F]);const M=t.useMemo(()=>se("ag-root-wrapper",s,o,m),[s,o,m]),P=t.useMemo(()=>se("ag-root-wrapper-body","ag-focus-managed",m),[m]),A=t.useMemo(()=>({userSelect:l!=null?l:"",WebkitUserSelect:l!=null?l:"",cursor:c!=null?c:""}),[l,c]),L=t.useCallback(W=>{f.current=W,C(W!==null)},[]);return a.createElement("div",{ref:N,className:M,style:A,role:"presentation"},a.createElement("div",{className:P,ref:v,role:"presentation"},R&&y&&F&&a.createElement(Z.Provider,{value:F},a.createElement(hs,{ref:L,eFocusableElement:y,onTabKeyDown:b,gridCtrl:g.current,forceFocusOutWhenTabGuardsAreEmpty:!0},a.createElement(ds,null)))))},Cs=t.memo(fs),gs=class extends Rt{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},Le=e=>{var p,f;const s=t.useRef(),r=t.useRef(null),o=t.useRef(null),n=t.useRef([]),m=t.useRef([]),i=t.useRef(e),c=t.useRef(),d=t.useRef(),l=t.useRef(!1),[u,R]=t.useState(void 0),[,E]=t.useState(0),w=t.useCallback(y=>{var A,L,W;if(r.current=y,!y){n.current.forEach(B=>B()),n.current.length=0;return}const v=e.modules||[];o.current||(o.current=new Tt(()=>E(B=>B+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var B;(B=o.current)==null||B.destroy(),o.current=null}));const h=st(e.gridOptions,e),S=()=>{if(l.current){const B=()=>{var x;return(x=c.current)!=null&&x.shouldQueueUpdates()?void 0:m.current.shift()};let k=B();for(;k;)k(),k=B()}},D=new ws(S);c.current=D;const b=new gs,F={providedBeanInstances:{frameworkComponentWrapper:new ys(o.current,(L=(A=h.reactiveCustomComponents)!=null?A:rt("reactiveCustomComponents"))!=null?L:!0),renderStatusService:b},modules:v,frameworkOverrides:D},N=B=>{R(B),B.createBean(b),n.current.push(()=>{B.destroy()}),B.getBean("ctrlsService").whenReady({addDestroyFunc:k=>{n.current.push(k)}},()=>{var x;if(B.isDestroyed())return;const k=s.current;k&&((x=e.setGridApi)==null||x.call(e,k))})},M=B=>{B.getBean("ctrlsService").whenReady({addDestroyFunc:k=>{n.current.push(k)}},()=>{m.current.forEach(k=>k()),m.current.length=0,l.current=!0})},P=new ft;(W=h.gridId)!=null||(h.gridId=d.current),s.current=P.create(y,h,N,M,F),n.current.push(()=>{s.current=void 0}),s.current&&(d.current=s.current.getGridId())},[]),C=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),g=t.useCallback(y=>{var v;l.current&&!((v=c.current)!=null&&v.shouldQueueUpdates())?y():m.current.push(y)},[]);return t.useEffect(()=>{const y=Rs(i.current,e);i.current=e,g(()=>{s.current&&nt(y,s.current)})},[e]),a.createElement("div",{style:C,className:e.className,ref:w},u&&!u.isDestroyed()?a.createElement(Cs,{context:u}):null,(f=(p=o.current)==null?void 0:p.getPortals())!=null?f:null)};function Rs(e,s){const r={};return Object.keys(s).forEach(o=>{const n=s[o];e[o]!==n&&(r[o]=n)}),r}var ys=class extends ot{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const n=(m=>{switch(m){case"filter":return Ft;case"floatingFilterComponent":return At;case"dateComponent":return kt;case"dragAndDropImageComponent":return Mt;case"loadingOverlayComponent":return Gt;case"noRowsOverlayComponent":return It;case"statusPanel":return Ot;case"toolPanel":return Dt;case"menuItem":return xt;case"cellRenderer":return Pt}})(s.propertyName);if(n)return new n(e,this.parent,s)}else switch(s.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Fe();break}const r=!s.cellRenderer&&s.propertyName!=="toolPanel";return new Ue(e,this.parent,s,r)}},vs=t.forwardRef((e,s)=>{const{ctrlsFactory:r,context:o,gos:n,resizeObserverService:m,rowModel:i}=t.useContext(Z),[c,d]=t.useState(()=>new te),[l,u]=t.useState(()=>new te),[R,E]=t.useState(),[w,C]=t.useState(),g=t.useRef(),p=t.useRef(null),f=t.useRef(),y=t.useMemo(()=>Ke.__getGridRegisteredModules(e.api.getGridId()),[e]),v=t.useMemo(()=>c.toString()+" ag-details-row",[c]),h=t.useMemo(()=>l.toString()+" ag-details-grid",[l]);s&&t.useImperativeHandle(s,()=>({refresh(){var b,F;return(F=(b=g.current)==null?void 0:b.refresh())!=null?F:!1}})),e.template&&ge("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const S=t.useCallback(b=>{var M;if(p.current=b,!b){g.current=o.destroyBean(g.current),(M=f.current)==null||M.call(f);return}const F={addOrRemoveCssClass:(P,A)=>d(L=>L.setClass(P,A)),addOrRemoveDetailGridCssClass:(P,A)=>u(L=>L.setClass(P,A)),setDetailGrid:P=>E(P),setRowData:P=>C(P),getGui:()=>p.current},N=r.getInstance("detailCellRenderer");if(N&&(o.createBean(N),N.init(F,e),g.current=N,n.get("detailRowAutoHeight"))){const P=()=>{if(p.current==null)return;const A=p.current.clientHeight;A!=null&&A>0&&setTimeout(()=>{e.node.setRowHeight(A),(Ct(n)||gt(n))&&i.onRowHeightChanged()},0)};f.current=m.observeResize(b,P),P()}},[]),D=t.useCallback(b=>{var F;(F=g.current)==null||F.registerDetailWithMaster(b)},[]);return a.createElement("div",{className:v,ref:S},R&&a.createElement(Le,{className:h,...R,modules:y,rowData:w,setGridApi:D}))}),ws=class extends at{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:xe,agGroupRowRenderer:xe,agDetailCellRenderer:vs},this.wrapIncoming=(s,r)=>r==="ensureVisible"?wt(s):s(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return vt()}},bs=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(Le,{...this.props,setGridApi:this.setGridApi})}};export{bs as A};
