{"version":3,"file":"rmg-theme-provider.stories-7a175980.js","sources":["../../node_modules/@chakra-ui/media-query/dist/chunk-57I6FYPZ.mjs","../../src/hook/useRmgColourMode.ts"],"sourcesContent":["'use client'\n\n// src/use-media-query.ts\nimport { useEnvironment } from \"@chakra-ui/react-env\";\nimport { useEffect, useState } from \"react\";\nfunction useMediaQuery(query, options = {}) {\n  const { ssr = true, fallback } = options;\n  const { getWindow } = useEnvironment();\n  const queries = Array.isArray(query) ? query : [query];\n  let fallbackValues = Array.isArray(fallback) ? fallback : [fallback];\n  fallbackValues = fallbackValues.filter((v) => v != null);\n  const [value, setValue] = useState(() => {\n    return queries.map((query2, index) => ({\n      media: query2,\n      matches: ssr ? !!fallbackValues[index] : getWindow().matchMedia(query2).matches\n    }));\n  });\n  useEffect(() => {\n    const win = getWindow();\n    setValue(\n      queries.map((query2) => ({\n        media: query2,\n        matches: win.matchMedia(query2).matches\n      }))\n    );\n    const mql = queries.map((query2) => win.matchMedia(query2));\n    const handler = (evt) => {\n      setValue((prev) => {\n        return prev.slice().map((item) => {\n          if (item.media === evt.media)\n            return { ...item, matches: evt.matches };\n          return item;\n        });\n      });\n    };\n    mql.forEach((mql2) => {\n      if (typeof mql2.addListener === \"function\") {\n        mql2.addListener(handler);\n      } else {\n        mql2.addEventListener(\"change\", handler);\n      }\n    });\n    return () => {\n      mql.forEach((mql2) => {\n        if (typeof mql2.removeListener === \"function\") {\n          mql2.removeListener(handler);\n        } else {\n          mql2.removeEventListener(\"change\", handler);\n        }\n      });\n    };\n  }, [getWindow]);\n  return value.map((item) => item.matches);\n}\n\nexport {\n  useMediaQuery\n};\n//# sourceMappingURL=chunk-57I6FYPZ.mjs.map","import { ColorMode, useColorMode, useMediaQuery } from '@chakra-ui/react';\nimport { useCallback } from 'react';\nimport rmgRuntime from '@railmapgen/rmg-runtime';\n\nexport const useRmgColourMode = () => {\n    const { colorMode, setColorMode } = useColorMode();\n    const [isSystemDark] = useMediaQuery('(prefers-color-scheme: dark)');\n\n    const setColourMode = useCallback(\n        (mode: ColorMode | 'system') => {\n            // broadcast to peer apps on colour mode change\n            rmgRuntime.setColourMode(mode);\n\n            if (mode === 'system') {\n                setColorMode(isSystemDark ? 'dark' : 'light');\n            } else {\n                setColorMode(mode);\n            }\n        },\n        [colorMode, setColorMode, isSystemDark]\n    );\n\n    return { colourMode: colorMode, setColourMode };\n};\n"],"names":["useMediaQuery","query","options","ssr","fallback","getWindow","useEnvironment","queries","fallbackValues","v","value","setValue","useState","query2","index","useEffect","win","mql","handler","evt","prev","item","mql2","useRmgColourMode","colorMode","setColorMode","useColorMode","isSystemDark","setColourMode","useCallback","mode","rmgRuntime"],"mappings":"g0BAKA,SAASA,EAAcC,EAAOC,EAAU,GAAI,CAC1C,KAAM,CAAE,IAAAC,EAAM,GAAM,SAAAC,CAAQ,EAAKF,EAC3B,CAAE,UAAAG,GAAcC,IAChBC,EAAU,MAAM,QAAQN,CAAK,EAAIA,EAAQ,CAACA,CAAK,EACrD,IAAIO,EAAiB,MAAM,QAAQJ,CAAQ,EAAIA,EAAW,CAACA,CAAQ,EACnEI,EAAiBA,EAAe,OAAQC,GAAMA,GAAK,IAAI,EACvD,KAAM,CAACC,EAAOC,CAAQ,EAAIC,EAAQ,SAAC,IAC1BL,EAAQ,IAAI,CAACM,EAAQC,KAAW,CACrC,MAAOD,EACP,QAASV,EAAM,CAAC,CAACK,EAAeM,CAAK,EAAIT,IAAY,WAAWQ,CAAM,EAAE,OACzE,EAAC,CACH,EACDE,OAAAA,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAMX,IACZM,EACEJ,EAAQ,IAAKM,IAAY,CACvB,MAAOA,EACP,QAASG,EAAI,WAAWH,CAAM,EAAE,OACxC,EAAQ,CACR,EACI,MAAMI,EAAMV,EAAQ,IAAKM,GAAWG,EAAI,WAAWH,CAAM,CAAC,EACpDK,EAAWC,GAAQ,CACvBR,EAAUS,GACDA,EAAK,MAAK,EAAG,IAAKC,GACnBA,EAAK,QAAUF,EAAI,MACd,CAAE,GAAGE,EAAM,QAASF,EAAI,OAAO,EACjCE,CACR,CACF,CACP,EACI,OAAAJ,EAAI,QAASK,GAAS,CAChB,OAAOA,EAAK,aAAgB,WAC9BA,EAAK,YAAYJ,CAAO,EAExBI,EAAK,iBAAiB,SAAUJ,CAAO,CAE/C,CAAK,EACM,IAAM,CACXD,EAAI,QAASK,GAAS,CAChB,OAAOA,EAAK,gBAAmB,WACjCA,EAAK,eAAeJ,CAAO,EAE3BI,EAAK,oBAAoB,SAAUJ,CAAO,CAEpD,CAAO,CACP,CACA,EAAK,CAACb,CAAS,CAAC,EACPK,EAAM,IAAKW,GAASA,EAAK,OAAO,CACzC,CCjDO,MAAME,EAAmB,IAAM,CAClC,KAAM,CAAE,UAAAC,EAAW,aAAAC,CAAa,EAAIC,EAAa,EAC3C,CAACC,CAAY,EAAI3B,EAAc,8BAA8B,EAE7D4B,EAAgBC,EAAA,YACjBC,GAA+B,CAE5BC,EAAW,cAAcD,CAAI,EAGZL,EADbK,IAAS,SACIH,EAAe,OAAS,QAExBG,CAF+B,CAIpD,EACA,CAACN,EAAWC,EAAcE,CAAY,CAAA,EAGnC,MAAA,CAAE,WAAYH,EAAW,cAAAI,EACpC;;;;","x_google_ignoreList":[0]}