System.register(["./chakra-legacy-Di7w1ZhB.js","./index-legacy-CCR6yT8f.js","./react-legacy-wexXEtdT.js","./app-router-legacy-ilk_ckFL.js","./ag-grid-react-legacy-D8O6kZY8.js","./ag-grid-community-legacy-CFNcmYm4.js","./param-selector-legacy-C3ApLQi1.js"],(function(e,a){"use strict";var n,l,r,t,s,i,o,d,c,u,g,h,m,p,f,x,S,b,j,R,y,N,w;return{setters:[e=>{n=e.ag,l=e.u,r=e.j,t=e.B,s=e.h,i=e.ao},e=>{o=e.d,d=e.u,c=e.e,u=e.aV,g=e.h,h=e.ab,m=e.aa,p=e.ac,f=e.aW},e=>{x=e.u,S=e.a},e=>{b=e.g,j=e.R},e=>{R=e.A},e=>{y=e.M,N=e.v,w=e.w},null],execute:function(){e("default",(function(e){const{branchIndex:n}=e,{t:l,i18n:t}=x(),s=o(),y=d((e=>e.app.sidePanelMode)),{style:N,theme:w,stn_list:C,line_num:M,coline:A}=d((e=>e.param)),G=d((e=>e.helper.branches)),[T,k]=S.useState([]);S.useEffect((()=>{const e=G[n].reduce(((e,a)=>["linestart","lineend"].includes(a)?e:[...e,{...C[a],id:a,rowSpan:s(b(a,n))}]),[]);k(e)}),[G,n,C]);const I=S.useMemo((()=>[{headerName:l("StationAgGrid.num"),field:"num",cellRenderer:({value:e})=>r.jsx(v,{lineNumber:M,stationNumber:e,lineColour:w[2]}),pinned:"left",minWidth:110,hide:![c.GZMTR].includes(N)},{headerName:l("Chinese name"),field:"localisedName",valueFormatter:({value:e,data:a})=>e.zh+(N===c.GZMTR&&a?.localisedSecondaryName?.zh?` (${a.localisedSecondaryName.zh})`:"")},{headerName:l("English name"),field:"localisedName",cellRenderer:({value:e,data:a})=>r.jsx(j,{text:e.en+(N===c.GZMTR&&a.localisedSecondaryName?.en?` (${a.localisedSecondaryName.en})`:"")}),minWidth:300},{headerName:l("StationAgGrid.interchange"),field:"transfer",cellRenderer:({value:e})=>r.jsx(i,{children:e.groups.map((e=>e.lines??[])).flat().map(((e,a)=>r.jsx(u,{name:e.name,bg:e.theme?.[2]??"#aaaaaa",fg:e.theme?.[3]??g.white,showShortName:!0},a)))})},{headerName:l("StationAgGrid.coline"),field:"rowSpan",rowSpan:({data:e})=>e?.rowSpan[0]??0,cellClassRules:{"rmg-ag-grid--spanned-cell":({value:e})=>e[0]>0},cellRenderer:({value:e})=>r.jsx(i,{children:A[e[1]]?.colors?.map(((e,a)=>r.jsx(u,{name:[e[4],e[5]],bg:e[2],fg:e[3],showShortName:!0},a)))}),hide:![c.SHMetro].includes(N)}]),[N,w.toString(),t.language,M]),z=S.useRef(null),W=S.useRef(!1);S.useEffect((()=>{W.current&&z.current&&1===z.current.api.getSelectedRows().length&&y!==h.STATION&&z.current.api.deselectAll()}),[W.current,y]);const[D]=S.useState({resizable:!0}),E=S.useCallback((()=>{W.current=!0}),[W.current]),H=S.useCallback((({api:e})=>{const a=e.getSelectedRows()?.map((e=>e.id));console.log("StationAgGrid.handleSelectionChanged():: Row selection changed",a),a?.length&&(s(m(h.STATION)),s(p(a[0])),s(f(void 0)))}),[]),Z=S.useCallback((({data:e})=>e.id),[]);return r.jsx(a,{children:r.jsx(R,{ref:z,rowData:T,defaultColDef:D,columnDefs:I,getRowId:Z,headerHeight:36,rowHeight:36,suppressCellFocus:!0,suppressMovableColumns:!0,suppressRowTransform:!0,rowSelection:"single",onSelectionChanged:H,onGridReady:E,debug:!1})})}));var a=function(e){var a=e.children,s=n().colorMode,i=l("RmgAgGrid");return r.jsx(t,{className:"light"===s?"ag-theme-alpine":"ag-theme-alpine-dark",sx:i,children:a})};function v(e){const{lineNumber:a,stationNumber:n,lineColour:l}=e,t={h:"24px",position:"relative",color:"black","&::before":{content:"''",w:"calc(100% + 2px)",h:"26px",position:"absolute",top:"-1px",left:"-1px",bg:"white",borderRadius:"13px"},span:{display:"flex",justifyContent:"center",alignItems:"center",padding:"3px",minWidth:"24px",border:"2px solid",borderColor:l,zIndex:1,"&:first-of-type":{borderRadius:"12px 0 0 12px"},"&:last-of-type":{borderRadius:"0 12px 12px 0",marginLeft:"-2px"}}};return r.jsxs(s,{sx:t,children:[r.jsx("span",{children:a}),r.jsx("span",{children:n})]})}y.registerModules([N]),w({theme:"legacy"})}}}));
