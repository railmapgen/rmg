System.register(["./index-legacy-CtG68oL1.js"],(function(t,e){"use strict";var n;return{setters:[t=>{n=t.S}],execute:function(){t("a",((t,e,n)=>Object.keys(t).reduce(((s,i)=>({...s,[i]:t[i].children.reduce(((s,r)=>({...s,[r]:1+e(t,r)+n(t,i)})),{})})),{})));const e=t("c",((t,n,s)=>{if(t===n)return{len:0,nodes:[t]};const i=[],r=[];Object.keys(s[t]).forEach((h=>{const l=e(h,n,s);l.len<0||(i.push(s[t][h]+l.len),l.nodes.unshift(t),r.push(l.nodes))}));const h=Math.max(...i);return{len:h,nodes:r[i.indexOf(h)]}})),s=(t("g",((t,n,s)=>{const i=e("linestart","lineend",n);if(i.nodes.includes(t))return e(i.nodes[1],t,n).len;{const r=s.filter((e=>e.includes(t)))[0];let h=t;for(;!i.nodes.includes(h);)h=r[r.indexOf(h)-1];let l=t;for(;!i.nodes.includes(l);)l=r[r.indexOf(l)+1];const a="linestart"===h,c=[];return a||"lineend"===l?a?(c[0]=0,c[1]=e(i.nodes[1],l,n).len,c[2]=e(r[1],t,n).len,c[3]=e(t,l,n).len):(c[0]=e(i.nodes[1],h,n).len,c[1]=e(h,i.nodes.slice(-2)[0],n).len,c[2]=e(h,t,n).len,c[3]=e(t,r.slice(-2)[0],n).len):(c[0]=e(i.nodes[1],h,n).len,c[1]=e(h,l,n).len,c[2]=e(h,t,n).len,c[3]=e(t,l,n).len),c[0]+c[2]*c[1]/(c[2]+c[3])}})),(t,e,n)=>{for(const s of n){const n=s.indexOf(t),i=s.indexOf(e);if(-1!==i&&i<n)return!0}return!1}),i=(t,e,n)=>{for(const s of n){const n=s.indexOf(t),i=s.indexOf(e);if(-1!==n&&n<i)return!0}return!1};t("b",((t,e,r)=>(console.log("computing stations' states"),[...new Set([].concat(...e))].reduce(((h,l)=>({...h,[l]:l===t?0:(r===n.right?i(t,l,e):s(t,l,e))?1:-1})),{})))),t("S",class{constructor(t){this.yShares={},this.xShares={},this.namePoss={},this.stnList={},this.criticalPath={},this.leftWideFactor=t=>0,this.rightWideFactor=t=>0,this.pathTurnParams=t=>{const e=35-17.5*Math.sqrt(3),n=t-2*e;return{tr:35,dx_a:17.5,dy_a:e,dx_l:n*Math.sqrt(3),dy_l:n}},this.pathTurnSE=t=>{const{tr:e,dx_a:n,dy_a:s,dx_l:i,dy_l:r}=this.pathTurnParams(t);return`a ${e},${e} 0 0,1 ${n},${s} l ${i},${r} a ${e},${e} 0 0,0 ${n},${s}`},this.pathTurnNE=t=>{const{tr:e,dx_a:n,dy_a:s,dx_l:i,dy_l:r}=this.pathTurnParams(t);return`a ${e},${e} 0 0,0 ${n},${-s} l ${i},${-r} a ${e},${e} 0 0,1 ${n},${-s}`},this.stnList=t.stnList,this.criticalPath=t.criticalPath}getYShare(t){if(t in this.yShares)return this.yShares[t];if(["linestart","lineend"].includes(t)||this.stnList[t].parents.length>1||this.stnList[t].children.length>1)return this.yShares[t]=0,0;const e=this.stnList[t].parents[0];if(e){if(1===this.stnList[e].children.length){const n=this.getYShare(e);return this.yShares[t]=n,n}{const n=0===this.stnList[e].children.indexOf(t)?1:-1;return this.yShares[t]=n,n}}return this.yShares[t]=0,0}static getYShares(t){console.log("computing y shares");const e=new this({stnList:t});return Object.keys(t).forEach((t=>{["linestart","lineend"].includes(t)||t in e.yShares||e.getYShare(t)})),e.yShares}_linePath(t,e,n,s,i,r,h,l){let[a,c,o]=[];const d=[],{dx_a:u,dx_l:f}=this.pathTurnParams(r),$=u+f/2,g=(e[1]-e[0])/h.len*2,p=((e[1]-e[0])/h.len-2*$)/2;return p+g<0&&console.warn(`SVG width too small! ${p+g}`),t.forEach((e=>{const h=s[e],u=i[e];if(!c&&0!==c)return[a,o,c]=[e,h,u],void(1===t.length?d.push(`M ${h},${u}`):n[0].includes(e)?n[0].includes(t[1])?d.push(`M ${h},${u}`):(s[t[1]]>0&&d.push(`M ${h},${u+l}`),i[t[1]]<0&&d.push(`M ${h},${u-l}`)):d.push(`M ${h},${u}`));u>c?(d.push(0===u?"h "+(h-o-g*this.leftWideFactor(e)-p-2*$):`h ${g*this.rightWideFactor(a)+p}`),d.push(this.pathTurnSE(r))):u<c&&(d.push(0===u?"h "+(h-o-g*this.leftWideFactor(e)-p-2*$):`h ${g*this.rightWideFactor(a)+p}`),d.push(this.pathTurnNE(r))),d.push(`H ${h}`),[a,o,c]=[e,h,u]})),d.join(" ").replace(/( H ([\d.]+))+/g," H $2")}}),t("d",((t,e)=>{let n=(t=t.filter((t=>!["linestart","lineend"].includes(t)))).filter((t=>e[t]>=0)),s=t.filter((t=>e[t]<=0));return 1===n.length&&(s=t),0===n.filter((t=>-1!==s.indexOf(t))).length&&n.length&&(s[0]===t[0]?s.push(n[0]):n[0]===t[0]&&n[n.length-1]===t[t.length-1]&&s.length?(s=t,n=[]):s.unshift(n[n.length-1])),{main:n,pass:s}}))}}}));
