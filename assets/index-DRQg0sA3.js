import{j as a}from"./chakra-D7RtCIb7.js";import{a as u}from"./react-Cf9aS4i4.js";import{i as D,P as O,b0 as P,u as B,m as it,S as w,aW as k}from"./index-B-iROXO9.js";import{a as ct,c as E,b as lt,d as dt}from"./share-B1repNpg.js";import{S as Ge}from"./svg-wrapper-BTXt-m8N.js";import{i as mt}from"./param-selector-D5fcOm2z.js";function ut(e){const{num:t,inStrip:s,showAsPlatformDoor:n,...r}=e;return a.jsxs("g",{textAnchor:"middle",fill:s?D.black:"var(--rmg-theme-fg)",...r,children:[a.jsx("rect",{height:40,width:40,rx:4,x:-20,fill:s?"#fff":"var(--rmg-theme-colour)"}),a.jsx("text",{className:"rmg-name__en",fontSize:20,dy:12,children:t}),n?a.jsxs(a.Fragment,{children:[a.jsx("text",{className:"rmg-name__zh",fontSize:11,dy:26,children:"站台门"}),a.jsx("text",{className:"rmg-name__en",fontSize:5.5,dy:36,children:"Platform Door"})]}):a.jsxs(a.Fragment,{children:[a.jsx("text",{className:"rmg-name__zh",fontSize:12,dy:26,children:"屏蔽门"}),a.jsx("text",{className:"rmg-name__en",fontSize:6.5,dy:36,children:"Screen Door"})]})]})}const Xe=e=>{const t=(r=>{switch(r){case"gz28":case"gz2otis":case"gz6":case"gzgf":return 60;case"gz1":case"gz3":return 40;case"gz4":case"gz5":case"gz1421":case"gz11":case"gz1822":case"gz7w":return 30;default:return 0}})(e.variant),s=u.useMemo(()=>{switch(e.variant){case"gz1":return a.jsx("circle",{cy:-65,r:20,fill:"red"});case"gz28":case"gz2otis":return a.jsx("ellipse",{cy:-30,rx:24,ry:12,fill:"orange"});case"gz3":return a.jsx("rect",{x:-18,y:-58,height:36,width:36,fill:"red"});case"gz6":return a.jsx("ellipse",{cy:-30,rx:24,ry:12,fill:"white"});case"gz5":return a.jsx("rect",{x:-30,y:-80,height:35,width:60,fill:"whitesmoke"});case"gz4":return a.jsx("rect",{x:-60,y:-68,height:30,width:120,fill:"whitesmoke"});case"gzgf":return a.jsx("rect",{x:-30,y:-58,height:30,width:60,fill:"orange"});case"gz1421":case"gz7w":case"gz11":return a.jsx("ellipse",{cy:-58,rx:36,ry:18,fill:"darkorange"});default:return a.jsx(a.Fragment,{})}},[e.variant]);return a.jsxs("g",{transform:"translate(0,".concat(e.variant==="gz4"?-15:0,")"),style:{"--strip-height":"".concat(t,"px")},children:[a.jsx("rect",{id:"strip_gz"}),e.variant===O.gz1&&a.jsx("rect",{className:"gz1-gap"}),a.jsx("g",{style:{transform:"translate(calc(var(--rmg-svg-width) / 2),var(--rmg-svg-height))"},children:e.isShowLight&&s}),e.isShowPSD!==!1&&a.jsx(ht,{...e})]})},ht=u.memo(function(t){const s=["gz28","gz2otis","gz6","gzgf"].includes(t.variant),n=(i=>{switch(i){case"gz1":case"gz3":return"93px";case"gz4":return"86px";case"gz5":return"90px";case"gz1421":case"gz7w":case"gz11":return"96px";default:return"56px"}})(t.variant),r=(i=>{switch(i){case"gz1":case"gz3":case"gz4":case"gz5":return 1.2;case"gz1421":case"gz7w":case"gz11":return 1.4;default:return 1}})(t.variant),o=[O.gz1,O.gz3,O.gz4,O.gz5,O.gz1421,O.gz7w,O.gz11].includes(t.variant);return a.jsx(ut,{num:t.isShowPSD,inStrip:s,showAsPlatformDoor:t.variant===O.gz11,style:{"--psd-dy":n,transform:"translate(var(--translate-x), var(--translate-y))scale(var(--scale))","--translate-x":o?"calc(var(--rmg-svg-width) / 2 + 110px)":"calc(var(--rmg-svg-width) / 2 + 80px)","--translate-y":"calc(var(--rmg-svg-height) - var(--psd-dy, 58px))","--scale":r}})},(e,t)=>e.variant===t.variant&&e.isShowPSD===t.isShowPSD);var T=1.3,Ue=1.7,J=18.5,ft=J+T,ve=J*2+T;var U=45,R=U-3,Ve=function(e,t){var s=[e,t].map(function(n){return n.match(/^(\w+).+$/)});if(s[0]&&s[1]&&s[0][1]===s[1][1])return s[0][1]},pe=function(e){var t=e.match(/^(\d+)\D+$/);return t==null?void 0:t[1]},ie=function(){return ie=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ie.apply(this,arguments)},gt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};function q(e){var t=e.customWidth,s=gt(e,["customWidth"]),n=(t!=null?t:U)-U;return a.jsx("rect",ie({x:-22.5-n/2,height:24,width:t!=null?t:U,rx:4.5},s,{"data-testid":"intBox"}))}var ce=function(){return ce=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ce.apply(this,arguments)},xt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},yt=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return o},_t=function(e,t){var s=pe(e);if(s)return{isDigit:!0,spanningPart:s};var n=Ve(e,t);return n?{isDigit:!1,spanningPart:n}:{isDigit:!1,spanningPart:""}};function Oe(e){var t=e.zhName,s=e.enName,n=e.foregroundColour,r=e.backgroundColour,o=e.zhClassName,i=e.enClassName,c=e.passed,d=e.children,l=xt(e,["zhName","enName","foregroundColour","backgroundColour","zhClassName","enClassName","passed","children"]),h=_t(t,s),f=h.isDigit,m=h.spanningPart,x=u.useRef(null),j=yt(u.useState({x:0,height:0,width:0}),2),p=j[0],S=j[1];u.useEffect(function(){x.current&&S(x.current.getBBox())},[t,s]);var v=R/Math.max(R,p.width),y=(-p.x-p.width/2)*v,g=p.height*(1-v)/2;return a.jsxs("g",ce({textAnchor:"middle",fill:c?D.white:n},l,{children:[a.jsx(q,{fill:c?"#aaa":r}),a.jsx("g",{ref:x,transform:"translate(".concat(y,",").concat(g,")scale(").concat(v,")"),children:a.jsxs("text",{className:o,fontSize:21,x:-1,y:12,textAnchor:"end",dominantBaseline:"central",children:[m,a.jsx("tspan",{className:o,fontSize:10,x:0,dy:-4,textAnchor:"start",dominantBaseline:"central",children:t.slice(m.length).trim()}),a.jsx("tspan",{className:i,fontSize:6.5,letterSpacing:-.1,x:0,dy:10,textAnchor:"start",dominantBaseline:"middle",children:f?s:s.slice(m.length).trim()})]})}),d]}))}var le=function(){return le=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},le.apply(this,arguments)},jt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},$e=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return o};function vt(e){var t,s=e.zhName,n=e.enName,r=e.foregroundColour,o=e.backgroundColour,i=e.zhClassName,c=e.enClassName,d=e.passed,l=e.children,h=jt(e,["zhName","enName","foregroundColour","backgroundColour","zhClassName","enClassName","passed","children"]),f=(t=pe(s))!==null&&t!==void 0?t:"",m=u.useRef(null),x=u.useRef(null),j=$e(u.useState({width:0}),2),p=j[0],S=j[1],v=$e(u.useState({width:0}),2),y=v[0],g=v[1];u.useEffect(function(){m.current&&S(m.current.getBBox()),x.current&&g(x.current.getBBox())},[s,n]);var _=R/Math.max(R,p.width),N=R/Math.max(R,y.width),b={nameZh:{y:7.3+13.5*(1-_)*_/2},nameEn:{y:19.5-9*(1-N)*N/2}};return a.jsxs("g",le({textAnchor:"middle",fill:d?D.white:r},h,{children:[a.jsx(q,{fill:d?"#aaa":o}),a.jsxs("text",{ref:m,className:i,fontSize:12,transform:"translate(0,".concat(b.nameZh.y,")scale(").concat(_,")"),dominantBaseline:"central",children:[a.jsx("tspan",{fontSize:16,dy:.7,dominantBaseline:"central",children:f}),a.jsx("tspan",{dy:-.7,dominantBaseline:"central",children:s.slice(f.length)})]}),a.jsx("text",{ref:x,className:c,fontSize:8,transform:"translate(0,".concat(b.nameEn.y,")scale(").concat(N,")"),dominantBaseline:"middle",children:n}),l]}))}var de=function(){return de=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},de.apply(this,arguments)},pt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},Nt=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return o};function St(e){var t=e.zhName,s=e.enName,n=e.foregroundColour,r=e.backgroundColour,o=e.zhClassName,i=e.enClassName,c=e.passed,d=e.children,l=pt(e,["zhName","enName","foregroundColour","backgroundColour","zhClassName","enClassName","passed","children"]),h=u.useRef(null),f=Nt(u.useState({width:0}),2),m=f[0],x=f[1];u.useEffect(function(){h.current&&x(h.current.getBBox())},[t,s]);var j=Math.max(45,m.width+4);return a.jsxs("g",de({textAnchor:"middle",fill:c?D.white:n},l,{children:[a.jsx(q,{customWidth:j,fill:c?"#aaa":r}),a.jsxs("g",{ref:h,children:[a.jsx("text",{className:o,fontSize:8.5,y:8,dominantBaseline:"central",children:t}),a.jsx("text",{className:i,fontSize:5.5,y:18,dominantBaseline:"middle",children:s})]}),d]}))}var me=function(){return me=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},me.apply(this,arguments)},bt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},Be=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return o};function zt(e){var t=e.zhName,s=e.enName,n=e.foregroundColour,r=e.backgroundColour,o=e.zhClassName,i=e.enClassName,c=e.passed,d=e.children,l=bt(e,["zhName","enName","foregroundColour","backgroundColour","zhClassName","enClassName","passed","children"]),h=u.useRef(null),f=u.useRef(null),m=Be(u.useState({width:0}),2),x=m[0],j=m[1],p=Be(u.useState({width:0}),2),S=p[0],v=p[1];u.useEffect(function(){h.current&&j(h.current.getBBox()),f.current&&v(f.current.getBBox())},[t,s]);var y=R/Math.max(R,x.width),g=R/Math.max(R,S.width),_={nameZh:{y:7.3+13.5*(1-y)*y/2},nameEn:{y:19.5-9*(1-g)*g/2}};return a.jsxs("g",me({textAnchor:"middle",fill:c?D.white:n},l,{children:[a.jsx(q,{fill:c?"#aaa":r}),a.jsx("text",{ref:h,className:o,fontSize:12,transform:"translate(0,".concat(_.nameZh.y,")scale(").concat(y,")"),dominantBaseline:"central",children:t}),a.jsx("text",{ref:f,className:i,fontSize:8,transform:"translate(0,".concat(_.nameEn.y,")scale(").concat(g,")"),dominantBaseline:"middle",children:s}),d]}))}var M=function(){return M=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},M.apply(this,arguments)};const Ne=u.memo(function(t){var s=t.zhName,n=t.enName,r=t.spanDigits,o=wt(s,n);switch(o){case 1:return r?a.jsx(Oe,M({},t)):a.jsx(vt,M({},t));case 2:return a.jsx(Oe,M({},t));default:return s.length>=5?a.jsx(St,M({},t)):a.jsx(zt,M({},t))}});var wt=function(e,t){var s=pe(e);if(s!==void 0)return 1;var n=Ve(e,t);return n!==void 0?2:3},ue=function(){return ue=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ue.apply(this,arguments)},Ot=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},L=5,F=5.625,Ee=J-L,Ce=J-2*F;const Ye=u.memo(function(t){var s=t.stroke,n=t.filled,r=t.bolder,o=Ot(t,["stroke","filled","bolder"]),i="M0,9.25 V-9.25 H-".concat(Ee," l-").concat(L,",").concat(F," v").concat(Ce," l").concat(L,",").concat(F," H").concat(Ee," l").concat(L,",-").concat(F," v-").concat(Ce," l-").concat(L,",-").concat(F," H0");return a.jsx("path",ue({d:i,fill:n?s:"#fff",strokeWidth:r?Ue:T,stroke:s},o))});var he=function(){return he=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},he.apply(this,arguments)},$t=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};const Je=u.memo(function(t){var s=t.stroke,n=t.filled,r=t.bolder,o=$t(t,["stroke","filled","bolder"]),i="M0,9.25 V-9.25 H-9.25 a9.25,9.25 0 0,0 0,18.5 h18.5 a9.25,9.25 0 0,0 0,-18.5 H0";return a.jsx("path",he({d:i,fill:n?s:"#fff",strokeWidth:r?Ue:T,stroke:s},o))});var Bt={updateId:0,update:function(){}},Et=u.createContext(Bt),fe=function(){return fe=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fe.apply(this,arguments)},Ct=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},ke=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return o},G=17,qe=u.forwardRef(function(t,s){var n=t.Icon,r=t.lineNum,o=t.stnNum,i=t.strokeColour,c=t.passed,d=t.size,l=t.textClassName,h=t.bolderBorder,f=t.alwaysShowColouredBorder,m=t.useSameScale,x=t.children,j=Ct(t,["Icon","lineNum","stnNum","strokeColour","passed","size","textClassName","bolderBorder","alwaysShowColouredBorder","useSameScale","children"]),p=u.useContext(Et).updateId,S=u.useRef(null),v=u.useRef(null),y=ke(u.useState({width:0}),2),g=y[0],_=y[1],N=ke(u.useState({width:0}),2),b=N[0],C=N[1];u.useEffect(function(){S.current&&_(S.current.getBBox()),v.current&&C(v.current.getBBox())},[r,o,p]);var z=r&&r.length>2;u.useEffect(function(){m&&z&&console.warn("GenericStationNumber(), useSameScale props does not work when lineNum has more than 2 characters")},[m,z]);var $=G/Math.max(G,g.width),A=m&&(r==null?void 0:r.length)===2?$:G/Math.max(G,b.width),H=d==="sm"?"0.7":d==="lg"?"1.6":1;return a.jsxs("g",fe({ref:s},j,{children:[a.jsxs("g",{transform:"scale(".concat(H,")"),children:[a.jsx(n,{stroke:c&&!f?"#aaa":i,filled:!r&&!o,bolder:h}),(r||o)&&a.jsxs("g",{textAnchor:"middle",fontSize:13.5,fill:c?"#aaa":"#000",children:[a.jsx("g",{transform:"translate(-9.25,0)scale(".concat($,")"),children:a.jsx("text",{ref:S,className:l,dominantBaseline:"central",x:.5,children:r})}),a.jsx("g",{transform:"translate(9.25,0)scale(".concat(A,")"),children:a.jsx("text",{ref:v,className:l,dominantBaseline:"central",children:o})})]})]}),x]}))}),ge=function(){return ge=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ge.apply(this,arguments)},kt=u.forwardRef(function(t,s){return a.jsx(qe,ge({Icon:Ye},t,{ref:s}))}),xe=function(){return xe=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xe.apply(this,arguments)},Se=u.forwardRef(function(t,s){return a.jsx(qe,xe({Icon:Je},t,{ref:s}))}),ye=function(){return ye=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ye.apply(this,arguments)},Pt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s};function Pe(e){var t=e.position,s=Pt(e,["position"]),n=t==="right"?"rotate(180)":"rotate(0)";return a.jsx("circle",ye({cx:-38.3*.4,cy:0,r:ve/4,stroke:"#aaa",strokeWidth:T*1.75,fill:"white",strokeDasharray:"2.7 2.5",transform:n},s))}var V=function(){return V=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},V.apply(this,arguments)},Re=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},Ae=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)o.push(r.value)}catch(c){i={error:c}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(i)throw i.error}}return o},Q=function(e,t){return Array.from(Array(e).keys()).map(function(s){return(s-(e-1)/2)*t})},Rt=function(e,t,s){if(e<=0)return[];if(e===1)return[[0,0]];for(var n=t>e?e:t,r=ve,o=ft,i=Q(n,r),c=Math.ceil(e/n),d=Q(c,o),l=e%n,h=[],f=0;f<c;f++){var m=s?c-1:0;if(l===0||f!==m)for(var x=0;x<n;x++)h.push([i[x],d[f]]);else for(var j=Q(l,r),x=0;x<l;x++)h.push([j[x],d[f]])}return h},Ie=function(e){return e==="fmetro"?Ye:Je},W=T*7,ee=T*2.2;u.forwardRef(function(t,s){var n=t.stations,r=t.textClassName,o=t.columns,i=o===void 0?2:o,c=t.topHeavy,d=t.anchorAt,l=t.osiPosition,h=t.children,f=Re(t,["stations","textClassName","columns","topHeavy","anchorAt","osiPosition","children"]),m=u.useMemo(function(){return Rt(n.length,i,c)},[n.length,i,c]),x=Ae(u.useMemo(function(){if(d===void 0)return[0,0];if(d<0||d>=m.length)return console.warn("<InterchangeStation2024/>, anchor index ".concat(d," is out of bound")),[0,0];var g=Ae(m[d],2),_=g[0],N=g[1];return[-_,-N]},[m,d]),2),j=x[0],p=x[1],S=u.useRef(null),v=u.useRef([]);u.useEffect(function(){v.current=v.current.slice(0,n.length)},[n.length]);var y=n.length===2&&i===1&&!!l;return u.useImperativeHandle(s,function(){return{target:S.current,children:v.current,getCoordinates:function(){return m},getCorrectedBBox:function(){var g,_,N=(_=(g=S.current)===null||g===void 0?void 0:g.getBBox())!==null&&_!==void 0?_:{x:0,y:0,width:0,height:0};return N.y-=W/2,N.height+=W,y?(l==="left"?N.x-=ee/2:N.x-=W/2,N.width+=ee/2+W/2):(N.x-=W/2,N.width+=W),N},getTranslate:function(){return[j,p]}}},[m,j,p,S.current,v.current,l]),a.jsxs("g",V({ref:S,transform:"translate(".concat(j,",").concat(p,")")},f,{children:[n.map(function(g,_){var N=g.style,b=Ie(N);return a.jsx(b,{stroke:"#aaa",filled:!0,strokeWidth:W,transform:"translate(".concat(m[_][0],",").concat(m[_][1],")")},_)}),y&&a.jsx(Pe,{position:l,r:ve/2.9,strokeWidth:ee,strokeDasharray:void 0}),n.map(function(g,_){var N=g.style,b=Ie(N);return a.jsx(b,{stroke:"white",filled:!0,strokeWidth:T*2.6,transform:"translate(".concat(m[_][0],",").concat(m[_][1],")")},_)}),y&&a.jsx(Pe,{position:l}),n.length&&a.jsx("rect",{fill:"white",x:-12,y:m[0][1],width:24,height:-m[0][1]*2}),n.map(function(g,_){var N=g.style,b=Re(g,["style"]),C=N==="fmetro"?kt:Se;return a.jsx(C,V({ref:function(z){return v.current[_]=z},transform:"translate(".concat(m[_][0],",").concat(m[_][1],")"),textClassName:r},b),_)}),h]}))});var _e=function(){return _e=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_e.apply(this,arguments)},Z=9,Ke=10*Math.PI/180,At=Z*Math.sin(Ke),It=Z*Math.cos(Ke),Te="M0,".concat(Z," A").concat(Z,",").concat(Z," 0 0,0 ").concat(At,",-").concat(It);function Tt(e){return a.jsxs("g",_e({},e,{children:[a.jsx("circle",{cx:0,cy:0,r:9,stroke:"red",strokeWidth:2,fill:"none"}),a.jsx("path",{d:Te,stroke:"red",strokeWidth:3,fill:"none"}),a.jsx("path",{d:Te,stroke:"white",strokeWidth:1,strokeDasharray:"0 1.4 2.3 0",fill:"none"}),a.jsx("path",{d:"M-1,-9 l3.7,2.4 v-4.8z",fill:"red"})]}))}var je=function(){return je=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++){t=arguments[s];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},je.apply(this,arguments)},Wt=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(s[n[r]]=e[n[r]]);return s},Mt=u.forwardRef(function(t,s){var n=t.clockwise,r=t.anchorAt,o=r===void 0?"text":r,i=Wt(t,["clockwise","anchorAt"]),c=o==="circle"?29:0;return a.jsx("g",je({ref:s},i,{children:a.jsxs("g",{transform:"translate(".concat(c,",0)"),children:[a.jsx(Tt,{transform:"translate(-30,0)scale(".concat(n?-1:1,",1)")}),a.jsxs("g",{textAnchor:"middle",fontWeight:"bold",fill:"red",transform:"translate(0,-2.5)",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:12,style:{fontWeight:"bold"},children:"半环站"}),a.jsx("text",{className:"rmg-name__en",y:9,fontSize:4.5,style:{fontWeight:"bold"},children:"Midpoint Station"})]})]})}))});const Dt=u.memo(function(t){const{stnName:s,onUpdate:n,onEnNameUpdate:r}=t,{zh:o="",en:i=""}=s,c=u.useRef(null);return u.useEffect(()=>{if(c.current){n==null||n(c.current.getBBox());const d=c.current.querySelector("g");d&&(r==null||r(d.getBBox()))}},[JSON.stringify(s),c.current]),a.jsxs("g",{ref:c,children:[a.jsx("text",{className:"rmg-name__zh",fontSize:18,children:o}),a.jsx("g",{fontSize:10.5,children:i.split("\\").map((d,l)=>a.jsx("text",{className:"rmg-name__en",dy:16+l*11,children:d},l))})]})},(e,t)=>JSON.stringify(e.stnName)===JSON.stringify(t.stnName));function Ht(e){const{stnName:t,onUpdate:s,passed:n,...r}=e,{zh:o="",en:i=""}=t,c=u.useRef(null),[d,l]=u.useState({x:0,width:0});return u.useEffect(()=>{if(c.current){const h=c.current.getBBox();l(h),s==null||s(h)}},[JSON.stringify(t)]),!o&&!i?a.jsx(a.Fragment,{}):a.jsxs("g",{fill:n?"#aaa":"#000",...r,children:[a.jsxs("g",{transform:"translate(0,3)",fontSize:18,children:[a.jsx("text",{textAnchor:"end",x:d.x-3,className:"rmg-name__zh",children:"("}),a.jsx("text",{textAnchor:"start",x:d.width+d.x+3,className:"rmg-name__zh",children:")"})]}),a.jsxs("g",{ref:c,textAnchor:"middle",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:13,children:o}),a.jsx("text",{dy:10,className:"rmg-name__en",fontSize:6.5,children:i})]})]})}function Lt(e){const{passed:t,...s}=e;return a.jsxs("g",{textAnchor:"middle",fill:t?"#aaa":"var(--rmg-theme-colour)",...s,children:[a.jsx("text",{className:"rmg-name__zh",fontSize:13,children:"快车停靠站"}),a.jsx("text",{dy:10,className:"rmg-name__en",fontSize:6.5,children:"Express Station"})]})}function Ft(e){const{passed:t,temporary:s,...n}=e;return a.jsxs("g",{textAnchor:"middle",fill:t?"#aaa":"black",...n,children:[a.jsx("text",{className:"rmg-name__zh",fontSize:9.5,children:"（未开通）"}),a.jsx("text",{dy:9,className:"rmg-name__en",fontSize:3.8,children:"(Under Construction)"}),s&&a.jsx("rect",{x:-19,y:-6,width:38,height:18,fill:"none",stroke:"#aaa",strokeWidth:.5})]})}function Zt(e){var S,v,y;const{primaryName:t,secondaryName:s,stationState:n,flipped:r,express:o,underConstruction:i}=e,[c,d]=u.useState({width:0}),[l,h]=u.useState({width:0}),[f,m]=u.useState({x:0,width:-20}),x=g=>{switch(g){case P.PASSED:return"#aaa";case P.CURRENT:return"#f00";case P.FUTURE:return"#000"}},j=(y=(v=(S=t.en)==null?void 0:S.split("\\"))==null?void 0:v.length)!=null?y:1,p={g:{x:0,y:r?17.5:-20-j*14*Math.cos(-45)},StationSecondaryName:{x:(c.width+f.width/2+10)*(r?-1:1),y:2+5*(j-1)},ExpressTag:{x:(c.width+f.width+20+35)*(r?-1:1),y:2+5*(j-1)},UnderConstructionTag:{x:(l.width+5+20)*(r?-1:1),y:c.y+c.height-14}};return a.jsxs("g",{textAnchor:r?"end":"start",fill:x(n),transform:"translate(".concat(p.g.x,",").concat(p.g.y,")rotate(-45)"),children:[a.jsx(Dt,{stnName:t,onUpdate:d,onEnNameUpdate:h}),s&&a.jsx(Ht,{stnName:s,onUpdate:m,passed:n===P.PASSED,transform:"translate(".concat(p.StationSecondaryName.x,",").concat(p.StationSecondaryName.y,")")}),o&&a.jsx(Lt,{passed:n===P.PASSED,transform:"translate(".concat(p.ExpressTag.x,",").concat(p.ExpressTag.y,")")}),i&&a.jsx(Ft,{passed:n===P.PASSED,temporary:i==="temp",transform:"translate(".concat(p.UnderConstructionTag.x,",").concat(p.UnderConstructionTag.y,")")})]})}function Gt(e){var b,C,z,$,A,H,be,ze,we;const{stnId:t,stnState:s,stnY:n}=e,{theme:r,line_name:o,line_num:i,spanLineNum:c,stn_list:d,loop:l,loop_info:{midpoint_station:h,clockwise:f}}=B(ot=>ot.param),m=d[t],x=h===t,[j,p]=u.useState({height:0}),S=u.useRef(null);u.useEffect(()=>{S.current&&p(S.current.getBBox())},[S.current,n,m.localisedName,m.localisedSecondaryName,m.services]);const v=m.parents.length===2||m.children.length===2,y=n>0||m.parents.indexOf(((C=(b=m.branch)==null?void 0:b.left)==null?void 0:C[1])||"")===1||m.children.indexOf((($=(z=m.branch)==null?void 0:z.right)==null?void 0:$[1])||"")===1?180:0,g=(be=(H=(A=m.localisedName.en)==null?void 0:A.split("\\"))==null?void 0:H.length)!=null?be:1,_=v?y===180?16+(g-1)*12*Math.cos(-45):-9:y===180?-6:(25+(g-1)*15)*Math.cos(-45),N=n>0?j.height+23:-j.height-23;return a.jsxs(a.Fragment,{children:[a.jsx(Xt,{intInfos:v?[{theme:[r[0],r[1],"var(--rmg-theme-colour)","var(--rmg-theme-fg)"],name:o},...(ze=m.transfer.groups[0].lines)!=null?ze:[]]:(we=m.transfer.groups[0].lines)!=null?we:[],stnState:l?P.FUTURE:s,tickRotation:y,spanDigits:c}),a.jsx(Se,{lineNum:i,stnNum:m.num,strokeColour:r[2],textClassName:"rmg-name__zh",passed:s===-1,alwaysShowColouredBorder:l,bolderBorder:!0,useSameScale:!0}),a.jsx("g",{ref:S,transform:"translate(".concat(-_,",0)"),children:a.jsx(Zt,{primaryName:m.localisedName,secondaryName:m.localisedSecondaryName,stationState:s,flipped:y===180,express:m.services.includes(it.express),underConstruction:m.underConstruction})}),x&&a.jsx(Mt,{transform:"translate(0,".concat(N,")"),clockwise:f,anchorAt:n>0?"text":"circle"})]})}const Xt=e=>a.jsxs(a.Fragment,{children:[a.jsx(Ut,{strokeWidth:4,...e}),a.jsx(Vt,{transform:"translate(0,".concat(e.tickRotation===180?-47:23,")"),...e})]}),Ut=e=>{const{intInfos:t,stnState:s,tickRotation:n,spanDigits:r,...o}=e;return a.jsx("g",{...o,children:t.map((i,c)=>{var d;return a.jsx("use",{xlinkHref:"#inttick",stroke:s===-1?"#aaa":(d=i.theme)==null?void 0:d[2],transform:"translate(".concat(-2*(t.length-1)+4*c,",0)rotate(").concat(n===180?180:0,")")},c)})})},Vt=e=>{const{intInfos:t,tickRotation:s,stnState:n,spanDigits:r,...o}=e;return a.jsx("g",{...o,children:t.map((i,c)=>{var d,l,h,f;return a.jsx("g",{transform:"translate(0,".concat(c*28*(s===180?-1:1),")"),children:a.jsx(Ne,{zhName:i.name[0],enName:i.name[1],foregroundColour:(l=(d=i.theme)==null?void 0:d[3])!=null?l:D.white,backgroundColour:(f=(h=i.theme)==null?void 0:h[2])!=null?f:"#aaaaaa",zhClassName:"rmg-name__zh",enClassName:"rmg-name__en",passed:n===-1,spanDigits:r})},c)})})};function Qe(e){const{xs:t,ys:s,stnStates:n}=e,{stn_list:r,loop:o}=B(d=>d.param),{branches:i}=B(d=>d.helper),c=o?i[0].slice(1,-1):Object.keys(r);return a.jsx("g",{id:"stn_icons",children:c.filter(d=>!["linestart","lineend"].includes(d)).map(d=>a.jsx("g",{style:{transform:"translate(".concat(t[d],"px,").concat(s[d],"px)")},children:a.jsx(Gt,{stnId:d,stnState:n[d],stnY:s[d]})},d))})}const We=(e,t)=>e[t].parents.length===2||e[t].children.length===2?.25:0,Yt=(e,t,s)=>{const n=E("linestart","lineend",t);if(n.nodes.includes(e))return E(n.nodes[1],e,t).len;{const r=s.filter(l=>l.includes(e))[0];let o=e;for(;!n.nodes.includes(o);)o=r[r.indexOf(o)-1];let i=e;for(;!n.nodes.includes(i);)i=r[r.indexOf(i)+1];const c=o==="linestart",d=i==="lineend";if(r.toString()===s[0].toString()){const l=[];return!c&&!d?(l[0]=E(n.nodes[1],o,t).len,l[1]=E(o,i,t).len,l[2]=E(o,e,t).len,l[3]=E(e,i,t).len):c?(l[0]=0,l[1]=E(n.nodes[1],i,t).len,l[2]=E(r[1],e,t).len,l[3]=E(e,i,t).len):(l[0]=E(n.nodes[1],o,t).len,l[1]=E(o,n.nodes.slice(-2)[0],t).len,l[2]=E(o,e,t).len,l[3]=E(e,r.slice(-2)[0],t).len),l[0]+l[2]*l[1]/(l[2]+l[3])}else if(!c&&!d){const l=[];return l[0]=E(n.nodes[1],o,t).len,l[1]=E(o,i,t).len,l[2]=E(o,e,t).len,l[3]=E(e,i,t).len,l[0]+l[2]*l[1]/(l[2]+l[3])}else return c?E(n.nodes[1],i,t).len-E(e,i,t).len:E(n.nodes[1],o,t).len+E(o,e,t).len}},Jt=()=>{const{branches:e,routes:t,depsStr:s}=B(z=>z.helper),{svgWidth:n,svg_height:r,y_pc:o,padding:i,branchSpacingPct:c,direction:d,line_name:l,spanLineNum:h,current_stn_idx:f,stn_list:m}=B(z=>z.param),x=ct(m,We,We),j=u.useMemo(()=>(console.log("computing x shares"),Object.keys(m).reduce((z,$)=>({...z,[$]:Yt($,x,e)}),{})),[e.toString(),JSON.stringify(x)]),p=E("linestart","lineend",x),S=E(p.nodes[1],p.nodes.slice(-2)[0],x),v=d===w.right?[n[k.RailMap]*i/100+65,n[k.RailMap]*(1-i/100)-20]:[n[k.RailMap]*i/100,n[k.RailMap]*(1-i/100)-65],y=Object.keys(j).reduce((z,$)=>({...z,[$]:v[0]+j[$]/S.len*(v[1]-v[0])}),{}),g=u.useMemo(()=>(console.log("computing y shares"),Object.keys(m).reduce((z,$)=>{if(e[0].includes($))return{...z,[$]:0};{const A=e.slice(1).filter(H=>H.includes($))[0];return{...z,[$]:m[A[0]].children.indexOf(A[1])?-2:2}}},{})),[s]),_=Object.keys(g).reduce((z,$)=>({...z,[$]:-g[$]*c*r/200}),{}),N=u.useMemo(()=>lt(f,t,d),[f,d,t.toString()]),b=e.map(z=>dt(z,N)).reduce((z,$)=>(z.main.push($.main),z.pass.push($.pass),z),{main:[],pass:[]}),C=Object.keys(b).reduce((z,$)=>({...z,[$]:b[$].map(A=>Kt(A,y,_))}),{});return a.jsxs("g",{id:"main",style:{"--y-percentage":o,transform:"translateY(calc(var(--y-percentage) * var(--rmg-svg-height) / 100))"},children:[a.jsx(qt,{paths:C}),a.jsx(Qe,{xs:y,ys:_,stnStates:N}),a.jsx("g",{id:"line_name",style:{"--translate-x":d===w.right?"".concat(v[0]-65,"px"):"".concat(v[1]+65,"px")},children:a.jsx(Ne,{zhName:l[0],enName:l[1],foregroundColour:"var(--rmg-theme-fg)",backgroundColour:"var(--rmg-theme-colour)",zhClassName:"rmg-name__zh",enClassName:"rmg-name__en",spanDigits:h})})]})},qt=u.memo(function(t){return a.jsxs("g",{fill:"none",strokeWidth:4,children:[a.jsx("g",{stroke:"#aaa",strokeDasharray:4,children:t.paths.pass.map((s,n)=>a.jsx("path",{d:s},n))}),a.jsx("g",{stroke:"var(--rmg-theme-colour)",children:t.paths.main.map((s,n)=>a.jsx("path",{d:s},n))})]})},(e,t)=>JSON.stringify(e.paths)===JSON.stringify(t.paths)),Kt=(e,t,s)=>{let n;const r=[];return e.forEach(o=>{const i=t[o],c=s[o];if(!n&&n!==0){n=c,r.push("M ".concat(i,",").concat(c));return}c===0?(c<n&&r.push("H ".concat(i-40),"a 40,40 0 0,0 40,-40","V ".concat(c)),c>n&&r.push("H ".concat(i-40),"a 40,40 0 0,1 40,40","V ".concat(c))):(c<n&&r.push("V ".concat(c+40),"a 40,40 0 0,1 40,-40","H ".concat(i)),c>n&&r.push("V ".concat(c-40),"a 40,40 0 0,0 40,40","H ".concat(i))),r.push("H ".concat(i)),n=c}),r.join(" ").replace(/( H ([\d.]+))+/g," H $2")},et=150;function K(e){return a.jsx("path",{d:"M60,60 L0,0 L60,-60 H90 L40,-10 H".concat(et," V10 H40 L90,60z"),fill:"black",...e})}function Qt(e){const{destIds:t,textAnchor:s,...n}=e,r=B(l=>l.param.direction),o=B(l=>l.param.stn_list),i=t.map(l=>{var h,f;return(f=(h=o[l].localisedName.zh)==null?void 0:h.length)!=null?f:0}),c=Math.min(...i),d=c>1&&i[0]!==i[1]?Math.abs(i[0]-i[1])/(c-1):0;return a.jsxs("g",{textAnchor:s,...n,children:[t.map((l,h)=>{var x;const f=i[h]>i[1-h],m=!mt()&&s==="end"&&!f;return a.jsxs(u.Fragment,{children:[a.jsx("text",{className:"rmg-name__zh",fontSize:25,x:r===w.left?0:-75,y:-21+42*h,letterSpacing:f?"0em":"".concat(d,"em"),dx:m?"".concat(d,"em"):"0em",children:o[l].localisedName.zh}),a.jsx("text",{className:"rmg-name__en",fontSize:11.5,x:r===w.left?0:-75,y:-1+42*h,children:"Towards "+((x=o[l].localisedName.en)==null?void 0:x.replace("\\"," "))})]},l)}),a.jsx("text",{className:"rmg-name__zh",fontSize:28,x:r===w.left?25*(Math.max(...i)+1):0,y:5,children:"方向"})]})}const en=(e,t,s,n)=>{const i=e*(1-2*t/100)*(s-1)/s-n,c=e-i;return[c/2,e-c/2]},tn=(e,t,s)=>{const n=Math.min(...Object.values(e)),r=Math.max(...Object.values(e)),o=Math.min(...Object.values(t)),c=Math.max(...Object.values(t))-o,d=c/2;return"M".concat(r,",").concat(o," H").concat(n," h-").concat(s/2," a").concat(d,",").concat(d," 0 0,0 0,").concat(c," H").concat(r," h").concat(s/2," a").concat(d,",").concat(d," 0 0,0 0,-").concat(c,"Z")},nn=(e,t,s,n)=>{const r=e.indexOf(s),o=e.indexOf(n!=null?n:s);let i;return o<0?i=e:t?i=r<=o?[...e.slice(0,r+1),...e.slice(o)]:e.slice(o,r+1):i=r<o?e.slice(r,o+1):[...e.slice(r),...e.slice(0,o+1)],e.reduce((c,d,l)=>r===l?{...c,[d]:P.CURRENT}:i.includes(d)?{...c,[d]:P.FUTURE}:{...c,[d]:P.PASSED},{})},Me=6;function rn({currentStationX:e,currentStationY:t,stationGap:s,loopClockwise:n}){const r=t>0?n?-1:1:n?1:-1,o=(s/3-Me)*r,i=e+o+Me*r,c=(t-12)*-r;return a.jsx("g",{transform:"scale(1,".concat(-r,")"),children:a.jsx("path",{d:"M".concat(i,",").concat(c," h").concat(o),strokeWidth:4,stroke:"black",markerEnd:"url(#loop_arrow)"})})}function De({clockwise:e,...t}){return a.jsx("g",{...t,children:a.jsxs("g",{textAnchor:"middle",transform:"translate(0,-4)",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:16,children:e?"内环":"外环"}),a.jsx("text",{className:"rmg-name__en",y:13,fontSize:9,children:e?"Inner Circle":"Outer Circle"})]})})}const tt=2/3,an=2-tt,sn=25*Math.PI/180,on=Math.asin(Math.sin(35*Math.PI/180)/2);function cn({cxLeft:e,cxRight:t,yGap:s,clockwise:n}){const r=s/2,o=r*(n?tt:an),i=n?sn:on,c=o*Math.cos(i),d=n?1:-1,l=n?1:0,h=o*Math.sin(i)*d,f=2*h,m={rotate:n?"-4deg":"2deg"};return a.jsxs(a.Fragment,{children:[a.jsxs("g",{transform:"translate(".concat(e,",0)"),children:[a.jsx("path",{d:"M".concat(-c,",").concat(h," a").concat(o,",").concat(o," 0 0,").concat(l," 0,").concat(-f),fill:"none",strokeWidth:4,stroke:"black",markerEnd:"url(#loop_arrow)",style:m}),a.jsx(De,{transform:"translate(".concat(n?0:-2*r,",0)"),clockwise:n})]}),a.jsxs("g",{transform:"translate(".concat(t,",0)"),children:[a.jsx("path",{d:"M".concat(c,",").concat(-h," a").concat(o,",").concat(o," 0 0,").concat(l," 0,").concat(f),fill:"none",strokeWidth:4,stroke:"black",markerEnd:"url(#loop_arrow)",style:m}),a.jsx(De,{transform:"translate(".concat(n?0:2*r,",0)"),clockwise:n})]})]})}function ln(){const{branches:e}=B(g=>g.helper),{svgWidth:t,svg_height:s,y_pc:n,padding:r,branchSpacingPct:o,current_stn_idx:i,loop_info:{midpoint_station:c,clockwise:d}}=B(g=>g.param),l=e[0].slice(1,-1),h=Math.ceil(l.length/2),f=u.useMemo(()=>(console.log("computing x shares"),l.reduce((g,_,N,b)=>{let C;return N<h?C=h-N-1:(C=N-h,b.length&1&&(C+=.5)),{...g,[_]:C}},{})),[l.toString()]),m=o*s*2/100,x=en(t[k.RailMap],r,h,m),j=(x[1]-x[0])/(h-1),p=Object.keys(f).reduce((g,_)=>({...g,[_]:x[0]+f[_]*j}),{}),S=u.useMemo(()=>(console.log("computing y shares"),l.reduce((g,_,N)=>({...g,[_]:N<h?1:-1}),{})),[l.toString()]),v=Object.keys(S).reduce((g,_)=>({...g,[_]:-S[_]*m/2}),{}),y=nn(l,d!=null?d:!1,i,c);return a.jsxs("g",{id:"main",style:{"--y-percentage":n,transform:"translateY(calc(var(--y-percentage) * var(--rmg-svg-height) / 100))"},children:[a.jsx("path",{d:tn(p,v,j),fill:"none",strokeWidth:6,stroke:"var(--rmg-theme-colour)"}),a.jsx(Qe,{xs:p,ys:v,stnStates:y}),a.jsx(rn,{currentStationX:p[i],currentStationY:v[i],stationGap:j,loopClockwise:d}),a.jsx(cn,{cxLeft:x[0]-j/2,cxRight:x[1]+j/2,yGap:m,clockwise:d})]})}const He=k.RailMap,dn=()=>{const{canvasScale:e}=B(x=>x.app),{svgWidth:t,svg_height:s,direction:n,psd_num:r,info_panel_type:o,notesGZMTR:i,current_stn_idx:c,stn_list:d,theme:l,loop:h}=B(x=>x.param),f=t[He],m=d[c];return a.jsxs(Ge,{type:He,svgWidth:f,svgHeight:s,canvasScale:e,theme:l,children:[a.jsx(mn,{}),a.jsx(Xe,{variant:o,isShowLight:o===O.gz2otis,isShowPSD:o===O.gz2otis&&r}),!h&&(n===w.left&&m.parents.includes("linestart")||n===w.right&&m.children.includes("lineend"))?a.jsx(fn,{}):a.jsxs(a.Fragment,{children:[h?a.jsx(ln,{}):a.jsx(Jt,{}),!h&&a.jsx(un,{}),i==null?void 0:i.map((x,j)=>a.jsx(gn,{note:x},j))]}),o===O.gz2otis&&a.jsx("line",{x2:f,transform:"translate(0,90)",strokeWidth:3,stroke:"black"})]})},mn=u.memo(function(){return a.jsxs("defs",{children:[a.jsx("path",{id:"inttick",d:"M 0,0 v 18",strokeLinecap:"square"}),a.jsx("marker",{id:"loop_arrow",refX:.05,refY:.5,orient:"auto",children:a.jsx("path",{d:"M0,0V2L2,0z",fill:"black"})})]})}),un=()=>{const{routes:e}=B(c=>c.helper),{direction:t,direction_gz_x:s,direction_gz_y:n,current_stn_idx:r}=B(c=>c.param),o=u.useMemo(()=>[...new Set(e.reduce((c,d)=>d.includes(r)?c.concat(d.filter(l=>!["linestart","lineend"].includes(l)).slice(t===w.left?0:-1)[0]):c,[]).filter(c=>c!==r))],[r,t,e.toString()]),i={textAnchor:t===w.left?"start":"end",transform:"translate(".concat(t===w.left?65:-65,",-5)"),destIds:o};return a.jsxs("g",{id:"direction_gz",style:{"--x-percentage":s,"--y-percentage":n},children:[a.jsx(K,{transform:"scale(0.35)rotate(".concat(t===w.left?0:180,")")}),o.length!==2?a.jsx(hn,{...i}):a.jsx(Qt,{...i})]})},hn=e=>{const{destIds:t,...s}=e,n=B(r=>r.param.stn_list);return a.jsxs("g",{...s,children:[a.jsx("text",{className:"rmg-name__zh",fontSize:28,children:t.map(r=>n[r].localisedName.zh).join("/")+"方向"}),a.jsx("text",{className:"rmg-name__en",fontSize:14,dy:22,children:"Towards "+t.map(r=>{var o;return(o=n[r].localisedName.en)==null?void 0:o.replace("\\"," ")}).join("/")})]})},fn=u.memo(function(){return a.jsxs("g",{id:"terminus_gz",textAnchor:"middle",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:90,children:"终 点 站"}),a.jsx("text",{dy:70,className:"rmg-name__en",fontSize:36,children:"Terminal"}),a.jsxs("g",{strokeWidth:8,stroke:"#000",children:[a.jsx("path",{d:"M -160,68 h -160"}),a.jsx("path",{d:"M 160,68 h 160"})]})]})}),gn=u.memo(function(t){const s=u.useRef(null),[n,r]=u.useState({width:0,height:0,y:0});return u.useEffect(()=>{s.current&&r(s.current.getBBox())},[t.note[0],t.note[1]]),a.jsxs("g",{className:"note-box",style:{"--x-percentage":t.note[2],"--y-percentage":t.note[3]},children:[t.note[4]&&a.jsx("rect",{height:n.height+4,width:n.width+4,x:-2,y:n.y-2,fill:"none",stroke:"black",strokeWidth:.5}),a.jsxs("g",{ref:s,children:[a.jsx("g",{fontSize:16,letterSpacing:1.2,children:t.note[0].split("\n").map((o,i)=>a.jsx("text",{className:"rmg-name__zh",y:i*18,children:o},i))}),a.jsx("g",{fontSize:10,letterSpacing:.33,transform:"translate(0,".concat(18*t.note[0].split("\n").length,")"),children:t.note[1].split("\n").map((o,i)=>{var c;return a.jsx("text",{className:"rmg-name__en",y:i*11,textLength:i<(((c=t.note[1].match(/\n/g))==null?void 0:c.length)||0)?n.width:navigator.userAgent.includes("Firefox")?-1:0,lengthAdjust:"spacing",children:o},i)})})]})]})},(e,t)=>e.note.toString()===t.note.toString()),te=92,xn=e=>{switch(e){case 2:return .2;case 3:return .1;default:return 0}},yn=u.memo(function(t){var d,l,h;const{stnName:s,bold:n,sparse:r,onUpdate:o}=t,i=u.useRef(null),c=r?xn((d=s.zh)==null?void 0:d.length):0;return u.useEffect(()=>{if(i.current&&o){const f=i.current.getBBox();o({...f,x:f.x+c*te/2,width:f.width-c*te})}},[i.current,JSON.stringify(s),n,r]),a.jsxs("g",{ref:i,fontWeight:n?"bold":"normal",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:te,x:c/2+"em",letterSpacing:c+"em",children:s.zh}),a.jsx("g",{fontSize:40,children:(h=(l=s.en)==null?void 0:l.split("\\"))==null?void 0:h.map((f,m)=>a.jsx("text",{className:"rmg-name__en",dy:72+m*42,children:f},m))})]})},(e,t)=>JSON.stringify(e.stnName)===JSON.stringify(t.stnName)),_n=e=>{const{secondaryName:t,transform:s}=e,n=u.useRef(null),[r,o]=u.useState({x:0,width:0});return u.useEffect(()=>{n.current&&o(n.current.getBBox())},[t.toString()]),a.jsxs("g",{transform:s,children:[a.jsxs("g",{transform:"translate(0,4.5)",fontSize:36,children:[a.jsx("text",{textAnchor:"end",x:r.x-3,className:"rmg-name__zh",children:"("}),a.jsx("text",{textAnchor:"start",x:r.width+r.x+3,className:"rmg-name__zh",children:")"})]}),a.jsxs("g",{ref:n,textAnchor:"middle",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:26,children:t.zh}),a.jsx("text",{dy:22,className:"rmg-name__en",fontSize:14,children:t.en})]})]})},Y=55,nt=18.5*1.4,rt=30,jn=rt*4,at=.82,st=.25,Le=.4,vn=(e,t,s,n,r)=>{const o=r?e.toReversed():e,i=o.indexOf(s),c=[...o,...o].slice(i+1),d=c[0],l=c.slice(1).reduce((f,m)=>{var x;return(x=t[m].transfer.groups[0].lines)!=null&&x.length?[...f,m]:f},[]),h=n?[...l.slice(0,2),n]:l.slice(0,3);return{nextStation:d,viaStations:h}},pn=u.forwardRef(function({stationInfo:t,...s},n){var l,h,f,m,x,j,p,S;const{localisedName:r,transfer:{groups:[{lines:o}]}}=t,[i,c]=u.useState({width:0}),d=u.useRef(null);return u.useEffect(()=>{d.current&&c(d.current.getBBox())},[d.current,JSON.stringify(r)]),a.jsxs("g",{ref:n,...s,children:[a.jsxs("g",{ref:d,children:[a.jsx("text",{className:"rmg-name__zh",fontSize:20,children:r.zh}),(h=(l=r.en)==null?void 0:l.split("\\"))==null?void 0:h.map((v,y)=>a.jsx("text",{className:"rmg-name__en",fontSize:12,dy:19+12*y,children:v},y))]}),a.jsx("g",{transform:"translate(".concat(i.width+2,",7)"),children:(o==null?void 0:o.length)&&a.jsxs(a.Fragment,{children:[a.jsx("path",{d:"M0,0 H8",stroke:(m=(f=o[0].theme)==null?void 0:f[2])!=null?m:"#aaa",strokeWidth:3.5}),a.jsx(Ne,{zhName:o[0].name[0],enName:o[0].name[1],backgroundColour:(j=(x=o[0].theme)==null?void 0:x[2])!=null?j:"#aaa",foregroundColour:(S=(p=o[0].theme)==null?void 0:p[3])!=null?S:D.white,zhClassName:"rmg-name__zh",enClassName:"rmg-name__en",spanDigits:!0,transform:"translate(27,-8.5)scale(0.75)"})]})})]})});function Nn({viaStations:e,stationList:t}){const s=u.useRef([]),[n,r]=u.useState([]);u.useEffect(()=>{s.current=[]},[e,t]),u.useEffect(()=>{r(s.current.map(i=>{var c,d;return(d=(c=i==null?void 0:i.getBBox())==null?void 0:c.height)!=null?d:0}))},[s.current]);const o=u.useCallback(i=>n.slice(0,i).reduce((c,d)=>c+d+4,0),[n]);return a.jsx(a.Fragment,{children:e.map((i,c)=>a.jsx(pn,{ref:d=>s.current[c]=d,stationInfo:t[i],transform:"translate(0,".concat(o(c),")")},i))})}const ne=44,re=25;function Sn({nameBBox:e}){const{svg_height:t,svgWidth:s,direction:n,current_stn_idx:r,stn_list:o,loop_info:{midpoint_station:i,clockwise:c}}=B(_=>_.param),{branches:d}=B(_=>_.helper),l=s[k.RunIn],h=d[0].slice(1,-1),{nextStation:f,viaStations:m}=vn(h,o,r,i,c),{localisedName:{en:x=""},localisedSecondaryName:j}=o[r],{localisedName:{zh:p="",en:S=""}}=o[f],v=S.split("\\").length,y=(l-e.width)/2,g={next:{x:80},nextName:{x:80+ne*1.7},via:{dy:75+25*(v-1)},arrow:{x:n===w.left?(115+50*(.5+p.length)+y)/2-20:((l+e.width)/2+(l*at-jn/2))/2+et*Le/2,y:.5*t-(x.split("\\").length-2)*18-(j?58/2:0),rotate:n===w.left?0:180}};return a.jsxs(a.Fragment,{children:[a.jsxs("g",{transform:"translate(0,".concat(t/2+5-g.via.dy,")"),children:[a.jsxs("g",{textAnchor:"middle",transform:"translate(".concat(g.next.x,",0)"),children:[a.jsxs("g",{fontWeight:"bold",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:ne,children:"下站"}),a.jsx("text",{className:"rmg-name__en",fontSize:re,dy:40,children:"Next"})]}),a.jsxs("g",{transform:"translate(0,".concat(g.via.dy,")"),children:[a.jsx("text",{className:"rmg-name__zh",fontSize:20,children:"途经"}),a.jsx("text",{className:"rmg-name__en",fontSize:12,dy:19,children:"Via"})]})]}),a.jsxs("g",{textAnchor:"start",transform:"translate(".concat(g.nextName.x,",0)"),children:[a.jsxs("g",{fontWeight:"bold",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:ne,children:p}),a.jsx("g",{fontSize:re,children:S.split("\\").map((_,N)=>a.jsx("text",{className:"rmg-name__en",dy:40+N*re,children:_},N))})]}),a.jsx("g",{transform:"translate(0,".concat(g.via.dy,")"),children:a.jsx(Nn,{viaStations:m,stationList:o})})]})]}),a.jsx(K,{transform:"translate(".concat(g.arrow.x,",").concat(g.arrow.y,")scale(").concat(Le,")rotate(").concat(g.arrow.rotate,")")})]})}function bn({secName:e,...t}){const{zh:s,en:n}=e,r=u.useRef(null),[o,i]=u.useState({x:0,width:0});return u.useEffect(()=>{r.current&&i(r.current.getBBox())},[s,n]),a.jsxs("g",{...t,children:[a.jsxs("g",{transform:"translate(0,2.5)",fontSize:25,children:[a.jsx("text",{textAnchor:"end",x:o.x-3,className:"rmg-name__zh",children:"("}),a.jsx("text",{textAnchor:"start",x:o.width+o.x+3,className:"rmg-name__zh",children:")"})]}),a.jsxs("g",{ref:r,children:[a.jsx("text",{className:"rmg-name__zh",fontSize:18,children:s}),a.jsx("text",{className:"rmg-name__en",fontSize:10,dy:15,children:n})]})]})}const X=35,ae=17;function zn({nextId:e,nameBBox:t,ignoreNumWidth:s}){const{svgWidth:n,svg_height:r,direction:o}=B(y=>y.param),i=B(y=>y.param.stn_list[e]),{localisedName:c,localisedSecondaryName:d}=i,{zh:l="",en:h=""}=c,f=n[k.RunIn],[m,x]=u.useState({width:0}),j=u.useRef(null);u.useEffect(()=>{j.current&&x(j.current.getBBox())},[l,h]);const p=l.length,S=(f-t.width)/2,v={next:{x:o===w.left?80:f-45-m.width-X*(p<=2?2:1.5)},nextName:{x:o===w.left?80+X*(p<=2?2:1.5):f-45-m.width},arrow:{x:o===w.left?(115+35*((p<=2?1:.5)+p)+S)/2-20:(f-45-m.width-(p<=2?105:35*2.5)+S+t.width+(s?0:Y+nt))/2+20,y:r/2-30,rotate:o===w.left?0:180}};return a.jsxs(a.Fragment,{children:[a.jsxs("g",{transform:"translate(0,".concat(r/2-40,")"),children:[a.jsxs("g",{textAnchor:"middle",transform:"translate(".concat(v.next.x,",0)"),children:[a.jsx("text",{className:"rmg-name__zh",fontSize:X,children:"下站"}),a.jsx("text",{className:"rmg-name__en",fontSize:ae,dy:30,children:"Next"})]}),a.jsxs("g",{textAnchor:"start",ref:j,transform:"translate(".concat(v.nextName.x,",0)"),children:[a.jsx("text",{className:"rmg-name__zh",fontSize:X,children:l}),a.jsx("g",{fontSize:ae,children:h.split("\\").map((y,g)=>a.jsx("text",{className:"rmg-name__en",dy:30+g*ae,children:y},g))})]}),d&&a.jsx("g",{textAnchor:"middle",transform:"translate(".concat(v.nextName.x,",0)"),children:a.jsx(bn,{secName:d,transform:"translate(".concat(m.width/2,",").concat(30+h.split("\\").length*17+5,")")})})]}),a.jsx(K,{transform:"translate(".concat(v.arrow.x,",").concat(v.arrow.y,")scale(").concat(st,")rotate(").concat(v.arrow.rotate,")")})]})}const wn=()=>{var g,_,N;const{svg_height:e,svgWidth:t,theme:s,direction:n,info_panel_type:r,line_num:o,current_stn_idx:i,stn_list:c}=B(b=>b.param),d=c[i],{localisedName:l,localisedSecondaryName:h}=d,[f,m]=u.useState({width:0}),x=(N=(_=(g=l.en)==null?void 0:g.split("\\"))==null?void 0:_.length)!=null?N:1,j=d[n===w.left?"parents":"children"],p=[O.gz7w,O.gz11].includes(r),S={name:"translate(".concat((n===w.left?1:-1)*t[k.RunIn]/4,",45)"),next:"translate(".concat((n===w.left?1:-1)*t[k.RunIn]/10,",45)")},v=(t[k.RunIn]+f.width)/2+Y,y={nameGroup:{x:t.runin/2,y:.5*e-50-(x-1)*18-(h?29:0)},secondaryName:{x:0,y:70+x*36},stationNumber:{x:v,y:.5*e-30-(x-1)*18-(h?58/2:0)},stationNumberPost2022:{x:n===w.left?v:(t[k.RunIn]-f.width)/2-Y,y:.5*e-(x-2)*18-(h?58/2:0)}};return a.jsxs("g",{children:[a.jsxs("g",{transform:r===O.gz2otis?S.name:"",children:[a.jsxs("g",{textAnchor:"middle",transform:"translate(".concat(y.nameGroup.x,",").concat(y.nameGroup.y,")"),children:[a.jsx(yn,{stnName:l,bold:r===O.gz11,sparse:r===O.gz11,onUpdate:m}),h&&a.jsx(_n,{secondaryName:h,transform:"translate(".concat(y.secondaryName.x,",").concat(y.secondaryName.y,")")})]}),a.jsx(Se,{lineNum:o,stnNum:d.num,strokeColour:s[2],textClassName:"rmg-name__zh",transform:p?"translate(".concat(y.stationNumberPost2022.x,",").concat(y.stationNumberPost2022.y,")"):"translate(".concat(y.stationNumber.x,",").concat(y.stationNumber.y,")"),size:"lg"})]}),r===O.gz11?a.jsx(Sn,{nameBBox:f}):a.jsx("g",{transform:r===O.gz2otis?S.next:"",children:!j||j.includes("linestart")||j.includes("lineend")?a.jsx(a.Fragment,{}):j.length===1?a.jsx(zn,{nextId:j[0],nameBBox:f,ignoreNumWidth:p}):a.jsx(On,{nextIds:j,nameBBox:f,ignoreNumWidth:p})})]})},Fe=27,se=13,Ze=110,On=e=>{const{nextIds:t,nameBBox:s,ignoreNumWidth:n}=e,{routes:r}=B(y=>y.helper),{svgWidth:o,svg_height:i,direction:c,stn_list:d}=B(y=>y.param),l=o[k.RunIn],h=t.map(y=>d[y].localisedName),[f,m]=u.useState({width:0}),x=u.useRef([]);u.useEffect(()=>{m(y=>({...y,width:0})),x.current.forEach(y=>{const g=y==null?void 0:y.getBBox();m(_=>g?_.width>g.width?_:g:_)})},[h.toString()]);const j=e.nextIds.map(y=>r.reduce((g,_)=>_.includes(y)?g.concat(_.filter(N=>!["linestart","lineend"].includes(N)).slice(c===w.left?0:-1)[0]):g,[])),p=Math.max(...h.map(y=>{var g,_;return(_=(g=y.zh)==null?void 0:g.length)!=null?_:0})),S=(l-s.width)/2,v={next:{x:c===w.left?72:l-45-f.width-41},nextName:{x:c===w.left?113:l-45-f.width},arrow:{x:c===w.left?(99+27*(1+p)+S)/2-20:(l-45-f.width-41-27+S+e.nameBBox.width+(n?0:Y+nt))/2+20,y:i/2-30,rotate:c===w.left?0:180}};return a.jsxs(a.Fragment,{children:[a.jsx("g",{transform:"translate(0,".concat(i/2-70,")"),children:h.map((y,g)=>{var _,N;return a.jsxs(u.Fragment,{children:[a.jsxs("g",{textAnchor:"middle",transform:"translate(".concat(v.next.x,",").concat(Ze*g,")"),children:[a.jsx("text",{className:"rmg-name__zh",fontSize:Fe,children:"下站"}),a.jsx("text",{className:"rmg-name__en",fontSize:se,y:22,children:"Next"})]}),a.jsxs("g",{ref:b=>x.current[g]=b,textAnchor:"start",transform:"translate(".concat(v.nextName.x,",").concat(Ze*g,")"),children:[a.jsx("text",{className:"rmg-name__zh",fontSize:Fe,children:y.zh}),(N=(_=y.en)==null?void 0:_.split("\\"))==null?void 0:N.map((b,C)=>a.jsx("text",{className:"rmg-name__en",fontSize:se,y:22+C*se,children:b},C)),a.jsx("text",{className:"rmg-name__zh",fontSize:18.5,y:-35,children:j[g].map(b=>d[b].localisedName.zh).join("/")+"方向"}),a.jsx("text",{className:"rmg-name__en rmg-name__gzmtr--next2-dest",y:-20,children:"Towards "+j[g].map(b=>d[b].localisedName.en).join("/").replace("\\"," ")})]})]},g)})}),a.jsx(K,{transform:"translate(".concat(v.arrow.x,",").concat(v.arrow.y,")scale(").concat(st,")rotate(").concat(v.arrow.rotate,")")})]})};function $n(e){const{num:t,...s}=e;return a.jsxs("g",{textAnchor:"middle",fill:"var(--rmg-theme-fg)",...s,children:[a.jsx("circle",{cx:0,cy:0,r:33,fill:"var(--rmg-theme-colour)"}),a.jsx("text",{className:"rmg-name__en",fontSize:41,dy:-9,children:t}),a.jsx("text",{className:"rmg-name__zh",fontSize:14,dy:11,children:"站台"}),a.jsx("text",{className:"rmg-name__en",fontSize:10,dy:24,children:"Platform"})]})}function Bn(e){const{canvasType:t}=e,{svgWidth:s,svg_height:n}=B(r=>r.param);return a.jsxs("g",{id:"otis_frame",strokeWidth:3,stroke:"black",children:[a.jsx("line",{y2:n,transform:"translate(".concat(s[t]/2,",0)")}),a.jsx("line",{x2:s[t],transform:"translate(0,90)"})]})}const I=rt;function En({coachNumber:e,...t}){return a.jsxs("g",{...t,children:[a.jsx("path",{d:"M-".concat(I,",-").concat(I," a").concat(I,",").concat(I," 0 0,0 0,").concat(2*I," h").concat(2*I," a").concat(I,",").concat(I,", 0 0,0 0,-").concat(2*I,"Z"),fill:"whitesmoke",stroke:"lightgrey"}),a.jsxs("g",{textAnchor:"middle",transform:"translate(-20,-10)",children:[a.jsx("text",{className:"rmg-name__zh",fontSize:25,children:"车厢"}),a.jsx("text",{className:"rmg-name__en",fontSize:20,y:28,children:"Car"})]}),a.jsx("g",{textAnchor:"middle",transform:"translate(30,0)",children:a.jsx("text",{className:"rmg-name__zh",fontSize:36,children:e})})]})}const oe=k.RunIn;function Cn(){const{canvasScale:e}=B(x=>x.app),{svgWidth:t,svg_height:s,direction:n,info_panel_type:r,platform_num:o,psd_num:i,coachNum:c,theme:d}=B(x=>x.param),l=t[oe],h=[O.gz7w,O.gz11].includes(r),f=h?s-78:s/2-30,m={platform:"translate(".concat(n===w.left?50:-50,",45)")};return a.jsxs(Ge,{type:oe,svgWidth:l,svgHeight:s,canvasScale:e,theme:d,children:[a.jsx(Xe,{variant:r,isShowLight:r!==O.gz2otis,isShowPSD:r!==O.gz2otis&&i}),a.jsx("g",{transform:r===O.gz2otis?m.platform:"",children:a.jsx($n,{num:o,style:{"--translate-x":"".concat(n===w.left||r===O.gz11?l-100:100,"px"),"--translate-y":f+"px","--scale":h?1.15:1,transform:"translate(var(--translate-x, 100px), var(--translate-y))scale(var(--scale))"}})}),h&&a.jsx(En,{coachNumber:c,transform:"translate(".concat(l*at,",").concat(s*.58,")")}),a.jsx(wn,{}),r===O.gz2otis&&a.jsx(Bn,{canvasType:oe})]})}const Wn={runin:a.jsx(Cn,{}),railmap:a.jsx(dn,{})};export{Wn as default};
