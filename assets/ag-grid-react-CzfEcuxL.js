import{a as t,d as a,e as Qe,b as He}from"./react-BNX4K-US.js";import{_ as Ye,a as Ze,G as Xe,b as et,V as tt,B as st,c as rt,d as Me,e as nt,f as Ue,g as ot,A as ae,h as at,i as ct,j as lt,C as ve,k as it,T as ut,l as dt,m as pt,F as mt,n as ht,o as Ee,p as ft,H as Ct,q as gt,r as yt,s as Rt,t as vt,R as wt,E as de,u as St,v as bt,w as Et,x as Pt,y as kt}from"./ag-grid-community-BXPI1aQR.js";var Y=a.createContext({}),fe=(e,s,r,o)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const i=e.newAgStackInstance();let u,c,l=!1;return i.then(p=>{if(l){s.destroyBean(p);return}u=p,c=u.getGui(),r.appendChild(c),Ie(o,u)}),()=>{l=!0,u&&(c?.parentElement?.removeChild(c),s.destroyBean(u),o&&Ie(o,void 0))}},Ie=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},se=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),re=class Ve{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const n=new Ve;return n.classesMap={...this.classesMap},n.classesMap[s]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},pe=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},ke=a.version?.split(".")[0],Mt=ke==="16"||ke==="17";function Ft(){return ke==="19"}var ye=!1;function Gt(e){return ye||setTimeout(()=>ye=!1,0),ye=!0,e()}var he=(e,s)=>{!Mt&&e&&!ye?Qe.flushSync(s):s()};function Re(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const o=[],n=[],i=new Map,u=new Map;for(let c=0;c<s.length;c++){const l=s[c];u.set(l.instanceId,l)}for(let c=0;c<e.length;c++){const l=e[c];i.set(l.instanceId,l),u.has(l.instanceId)&&o.push(l)}for(let c=0;c<s.length;c++){const l=s[c],p=l.instanceId;i.has(p)||n.push(l)}return o.length===e.length&&n.length===0?e:o.length===0&&n.length===s.length?s:o.length===0?n:n.length===0?o:[...o,...n]}var _e=t.forwardRef((e,s)=>{const{registry:r,context:o}=t.useContext(Y),n=t.useRef(null),i=t.useRef(null),u=t.useRef(null),c=t.useRef(null),l=t.useRef(null),p=t.useRef(),[d,v]=t.useState(),[g,m]=t.useState(),[E,R]=t.useState(),[f,h]=t.useState(()=>new re),[w,F]=t.useState(()=>new re("ag-hidden")),[P,b]=t.useState(()=>new re("ag-hidden")),[I,A]=t.useState(()=>new re("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>fe(d,o,i.current),[d]);const U=t.useCallback(V=>{if(n.current=V,!V){p.current=o.destroyBean(p.current);return}const y={setInnerRenderer:(k,D)=>{v(k),R(D)},setChildCount:k=>m(k),toggleCss:(k,D)=>h(z=>z.setClass(k,D)),setContractedDisplayed:k=>b(D=>D.setClass("ag-hidden",!k)),setExpandedDisplayed:k=>F(D=>D.setClass("ag-hidden",!k)),setCheckboxVisible:k=>A(D=>D.setClass("ag-invisible",!k)),setCheckboxSpacing:k=>A(D=>D.setClass("ag-group-checkbox-spacing",k))},T=r.createDynamicBean("groupCellRendererCtrl",!0);T&&(p.current=o.createBean(T),p.current.init(y,V,u.current,c.current,l.current,_e,e))},[]),O=t.useMemo(()=>`ag-cell-wrapper ${f.toString()}`,[f]),C=t.useMemo(()=>`ag-group-expanded ${w.toString()}`,[w]),M=t.useMemo(()=>`ag-group-contracted ${P.toString()}`,[P]),B=t.useMemo(()=>`ag-group-checkbox ${I.toString()}`,[I]),S=d&&d.componentFromFramework,_=S?d.componentClass:void 0,G=d==null&&E!=null,H=ot(E);return a.createElement("span",{className:O,ref:U,...e.colDef?{}:{role:p.current?.getCellAriaRole()}},a.createElement("span",{className:C,ref:c}),a.createElement("span",{className:M,ref:l}),a.createElement("span",{className:B,ref:u}),a.createElement("span",{className:"ag-group-value",ref:i},G&&a.createElement(a.Fragment,null,H),S&&a.createElement(_,{...d.params})),a.createElement("span",{className:"ag-group-child-count"},g))}),De=_e,Fe=t.createContext({setMethods:()=>{}}),Bt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:o,setMethods:n}=e,[{key:i,...u},c]=t.useState(s);return t.useEffect(()=>{r(l=>c(l))},[]),a.createElement(Fe.Provider,{value:{setMethods:n}},a.createElement(o,{key:i,...u}))},xt=t.memo(Bt),At=0;function We(){return`agPortalKey_${++At}`}var Le=class{constructor(e,s,r,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=We(),this.portalKey=We(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const o=r[e];if(o)return o.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{this.componentInstance=s,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=He.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Ge(e,s,r){e.forEach(o=>{const n=s[o];n&&(r[o]=n)})}var ne=class extends Le{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=xt}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Ge(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},It=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Dt=class extends ne{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Wt=class extends ne{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:o}=this;return e.label=s,e.icon=r,e.shake=o,e}},Ot=class extends ne{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback()}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function je(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Tt=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Ge(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),je(this.floatingFilterParams,e)}},Nt=class extends ne{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),je(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Ht=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ut=class extends ne{refresh(e){this.sourceParams=e,this.refreshProps()}},Vt=class extends ne{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},_t=class extends ne{refresh(e){this.sourceParams=e,this.refreshProps()}},Lt=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},jt=class extends ne{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Be(){Me(231)}var zt=1e3,$t=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||zt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){he(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Jt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Y),o=s?e.column.getColId():void 0,[n,i]=t.useState(),[u,c]=t.useState(),l=t.useRef(),p=t.useRef(null),d=t.useRef(null),v=t.useRef(null),g=t.useRef(),m=t.useRef();s&&!m.current&&(m.current=new ve(()=>p.current));const E=t.useCallback(w=>{if(p.current=w,l.current=w?r.createBean(new de):r.destroyBean(l.current),!w||!e.isAlive())return;const F={setWidth:b=>{p.current&&(p.current.style.width=b)},toggleCss:(b,I)=>m.current.toggleCss(b,I),setUserStyles:b=>c(b),setAriaSort:b=>{p.current&&(b?St(p.current,b):bt(p.current))},setUserCompDetails:b=>i(b),getUserCompInstance:()=>g.current||void 0};e.setComp(F,w,d.current,v.current,l.current);const P=e.getSelectAllGui();P&&(d.current?.insertAdjacentElement("afterend",P),l.current.addDestroyFunc(()=>P.remove()))},[]);t.useLayoutEffect(()=>fe(n,r,v.current,g),[n]),t.useEffect(()=>{e.setDragSource(p.current)},[n]);const R=t.useMemo(()=>!!(n?.componentFromFramework&&pe(n.componentClass)),[n]),f=n&&n.componentFromFramework,h=n&&n.componentClass;return a.createElement("div",{ref:E,style:u,className:"ag-header-cell","col-id":o,role:"columnheader"},a.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:v,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&R&&a.createElement(h,{...n.params}),f&&!R&&a.createElement(h,{...n.params,ref:g})))},qt=t.memo(Jt),Kt=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Y),[o,n]=t.useState(),[i,u]=t.useState(()=>new re("ag-header-cell","ag-floating-filter")),[c,l]=t.useState(()=>new re),[p,d]=t.useState(()=>new re("ag-floating-filter-button","ag-hidden")),[v,g]=t.useState("false"),[m,E]=t.useState(),[,R]=t.useState(1),f=t.useRef(),h=t.useRef(null),w=t.useRef(null),F=t.useRef(null),P=t.useRef(null),b=t.useRef(),I=t.useRef(),A=y=>{y!=null&&b.current&&b.current(y)},U=t.useCallback(y=>{if(h.current=y,f.current=y?s.createBean(new de):s.destroyBean(f.current),!y)return;I.current=new ae(k=>{b.current=k});const T={toggleCss:(k,D)=>u(z=>z.setClass(k,D)),setUserStyles:k=>n(k),addOrRemoveBodyCssClass:(k,D)=>l(z=>z.setClass(k,D)),setButtonWrapperDisplayed:k=>{d(D=>D.setClass("ag-hidden",!k)),g(k?"false":"true")},setWidth:k=>{h.current&&(h.current.style.width=k)},setCompDetails:k=>E(k),getFloatingFilterComp:()=>I.current?I.current:null,setMenuIcon:k=>P.current?.appendChild(k)};e.setComp(T,y,P.current,w.current,f.current)},[]);t.useLayoutEffect(()=>fe(m,s,w.current,A),[m]);const O=t.useMemo(()=>i.toString(),[i]),C=t.useMemo(()=>c.toString(),[c]),M=t.useMemo(()=>p.toString(),[p]),B=t.useMemo(()=>!!(m&&m.componentFromFramework&&pe(m.componentClass)),[m]),S=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),_=t.useMemo(()=>{if(m)if(S){const y=new Tt(m.params,()=>R(T=>T+1));return A(y),y}else m.componentFromFramework&&Be()},[m]),G=_?.getProps(),H=m&&m.componentFromFramework,V=m&&m.componentClass;return a.createElement("div",{ref:U,style:o,className:O,role:"gridcell"},a.createElement("div",{ref:w,className:C,role:"presentation"},H&&!S&&a.createElement(V,{...m.params,ref:B?()=>{}:A}),H&&S&&a.createElement(Fe.Provider,{value:{setMethods:y=>_.setMethods(y)}},a.createElement(V,{...G}))),a.createElement("div",{ref:F,"aria-hidden":v,className:M,role:"presentation"},a.createElement("button",{ref:P,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Qt=t.memo(Kt),Yt=({ctrl:e})=>{const{context:s}=t.useContext(Y),[r,o]=t.useState(),[n,i]=t.useState(()=>new re),[u,c]=t.useState(()=>new re),[l,p]=t.useState("false"),[d,v]=t.useState(),[g,m]=t.useState(),E=t.useMemo(()=>e.column.getUniqueId(),[]),R=t.useRef(),f=t.useRef(null),h=t.useRef(null),w=t.useRef(null),F=t.useRef(),P=t.useCallback(C=>{if(f.current=C,R.current=C?s.createBean(new de):s.destroyBean(R.current),!C)return;const M={setWidth:B=>{f.current&&(f.current.style.width=B)},toggleCss:(B,S)=>i(_=>_.setClass(B,S)),setUserStyles:B=>o(B),setHeaderWrapperHidden:B=>{const S=w.current;S&&(B?S.style.setProperty("display","none"):S.style.removeProperty("display"))},setHeaderWrapperMaxHeight:B=>{const S=w.current;S&&(B!=null?S.style.setProperty("max-height",`${B}px`):S.style.removeProperty("max-height"),S.classList.toggle("ag-header-cell-comp-wrapper-limited-height",B!=null))},setUserCompDetails:B=>m(B),setResizableDisplayed:B=>{c(S=>S.setClass("ag-hidden",!B)),p(B?"false":"true")},setAriaExpanded:B=>v(B),getUserCompInstance:()=>F.current||void 0};e.setComp(M,C,h.current,w.current,R.current)},[]);t.useLayoutEffect(()=>fe(g,s,w.current),[g]),t.useEffect(()=>{f.current&&e.setDragSource(f.current)},[g]);const b=t.useMemo(()=>!!(g?.componentFromFramework&&pe(g.componentClass)),[g]),I=t.useMemo(()=>"ag-header-group-cell "+n.toString(),[n]),A=t.useMemo(()=>"ag-header-cell-resize "+u.toString(),[u]),U=g&&g.componentFromFramework,O=g&&g.componentClass;return a.createElement("div",{ref:P,style:r,className:I,"col-id":E,role:"columnheader","aria-expanded":d},a.createElement("div",{ref:w,className:"ag-header-cell-comp-wrapper",role:"presentation"},U&&b&&a.createElement(O,{...g.params}),U&&!b&&a.createElement(O,{...g.params,ref:F})),a.createElement("div",{ref:h,"aria-hidden":l,className:A}))},Zt=t.memo(Yt),Xt=({ctrl:e})=>{const{context:s}=t.useContext(Y),{topOffset:r,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),i=e.headerRowClass,[u,c]=t.useState(()=>o+"px"),[l,p]=t.useState(()=>r+"px"),d=t.useRef(null),v=t.useRef(null),[g,m]=t.useState(()=>e.getUpdatedHeaderCtrls()),E=t.useRef(),R=t.useRef(null),f=t.useCallback(F=>{if(R.current=F,E.current=F?s.createBean(new de):s.destroyBean(E.current),!F)return;const P={setHeight:b=>c(b),setTop:b=>p(b),setHeaderCtrls:(b,I,A)=>{v.current=d.current,d.current=b;const U=Re(v.current,b,I);U!==v.current&&he(A,()=>m(U))},setWidth:b=>{R.current&&(R.current.style.width=b)}};e.setComp(P,E.current,!1)},[]),h=t.useMemo(()=>({height:u,top:l}),[u,l]),w=t.useCallback(F=>{switch(e.type){case"group":return a.createElement(Zt,{ctrl:F,key:F.instanceId});case"filter":return a.createElement(Qt,{ctrl:F,key:F.instanceId});default:return a.createElement(qt,{ctrl:F,key:F.instanceId})}},[]);return a.createElement("div",{ref:f,className:i,role:"row",style:h,"aria-rowindex":n},g.map(w))},es=t.memo(Xt),ts=({pinned:e})=>{const[s,r]=t.useState(!0),[o,n]=t.useState([]),{context:i}=t.useContext(Y),u=t.useRef(null),c=t.useRef(null),l=t.useRef(),p=e==="left",d=e==="right",v=!p&&!d,g=t.useCallback(R=>{if(u.current=R,l.current=R?i.createBean(new Ct(e)):i.destroyBean(l.current),!R)return;const f={setDisplayed:r,setCtrls:h=>n(h),setCenterWidth:h=>{c.current&&(c.current.style.width=h)},setViewportScrollLeft:h=>{u.current&&(u.current.scrollLeft=h)},setPinnedContainerWidth:h=>{u.current&&(u.current.style.width=h,u.current.style.minWidth=h,u.current.style.maxWidth=h)}};l.current.setComp(f,u.current)},[]),m=s?"":"ag-hidden",E=()=>o.map(R=>a.createElement(es,{ctrl:R,key:R.instanceId}));return a.createElement(a.Fragment,null,p&&a.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!s,role:"rowgroup"},E()),d&&a.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!s,role:"rowgroup"},E()),v&&a.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"presentation",tabIndex:-1},a.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},E())))},Pe=t.memo(ts),ss=()=>{const[e,s]=t.useState(()=>new re),[r,o]=t.useState(),{context:n}=t.useContext(Y),i=t.useRef(null),u=t.useRef(),c=t.useCallback(d=>{if(i.current=d,u.current=d?n.createBean(new ft):n.destroyBean(u.current),!d)return;const v={toggleCss:(g,m)=>s(E=>E.setClass(g,m)),setHeightAndMinHeight:g=>o(g)};u.current.setComp(v,d,d)},[]),l=t.useMemo(()=>"ag-header "+e.toString(),[e]),p=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:c,className:l,style:p,role:"presentation"},a.createElement(Pe,{pinned:"left"}),a.createElement(Pe,{pinned:null}),a.createElement(Pe,{pinned:"right"}))},rs=t.memo(ss),ns=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const o=r.parentElement;if(o){const n=document.createComment(e);return o.insertBefore(n,r),()=>{o.removeChild(n)}}}},[e])},ie=ns,os=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Ge(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},as=e=>{const s=t.useRef(e),r=t.useRef(),o=t.useRef(!1),n=t.useRef(!1),[,i]=t.useState(0);o.current&&(n.current=!0),t.useEffect(()=>(o.current||(r.current=s.current(),o.current=!0),i(u=>u+1),()=>{n.current&&r.current?.()}),[])},cs=e=>{const[s,r]=t.useState(),o=t.useContext(Y),{context:n,popupSvc:i,localeSvc:u,gos:c,editSvc:l}=o,{editDetails:p,cellCtrl:d,eParentCell:v}=e;return as(()=>{const{compDetails:g}=p,m=c.get("stopEditingWhenCellsLoseFocus"),E=n.createBean(l.createPopupEditorWrapper(g.params)),R=E.getGui();if(e.jsChildComp){const A=e.jsChildComp.getGui();A&&R.appendChild(A)}const{column:f,rowNode:h}=d,w={column:f,rowNode:h,type:"popupCellEditor",eventSource:v,ePopup:R,position:p.popupPosition,keepWithinBounds:!0},F=i?.positionPopupByComponent.bind(i,w),P=kt(u),b=i?.addPopup({modal:m,eChild:R,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:v,positionCallback:F,ariaLabel:P("ariaLabelCellEditor","Cell Editor")}),I=b?b.hideFunc:void 0;return r(E),e.jsChildComp?.afterGuiAttached?.(),()=>{I?.(),n.destroyBean(E)}}),t.useLayoutEffect(()=>()=>{d.isCellFocused()&&s?.getGui().contains(Pt(o))&&v.focus({preventScroll:!0})},[s]),a.createElement(a.Fragment,null,s&&e.wrappedContent&&He.createPortal(e.wrappedContent,s.getGui()))},Oe=t.memo(cs),ls=(e,s,r,o,n,i)=>{const{context:u}=t.useContext(Y),c=t.useCallback(()=>{const l=n.current;if(!l)return;const p=l.getGui();p&&p.parentElement&&p.parentElement.removeChild(p),u.destroyBean(l),n.current=void 0},[]);t.useEffect(()=>{const l=e!=null,p=e?.compDetails&&!e.compDetails.componentFromFramework,d=s&&r==null;if(!(l&&p&&!d)){c();return}const g=e.compDetails;if(n.current){const E=n.current,f=E.refresh!=null&&e.force==!1?E.refresh(g.params):!1;if(f===!0||f===void 0)return;c()}g.newAgStackInstance().then(E=>{if(!E)return;const R=E.getGui();if(!R)return;(s?r:i.current).appendChild(R),n.current=E})},[e,s,o]),t.useEffect(()=>c,[])},is=ls,us=(e,s,r)=>{const{compProxy:o}=e;r(o);const n=o.getProps(),i=pe(s);return a.createElement(Fe.Provider,{value:{setMethods:u=>o.setMethods(u)}},i?a.createElement(s,{...n}):a.createElement(s,{...n,ref:u=>o.setRef(u)}))},Te=(e,s,r)=>{const o=e.compProxy;return a.createElement(a.Fragment,null,o?us(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}))},ds=(e,s,r,o,n)=>{const i=e.compDetails,u=i.componentClass,c=i.componentFromFramework&&!e.popup,l=i.componentFromFramework&&e.popup,p=!i.componentFromFramework&&e.popup;return a.createElement(a.Fragment,null,c&&Te(e,u,s),l&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,wrappedContent:Te(e,u,s)}),p&&n&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,jsChildComp:n}))},ps=(e,s,r,o,n,i,u)=>{const{compDetails:c,value:l}=e,p=!c,d=c&&c.componentFromFramework,v=c&&c.componentClass,g=l?.toString?l.toString():l,m=()=>a.createElement(a.Fragment,null,p&&a.createElement(a.Fragment,null,g),d&&!i&&a.createElement(v,{...c.params,key:s,ref:o}),d&&i&&a.createElement(v,{...c.params,key:s}));return a.createElement(a.Fragment,null,n?a.createElement("span",{role:"presentation",id:`cell-${r}`,className:"ag-cell-value",ref:u},m()):m())},ms=({cellCtrl:e,printLayout:s,editingRow:r})=>{const o=t.useContext(Y),{context:n}=o,{column:{colIdSanitised:i},instanceId:u}=e,c=t.useRef(),[l,p]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[d,v]=t.useState(),[g,m]=t.useState(1),[E,R]=t.useState(),[f,h]=t.useState(!1),[w,F]=t.useState(!1),[P,b]=t.useState(!1),[I,A]=t.useState(),U=t.useMemo(()=>e.isForceWrapper(),[e]),O=t.useMemo(()=>e.getCellAriaRole(),[e]),C=t.useRef(null),M=t.useRef(null),B=t.useRef(null),S=t.useRef(),_=t.useRef(),G=t.useRef(),H=t.useRef([]),V=t.useRef(),[y,T]=t.useState(0),k=t.useCallback(L=>{V.current=L,T($=>$+1)},[]),D=l!=null&&(f||P||w),z=U||D,N=t.useCallback(L=>{if(_.current=L,L){const $=L.isCancelBeforeStart&&L.isCancelBeforeStart();setTimeout(()=>{$?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),x=t.useRef();x.current||(x.current=new ve(()=>C.current)),is(l,z,V.current,y,S,C);const q=t.useRef();t.useLayoutEffect(()=>{const L=q.current,$=l;if(q.current=l,L==null||L.compDetails==null||$==null||$.compDetails==null)return;const K=L.compDetails,ee=$.compDetails;if(K.componentClass!=ee.componentClass||B.current?.refresh==null)return;B.current.refresh(ee.params)!=!0&&m(Q=>Q+1)},[l]),t.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const $=d.compDetails,K=d.popup===!0,ee=$.newAgStackInstance();return ee.then(W=>{if(!W)return;const Q=W.getGui();N(W),K||((U?G:C).current?.appendChild(Q),W.afterGuiAttached&&W.afterGuiAttached()),A(W)}),()=>{ee.then(W=>{const Q=W.getGui();n.destroyBean(W),N(void 0),A(void 0),Q?.parentElement?.removeChild(Q)})}},[d]);const J=t.useCallback(L=>{if(G.current=L,!L){H.current.forEach(K=>K()),H.current=[];return}const $=K=>{if(K){const ee=K.getGui();L.insertAdjacentElement("afterbegin",ee),H.current.push(()=>{n.destroyBean(K),Et(ee)})}return K};if(f){const K=e.createSelectionCheckbox();$(K)}P&&$(e.createDndSource()),w&&$(e.createRowDragComp())},[e,n,P,w,f]),oe=t.useCallback(()=>{const L=!e.isCellSpanning()||M.current,$=C.current;if(c.current=$?n.createBean(new de):n.destroyBean(c.current),!$||!L||!e)return;const K={toggleCss:(W,Q)=>x.current.toggleCss(W,Q),setUserStyles:W=>R(W),getFocusableElement:()=>C.current,setIncludeSelection:W=>h(W),setIncludeRowDrag:W=>F(W),setIncludeDndSource:W=>b(W),getCellEditor:()=>_.current||null,getCellRenderer:()=>B.current??S.current,getParentOfValue:()=>V.current??G.current??C.current,setRenderDetails:(W,Q,le)=>{p(te=>te?.compDetails!==W||te?.value!==Q||te?.force!==le?{value:Q,compDetails:W,force:le}:te)},setEditDetails:(W,Q,le,te)=>{if(W){let Z;te?Z=new os(W.params,()=>m(ce=>ce+1)):W.componentFromFramework&&Be(),v({compDetails:W,popup:Q,popupPosition:le,compProxy:Z}),Q||p(void 0)}else e.hasBrowserFocus()&&K.getFocusableElement().focus({preventScroll:!0}),v(ce=>{ce?.compProxy&&(_.current=void 0)})}},ee=G.current||void 0;e.setComp(K,$,M.current??void 0,ee,s,r,c.current)},[]),ue=t.useCallback(L=>{C.current=L,oe()},[]),we=t.useCallback(L=>{M.current=L,oe()},[]),Se=t.useMemo(()=>!!(l?.compDetails?.componentFromFramework&&pe(l.compDetails.componentClass)),[l]);t.useLayoutEffect(()=>{C.current&&(x.current.toggleCss("ag-cell-value",!z),x.current.toggleCss("ag-cell-inline-editing",!!d&&!d.popup),x.current.toggleCss("ag-cell-popup-editing",!!d&&!!d.popup),x.current.toggleCss("ag-cell-not-inline-editing",!d||!!d.popup),e.setInlineEditingCss())});const Ce=()=>a.createElement(a.Fragment,null,l!=null&&ps(l,g,u,B,z,Se,k),d!=null&&ds(d,N,C.current,e,I)),ge=()=>a.createElement("div",{ref:ue,style:E,role:O,"col-id":i},z?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:J},Ce()):Ce());return e.isCellSpanning()?a.createElement("div",{ref:we,className:"ag-spanned-cell-wrapper",role:"presentation"},ge()):ge()},hs=t.memo(ms),fs=({rowCtrl:e,containerType:s})=>{const{context:r,gos:o}=t.useContext(Y),n=t.useRef(),i=t.useRef(e.getDomOrder()),u=e.isFullWidth(),c=e.rowNode.displayed,[l,p]=t.useState(()=>c?e.rowNode.getRowIndexString():null),[d,v]=t.useState(()=>e.rowId),[g,m]=t.useState(()=>e.businessKey),[E,R]=t.useState(()=>e.rowStyles),f=t.useRef(null),h=t.useRef(null),[w,F]=t.useState(()=>null),[P,b]=t.useState(),[I,A]=t.useState(()=>c?e.getInitialRowTop(s):void 0),[U,O]=t.useState(()=>c?e.getInitialTransform(s):void 0),C=t.useRef(null),M=t.useRef(),B=t.useRef(!1),[S,_]=t.useState(0);t.useEffect(()=>{if(B.current||!P||S>10)return;const x=C.current?.firstChild;x?(e.setupDetailRowAutoHeight(x),B.current=!0):_(q=>q+1)},[P,S]);const G=t.useRef();G.current||(G.current=new ve(()=>C.current));const H=t.useCallback(x=>{if(C.current=x,n.current=x?r.createBean(new de):r.destroyBean(n.current),!x){e.unsetComp(s);return}if(!e.isAlive())return;const q={setTop:A,setTransform:O,toggleCss:(J,oe)=>G.current.toggleCss(J,oe),setDomOrder:J=>i.current=J,setRowIndex:p,setRowId:v,setRowBusinessKey:m,setUserStyles:R,setCellCtrls:(J,oe)=>{h.current=f.current,f.current=J;const ue=Re(h.current,J,i.current);ue!==h.current&&he(oe,()=>F(ue))},showFullWidth:J=>b(J),getFullWidthCellRenderer:()=>M.current,refreshFullWidth:J=>D.current?(b(oe=>({...oe,params:J()})),!0):!M.current||!M.current.refresh?!1:M.current.refresh(J())};e.setComp(q,x,s,n.current)},[]);t.useLayoutEffect(()=>fe(P,r,C.current,M),[P]);const V=t.useMemo(()=>{const x={top:I,transform:U};return Object.assign(x,E),x},[I,U,E]),y=u&&P?.componentFromFramework,T=!u&&w!=null,k=t.useMemo(()=>!!(P?.componentFromFramework&&pe(P.componentClass)),[P]),D=t.useRef(!1);t.useEffect(()=>{D.current=k&&!!P&&!!o.get("reactiveCustomComponents")},[k,P]);const z=()=>w?.map(x=>a.createElement(hs,{cellCtrl:x,editingRow:e.editing,printLayout:e.printLayout,key:x.instanceId})),N=()=>{const x=P.componentClass;return a.createElement(a.Fragment,null,k?a.createElement(x,{...P.params}):a.createElement(x,{...P.params,ref:M}))};return a.createElement("div",{ref:H,role:"row",style:V,"row-index":l,"row-id":d,"row-business-key":g},T&&z(),y&&N())},Ne=t.memo(fs),Cs=({name:e})=>{const{context:s,gos:r}=t.useContext(Y),o=t.useMemo(()=>gt(e),[e]),n=t.useRef(null),i=t.useRef(null),u=t.useRef(null),c=t.useRef([]),l=t.useRef([]),[p,d]=t.useState(()=>[]),v=!!r.get("enableCellSpan")&&!!o.getSpannedRowCtrls,g=t.useRef([]),m=t.useRef([]),[E,R]=t.useState(()=>[]),f=t.useRef(!1),h=t.useRef(),w=t.useMemo(()=>se("ag-viewport",yt(e)),[e]),F=t.useMemo(()=>se(Rt(e)),[e]),P=t.useMemo(()=>se("ag-spanning-container",vt(e)),[e]),b=o.type==="center"||v,I=b?n:i;ie(" AG Row Container "+e+" ",I);const A=t.useCallback(()=>{const G=!b||n.current!=null,H=i.current!=null,V=!v||u.current!=null;return G&&H&&V},[]),U=t.useCallback(()=>n.current==null&&i.current==null&&u.current==null,[]),O=t.useCallback(()=>{if(U()&&(h.current=s.destroyBean(h.current)),A()){const G=y=>{const T=Re(l.current,c.current,f.current);T!==l.current&&(l.current=T,he(y,()=>d(T)))},H=y=>{const T=Re(m.current,g.current,f.current);T!==m.current&&(m.current=T,he(y,()=>R(T)))},V={setHorizontalScroll:y=>{n.current&&(n.current.scrollLeft=y)},setViewportHeight:y=>{n.current&&(n.current.style.height=y)},setRowCtrls:({rowCtrls:y,useFlushSync:T})=>{const k=!!T&&c.current.length>0&&y.length>0;c.current=y,G(k)},setSpannedRowCtrls:(y,T)=>{const k=!!T&&g.current.length>0&&y.length>0;g.current=y,H(k)},setDomOrder:y=>{f.current!=y&&(f.current=y,G(!1))},setContainerWidth:y=>{i.current&&(i.current.style.width=y)},setOffsetTop:y=>{i.current&&(i.current.style.transform=`translateY(${y})`)}};h.current=s.createBean(new wt(e)),h.current.setComp(V,i.current,u.current??void 0,n.current)}},[A,U]),C=t.useCallback(G=>{i.current=G,O()},[O]),M=t.useCallback(G=>{u.current=G,O()},[O]),B=t.useCallback(G=>{n.current=G,O()},[O]),S=()=>a.createElement("div",{className:F,ref:C,role:"rowgroup"},p.map(G=>a.createElement(Ne,{rowCtrl:G,containerType:o.type,key:G.instanceId})));if(!b)return S();const _=()=>v&&a.createElement("div",{className:P,ref:M,role:"rowgroup"},E.map(G=>a.createElement(Ne,{rowCtrl:G,containerType:o.type,key:G.instanceId})));return a.createElement("div",{className:w,ref:B,role:"presentation"},S(),_())},gs=t.memo(Cs),ys=()=>{const e=t.useContext(Y),{context:s,overlays:r}=e,[o,n]=t.useState(""),[i,u]=t.useState(0),[c,l]=t.useState(0),[p,d]=t.useState("0px"),[v,g]=t.useState("0px"),[m,E]=t.useState("100%"),[R,f]=t.useState("0px"),[h,w]=t.useState("0px"),[F,P]=t.useState("100%"),[b,I]=t.useState(!0),[A,U]=t.useState(!0),[O,C]=t.useState(null),[M,B]=t.useState(""),[S,_]=t.useState(null),[G,H]=t.useState("ag-layout-normal"),V=t.useRef();V.current||(V.current=new ve(()=>y.current));const y=t.useRef(null),T=t.useRef(null),k=t.useRef(null),D=t.useRef(null),z=t.useRef(null),N=t.useRef(null),x=t.useRef(null),q=t.useRef([]),J=t.useRef([]);ie(" AG Grid Body ",y),ie(" AG Pinned Top ",T),ie(" AG Sticky Top ",k),ie(" AG Middle ",N),ie(" AG Pinned Bottom ",x);const oe=t.useCallback(Z=>{if(y.current=Z,!Z){q.current=s.destroyBeans(q.current),J.current.forEach(j=>j()),J.current=[];return}if(!s)return;const ce=(j,X)=>{j.appendChild(X),J.current.push(()=>j.removeChild(X))},be=j=>{const X=s.createBean(new j);return q.current.push(X),X},me=(j,X,Ke)=>{ce(j,document.createComment(Ke)),ce(j,be(X).getGui())};me(Z,mt," AG Fake Horizontal Scroll ");const xe=r?.getOverlayWrapperCompClass();xe&&me(Z,xe," AG Overlay Wrapper "),z.current&&me(z.current,ht," AG Fake Vertical Scroll ");const qe={setRowAnimationCssOnBodyViewport:n,setColumnCount:j=>{y.current&&pt(y.current,j)},setRowCount:j=>{y.current&&dt(y.current,j)},setTopHeight:u,setBottomHeight:l,setStickyTopHeight:d,setStickyTopTop:g,setStickyTopWidth:E,setTopInvisible:I,setBottomInvisible:U,setColumnMovingCss:(j,X)=>V.current.toggleCss(j,X),updateLayoutClasses:H,setAlwaysVerticalScrollClass:C,setPinnedTopBottomOverflowY:B,setCellSelectableCss:(j,X)=>_(X?j:null),setBodyViewportWidth:j=>{N.current&&(N.current.style.width=j)},registerBodyViewportResizeListener:j=>{if(N.current){const X=Ue(e,N.current,j);J.current.push(()=>X())}},setStickyBottomHeight:f,setStickyBottomBottom:w,setStickyBottomWidth:P,setGridRootRole:j=>Z.setAttribute("role",j)},Ae=s.createBean(new it);q.current.push(Ae),Ae.setComp(qe,Z,N.current,T.current,x.current,k.current,D.current)},[]),ue=t.useMemo(()=>se("ag-root","ag-unselectable",G),[G]),we=t.useMemo(()=>se("ag-body-viewport",o,G,O,S),[o,G,O,S]),Se=t.useMemo(()=>se("ag-body",G),[G]),Ce=t.useMemo(()=>se("ag-floating-top",b?"ag-invisible":null,S),[S,b]),ge=t.useMemo(()=>se("ag-sticky-top",S),[S]),L=t.useMemo(()=>se("ag-sticky-bottom",R==="0px"?"ag-invisible":null,S),[S,R]),$=t.useMemo(()=>se("ag-floating-bottom",A?"ag-invisible":null,S),[S,A]),K=t.useMemo(()=>({height:i,minHeight:i,overflowY:M}),[i,M]),ee=t.useMemo(()=>({height:p,top:v,width:m}),[p,v,m]),W=t.useMemo(()=>({height:R,bottom:h,width:F}),[R,h,F]),Q=t.useMemo(()=>({height:c,minHeight:c,overflowY:M}),[c,M]),le=Z=>a.createElement(gs,{name:Z,key:`${Z}-container`}),te=({section:Z,children:ce,className:be,style:me})=>a.createElement("div",{ref:Z,className:be,role:"presentation",style:me},ce.map(le));return a.createElement("div",{ref:oe,className:ue},a.createElement(rs,null),te({section:T,className:Ce,style:K,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:Se,ref:z,role:"presentation"},te({section:N,className:we,children:["left","center","right","fullWidth"]})),te({section:k,className:ge,style:ee,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),te({section:D,className:L,style:W,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),te({section:x,className:$,style:Q,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},Rs=t.memo(ys),vs=(e,s)=>{const{children:r,eFocusableElement:o,onTabKeyDown:n,gridCtrl:i,forceFocusOutWhenTabGuardsAreEmpty:u,isEmpty:c}=e,{context:l}=t.useContext(Y),p=t.useRef(null),d=t.useRef(null),v=t.useRef(),g=h=>{const w=h==null?void 0:parseInt(h,10).toString();[p,d].forEach(F=>{w===void 0?F.current?.removeAttribute("tabindex"):F.current?.setAttribute("tabindex",w)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(h){v.current?.forceFocusOutOfContainer(h)}}));const m=t.useCallback(()=>{const h=p.current,w=d.current;if(!h&&!w){v.current=l.destroyBean(v.current);return}if(h&&w){const F={setTabIndex:g};v.current=l.createBean(new ut({comp:F,eTopGuard:h,eBottomGuard:w,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:u,focusInnerElement:P=>i.focusInnerElement(P),isEmpty:c}))}},[]),E=t.useCallback(h=>{p.current=h,m()},[m]),R=t.useCallback(h=>{d.current=h,m()},[m]),f=h=>{const w=h==="top"?Ee.TAB_GUARD_TOP:Ee.TAB_GUARD_BOTTOM;return a.createElement("div",{className:`${Ee.TAB_GUARD} ${w}`,role:"presentation",ref:h==="top"?E:R})};return a.createElement(a.Fragment,null,f("top"),r,f("bottom"))},ws=t.forwardRef(vs),Ss=t.memo(ws),bs=({context:e})=>{const[s,r]=t.useState(""),[o,n]=t.useState(""),[i,u]=t.useState(null),[c,l]=t.useState(null),[p,d]=t.useState(!1),[v,g]=t.useState(),m=t.useRef(),E=t.useRef(null),R=t.useRef(),[f,h]=t.useState(null),w=t.useRef(()=>{}),F=t.useRef(),P=t.useRef([]),b=t.useCallback(()=>{},[]),I=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);ie(" AG Grid ",E);const A=t.useCallback(S=>{if(E.current=S,m.current=S?e.createBean(new at):e.destroyBean(m.current),!S||e.isDestroyed())return;const _=m.current;w.current=_.focusInnerElement.bind(_);const G={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:H=>{if(!H&&F.current?.isDisplayed()){F.current.forceFocusOutOfContainer(H);return}R.current?.forceFocusOutOfContainer(H)},updateLayoutClasses:n,getFocusableContainers:()=>{const H=[],V=E.current?.querySelector(".ag-root");return V&&H.push({getGui:()=>V}),P.current.forEach(y=>{y.isDisplayed()&&H.push(y)}),H},setCursor:u,setUserSelect:l};_.setComp(G,S,S),d(!0)},[]);t.useEffect(()=>{const S=m.current,_=E.current;if(!v||!I||!S||!f||!_)return;const G=[],{watermarkSelector:H,paginationSelector:V,sideBarSelector:y,statusBarSelector:T,gridHeaderDropZonesSelector:k}=S.getOptionalSelectors(),D=[];if(k){const N=e.createBean(new k.component),x=N.getGui();_.insertAdjacentElement("afterbegin",x),D.push(x),G.push(N)}if(y){const N=e.createBean(new y.component),x=N.getGui(),q=f.querySelector(".ag-tab-guard-bottom");q&&(q.insertAdjacentElement("beforebegin",x),D.push(x)),G.push(N),P.current.push(N)}const z=N=>{const x=e.createBean(new N),q=x.getGui();return _.insertAdjacentElement("beforeend",q),D.push(q),G.push(x),x};if(T&&z(T.component),V){const N=z(V.component);F.current=N,P.current.push(N)}return H&&z(H.component),()=>{e.destroyBeans(G),D.forEach(N=>{N.parentElement?.removeChild(N)})}},[v,f,I]);const U=t.useMemo(()=>se("ag-root-wrapper",s,o),[s,o]),O=t.useMemo(()=>se("ag-root-wrapper-body","ag-focus-managed",o),[o]),C=t.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:i??""}),[c,i]),M=t.useCallback(S=>{R.current=S,g(S!==null)},[]),B=t.useCallback(()=>!m.current?.isFocusable(),[]);return a.createElement("div",{ref:A,className:U,style:C,role:"presentation"},a.createElement("div",{className:O,ref:h,role:"presentation"},p&&f&&I&&a.createElement(Y.Provider,{value:I},a.createElement(Ss,{ref:M,eFocusableElement:f,onTabKeyDown:b,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:B},a.createElement(Rs,null)))))},Es=t.memo(bs),Ps=class extends rt{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},ze={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},ks={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...ze},$e=new Set(Object.keys(ks)),Ms=new Set(Object.keys(ze)),Je=e=>{const s=t.useRef(),r=t.useRef(null),o=t.useRef(null),n=t.useRef([]),i=t.useRef([]),u=t.useRef(e),c=t.useRef(),l=t.useRef(),p=t.useRef(!1),[d,v]=t.useState(void 0),[,g]=t.useState(0),m=t.useCallback(f=>{if(r.current=f,!f){n.current.forEach(C=>C()),n.current.length=0;return}const h=e.modules||[];o.current||(o.current=new $t(()=>g(C=>C+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{o.current?.destroy(),o.current=null}));const w=Ye(e.gridOptions,e,Object.keys(e).filter(C=>!$e.has(C))),F=()=>{if(p.current){const C=()=>c.current?.shouldQueueUpdates()?void 0:i.current.shift();let M=C();for(;M;)M(),M=C()}},P=new xs(F);c.current=P;const b=new Ps,I={providedBeanInstances:{frameworkCompWrapper:new Gs(o.current,w.reactiveCustomComponents??Ze("reactiveCustomComponents")??!0),renderStatus:b},modules:h,frameworkOverrides:P,setThemeOnGridDiv:!0},A=C=>{v(C),C.createBean(b),n.current.push(()=>{C.destroy()}),C.getBean("ctrlsSvc").whenReady({addDestroyFunc:M=>{n.current.push(M)}},()=>{if(C.isDestroyed())return;const M=s.current;M&&e.passGridApi?.(M)})},U=C=>{C.getBean("ctrlsSvc").whenReady({addDestroyFunc:M=>{n.current.push(M)}},()=>{i.current.forEach(M=>M()),i.current.length=0,p.current=!0})},O=new Xe;w.gridId??(w.gridId=l.current),s.current=O.create(f,w,A,U,I),n.current.push(()=>{s.current=void 0}),s.current&&(l.current=s.current.getGridId())},[]),E=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),R=t.useCallback(f=>{p.current&&!c.current?.shouldQueueUpdates()?f():i.current.push(f)},[]);return t.useEffect(()=>{const f=Fs(u.current,e);u.current=e,R(()=>{s.current&&et(f,s.current)})},[e]),a.createElement("div",{style:E,className:e.className,ref:m},d&&!d.isDestroyed()?a.createElement(Es,{context:d}):null,o.current?.getPortals()??null)};function Fs(e,s){const r={};return Object.keys(s).forEach(o=>{if($e.has(o)){Ms.has(o)&&Me(274,{prop:o});return}const n=s[o];e[o]!==n&&(r[o]=n)}),r}var Gs=class extends st{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const n=(i=>{switch(i){case"filter":return Ot;case"floatingFilterComponent":return Nt;case"dateComponent":return Dt;case"dragAndDropImageComponent":return Wt;case"loadingOverlayComponent":return Ut;case"noRowsOverlayComponent":return _t;case"statusPanel":return Lt;case"toolPanel":return jt;case"menuItem":return Vt;case"cellRenderer":return It;case"innerHeaderComponent":return Ht}})(s.name);if(n)return new n(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Be();break}const r=!s.cellRenderer&&s.name!=="toolPanel";return new Le(e,this.parent,s,r)}},Bs=t.forwardRef((e,s)=>{const r=t.useContext(Y),{registry:o,context:n,gos:i,rowModel:u}=r,[c,l]=t.useState(()=>new re),[p,d]=t.useState(()=>new re),[v,g]=t.useState(),[m,E]=t.useState(),R=t.useRef(),f=t.useRef(null),h=t.useRef(),w=t.useMemo(()=>nt(e.api.getGridId(),v?.rowModelType??"clientSide"),[e]),F=t.useMemo(()=>c.toString()+" ag-details-row",[c]),P=t.useMemo(()=>p.toString()+" ag-details-grid",[p]);s&&t.useImperativeHandle(s,()=>({refresh(){return R.current?.refresh()??!1}})),e.template&&Me(230);const b=t.useCallback(A=>{if(f.current=A,!A){R.current=n.destroyBean(R.current),h.current?.();return}const U={toggleCss:(C,M)=>l(B=>B.setClass(C,M)),toggleDetailGridCss:(C,M)=>d(B=>B.setClass(C,M)),setDetailGrid:C=>g(C),setRowData:C=>E(C),getGui:()=>f.current},O=o.createDynamicBean("detailCellRendererCtrl",!0);if(O&&(n.createBean(O),O.init(U,e),R.current=O,i.get("detailRowAutoHeight"))){const C=()=>{if(f.current==null)return;const M=f.current.clientHeight;M!=null&&M>0&&setTimeout(()=>{e.node.setRowHeight(M),(ct(i)||lt(i))&&u.onRowHeightChanged()},0)};h.current=Ue(r,A,C),C()}},[]),I=t.useCallback(A=>{R.current?.registerDetailWithMaster(A)},[]);return a.createElement("div",{className:F,ref:b},v&&a.createElement(Je,{className:P,...v,modules:w,rowData:m,passGridApi:I}))}),xs=class extends tt{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:De,agGroupRowRenderer:De,agDetailCellRenderer:Bs},this.wrapIncoming=(s,r)=>r==="ensureVisible"?Gt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Ft()}},Ds=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(Je,{...this.props,passGridApi:this.setGridApi})}};export{Ds as A};
