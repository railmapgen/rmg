import{d as c,a as t,b as We,e as qe}from"./react-Caefwd5V.js";import{_ as Qe,a as Ye,b as Te,c as Ne,C as ge,E as ie,A as ae,H as Ze,G as Xe,d as et,R as tt,e as st,T as rt,f as nt,g as ot,h as at,i as ct,B as lt,V as ut,j as it,k as dt,l as pt,m as mt,F as ht,n as ft,o as Ct,p as gt,q as ve,r as yt,s as Rt,t as vt,u as wt}from"./ag-grid-community-B8OIBZSq.js";var Z=c.createContext({}),he=(e,s,r,o)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const p=e.newAgStackInstance();let l,a,d=!1;return p.then(u=>{if(d){s.destroyBean(u);return}l=u,a=l.getGui(),r.appendChild(a),xe(o,l)}),()=>{var u;d=!0,l&&((u=a==null?void 0:a.parentElement)==null||u.removeChild(a),s.destroyBean(l),o&&xe(o,void 0))}},xe=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},re=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),ee=class He{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const n=new He;return n.classesMap={...this.classesMap},n.classesMap[s]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},de=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},De,Se=(De=c.version)==null?void 0:De.split(".")[0],St=Se==="16"||Se==="17";function bt(){return Se==="19"}var Ce=!1;function Et(e){return Ce||setTimeout(()=>Ce=!1,0),Ce=!0,e()}var be=(e,s)=>{!St&&e&&!Ce?qe.flushSync(s):s()};function Ee(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const o=[],n=[],p=new Map,l=new Map;for(let a=0;a<s.length;a++){const d=s[a];l.set(d.instanceId,d)}for(let a=0;a<e.length;a++){const d=e[a];p.set(d.instanceId,d),l.has(d.instanceId)&&o.push(d)}for(let a=0;a<s.length;a++){const d=s[a],u=d.instanceId;p.has(u)||n.push(d)}return o.length===e.length&&n.length===0?e:o.length===0&&n.length===s.length?s:o.length===0?n:n.length===0?o:[...o,...n]}var Ue=t.forwardRef((e,s)=>{var T;const{registry:r,context:o}=t.useContext(Z),n=t.useRef(null),p=t.useRef(null),l=t.useRef(null),a=t.useRef(null),d=t.useRef(null),u=t.useRef(),[i,C]=t.useState(),[k,w]=t.useState(),[g,y]=t.useState(),[m,h]=t.useState(()=>new ee),[P,v]=t.useState(()=>new ee("ag-hidden")),[f,E]=t.useState(()=>new ee("ag-hidden")),[O,R]=t.useState(()=>new ee("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>he(i,o,p.current),[i]);const F=t.useCallback(I=>{if(n.current=I,!I){u.current=o.destroyBean(u.current);return}const J={setInnerRenderer:(U,A)=>{C(U),y(A)},setChildCount:U=>w(U),addOrRemoveCssClass:(U,A)=>h(H=>H.setClass(U,A)),setContractedDisplayed:U=>E(A=>A.setClass("ag-hidden",!U)),setExpandedDisplayed:U=>v(A=>A.setClass("ag-hidden",!U)),setCheckboxVisible:U=>R(A=>A.setClass("ag-invisible",!U))},V=r.createDynamicBean("groupCellRendererCtrl",!0);V&&(u.current=o.createBean(V),u.current.init(J,I,l.current,a.current,d.current,Ue,e))},[]),W=t.useMemo(()=>"ag-cell-wrapper ".concat(m.toString()),[m]),x=t.useMemo(()=>"ag-group-expanded ".concat(P.toString()),[P]),b=t.useMemo(()=>"ag-group-contracted ".concat(f.toString()),[f]),B=t.useMemo(()=>"ag-group-checkbox ".concat(O.toString()),[O]),G=i&&i.componentFromFramework,z=G?i.componentClass:void 0,S=i==null&&g!=null,M=Qe(g,!0);return c.createElement("span",{className:W,ref:F,...e.colDef?{}:{role:(T=u.current)==null?void 0:T.getCellAriaRole()}},c.createElement("span",{className:x,ref:a}),c.createElement("span",{className:b,ref:d}),c.createElement("span",{className:B,ref:l}),c.createElement("span",{className:"ag-group-value",ref:p},S&&c.createElement(c.Fragment,null,M),G&&c.createElement(z,{...i.params})),c.createElement("span",{className:"ag-group-child-count"},k))}),Ge=Ue,Pe=t.createContext({setMethods:()=>{}}),Pt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:o,setMethods:n}=e,[{key:p,...l},a]=t.useState(s);return t.useEffect(()=>{r(d=>a(d))},[]),c.createElement(Pe.Provider,{value:{setMethods:n}},c.createElement(o,{key:p,...l}))},kt=t.memo(Pt),Mt=0;function Ae(){return"agPortalKey_".concat(++Mt)}var Ve=class{constructor(e,s,r,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Ae(),this.portalKey=Ae(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const o=r[e];if(o)return o.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{var r;this.componentInstance=s,(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=We.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this["".concat(e,"Component")]}};function ke(e,s,r){e.forEach(o=>{const n=s[o];n&&(r[o]=n)})}var oe=class extends Ve{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=kt}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,ke(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Ft=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Bt=class extends oe{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},xt=class extends oe{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:o}=this;return e.label=s,e.icon=r,e.shake=o,e}},Gt=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var s;this.expectingNewMethods===!1&&this.hasBeenActive&&((s=this.providedMethods)==null?void 0:s.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function _e(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var At=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),_e(this.floatingFilterParams,e)}},It=class extends oe{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),_e(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Ot=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},Dt=class extends oe{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Wt=class extends oe{refresh(e){this.sourceParams=e,this.refreshProps()}},Tt=class extends oe{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Nt=class extends oe{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Me(){Te(231)}var Ht=1e3,Ut=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||Ht}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Vt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Z),o=s?e.column.getColId():void 0,[n,p]=t.useState(),l=t.useRef(),a=t.useRef(null),d=t.useRef(null),u=t.useRef(null),i=t.useRef(),C=t.useRef();s&&!C.current&&(C.current=new ge(()=>a.current));const k=t.useCallback(m=>{var v;if(a.current=m,l.current=m?r.createBean(new ie):r.destroyBean(l.current),!m||!s)return;const h={setWidth:f=>{a.current&&(a.current.style.width=f)},addOrRemoveCssClass:(f,E)=>C.current.addOrRemoveCssClass(f,E),setAriaSort:f=>{a.current&&(f?it(a.current,f):dt(a.current))},setUserCompDetails:f=>p(f),getUserCompInstance:()=>i.current||void 0};e.setComp(h,m,d.current,u.current,l.current);const P=e.getSelectAllGui();P&&((v=d.current)==null||v.insertAdjacentElement("afterend",P),l.current.addDestroyFunc(()=>P.remove()))},[]);t.useLayoutEffect(()=>he(n,r,u.current,i),[n]),t.useEffect(()=>{e.setDragSource(a.current)},[n]);const w=t.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&de(n.componentClass)),[n]),g=n&&n.componentFromFramework,y=n&&n.componentClass;return c.createElement("div",{ref:k,className:"ag-header-cell","col-id":o,role:"columnheader"},c.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),c.createElement("div",{ref:u,className:"ag-header-cell-comp-wrapper",role:"presentation"},g&&w&&c.createElement(y,{...n.params}),g&&!w&&c.createElement(y,{...n.params,ref:i})))},_t=t.memo(Vt),Lt=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Z),[o,n]=t.useState(()=>new ee("ag-header-cell","ag-floating-filter")),[p,l]=t.useState(()=>new ee),[a,d]=t.useState(()=>new ee("ag-floating-filter-button","ag-hidden")),[u,i]=t.useState("false"),[C,k]=t.useState(),[,w]=t.useState(1),g=t.useRef(),y=t.useRef(null),m=t.useRef(null),h=t.useRef(null),P=t.useRef(null),v=t.useRef(),f=t.useRef(),E=M=>{M!=null&&v.current&&v.current(M)},O=t.useCallback(M=>{if(y.current=M,g.current=M?s.createBean(new ie):s.destroyBean(g.current),!M)return;f.current=new ae(I=>{v.current=I});const T={addOrRemoveCssClass:(I,J)=>n(V=>V.setClass(I,J)),addOrRemoveBodyCssClass:(I,J)=>l(V=>V.setClass(I,J)),setButtonWrapperDisplayed:I=>{d(J=>J.setClass("ag-hidden",!I)),i(I?"false":"true")},setWidth:I=>{y.current&&(y.current.style.width=I)},setCompDetails:I=>k(I),getFloatingFilterComp:()=>f.current?f.current:null,setMenuIcon:I=>{var J;return(J=P.current)==null?void 0:J.appendChild(I)}};e.setComp(T,M,P.current,m.current,g.current)},[]);t.useLayoutEffect(()=>he(C,s,m.current,E),[C]);const R=t.useMemo(()=>o.toString(),[o]),F=t.useMemo(()=>p.toString(),[p]),W=t.useMemo(()=>a.toString(),[a]),x=t.useMemo(()=>!!(C&&C.componentFromFramework&&de(C.componentClass)),[C]),b=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),B=t.useMemo(()=>{if(C)if(b){const M=new At(C.params,()=>w(T=>T+1));return E(M),M}else C.componentFromFramework&&Me()},[C]),G=B==null?void 0:B.getProps(),z=C&&C.componentFromFramework,S=C&&C.componentClass;return c.createElement("div",{ref:O,className:R,role:"gridcell"},c.createElement("div",{ref:m,className:F,role:"presentation"},z&&!b&&c.createElement(S,{...C.params,ref:x?()=>{}:E}),z&&b&&c.createElement(Pe.Provider,{value:{setMethods:M=>B.setMethods(M)}},c.createElement(S,{...G}))),c.createElement("div",{ref:h,"aria-hidden":u,className:W,role:"presentation"},c.createElement("button",{ref:P,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},jt=t.memo(Lt),$t=({ctrl:e})=>{const{context:s}=t.useContext(Z),[r,o]=t.useState(()=>new ee),[n,p]=t.useState(()=>new ee),[l,a]=t.useState("false"),[d,u]=t.useState(),[i,C]=t.useState(),k=t.useMemo(()=>e.column.getUniqueId(),[]),w=t.useRef(),g=t.useRef(null),y=t.useRef(null),m=t.useRef(null),h=t.useRef(),P=t.useCallback(F=>{if(g.current=F,w.current=F?s.createBean(new ie):s.destroyBean(w.current),!F)return;const W={setWidth:x=>{g.current&&(g.current.style.width=x)},addOrRemoveCssClass:(x,b)=>o(B=>B.setClass(x,b)),setHeaderWrapperHidden:x=>{const b=m.current;b&&(x?b.style.setProperty("display","none"):b.style.removeProperty("display"))},setHeaderWrapperMaxHeight:x=>{const b=m.current;b&&(x!=null?b.style.setProperty("max-height","".concat(x,"px")):b.style.removeProperty("max-height"),b.classList.toggle("ag-header-cell-comp-wrapper-limited-height",x!=null))},setUserCompDetails:x=>C(x),setResizableDisplayed:x=>{p(b=>b.setClass("ag-hidden",!x)),a(x?"false":"true")},setAriaExpanded:x=>u(x),getUserCompInstance:()=>h.current||void 0};e.setComp(W,F,y.current,m.current,w.current)},[]);t.useLayoutEffect(()=>he(i,s,m.current),[i]),t.useEffect(()=>{g.current&&e.setDragSource(g.current)},[i]);const v=t.useMemo(()=>!!((i==null?void 0:i.componentFromFramework)&&de(i.componentClass)),[i]),f=t.useMemo(()=>"ag-header-group-cell "+r.toString(),[r]),E=t.useMemo(()=>"ag-header-cell-resize "+n.toString(),[n]),O=i&&i.componentFromFramework,R=i&&i.componentClass;return c.createElement("div",{ref:P,className:f,"col-id":k,role:"columnheader","aria-expanded":d},c.createElement("div",{ref:m,className:"ag-header-cell-comp-wrapper",role:"presentation"},O&&v&&c.createElement(R,{...i.params}),O&&!v&&c.createElement(R,{...i.params,ref:h})),c.createElement("div",{ref:y,"aria-hidden":l,className:E}))},zt=t.memo($t),Jt=({ctrl:e})=>{const{context:s}=t.useContext(Z),{topOffset:r,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),p=e.headerRowClass,[l,a]=t.useState(()=>o+"px"),[d,u]=t.useState(()=>r+"px"),i=t.useRef(null),C=t.useRef(null),[k,w]=t.useState(()=>e.getHeaderCtrls()),g=t.useRef(),y=t.useRef(null),m=t.useCallback(v=>{if(y.current=v,g.current=v?s.createBean(new ie):s.destroyBean(g.current),!v)return;const f={setHeight:E=>a(E),setTop:E=>u(E),setHeaderCtrls:(E,O,R)=>{C.current=i.current,i.current=E;const F=Ee(C.current,E,O);F!==C.current&&be(R,()=>w(F))},setWidth:E=>{y.current&&(y.current.style.width=E)}};e.setComp(f,g.current,!1)},[]),h=t.useMemo(()=>({height:l,top:d}),[l,d]),P=t.useCallback(v=>{switch(e.type){case"group":return c.createElement(zt,{ctrl:v,key:v.instanceId});case"filter":return c.createElement(jt,{ctrl:v,key:v.instanceId});default:return c.createElement(_t,{ctrl:v,key:v.instanceId})}},[]);return c.createElement("div",{ref:m,className:p,role:"row",style:h,"aria-rowindex":n},k.map(P))},Kt=t.memo(Jt),qt=({pinned:e})=>{const[s,r]=t.useState(!0),[o,n]=t.useState([]),{context:p}=t.useContext(Z),l=t.useRef(null),a=t.useRef(null),d=t.useRef(),u=e==="left",i=e==="right",C=!u&&!i,k=t.useCallback(y=>{if(l.current=y,d.current=y?p.createBean(new Ze(e)):p.destroyBean(d.current),!y)return;const m={setDisplayed:r,setCtrls:h=>n(h),setCenterWidth:h=>{a.current&&(a.current.style.width=h)},setViewportScrollLeft:h=>{l.current&&(l.current.scrollLeft=h)},setPinnedContainerWidth:h=>{l.current&&(l.current.style.width=h,l.current.style.minWidth=h,l.current.style.maxWidth=h)}};d.current.setComp(m,l.current)},[]),w=s?"":"ag-hidden",g=()=>o.map(y=>c.createElement(Kt,{ctrl:y,key:y.instanceId}));return c.createElement(c.Fragment,null,u&&c.createElement("div",{ref:k,className:"ag-pinned-left-header "+w,"aria-hidden":!s,role:"rowgroup"},g()),i&&c.createElement("div",{ref:k,className:"ag-pinned-right-header "+w,"aria-hidden":!s,role:"rowgroup"},g()),C&&c.createElement("div",{ref:k,className:"ag-header-viewport "+w,role:"presentation"},c.createElement("div",{ref:a,className:"ag-header-container",role:"rowgroup"},g())))},we=t.memo(qt),Qt=()=>{const[e,s]=t.useState(()=>new ee),[r,o]=t.useState(),{context:n}=t.useContext(Z),p=t.useRef(null),l=t.useRef(),a=t.useCallback(i=>{if(p.current=i,l.current=i?n.createBean(new Xe):n.destroyBean(l.current),!i)return;const C={addOrRemoveCssClass:(k,w)=>s(g=>g.setClass(k,w)),setHeightAndMinHeight:k=>o(k)};l.current.setComp(C,i,i)},[]),d=t.useMemo(()=>"ag-header "+e.toString(),[e]),u=t.useMemo(()=>({height:r,minHeight:r}),[r]);return c.createElement("div",{ref:a,className:d,style:u,role:"presentation"},c.createElement(we,{pinned:"left"}),c.createElement(we,{pinned:null}),c.createElement(we,{pinned:"right"}))},Yt=t.memo(Qt),Zt=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const o=r.parentElement;if(o){const n=document.createComment(e);return o.insertBefore(n,r),()=>{o.removeChild(n)}}}},[e])},le=Zt,Xt=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){ke(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var s;this.componentInstance=e,(s=this.resolveInstanceCreated)==null||s.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},es=e=>{const s=t.useRef(e),r=t.useRef(),o=t.useRef(!1),n=t.useRef(!1),[,p]=t.useState(0);o.current&&(n.current=!0),t.useEffect(()=>(o.current||(r.current=s.current(),o.current=!0),p(l=>l+1),()=>{var l;n.current&&((l=r.current)==null||l.call(r))}),[])},ts=e=>{const[s,r]=t.useState(),{context:o,popupSvc:n,localeSvc:p,gos:l,editSvc:a}=t.useContext(Z);return es(()=>{var O,R;const{editDetails:d,cellCtrl:u,eParentCell:i}=e,{compDetails:C}=d,k=l.get("stopEditingWhenCellsLoseFocus"),w=o.createBean(a.createPopupEditorWrapper(C.params)),g=w.getGui();if(e.jsChildComp){const F=e.jsChildComp.getGui();F&&g.appendChild(F)}const{column:y,rowNode:m}=u,h={column:y,rowNode:m,type:"popupCellEditor",eventSource:i,ePopup:g,position:d.popupPosition,keepWithinBounds:!0},P=n==null?void 0:n.positionPopupByComponent.bind(n,h),v=pt(p),f=n==null?void 0:n.addPopup({modal:k,eChild:g,closeOnEsc:!0,closedCallback:()=>{u.onPopupEditorClosed()},anchorToElement:i,positionCallback:P,ariaLabel:v("ariaLabelCellEditor","Cell Editor")}),E=f?f.hideFunc:void 0;return r(w),(R=(O=e.jsChildComp)==null?void 0:O.afterGuiAttached)==null||R.call(O),()=>{E==null||E(),o.destroyBean(w)}}),c.createElement(c.Fragment,null,s&&e.wrappedContent&&We.createPortal(e.wrappedContent,s.getGui()))},Ie=t.memo(ts),ss=(e,s,r,o,n,p)=>{const{context:l}=t.useContext(Z),a=t.useCallback(()=>{const d=n.current;if(!d)return;const u=d.getGui();u&&u.parentElement&&u.parentElement.removeChild(u),l.destroyBean(d),n.current=void 0},[]);t.useEffect(()=>{const d=e!=null,u=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,i=s&&r==null;if(!(d&&u&&!i)){a();return}const k=e.compDetails;if(n.current){const g=n.current,m=g.refresh!=null&&e.force==!1?g.refresh(k.params):!1;if(m===!0||m===void 0)return;a()}k.newAgStackInstance().then(g=>{if(!g)return;const y=g.getGui();if(!y)return;(s?r:p.current).appendChild(y),n.current=g})},[e,s,o]),t.useEffect(()=>a,[])},rs=ss,ns=(e,s,r)=>{const{compProxy:o}=e;r(o);const n=o.getProps(),p=de(s);return c.createElement(Pe.Provider,{value:{setMethods:l=>o.setMethods(l)}},p?c.createElement(s,{...n}):c.createElement(s,{...n,ref:l=>o.setRef(l)}))},Oe=(e,s,r)=>{const o=e.compProxy;return c.createElement(c.Fragment,null,o?ns(e,s,r):c.createElement(s,{...e.compDetails.params,ref:r}))},os=(e,s,r,o,n)=>{const p=e.compDetails,l=p.componentClass,a=p.componentFromFramework&&!e.popup,d=p.componentFromFramework&&e.popup,u=!p.componentFromFramework&&e.popup;return c.createElement(c.Fragment,null,a&&Oe(e,l,s),d&&c.createElement(Ie,{editDetails:e,cellCtrl:o,eParentCell:r,wrappedContent:Oe(e,l,s)}),u&&n&&c.createElement(Ie,{editDetails:e,cellCtrl:o,eParentCell:r,jsChildComp:n}))},as=(e,s,r,o,n,p,l)=>{const{compDetails:a,value:d}=e,u=!a,i=a&&a.componentFromFramework,C=a&&a.componentClass,k=d!=null&&d.toString?d.toString():d,w=()=>c.createElement(c.Fragment,null,u&&c.createElement(c.Fragment,null,k),i&&!p&&c.createElement(C,{...a.params,key:s,ref:o}),i&&p&&c.createElement(C,{...a.params,key:s}));return c.createElement(c.Fragment,null,n?c.createElement("span",{role:"presentation",id:"cell-".concat(r),className:"ag-cell-value",ref:l},w()):w())},cs=({cellCtrl:e,printLayout:s,editingRow:r})=>{const{context:o}=t.useContext(Z),{colIdSanitised:n,instanceId:p}=e,l=t.useRef(),[a,d]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[u,i]=t.useState(),[C,k]=t.useState(1),[w,g]=t.useState(),[y,m]=t.useState(!1),[h,P]=t.useState(!1),[v,f]=t.useState(!1),[E,O]=t.useState(),R=t.useMemo(()=>e.isForceWrapper(),[e]),F=t.useMemo(()=>e.getCellAriaRole(),[e]),W=t.useRef(null),x=t.useRef(null),b=t.useRef(),B=t.useRef(),G=t.useRef(),z=t.useRef([]),S=t.useRef(),[M,T]=t.useState(0),I=t.useCallback(_=>{S.current=_,T(q=>q+1)},[]),J=a!=null&&(y||v||h),V=R||J,U=t.useCallback(_=>{if(B.current=_,_){const q=_.isCancelBeforeStart&&_.isCancelBeforeStart();setTimeout(()=>{q?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),A=t.useRef();A.current||(A.current=new ge(()=>W.current)),rs(a,V,S.current,M,b,W);const H=t.useRef();t.useLayoutEffect(()=>{var Y;const _=H.current,q=a;if(H.current=a,_==null||_.compDetails==null||q==null||q.compDetails==null)return;const Q=_.compDetails,D=q.compDetails;if(Q.componentClass!=D.componentClass||((Y=x.current)==null?void 0:Y.refresh)==null)return;x.current.refresh(D.params)!=!0&&k(j=>j+1)},[a]),t.useLayoutEffect(()=>{if(!(u&&!u.compDetails.componentFromFramework))return;const q=u.compDetails,Q=u.popup===!0,D=q.newAgStackInstance();return D.then(L=>{if(!L)return;const Y=L.getGui();if(U(L),!Q){const j=(R?G:W).current;j==null||j.appendChild(Y),L.afterGuiAttached&&L.afterGuiAttached()}O(L)}),()=>{D.then(L=>{var j;const Y=L.getGui();o.destroyBean(L),U(void 0),O(void 0),(j=Y==null?void 0:Y.parentElement)==null||j.removeChild(Y)})}},[u]);const N=t.useCallback(_=>{if(G.current=_,!_){z.current.forEach(Q=>Q()),z.current=[];return}const q=Q=>{if(Q){const D=Q.getGui();_.insertAdjacentElement("afterbegin",D),z.current.push(()=>{o.destroyBean(Q),mt(D)})}return Q};if(y){const Q=e.createSelectionCheckbox();q(Q)}v&&q(e.createDndSource()),h&&q(e.createRowDragComp())},[e,o,v,h,y]),te=t.useCallback(_=>{if(W.current=_,l.current=_?o.createBean(new ie):o.destroyBean(l.current),!_||!e)return;const q={addOrRemoveCssClass:(D,L)=>A.current.addOrRemoveCssClass(D,L),setUserStyles:D=>g(D),getFocusableElement:()=>W.current,setIncludeSelection:D=>m(D),setIncludeRowDrag:D=>P(D),setIncludeDndSource:D=>f(D),getCellEditor:()=>B.current||null,getCellRenderer:()=>{var D;return(D=x.current)!=null?D:b.current},getParentOfValue:()=>{var D,L;return(L=(D=S.current)!=null?D:G.current)!=null?L:W.current},setRenderDetails:(D,L,Y)=>{d(j=>(j==null?void 0:j.compDetails)!==D||(j==null?void 0:j.value)!==L||(j==null?void 0:j.force)!==Y?{value:L,compDetails:D,force:Y}:j)},setEditDetails:(D,L,Y,j)=>{if(D){let ce;j?ce=new Xt(D.params,()=>k(ye=>ye+1)):D.componentFromFramework&&Me(),i({compDetails:D,popup:L,popupPosition:Y,compProxy:ce}),L||d(void 0)}else i(ce=>{ce!=null&&ce.compProxy&&(B.current=void 0)})}},Q=G.current||void 0;e.setComp(q,_,Q,s,r,l.current)},[]),K=t.useMemo(()=>{var q;return!!(((q=a==null?void 0:a.compDetails)==null?void 0:q.componentFromFramework)&&de(a.compDetails.componentClass))},[a]);t.useLayoutEffect(()=>{W.current&&(A.current.addOrRemoveCssClass("ag-cell-value",!V),A.current.addOrRemoveCssClass("ag-cell-inline-editing",!!u&&!u.popup),A.current.addOrRemoveCssClass("ag-cell-popup-editing",!!u&&!!u.popup),A.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!u||!!u.popup),e.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.editing&&W.current.focus({preventScroll:!0}))});const ne=()=>c.createElement(c.Fragment,null,a!=null&&as(a,C,p,x,V,K,I),u!=null&&os(u,U,W.current,e,E)),ue=t.useCallback(()=>e.onFocusOut(),[]);return c.createElement("div",{ref:te,style:w,role:F,"col-id":n,onBlur:ue},V?c.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:N},ne()):ne())},ls=t.memo(cs),us=({rowCtrl:e,containerType:s})=>{const{context:r,gos:o}=t.useContext(Z),n=t.useRef(),p=t.useRef(e.getDomOrder()),l=e.isFullWidth(),a=e.rowNode.displayed,[d,u]=t.useState(()=>a?e.rowNode.getRowIndexString():null),[i,C]=t.useState(()=>e.rowId),[k,w]=t.useState(()=>e.businessKey),[g,y]=t.useState(()=>e.rowStyles),m=t.useRef(null),h=t.useRef(null),[P,v]=t.useState(()=>null),[f,E]=t.useState(),[O,R]=t.useState(()=>a?e.getInitialRowTop(s):void 0),[F,W]=t.useState(()=>a?e.getInitialTransform(s):void 0),x=t.useRef(null),b=t.useRef(),B=t.useRef(!1),[G,z]=t.useState(0);t.useEffect(()=>{var te;if(B.current||!f||G>10)return;const N=(te=x.current)==null?void 0:te.firstChild;N?(e.setupDetailRowAutoHeight(N),B.current=!0):z(K=>K+1)},[f,G]);const S=t.useRef();S.current||(S.current=new ge(()=>x.current));const M=t.useCallback(N=>{if(x.current=N,n.current=N?r.createBean(new ie):r.destroyBean(n.current),!N){e.unsetComp(s);return}if(!e.isAlive())return;const te={setTop:R,setTransform:W,addOrRemoveCssClass:(K,ne)=>S.current.addOrRemoveCssClass(K,ne),setDomOrder:K=>p.current=K,setRowIndex:u,setRowId:C,setRowBusinessKey:w,setUserStyles:y,setCellCtrls:(K,ne)=>{h.current=m.current,m.current=K;const ue=Ee(h.current,K,p.current);ue!==h.current&&be(ne,()=>v(ue))},showFullWidth:K=>E(K),getFullWidthCellRenderer:()=>b.current,refreshFullWidth:K=>U.current?(E(ne=>({...ne,params:K()})),!0):!b.current||!b.current.refresh?!1:b.current.refresh(K())};e.setComp(te,N,s,n.current)},[]);t.useLayoutEffect(()=>he(f,r,x.current,b),[f]);const T=t.useMemo(()=>{const N={top:O,transform:F};return Object.assign(N,g),N},[O,F,g]),I=l&&(f==null?void 0:f.componentFromFramework),J=!l&&P!=null,V=t.useMemo(()=>!!((f==null?void 0:f.componentFromFramework)&&de(f.componentClass)),[f]),U=t.useRef(!1);t.useEffect(()=>{U.current=V&&!!f&&!!o.get("reactiveCustomComponents")},[V,f]);const A=()=>P==null?void 0:P.map(N=>c.createElement(ls,{cellCtrl:N,editingRow:e.editing,printLayout:e.printLayout,key:N.instanceId})),H=()=>{const N=f.componentClass;return c.createElement(c.Fragment,null,V?c.createElement(N,{...f.params}):c.createElement(N,{...f.params,ref:b}))};return c.createElement("div",{ref:M,role:"row",style:T,"row-index":d,"row-id":i,"row-business-key":k},J&&A(),I&&H())},is=t.memo(us),ds=({name:e})=>{const{context:s}=t.useContext(Z),r=t.useMemo(()=>et(e),[e]),o=t.useRef(null),n=t.useRef(null),p=t.useRef([]),l=t.useRef([]),[a,d]=t.useState(()=>[]),u=t.useRef(!1),i=t.useRef(),C=t.useMemo(()=>re(r.viewport),[r]),k=t.useMemo(()=>re(r.container),[r]),w=r.type==="center",g=w?o:n;le(" AG Row Container "+e+" ",g);const y=t.useCallback(()=>w?o.current!=null&&n.current!=null:n.current!=null,[]),m=t.useCallback(()=>w?o.current==null&&n.current==null:n.current==null,[]),h=t.useCallback(()=>{if(m()&&(i.current=s.destroyBean(i.current)),y()){const E=R=>{const F=Ee(l.current,p.current,u.current);F!==l.current&&(l.current=F,be(R,()=>d(F)))},O={setHorizontalScroll:R=>{o.current&&(o.current.scrollLeft=R)},setViewportHeight:R=>{o.current&&(o.current.style.height=R)},setRowCtrls:({rowCtrls:R,useFlushSync:F})=>{const W=!!F&&p.current.length>0&&R.length>0;p.current=R,E(W)},setDomOrder:R=>{u.current!=R&&(u.current=R,E(!1))},setContainerWidth:R=>{n.current&&(n.current.style.width=R)},setOffsetTop:R=>{n.current&&(n.current.style.transform="translateY(".concat(R,")"))}};i.current=s.createBean(new tt(e)),i.current.setComp(O,n.current,o.current)}},[y,m]),P=t.useCallback(E=>{n.current=E,h()},[h]),v=t.useCallback(E=>{o.current=E,h()},[h]),f=()=>c.createElement("div",{className:k,ref:P,role:"rowgroup"},a.map(E=>c.createElement(is,{rowCtrl:E,containerType:r.type,key:E.instanceId})));return c.createElement(c.Fragment,null,w?c.createElement("div",{className:C,ref:v,role:"presentation"},f()):f())},ps=t.memo(ds),ms=()=>{const e=t.useContext(Z),{context:s,overlays:r}=e,[o,n]=t.useState(""),[p,l]=t.useState(0),[a,d]=t.useState(0),[u,i]=t.useState("0px"),[C,k]=t.useState("0px"),[w,g]=t.useState("100%"),[y,m]=t.useState("0px"),[h,P]=t.useState("0px"),[v,f]=t.useState("100%"),[E,O]=t.useState(""),[R,F]=t.useState(""),[W,x]=t.useState(null),[b,B]=t.useState(""),[G,z]=t.useState(null),[S,M]=t.useState("ag-layout-normal"),T=t.useRef();T.current||(T.current=new ge(()=>I.current));const I=t.useRef(null),J=t.useRef(null),V=t.useRef(null),U=t.useRef(null),A=t.useRef(null),H=t.useRef(null),N=t.useRef(null),te=t.useRef([]),K=t.useRef([]);le(" AG Grid Body ",I),le(" AG Pinned Top ",J),le(" AG Sticky Top ",V),le(" AG Middle ",H),le(" AG Pinned Bottom ",N);const ne=t.useCallback(se=>{if(I.current=se,!se){te.current=s.destroyBeans(te.current),K.current.forEach($=>$()),K.current=[];return}if(!s)return;const fe=($,X)=>{$.appendChild(X),K.current.push(()=>$.removeChild(X))},Re=$=>{const X=s.createBean(new $);return te.current.push(X),X},me=($,X,Ke)=>{fe($,document.createComment(Ke)),fe($,Re(X).getGui())};me(se,ht," AG Fake Horizontal Scroll ");const Fe=r==null?void 0:r.getOverlayWrapperCompClass();Fe&&me(se,Fe," AG Overlay Wrapper "),A.current&&me(A.current,ft," AG Fake Vertical Scroll ");const Je={setRowAnimationCssOnBodyViewport:n,setColumnCount:$=>{I.current&&Ct(I.current,$)},setRowCount:$=>{I.current&&gt(I.current,$)},setTopHeight:l,setBottomHeight:d,setStickyTopHeight:i,setStickyTopTop:k,setStickyTopWidth:g,setTopDisplay:O,setBottomDisplay:F,setColumnMovingCss:($,X)=>T.current.addOrRemoveCssClass($,X),updateLayoutClasses:M,setAlwaysVerticalScrollClass:x,setPinnedTopBottomOverflowY:B,setCellSelectableCss:($,X)=>z(X?$:null),setBodyViewportWidth:$=>{H.current&&(H.current.style.width=$)},registerBodyViewportResizeListener:$=>{if(H.current){const X=Ne(e,H.current,$);K.current.push(()=>X())}},setStickyBottomHeight:m,setStickyBottomBottom:P,setStickyBottomWidth:f,setGridRootRole:$=>se.setAttribute("role",$)},Be=s.createBean(new st);te.current.push(Be),Be.setComp(Je,se,H.current,J.current,N.current,V.current,U.current)},[]),ue=t.useMemo(()=>re("ag-root","ag-unselectable",S),[S]),_=t.useMemo(()=>re("ag-body-viewport",o,S,W,G),[o,S,W,G]),q=t.useMemo(()=>re("ag-body",S),[S]),Q=t.useMemo(()=>re("ag-floating-top",G),[G]),D=t.useMemo(()=>re("ag-sticky-top",G),[G]),L=t.useMemo(()=>re("ag-sticky-bottom",y==="0px"?"ag-hidden":null,G),[G,y]),Y=t.useMemo(()=>re("ag-floating-bottom",G),[G]),j=t.useMemo(()=>({height:p,minHeight:p,display:E,overflowY:b}),[p,E,b]),ce=t.useMemo(()=>({height:u,top:C,width:w}),[u,C,w]),ye=t.useMemo(()=>({height:y,bottom:h,width:v}),[y,h,v]),$e=t.useMemo(()=>({height:a,minHeight:a,display:R,overflowY:b}),[a,R,b]),ze=se=>c.createElement(ps,{name:se,key:"".concat(se,"-container")}),pe=({section:se,children:fe,className:Re,style:me})=>c.createElement("div",{ref:se,className:Re,role:"presentation",style:me},fe.map(ze));return c.createElement("div",{ref:ne,className:ue},c.createElement(Yt,null),pe({section:J,className:Q,style:j,children:["topLeft","topCenter","topRight","topFullWidth"]}),c.createElement("div",{className:q,ref:A,role:"presentation"},pe({section:H,className:_,children:["left","center","right","fullWidth"]})),pe({section:V,className:D,style:ce,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),pe({section:U,className:L,style:ye,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),pe({section:N,className:Y,style:$e,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},hs=t.memo(ms),fs=(e,s)=>{const{children:r,eFocusableElement:o,onTabKeyDown:n,gridCtrl:p,forceFocusOutWhenTabGuardsAreEmpty:l}=e,{context:a}=t.useContext(Z),d=t.useRef(null),u=t.useRef(null),i=t.useRef(),C=m=>{const h=m==null?void 0:parseInt(m,10).toString();[d,u].forEach(P=>{var v,f;h===void 0?(v=P.current)==null||v.removeAttribute("tabindex"):(f=P.current)==null||f.setAttribute("tabindex",h)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(m){var h;(h=i.current)==null||h.forceFocusOutOfContainer(m)}}));const k=t.useCallback(()=>{const m=d.current,h=u.current;if(!m&&!h){i.current=a.destroyBean(i.current);return}if(m&&h){const P={setTabIndex:C};i.current=a.createBean(new rt({comp:P,eTopGuard:m,eBottomGuard:h,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:l,focusInnerElement:v=>p.focusInnerElement(v)}))}},[]),w=t.useCallback(m=>{d.current=m,k()},[k]),g=t.useCallback(m=>{u.current=m,k()},[k]),y=m=>{const h=m==="top"?ve.TAB_GUARD_TOP:ve.TAB_GUARD_BOTTOM;return c.createElement("div",{className:"".concat(ve.TAB_GUARD," ").concat(h),role:"presentation",ref:m==="top"?w:g})};return c.createElement(c.Fragment,null,y("top"),r,y("bottom"))},Cs=t.forwardRef(fs),gs=t.memo(Cs),ys=({context:e})=>{const[s,r]=t.useState(""),[o,n]=t.useState(""),[p,l]=t.useState(null),[a,d]=t.useState(null),[u,i]=t.useState(!1),[C,k]=t.useState(),w=t.useRef(),g=t.useRef(null),y=t.useRef(),[m,h]=t.useState(null),P=t.useRef(()=>{}),v=t.useRef(),f=t.useRef([]),E=t.useCallback(()=>{},[]),O=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);le(" AG Grid ",g);const R=t.useCallback(B=>{if(g.current=B,w.current=B?e.createBean(new nt):e.destroyBean(w.current),!B||e.isDestroyed())return;const G=w.current;P.current=G.focusInnerElement.bind(G);const z={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:S=>{var M,T;if(!S&&((M=v.current)!=null&&M.isDisplayed())){v.current.forceFocusOutOfContainer(S);return}(T=y.current)==null||T.forceFocusOutOfContainer(S)},updateLayoutClasses:n,getFocusableContainers:()=>{var T;const S=[],M=(T=g.current)==null?void 0:T.querySelector(".ag-root");return M&&S.push({getGui:()=>M}),f.current.forEach(I=>{I.isDisplayed()&&S.push(I)}),S},setCursor:l,setUserSelect:d};G.setComp(z,B,B),i(!0)},[]);t.useEffect(()=>{const B=w.current,G=g.current;if(!C||!O||!B||!m||!G)return;const z=[],{watermarkSelector:S,paginationSelector:M,sideBarSelector:T,statusBarSelector:I,gridHeaderDropZonesSelector:J}=B.getOptionalSelectors(),V=[];if(J){const A=e.createBean(new J.component),H=A.getGui();G.insertAdjacentElement("afterbegin",H),V.push(H),z.push(A)}if(T){const A=e.createBean(new T.component),H=A.getGui(),N=m.querySelector(".ag-tab-guard-bottom");N&&(N.insertAdjacentElement("beforebegin",H),V.push(H)),z.push(A),f.current.push(A)}const U=A=>{const H=e.createBean(new A),N=H.getGui();return G.insertAdjacentElement("beforeend",N),V.push(N),z.push(H),H};if(I&&U(I.component),M){const A=U(M.component);v.current=A,f.current.push(A)}return S&&U(S.component),()=>{e.destroyBeans(z),V.forEach(A=>{var H;(H=A.parentElement)==null||H.removeChild(A)})}},[C,m,O]);const F=t.useMemo(()=>re("ag-root-wrapper",s,o),[s,o]),W=t.useMemo(()=>re("ag-root-wrapper-body","ag-focus-managed",o),[o]),x=t.useMemo(()=>({userSelect:a!=null?a:"",WebkitUserSelect:a!=null?a:"",cursor:p!=null?p:""}),[a,p]),b=t.useCallback(B=>{y.current=B,k(B!==null)},[]);return c.createElement("div",{ref:R,className:F,style:x,role:"presentation"},c.createElement("div",{className:W,ref:h,role:"presentation"},u&&m&&O&&c.createElement(Z.Provider,{value:O},c.createElement(gs,{ref:b,eFocusableElement:m,onTabKeyDown:E,gridCtrl:w.current,forceFocusOutWhenTabGuardsAreEmpty:!0},c.createElement(hs,null)))))},Rs=t.memo(ys),vs=class extends wt{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},ws={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,setGridApi:void 0,componentWrappingElement:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Le=new Set(Object.keys(ws)),je=e=>{var m,h;const s=t.useRef(),r=t.useRef(null),o=t.useRef(null),n=t.useRef([]),p=t.useRef([]),l=t.useRef(e),a=t.useRef(),d=t.useRef(),u=t.useRef(!1),[i,C]=t.useState(void 0),[,k]=t.useState(0),w=t.useCallback(P=>{var B,G,z;if(r.current=P,!P){n.current.forEach(S=>S()),n.current.length=0;return}const v=e.modules||[];o.current||(o.current=new Ut(()=>k(S=>S+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var S;(S=o.current)==null||S.destroy(),o.current=null}));const f=ot(e.gridOptions,e,Object.keys(e).filter(S=>!Le.has(S))),E=()=>{if(u.current){const S=()=>{var T;return(T=a.current)!=null&&T.shouldQueueUpdates()?void 0:p.current.shift()};let M=S();for(;M;)M(),M=S()}},O=new Ps(E);a.current=O;const R=new vs,F={providedBeanInstances:{frameworkCompWrapper:new bs(o.current,(G=(B=f.reactiveCustomComponents)!=null?B:at("reactiveCustomComponents"))!=null?G:!0),renderStatus:R},modules:v,frameworkOverrides:O,setThemeOnGridDiv:!0},W=S=>{C(S),S.createBean(R),n.current.push(()=>{S.destroy()}),S.getBean("ctrlsSvc").whenReady({addDestroyFunc:M=>{n.current.push(M)}},()=>{var T;if(S.isDestroyed())return;const M=s.current;M&&((T=e.setGridApi)==null||T.call(e,M))})},x=S=>{S.getBean("ctrlsSvc").whenReady({addDestroyFunc:M=>{n.current.push(M)}},()=>{p.current.forEach(M=>M()),p.current.length=0,u.current=!0})},b=new yt;(z=f.gridId)!=null||(f.gridId=d.current),s.current=b.create(P,f,W,x,F),n.current.push(()=>{s.current=void 0}),s.current&&(d.current=s.current.getGridId())},[]),g=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),y=t.useCallback(P=>{var v;u.current&&!((v=a.current)!=null&&v.shouldQueueUpdates())?P():p.current.push(P)},[]);return t.useEffect(()=>{const P=Ss(l.current,e);l.current=e,y(()=>{s.current&&ct(P,s.current)})},[e]),c.createElement("div",{style:g,className:e.className,ref:w},i&&!i.isDestroyed()?c.createElement(Rs,{context:i}):null,(h=(m=o.current)==null?void 0:m.getPortals())!=null?h:null)};function Ss(e,s){const r={};return Object.keys(s).forEach(o=>{if(Le.has(o))return;const n=s[o];e[o]!==n&&(r[o]=n)}),r}var bs=class extends lt{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const n=(p=>{switch(p){case"filter":return Gt;case"floatingFilterComponent":return It;case"dateComponent":return Bt;case"dragAndDropImageComponent":return xt;case"loadingOverlayComponent":return Ot;case"noRowsOverlayComponent":return Wt;case"statusPanel":return Tt;case"toolPanel":return Nt;case"menuItem":return Dt;case"cellRenderer":return Ft}})(s.name);if(n)return new n(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Me();break}const r=!s.cellRenderer&&s.name!=="toolPanel";return new Ve(e,this.parent,s,r)}},Es=t.forwardRef((e,s)=>{const r=t.useContext(Z),{registry:o,context:n,gos:p,rowModel:l}=r,[a,d]=t.useState(()=>new ee),[u,i]=t.useState(()=>new ee),[C,k]=t.useState(),[w,g]=t.useState(),y=t.useRef(),m=t.useRef(null),h=t.useRef(),P=t.useMemo(()=>{var R;return Ye(e.api.getGridId(),(R=C==null?void 0:C.rowModelType)!=null?R:"clientSide")},[e]),v=t.useMemo(()=>a.toString()+" ag-details-row",[a]),f=t.useMemo(()=>u.toString()+" ag-details-grid",[u]);s&&t.useImperativeHandle(s,()=>({refresh(){var R,F;return(F=(R=y.current)==null?void 0:R.refresh())!=null?F:!1}})),e.template&&Te(230);const E=t.useCallback(R=>{var x;if(m.current=R,!R){y.current=n.destroyBean(y.current),(x=h.current)==null||x.call(h);return}const F={addOrRemoveCssClass:(b,B)=>d(G=>G.setClass(b,B)),addOrRemoveDetailGridCssClass:(b,B)=>i(G=>G.setClass(b,B)),setDetailGrid:b=>k(b),setRowData:b=>g(b),getGui:()=>m.current},W=o.createDynamicBean("detailCellRendererCtrl",!0);if(W&&(n.createBean(W),W.init(F,e),y.current=W,p.get("detailRowAutoHeight"))){const b=()=>{if(m.current==null)return;const B=m.current.clientHeight;B!=null&&B>0&&setTimeout(()=>{e.node.setRowHeight(B),(Rt(p)||vt(p))&&l.onRowHeightChanged()},0)};h.current=Ne(r,R,b),b()}},[]),O=t.useCallback(R=>{var F;(F=y.current)==null||F.registerDetailWithMaster(R)},[]);return c.createElement("div",{className:v,ref:E},C&&c.createElement(je,{className:f,...C,modules:P,rowData:w,setGridApi:O}))}),Ps=class extends ut{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:Ge,agGroupRowRenderer:Ge,agDetailCellRenderer:Es},this.wrapIncoming=(s,r)=>r==="ensureVisible"?Et(s):s(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return bt()}},Fs=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return c.createElement(je,{...this.props,setGridApi:this.setGridApi})}};export{Fs as A};
