import{a as t,d as a,e as Ye,b as Ue}from"./react-CQn0JGeQ.js";import{_ as Ze,a as Xe,G as et,b as tt,V as st,B as rt,c as nt,d as Me,e as ot,f as Ve,g as at,A as ce,h as ct,i as lt,j as it,C as ve,k as ut,T as dt,l as pt,m as mt,F as ht,n as ft,o as Ee,p as Ct,H as gt,q as yt,r as Rt,s as wt,t as vt,R as St,E as pe,u as bt,v as Et,w as Pt,x as kt,y as Mt}from"./ag-grid-community-COD8nEvx.js";var Z=a.createContext({}),Ce=(e,s,r,o)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const i=e.newAgStackInstance();let u,c,l=!1;return i.then(d=>{if(l){s.destroyBean(d);return}u=d,c=u.getGui(),r.appendChild(c),Ie(o,u)}),()=>{var d;l=!0,u&&((d=c==null?void 0:c.parentElement)==null||d.removeChild(c),s.destroyBean(u),o&&Ie(o,void 0))}},Ie=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},se=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),re=class _e{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const n=new _e;return n.classesMap={...this.classesMap},n.classesMap[s]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},me=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},He,ke=(He=a.version)==null?void 0:He.split(".")[0],Ft=ke==="16"||ke==="17";function Bt(){return ke==="19"}var Re=!1;function xt(e){return Re||setTimeout(()=>Re=!1,0),Re=!0,e()}var fe=(e,s)=>{!Ft&&e&&!Re?Ye.flushSync(s):s()};function we(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const o=[],n=[],i=new Map,u=new Map;for(let c=0;c<s.length;c++){const l=s[c];u.set(l.instanceId,l)}for(let c=0;c<e.length;c++){const l=e[c];i.set(l.instanceId,l),u.has(l.instanceId)&&o.push(l)}for(let c=0;c<s.length;c++){const l=s[c],d=l.instanceId;i.has(d)||n.push(l)}return o.length===e.length&&n.length===0?e:o.length===0&&n.length===s.length?s:o.length===0?n:n.length===0?o:[...o,...n]}var Le=t.forwardRef((e,s)=>{var H;const{registry:r,context:o}=t.useContext(Z),n=t.useRef(null),i=t.useRef(null),u=t.useRef(null),c=t.useRef(null),l=t.useRef(null),d=t.useRef(),[p,v]=t.useState(),[R,h]=t.useState(),[b,S]=t.useState(),[w,m]=t.useState(()=>new re),[g,P]=t.useState(()=>new re("ag-hidden")),[y,M]=t.useState(()=>new re("ag-hidden")),[F,k]=t.useState(()=>new re("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>Ce(p,o,i.current),[p]);const O=t.useCallback(A=>{if(n.current=A,!A){d.current=o.destroyBean(d.current);return}const I={setInnerRenderer:(W,V)=>{v(W),S(V)},setChildCount:W=>h(W),toggleCss:(W,V)=>m(_=>_.setClass(W,V)),setContractedDisplayed:W=>M(V=>V.setClass("ag-hidden",!W)),setExpandedDisplayed:W=>P(V=>V.setClass("ag-hidden",!W)),setCheckboxVisible:W=>k(V=>V.setClass("ag-invisible",!W)),setCheckboxSpacing:W=>k(V=>V.setClass("ag-group-checkbox-spacing",W))},B=r.createDynamicBean("groupCellRendererCtrl",!0);B&&(d.current=o.createBean(B),d.current.init(I,A,u.current,c.current,l.current,Le,e))},[]),U=t.useMemo(()=>"ag-cell-wrapper ".concat(w.toString()),[w]),T=t.useMemo(()=>"ag-group-expanded ".concat(g.toString()),[g]),D=t.useMemo(()=>"ag-group-contracted ".concat(y.toString()),[y]),E=t.useMemo(()=>"ag-group-checkbox ".concat(F.toString()),[F]),C=p&&p.componentFromFramework,L=C?p.componentClass:void 0,f=p==null&&b!=null,G=at(b);return a.createElement("span",{className:U,ref:O,...e.colDef?{}:{role:(H=d.current)==null?void 0:H.getCellAriaRole()}},a.createElement("span",{className:T,ref:c}),a.createElement("span",{className:D,ref:l}),a.createElement("span",{className:E,ref:u}),a.createElement("span",{className:"ag-group-value",ref:i},f&&a.createElement(a.Fragment,null,G),C&&a.createElement(L,{...p.params})),a.createElement("span",{className:"ag-group-child-count"},R))}),We=Le,Fe=t.createContext({setMethods:()=>{}}),Gt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:o,setMethods:n}=e,[{key:i,...u},c]=t.useState(s);return t.useEffect(()=>{r(l=>c(l))},[]),a.createElement(Fe.Provider,{value:{setMethods:n}},a.createElement(o,{key:i,...u}))},At=t.memo(Gt),It=0;function De(){return"agPortalKey_".concat(++It)}var je=class{constructor(e,s,r,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=De(),this.portalKey=De(),this.instanceCreated=this.isStatelessComponent()?ce.resolve(!1):new ce(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const o=r[e];if(o)return o.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ce(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{var r;this.componentInstance=s,(r=this.resolveInstanceCreated)==null||r.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Ue.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this["".concat(e,"Component")];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this["".concat(e,"Component")]}};function Be(e,s,r){e.forEach(o=>{const n=s[o];n&&(r[o]=n)})}var ne=class extends je{constructor(){super(...arguments),this.awaitUpdateCallback=new ce(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=At}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ce(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Be(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ce(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Wt=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Dt=class extends ne{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Ot=class extends ne{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:o}=this;return e.label=s,e.icon=r,e.shake=o,e}},Tt=class extends ne{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ce(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){var r;const s=this.providedMethods;s?(r=s.afterGuiAttached)==null||r.call(s,e):this.awaitSetMethodsCallback.then(()=>{var o,n;return(n=(o=this.providedMethods)==null?void 0:o.afterGuiAttached)==null?void 0:n.call(o,e)})}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var s;this.expectingNewMethods===!1&&this.hasBeenActive&&((s=this.providedMethods)==null?void 0:s.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback()}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function $e(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ce.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Nt=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Be(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),$e(this.floatingFilterParams,e)}},Ht=class extends ne{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),$e(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Ut=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Vt=class extends ne{refresh(e){this.sourceParams=e,this.refreshProps()}},_t=class extends ne{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Lt=class extends ne{refresh(e){this.sourceParams=e,this.refreshProps()}},jt=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},$t=class extends ne{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function xe(){Me(231)}var zt=1e3,Jt=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||zt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate){fe(!0,()=>this.refresher()),e.rendered()&&s(e);return}window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},qt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Z),o=s?e.column.getColId():void 0,[n,i]=t.useState(),[u,c]=t.useState(),l=t.useRef(),d=t.useRef(null),p=t.useRef(null),v=t.useRef(null),R=t.useRef(),h=t.useRef();s&&!h.current&&(h.current=new ve(()=>d.current));const b=t.useCallback(g=>{var M;if(d.current=g,l.current=g?r.createBean(new pe):r.destroyBean(l.current),!g||!e.isAlive())return;const P={setWidth:F=>{d.current&&(d.current.style.width=F)},toggleCss:(F,k)=>h.current.toggleCss(F,k),setUserStyles:F=>c(F),setAriaSort:F=>{d.current&&(F?bt(d.current,F):Et(d.current))},setUserCompDetails:F=>i(F),getUserCompInstance:()=>R.current||void 0};e.setComp(P,g,p.current,v.current,l.current);const y=e.getSelectAllGui();y&&((M=p.current)==null||M.insertAdjacentElement("afterend",y),l.current.addDestroyFunc(()=>y.remove()))},[]);t.useLayoutEffect(()=>Ce(n,r,v.current,R),[n]),t.useEffect(()=>{e.setDragSource(d.current)},[n]);const S=t.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&me(n.componentClass)),[n]),w=n&&n.componentFromFramework,m=n&&n.componentClass;return a.createElement("div",{ref:b,style:u,className:"ag-header-cell","col-id":o,role:"columnheader"},a.createElement("div",{ref:p,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:v,className:"ag-header-cell-comp-wrapper",role:"presentation"},w&&S&&a.createElement(m,{...n.params}),w&&!S&&a.createElement(m,{...n.params,ref:R})))},Kt=t.memo(qt),Qt=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Z),[o,n]=t.useState(),[i,u]=t.useState(()=>new re("ag-header-cell","ag-floating-filter")),[c,l]=t.useState(()=>new re),[d,p]=t.useState(()=>new re("ag-floating-filter-button","ag-hidden")),[v,R]=t.useState("false"),[h,b]=t.useState(),[,S]=t.useState(1),w=t.useRef(),m=t.useRef(null),g=t.useRef(null),P=t.useRef(null),y=t.useRef(null),M=t.useRef(),F=t.useRef(),k=A=>{A!=null&&M.current&&M.current(A)},O=t.useCallback(A=>{if(m.current=A,w.current=A?s.createBean(new pe):s.destroyBean(w.current),!A)return;F.current=new ce(B=>{M.current=B});const I={toggleCss:(B,W)=>u(V=>V.setClass(B,W)),setUserStyles:B=>n(B),addOrRemoveBodyCssClass:(B,W)=>l(V=>V.setClass(B,W)),setButtonWrapperDisplayed:B=>{p(W=>W.setClass("ag-hidden",!B)),R(B?"false":"true")},setWidth:B=>{m.current&&(m.current.style.width=B)},setCompDetails:B=>b(B),getFloatingFilterComp:()=>F.current?F.current:null,setMenuIcon:B=>{var W;return(W=y.current)==null?void 0:W.appendChild(B)}};e.setComp(I,A,y.current,g.current,w.current)},[]);t.useLayoutEffect(()=>Ce(h,s,g.current,k),[h]);const U=t.useMemo(()=>i.toString(),[i]),T=t.useMemo(()=>c.toString(),[c]),D=t.useMemo(()=>d.toString(),[d]),E=t.useMemo(()=>!!(h&&h.componentFromFramework&&me(h.componentClass)),[h]),C=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),L=t.useMemo(()=>{if(h)if(C){const A=new Nt(h.params,()=>S(I=>I+1));return k(A),A}else h.componentFromFramework&&xe()},[h]),f=L==null?void 0:L.getProps(),G=h&&h.componentFromFramework,H=h&&h.componentClass;return a.createElement("div",{ref:O,style:o,className:U,role:"gridcell"},a.createElement("div",{ref:g,className:T,role:"presentation"},G&&!C&&a.createElement(H,{...h.params,ref:E?()=>{}:k}),G&&C&&a.createElement(Fe.Provider,{value:{setMethods:A=>L.setMethods(A)}},a.createElement(H,{...f}))),a.createElement("div",{ref:P,"aria-hidden":v,className:D,role:"presentation"},a.createElement("button",{ref:y,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},Yt=t.memo(Qt),Zt=({ctrl:e})=>{const{context:s}=t.useContext(Z),[r,o]=t.useState(),[n,i]=t.useState(()=>new re),[u,c]=t.useState(()=>new re),[l,d]=t.useState("false"),[p,v]=t.useState(),[R,h]=t.useState(),b=t.useMemo(()=>e.column.getUniqueId(),[]),S=t.useRef(),w=t.useRef(null),m=t.useRef(null),g=t.useRef(null),P=t.useRef(),y=t.useCallback(T=>{if(w.current=T,S.current=T?s.createBean(new pe):s.destroyBean(S.current),!T)return;const D={setWidth:E=>{w.current&&(w.current.style.width=E)},toggleCss:(E,C)=>i(L=>L.setClass(E,C)),setUserStyles:E=>o(E),setHeaderWrapperHidden:E=>{const C=g.current;C&&(E?C.style.setProperty("display","none"):C.style.removeProperty("display"))},setHeaderWrapperMaxHeight:E=>{const C=g.current;C&&(E!=null?C.style.setProperty("max-height","".concat(E,"px")):C.style.removeProperty("max-height"),C.classList.toggle("ag-header-cell-comp-wrapper-limited-height",E!=null))},setUserCompDetails:E=>h(E),setResizableDisplayed:E=>{c(C=>C.setClass("ag-hidden",!E)),d(E?"false":"true")},setAriaExpanded:E=>v(E),getUserCompInstance:()=>P.current||void 0};e.setComp(D,T,m.current,g.current,S.current)},[]);t.useLayoutEffect(()=>Ce(R,s,g.current),[R]),t.useEffect(()=>{w.current&&e.setDragSource(w.current)},[R]);const M=t.useMemo(()=>!!((R==null?void 0:R.componentFromFramework)&&me(R.componentClass)),[R]),F=t.useMemo(()=>"ag-header-group-cell "+n.toString(),[n]),k=t.useMemo(()=>"ag-header-cell-resize "+u.toString(),[u]),O=R&&R.componentFromFramework,U=R&&R.componentClass;return a.createElement("div",{ref:y,style:r,className:F,"col-id":b,role:"columnheader","aria-expanded":p},a.createElement("div",{ref:g,className:"ag-header-cell-comp-wrapper",role:"presentation"},O&&M&&a.createElement(U,{...R.params}),O&&!M&&a.createElement(U,{...R.params,ref:P})),a.createElement("div",{ref:m,"aria-hidden":l,className:k}))},Xt=t.memo(Zt),es=({ctrl:e})=>{const{context:s}=t.useContext(Z),{topOffset:r,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),i=e.headerRowClass,[u,c]=t.useState(()=>o+"px"),[l,d]=t.useState(()=>r+"px"),p=t.useRef(null),v=t.useRef(null),[R,h]=t.useState(()=>e.getUpdatedHeaderCtrls()),b=t.useRef(),S=t.useRef(null),w=t.useCallback(P=>{if(S.current=P,b.current=P?s.createBean(new pe):s.destroyBean(b.current),!P)return;const y={setHeight:M=>c(M),setTop:M=>d(M),setHeaderCtrls:(M,F,k)=>{v.current=p.current,p.current=M;const O=we(v.current,M,F);O!==v.current&&fe(k,()=>h(O))},setWidth:M=>{S.current&&(S.current.style.width=M)}};e.setComp(y,b.current,!1)},[]),m=t.useMemo(()=>({height:u,top:l}),[u,l]),g=t.useCallback(P=>{switch(e.type){case"group":return a.createElement(Xt,{ctrl:P,key:P.instanceId});case"filter":return a.createElement(Yt,{ctrl:P,key:P.instanceId});default:return a.createElement(Kt,{ctrl:P,key:P.instanceId})}},[]);return a.createElement("div",{ref:w,className:i,role:"row",style:m,"aria-rowindex":n},R.map(g))},ts=t.memo(es),ss=({pinned:e})=>{const[s,r]=t.useState(!0),[o,n]=t.useState([]),{context:i}=t.useContext(Z),u=t.useRef(null),c=t.useRef(null),l=t.useRef(),d=e==="left",p=e==="right",v=!d&&!p,R=t.useCallback(S=>{if(u.current=S,l.current=S?i.createBean(new gt(e)):i.destroyBean(l.current),!S)return;const w={setDisplayed:r,setCtrls:m=>n(m),setCenterWidth:m=>{c.current&&(c.current.style.width=m)},setViewportScrollLeft:m=>{u.current&&(u.current.scrollLeft=m)},setPinnedContainerWidth:m=>{u.current&&(u.current.style.width=m,u.current.style.minWidth=m,u.current.style.maxWidth=m)}};l.current.setComp(w,u.current)},[]),h=s?"":"ag-hidden",b=()=>o.map(S=>a.createElement(ts,{ctrl:S,key:S.instanceId}));return a.createElement(a.Fragment,null,d&&a.createElement("div",{ref:R,className:"ag-pinned-left-header "+h,"aria-hidden":!s,role:"rowgroup"},b()),p&&a.createElement("div",{ref:R,className:"ag-pinned-right-header "+h,"aria-hidden":!s,role:"rowgroup"},b()),v&&a.createElement("div",{ref:R,className:"ag-header-viewport "+h,role:"presentation",tabIndex:-1},a.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},b())))},Pe=t.memo(ss),rs=()=>{const[e,s]=t.useState(()=>new re),[r,o]=t.useState(),{context:n}=t.useContext(Z),i=t.useRef(null),u=t.useRef(),c=t.useCallback(p=>{if(i.current=p,u.current=p?n.createBean(new Ct):n.destroyBean(u.current),!p)return;const v={toggleCss:(R,h)=>s(b=>b.setClass(R,h)),setHeightAndMinHeight:R=>o(R)};u.current.setComp(v,p,p)},[]),l=t.useMemo(()=>"ag-header "+e.toString(),[e]),d=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:c,className:l,style:d,role:"presentation"},a.createElement(Pe,{pinned:"left"}),a.createElement(Pe,{pinned:null}),a.createElement(Pe,{pinned:"right"}))},ns=t.memo(rs),os=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const o=r.parentElement;if(o){const n=document.createComment(e);return o.insertBefore(n,r),()=>{o.removeChild(n)}}}},[e])},ue=os,as=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ce(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Be(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var s;this.componentInstance=e,(s=this.resolveInstanceCreated)==null||s.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},cs=e=>{const s=t.useRef(e),r=t.useRef(),o=t.useRef(!1),n=t.useRef(!1),[,i]=t.useState(0);o.current&&(n.current=!0),t.useEffect(()=>(o.current||(r.current=s.current(),o.current=!0),i(u=>u+1),()=>{var u;n.current&&((u=r.current)==null||u.call(r))}),[])},ls=e=>{const[s,r]=t.useState(),o=t.useContext(Z),{context:n,popupSvc:i,localeSvc:u,gos:c,editSvc:l}=o,{editDetails:d,cellCtrl:p,eParentCell:v}=e;return cs(()=>{var k,O;const{compDetails:R}=d,h=c.get("stopEditingWhenCellsLoseFocus"),b=n.createBean(l.createPopupEditorWrapper(R.params)),S=b.getGui();if(e.jsChildComp){const U=e.jsChildComp.getGui();U&&S.appendChild(U)}const{column:w,rowNode:m}=p,g={column:w,rowNode:m,type:"popupCellEditor",eventSource:v,ePopup:S,position:d.popupPosition,keepWithinBounds:!0},P=i==null?void 0:i.positionPopupByComponent.bind(i,g),y=Mt(u),M=i==null?void 0:i.addPopup({modal:h,eChild:S,closeOnEsc:!0,closedCallback:()=>{p.onPopupEditorClosed()},anchorToElement:v,positionCallback:P,ariaLabel:y("ariaLabelCellEditor","Cell Editor")}),F=M?M.hideFunc:void 0;return r(b),(O=(k=e.jsChildComp)==null?void 0:k.afterGuiAttached)==null||O.call(k),()=>{F==null||F(),n.destroyBean(b)}}),t.useLayoutEffect(()=>()=>{p.isCellFocused()&&(s!=null&&s.getGui().contains(kt(o)))&&v.focus({preventScroll:!0})},[s]),a.createElement(a.Fragment,null,s&&e.wrappedContent&&Ue.createPortal(e.wrappedContent,s.getGui()))},Oe=t.memo(ls),is=(e,s,r,o,n,i)=>{const{context:u}=t.useContext(Z),c=t.useCallback(()=>{const l=n.current;if(!l)return;const d=l.getGui();d&&d.parentElement&&d.parentElement.removeChild(d),u.destroyBean(l),n.current=void 0},[]);t.useEffect(()=>{const l=e!=null,d=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,p=s&&r==null;if(!(l&&d&&!p)){c();return}const R=e.compDetails;if(n.current){const b=n.current,w=b.refresh!=null&&e.force==!1?b.refresh(R.params):!1;if(w===!0||w===void 0)return;c()}R.newAgStackInstance().then(b=>{if(!b)return;const S=b.getGui();if(!S)return;(s?r:i.current).appendChild(S),n.current=b})},[e,s,o]),t.useEffect(()=>c,[])},us=is,ds=(e,s,r)=>{const{compProxy:o}=e;r(o);const n=o.getProps(),i=me(s);return a.createElement(Fe.Provider,{value:{setMethods:u=>o.setMethods(u)}},i?a.createElement(s,{...n}):a.createElement(s,{...n,ref:u=>o.setRef(u)}))},Te=(e,s,r)=>{const o=e.compProxy;return a.createElement(a.Fragment,null,o?ds(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}))},ps=(e,s,r,o,n)=>{const i=e.compDetails,u=i.componentClass,c=i.componentFromFramework&&!e.popup,l=i.componentFromFramework&&e.popup,d=!i.componentFromFramework&&e.popup;return a.createElement(a.Fragment,null,c&&Te(e,u,s),l&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,wrappedContent:Te(e,u,s)}),d&&n&&a.createElement(Oe,{editDetails:e,cellCtrl:o,eParentCell:r,jsChildComp:n}))},ms=(e,s,r,o,n,i,u)=>{const{compDetails:c,value:l}=e,d=!c,p=c&&c.componentFromFramework,v=c&&c.componentClass,R=l!=null&&l.toString?l.toString():l,h=()=>a.createElement(a.Fragment,null,d&&a.createElement(a.Fragment,null,R),p&&!i&&a.createElement(v,{...c.params,key:s,ref:o}),p&&i&&a.createElement(v,{...c.params,key:s}));return a.createElement(a.Fragment,null,n?a.createElement("span",{role:"presentation",id:"cell-".concat(r),className:"ag-cell-value",ref:u},h()):h())},hs=({cellCtrl:e,printLayout:s,editingRow:r})=>{const o=t.useContext(Z),{context:n}=o,{column:{colIdSanitised:i},instanceId:u}=e,c=t.useRef(),[l,d]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[p,v]=t.useState(),[R,h]=t.useState(1),[b,S]=t.useState(),[w,m]=t.useState(!1),[g,P]=t.useState(!1),[y,M]=t.useState(!1),[F,k]=t.useState(),O=t.useMemo(()=>e.isForceWrapper(),[e]),U=t.useMemo(()=>e.getCellAriaRole(),[e]),T=t.useRef(null),D=t.useRef(null),E=t.useRef(null),C=t.useRef(),L=t.useRef(),f=t.useRef(),G=t.useRef([]),H=t.useRef(),[A,I]=t.useState(0),B=t.useCallback(j=>{H.current=j,I(J=>J+1)},[]),W=l!=null&&(w||y||g),V=O||W,_=t.useCallback(j=>{if(L.current=j,j){const J=j.isCancelBeforeStart&&j.isCancelBeforeStart();setTimeout(()=>{J?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),x=t.useRef();x.current||(x.current=new ve(()=>T.current)),us(l,V,H.current,A,C,T);const Q=t.useRef();t.useLayoutEffect(()=>{var N;const j=Q.current,J=l;if(Q.current=l,j==null||j.compDetails==null||J==null||J.compDetails==null)return;const Y=j.compDetails,te=J.compDetails;if(Y.componentClass!=te.componentClass||((N=E.current)==null?void 0:N.refresh)==null)return;E.current.refresh(te.params)!=!0&&h(q=>q+1)},[l]),t.useLayoutEffect(()=>{if(!(p&&!p.compDetails.componentFromFramework))return;const J=p.compDetails,Y=p.popup===!0,te=J.newAgStackInstance();return te.then(X=>{if(!X)return;const N=X.getGui();if(_(X),!Y){const q=(O?f:T).current;q==null||q.appendChild(N),X.afterGuiAttached&&X.afterGuiAttached()}k(X)}),()=>{te.then(X=>{var q;const N=X.getGui();n.destroyBean(X),_(void 0),k(void 0),(q=N==null?void 0:N.parentElement)==null||q.removeChild(N)})}},[p]);const K=t.useCallback(j=>{if(f.current=j,!j){G.current.forEach(Y=>Y()),G.current=[];return}const J=Y=>{if(Y){const te=Y.getGui();j.insertAdjacentElement("afterbegin",te),G.current.push(()=>{n.destroyBean(Y),Pt(te)})}return Y};if(w){const Y=e.createSelectionCheckbox();J(Y)}y&&J(e.createDndSource()),g&&J(e.createRowDragComp())},[e,n,y,g,w]),oe=t.useCallback(()=>{var X;const j=!e.isCellSpanning()||D.current,J=T.current;if(c.current=J?n.createBean(new pe):n.destroyBean(c.current),!J||!j||!e)return;const Y={toggleCss:(N,q)=>x.current.toggleCss(N,q),setUserStyles:N=>S(N),getFocusableElement:()=>T.current,setIncludeSelection:N=>m(N),setIncludeRowDrag:N=>P(N),setIncludeDndSource:N=>M(N),getCellEditor:()=>L.current||null,getCellRenderer:()=>{var N;return(N=E.current)!=null?N:C.current},getParentOfValue:()=>{var N,q;return(q=(N=H.current)!=null?N:f.current)!=null?q:T.current},setRenderDetails:(N,q,ae)=>{d($=>($==null?void 0:$.compDetails)!==N||($==null?void 0:$.value)!==q||($==null?void 0:$.force)!==ae?{value:q,compDetails:N,force:ae}:$)},setEditDetails:(N,q,ae,$)=>{if(N){let ie;$?ie=new as(N.params,()=>h(le=>le+1)):N.componentFromFramework&&xe(),v({compDetails:N,popup:q,popupPosition:ae,compProxy:ie}),q||d(void 0)}else e.hasBrowserFocus()&&Y.getFocusableElement().focus({preventScroll:!0}),v(le=>{le!=null&&le.compProxy&&(L.current=void 0)})}},te=f.current||void 0;e.setComp(Y,J,(X=D.current)!=null?X:void 0,te,s,r,c.current)},[]),de=t.useCallback(j=>{T.current=j,oe()},[]),Se=t.useCallback(j=>{D.current=j,oe()},[]),be=t.useMemo(()=>{var J;return!!(((J=l==null?void 0:l.compDetails)==null?void 0:J.componentFromFramework)&&me(l.compDetails.componentClass))},[l]);t.useLayoutEffect(()=>{T.current&&(x.current.toggleCss("ag-cell-value",!V),x.current.toggleCss("ag-cell-inline-editing",!!p&&!p.popup),x.current.toggleCss("ag-cell-popup-editing",!!p&&!!p.popup),x.current.toggleCss("ag-cell-not-inline-editing",!p||!!p.popup),e.setInlineEditingCss())});const ge=()=>a.createElement(a.Fragment,null,l!=null&&ms(l,R,u,E,V,be,B),p!=null&&ps(p,_,T.current,e,F)),ye=()=>a.createElement("div",{ref:de,style:b,role:U,"col-id":i},V?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:K},ge()):ge());return e.isCellSpanning()?a.createElement("div",{ref:Se,className:"ag-spanned-cell-wrapper",role:"presentation"},ye()):ye()},fs=t.memo(hs),Cs=({rowCtrl:e,containerType:s})=>{const{context:r,gos:o}=t.useContext(Z),n=t.useRef(),i=t.useRef(e.getDomOrder()),u=e.isFullWidth(),c=e.rowNode.displayed,[l,d]=t.useState(()=>c?e.rowNode.getRowIndexString():null),[p,v]=t.useState(()=>e.rowId),[R,h]=t.useState(()=>e.businessKey),[b,S]=t.useState(()=>e.rowStyles),w=t.useRef(null),m=t.useRef(null),[g,P]=t.useState(()=>null),[y,M]=t.useState(),[F,k]=t.useState(()=>c?e.getInitialRowTop(s):void 0),[O,U]=t.useState(()=>c?e.getInitialTransform(s):void 0),T=t.useRef(null),D=t.useRef(),E=t.useRef(!1),[C,L]=t.useState(0);t.useEffect(()=>{var Q;if(E.current||!y||C>10)return;const x=(Q=T.current)==null?void 0:Q.firstChild;x?(e.setupDetailRowAutoHeight(x),E.current=!0):L(K=>K+1)},[y,C]);const f=t.useRef();f.current||(f.current=new ve(()=>T.current));const G=t.useCallback(x=>{if(T.current=x,n.current=x?r.createBean(new pe):r.destroyBean(n.current),!x){e.unsetComp(s);return}if(!e.isAlive())return;const Q={setTop:k,setTransform:U,toggleCss:(K,oe)=>f.current.toggleCss(K,oe),setDomOrder:K=>i.current=K,setRowIndex:d,setRowId:v,setRowBusinessKey:h,setUserStyles:S,setCellCtrls:(K,oe)=>{m.current=w.current,w.current=K;const de=we(m.current,K,i.current);de!==m.current&&fe(oe,()=>P(de))},showFullWidth:K=>M(K),getFullWidthCellRenderer:()=>D.current,refreshFullWidth:K=>W.current?(M(oe=>({...oe,params:K()})),!0):!D.current||!D.current.refresh?!1:D.current.refresh(K())};e.setComp(Q,x,s,n.current)},[]);t.useLayoutEffect(()=>Ce(y,r,T.current,D),[y]);const H=t.useMemo(()=>{const x={top:F,transform:O};return Object.assign(x,b),x},[F,O,b]),A=u&&(y==null?void 0:y.componentFromFramework),I=!u&&g!=null,B=t.useMemo(()=>!!((y==null?void 0:y.componentFromFramework)&&me(y.componentClass)),[y]),W=t.useRef(!1);t.useEffect(()=>{W.current=B&&!!y&&!!o.get("reactiveCustomComponents")},[B,y]);const V=()=>g==null?void 0:g.map(x=>a.createElement(fs,{cellCtrl:x,editingRow:e.editing,printLayout:e.printLayout,key:x.instanceId})),_=()=>{const x=y.componentClass;return a.createElement(a.Fragment,null,B?a.createElement(x,{...y.params}):a.createElement(x,{...y.params,ref:D}))};return a.createElement("div",{ref:G,role:"row",style:H,"row-index":l,"row-id":p,"row-business-key":R},I&&V(),A&&_())},Ne=t.memo(Cs),gs=({name:e})=>{const{context:s,gos:r}=t.useContext(Z),o=t.useMemo(()=>yt(e),[e]),n=t.useRef(null),i=t.useRef(null),u=t.useRef(null),c=t.useRef([]),l=t.useRef([]),[d,p]=t.useState(()=>[]),v=!!r.get("enableCellSpan")&&!!o.getSpannedRowCtrls,R=t.useRef([]),h=t.useRef([]),[b,S]=t.useState(()=>[]),w=t.useRef(!1),m=t.useRef(),g=t.useMemo(()=>se("ag-viewport",Rt(e)),[e]),P=t.useMemo(()=>se(wt(e)),[e]),y=t.useMemo(()=>se("ag-spanning-container",vt(e)),[e]),M=o.type==="center"||v,F=M?n:i;ue(" AG Row Container "+e+" ",F);const k=t.useCallback(()=>{const f=!M||n.current!=null,G=i.current!=null,H=!v||u.current!=null;return f&&G&&H},[]),O=t.useCallback(()=>n.current==null&&i.current==null&&u.current==null,[]),U=t.useCallback(()=>{var f;if(O()&&(m.current=s.destroyBean(m.current)),k()){const G=I=>{const B=we(l.current,c.current,w.current);B!==l.current&&(l.current=B,fe(I,()=>p(B)))},H=I=>{const B=we(h.current,R.current,w.current);B!==h.current&&(h.current=B,fe(I,()=>S(B)))},A={setHorizontalScroll:I=>{n.current&&(n.current.scrollLeft=I)},setViewportHeight:I=>{n.current&&(n.current.style.height=I)},setRowCtrls:({rowCtrls:I,useFlushSync:B})=>{const W=!!B&&c.current.length>0&&I.length>0;c.current=I,G(W)},setSpannedRowCtrls:(I,B)=>{const W=!!B&&R.current.length>0&&I.length>0;R.current=I,H(W)},setDomOrder:I=>{w.current!=I&&(w.current=I,G(!1))},setContainerWidth:I=>{i.current&&(i.current.style.width=I)},setOffsetTop:I=>{i.current&&(i.current.style.transform="translateY(".concat(I,")"))}};m.current=s.createBean(new St(e)),m.current.setComp(A,i.current,(f=u.current)!=null?f:void 0,n.current)}},[k,O]),T=t.useCallback(f=>{i.current=f,U()},[U]),D=t.useCallback(f=>{u.current=f,U()},[U]),E=t.useCallback(f=>{n.current=f,U()},[U]),C=()=>a.createElement("div",{className:P,ref:T,role:"rowgroup"},d.map(f=>a.createElement(Ne,{rowCtrl:f,containerType:o.type,key:f.instanceId})));if(!M)return C();const L=()=>v&&a.createElement("div",{className:y,ref:D,role:"rowgroup"},b.map(f=>a.createElement(Ne,{rowCtrl:f,containerType:o.type,key:f.instanceId})));return a.createElement("div",{className:g,ref:E,role:"presentation"},C(),L())},ys=t.memo(gs),Rs=()=>{const e=t.useContext(Z),{context:s,overlays:r}=e,[o,n]=t.useState(""),[i,u]=t.useState(0),[c,l]=t.useState(0),[d,p]=t.useState("0px"),[v,R]=t.useState("0px"),[h,b]=t.useState("100%"),[S,w]=t.useState("0px"),[m,g]=t.useState("0px"),[P,y]=t.useState("100%"),[M,F]=t.useState(!0),[k,O]=t.useState(!0),[U,T]=t.useState(null),[D,E]=t.useState(""),[C,L]=t.useState(null),[f,G]=t.useState("ag-layout-normal"),H=t.useRef();H.current||(H.current=new ve(()=>A.current));const A=t.useRef(null),I=t.useRef(null),B=t.useRef(null),W=t.useRef(null),V=t.useRef(null),_=t.useRef(null),x=t.useRef(null),Q=t.useRef([]),K=t.useRef([]);ue(" AG Grid Body ",A),ue(" AG Pinned Top ",I),ue(" AG Sticky Top ",B),ue(" AG Middle ",_),ue(" AG Pinned Bottom ",x);const oe=t.useCallback($=>{if(A.current=$,!$){Q.current=s.destroyBeans(Q.current),K.current.forEach(z=>z()),K.current=[];return}if(!s)return;const ie=(z,ee)=>{z.appendChild(ee),K.current.push(()=>z.removeChild(ee))},le=z=>{const ee=s.createBean(new z);return Q.current.push(ee),ee},he=(z,ee,Qe)=>{ie(z,document.createComment(Qe)),ie(z,le(ee).getGui())};he($,ht," AG Fake Horizontal Scroll ");const Ge=r==null?void 0:r.getOverlayWrapperCompClass();Ge&&he($,Ge," AG Overlay Wrapper "),V.current&&he(V.current,ft," AG Fake Vertical Scroll ");const Ke={setRowAnimationCssOnBodyViewport:n,setColumnCount:z=>{A.current&&mt(A.current,z)},setRowCount:z=>{A.current&&pt(A.current,z)},setTopHeight:u,setBottomHeight:l,setStickyTopHeight:p,setStickyTopTop:R,setStickyTopWidth:b,setTopInvisible:F,setBottomInvisible:O,setColumnMovingCss:(z,ee)=>H.current.toggleCss(z,ee),updateLayoutClasses:G,setAlwaysVerticalScrollClass:T,setPinnedTopBottomOverflowY:E,setCellSelectableCss:(z,ee)=>L(ee?z:null),setBodyViewportWidth:z=>{_.current&&(_.current.style.width=z)},registerBodyViewportResizeListener:z=>{if(_.current){const ee=Ve(e,_.current,z);K.current.push(()=>ee())}},setStickyBottomHeight:w,setStickyBottomBottom:g,setStickyBottomWidth:y,setGridRootRole:z=>$.setAttribute("role",z)},Ae=s.createBean(new ut);Q.current.push(Ae),Ae.setComp(Ke,$,_.current,I.current,x.current,B.current,W.current)},[]),de=t.useMemo(()=>se("ag-root","ag-unselectable",f),[f]),Se=t.useMemo(()=>se("ag-body-viewport",o,f,U,C),[o,f,U,C]),be=t.useMemo(()=>se("ag-body",f),[f]),ge=t.useMemo(()=>se("ag-floating-top",M?"ag-invisible":null,C),[C,M]),ye=t.useMemo(()=>se("ag-sticky-top",C),[C]),j=t.useMemo(()=>se("ag-sticky-bottom",S==="0px"?"ag-invisible":null,C),[C,S]),J=t.useMemo(()=>se("ag-floating-bottom",k?"ag-invisible":null,C),[C,k]),Y=t.useMemo(()=>({height:i,minHeight:i,overflowY:D}),[i,D]),te=t.useMemo(()=>({height:d,top:v,width:h}),[d,v,h]),X=t.useMemo(()=>({height:S,bottom:m,width:P}),[S,m,P]),N=t.useMemo(()=>({height:c,minHeight:c,overflowY:D}),[c,D]),q=$=>a.createElement(ys,{name:$,key:"".concat($,"-container")}),ae=({section:$,children:ie,className:le,style:he})=>a.createElement("div",{ref:$,className:le,role:"presentation",style:he},ie.map(q));return a.createElement("div",{ref:oe,className:de},a.createElement(ns,null),ae({section:I,className:ge,style:Y,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:be,ref:V,role:"presentation"},ae({section:_,className:Se,children:["left","center","right","fullWidth"]})),ae({section:B,className:ye,style:te,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),ae({section:W,className:j,style:X,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),ae({section:x,className:J,style:N,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},ws=t.memo(Rs),vs=(e,s)=>{const{children:r,eFocusableElement:o,onTabKeyDown:n,gridCtrl:i,forceFocusOutWhenTabGuardsAreEmpty:u,isEmpty:c}=e,{context:l}=t.useContext(Z),d=t.useRef(null),p=t.useRef(null),v=t.useRef(),R=m=>{const g=m==null?void 0:parseInt(m,10).toString();[d,p].forEach(P=>{var y,M;g===void 0?(y=P.current)==null||y.removeAttribute("tabindex"):(M=P.current)==null||M.setAttribute("tabindex",g)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(m){var g;(g=v.current)==null||g.forceFocusOutOfContainer(m)}}));const h=t.useCallback(()=>{const m=d.current,g=p.current;if(!m&&!g){v.current=l.destroyBean(v.current);return}if(m&&g){const P={setTabIndex:R};v.current=l.createBean(new dt({comp:P,eTopGuard:m,eBottomGuard:g,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:u,focusInnerElement:y=>i.focusInnerElement(y),isEmpty:c}))}},[]),b=t.useCallback(m=>{d.current=m,h()},[h]),S=t.useCallback(m=>{p.current=m,h()},[h]),w=m=>{const g=m==="top"?Ee.TAB_GUARD_TOP:Ee.TAB_GUARD_BOTTOM;return a.createElement("div",{className:"".concat(Ee.TAB_GUARD," ").concat(g),role:"presentation",ref:m==="top"?b:S})};return a.createElement(a.Fragment,null,w("top"),r,w("bottom"))},Ss=t.forwardRef(vs),bs=t.memo(Ss),Es=({context:e})=>{const[s,r]=t.useState(""),[o,n]=t.useState(""),[i,u]=t.useState(null),[c,l]=t.useState(null),[d,p]=t.useState(!1),[v,R]=t.useState(),h=t.useRef(),b=t.useRef(null),S=t.useRef(),[w,m]=t.useState(null),g=t.useRef(()=>{}),P=t.useRef(),y=t.useRef([]),M=t.useCallback(()=>{},[]),F=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);ue(" AG Grid ",b);const k=t.useCallback(C=>{if(b.current=C,h.current=C?e.createBean(new ct):e.destroyBean(h.current),!C||e.isDestroyed())return;const L=h.current;g.current=L.focusInnerElement.bind(L);const f={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:G=>{var H,A;if(!G&&((H=P.current)!=null&&H.isDisplayed())){P.current.forceFocusOutOfContainer(G);return}(A=S.current)==null||A.forceFocusOutOfContainer(G)},updateLayoutClasses:n,getFocusableContainers:()=>{var A;const G=[],H=(A=b.current)==null?void 0:A.querySelector(".ag-root");return H&&G.push({getGui:()=>H}),y.current.forEach(I=>{I.isDisplayed()&&G.push(I)}),G},setCursor:u,setUserSelect:l};L.setComp(f,C,C),p(!0)},[]);t.useEffect(()=>{const C=h.current,L=b.current;if(!v||!F||!C||!w||!L)return;const f=[],{watermarkSelector:G,paginationSelector:H,sideBarSelector:A,statusBarSelector:I,gridHeaderDropZonesSelector:B}=C.getOptionalSelectors(),W=[];if(B){const _=e.createBean(new B.component),x=_.getGui();L.insertAdjacentElement("afterbegin",x),W.push(x),f.push(_)}if(A){const _=e.createBean(new A.component),x=_.getGui(),Q=w.querySelector(".ag-tab-guard-bottom");Q&&(Q.insertAdjacentElement("beforebegin",x),W.push(x)),f.push(_),y.current.push(_)}const V=_=>{const x=e.createBean(new _),Q=x.getGui();return L.insertAdjacentElement("beforeend",Q),W.push(Q),f.push(x),x};if(I&&V(I.component),H){const _=V(H.component);P.current=_,y.current.push(_)}return G&&V(G.component),()=>{e.destroyBeans(f),W.forEach(_=>{var x;(x=_.parentElement)==null||x.removeChild(_)})}},[v,w,F]);const O=t.useMemo(()=>se("ag-root-wrapper",s,o),[s,o]),U=t.useMemo(()=>se("ag-root-wrapper-body","ag-focus-managed",o),[o]),T=t.useMemo(()=>({userSelect:c!=null?c:"",WebkitUserSelect:c!=null?c:"",cursor:i!=null?i:""}),[c,i]),D=t.useCallback(C=>{S.current=C,R(C!==null)},[]),E=t.useCallback(()=>{var C;return!((C=h.current)!=null&&C.isFocusable())},[]);return a.createElement("div",{ref:k,className:O,style:T,role:"presentation"},a.createElement("div",{className:U,ref:m,role:"presentation"},d&&w&&F&&a.createElement(Z.Provider,{value:F},a.createElement(bs,{ref:D,eFocusableElement:w,onTabKeyDown:M,gridCtrl:h.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:E},a.createElement(ws,null)))))},Ps=t.memo(Es),ks=class extends nt{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},ze={setGridApi:void 0,maxComponentCreationTimeMs:void 0,children:void 0},Ms={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,passGridApi:void 0,componentWrappingElement:void 0,...ze},Je=new Set(Object.keys(Ms)),Fs=new Set(Object.keys(ze)),qe=e=>{var w,m;const s=t.useRef(),r=t.useRef(null),o=t.useRef(null),n=t.useRef([]),i=t.useRef([]),u=t.useRef(e),c=t.useRef(),l=t.useRef(),d=t.useRef(!1),[p,v]=t.useState(void 0),[,R]=t.useState(0),h=t.useCallback(g=>{var E,C,L;if(r.current=g,!g){n.current.forEach(f=>f()),n.current.length=0;return}const P=e.modules||[];o.current||(o.current=new Jt(()=>R(f=>f+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var f;(f=o.current)==null||f.destroy(),o.current=null}));const y=Ze(e.gridOptions,e,Object.keys(e).filter(f=>!Je.has(f))),M=()=>{if(d.current){const f=()=>{var H;return(H=c.current)!=null&&H.shouldQueueUpdates()?void 0:i.current.shift()};let G=f();for(;G;)G(),G=f()}},F=new As(M);c.current=F;const k=new ks,O={providedBeanInstances:{frameworkCompWrapper:new xs(o.current,(C=(E=y.reactiveCustomComponents)!=null?E:Xe("reactiveCustomComponents"))!=null?C:!0),renderStatus:k},modules:P,frameworkOverrides:F,setThemeOnGridDiv:!0},U=f=>{v(f),f.createBean(k),n.current.push(()=>{f.destroy()}),f.getBean("ctrlsSvc").whenReady({addDestroyFunc:G=>{n.current.push(G)}},()=>{var H;if(f.isDestroyed())return;const G=s.current;G&&((H=e.passGridApi)==null||H.call(e,G))})},T=f=>{f.getBean("ctrlsSvc").whenReady({addDestroyFunc:G=>{n.current.push(G)}},()=>{i.current.forEach(G=>G()),i.current.length=0,d.current=!0})},D=new et;(L=y.gridId)!=null||(y.gridId=l.current),s.current=D.create(g,y,U,T,O),n.current.push(()=>{s.current=void 0}),s.current&&(l.current=s.current.getGridId())},[]),b=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),S=t.useCallback(g=>{var P;d.current&&!((P=c.current)!=null&&P.shouldQueueUpdates())?g():i.current.push(g)},[]);return t.useEffect(()=>{const g=Bs(u.current,e);u.current=e,S(()=>{s.current&&tt(g,s.current)})},[e]),a.createElement("div",{style:b,className:e.className,ref:h},p&&!p.isDestroyed()?a.createElement(Ps,{context:p}):null,(m=(w=o.current)==null?void 0:w.getPortals())!=null?m:null)};function Bs(e,s){const r={};return Object.keys(s).forEach(o=>{if(Je.has(o)){Fs.has(o)&&Me(274,{prop:o});return}const n=s[o];e[o]!==n&&(r[o]=n)}),r}var xs=class extends rt{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const n=(i=>{switch(i){case"filter":return Tt;case"floatingFilterComponent":return Ht;case"dateComponent":return Dt;case"dragAndDropImageComponent":return Ot;case"loadingOverlayComponent":return Vt;case"noRowsOverlayComponent":return Lt;case"statusPanel":return jt;case"toolPanel":return $t;case"menuItem":return _t;case"cellRenderer":return Wt;case"innerHeaderComponent":return Ut}})(s.name);if(n)return new n(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":xe();break}const r=!s.cellRenderer&&s.name!=="toolPanel";return new je(e,this.parent,s,r)}},Gs=t.forwardRef((e,s)=>{const r=t.useContext(Z),{registry:o,context:n,gos:i,rowModel:u}=r,[c,l]=t.useState(()=>new re),[d,p]=t.useState(()=>new re),[v,R]=t.useState(),[h,b]=t.useState(),S=t.useRef(),w=t.useRef(null),m=t.useRef(),g=t.useMemo(()=>{var k;return ot(e.api.getGridId(),(k=v==null?void 0:v.rowModelType)!=null?k:"clientSide")},[e]),P=t.useMemo(()=>c.toString()+" ag-details-row",[c]),y=t.useMemo(()=>d.toString()+" ag-details-grid",[d]);s&&t.useImperativeHandle(s,()=>({refresh(){var k,O;return(O=(k=S.current)==null?void 0:k.refresh())!=null?O:!1}})),e.template&&Me(230);const M=t.useCallback(k=>{var T;if(w.current=k,!k){S.current=n.destroyBean(S.current),(T=m.current)==null||T.call(m);return}const O={toggleCss:(D,E)=>l(C=>C.setClass(D,E)),toggleDetailGridCss:(D,E)=>p(C=>C.setClass(D,E)),setDetailGrid:D=>R(D),setRowData:D=>b(D),getGui:()=>w.current},U=o.createDynamicBean("detailCellRendererCtrl",!0);if(U&&(n.createBean(U),U.init(O,e),S.current=U,i.get("detailRowAutoHeight"))){const D=()=>{if(w.current==null)return;const E=w.current.clientHeight;E!=null&&E>0&&setTimeout(()=>{e.node.setRowHeight(E),(lt(i)||it(i))&&u.onRowHeightChanged()},0)};m.current=Ve(r,k,D),D()}},[]),F=t.useCallback(k=>{var O;(O=S.current)==null||O.registerDetailWithMaster(k)},[]);return a.createElement("div",{className:P,ref:M},v&&a.createElement(qe,{className:y,...v,modules:g,rowData:h,passGridApi:F}))}),As=class extends st{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:We,agGroupRowRenderer:We,agDetailCellRenderer:Gs},this.wrapIncoming=(s,r)=>r==="ensureVisible"?xt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Bt()}},Ds=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(qe,{...this.props,passGridApi:this.setGridApi})}};export{Ds as A};
