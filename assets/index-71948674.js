import{u as Tn,a as F,j as h,B as He,b as Nn,c as cr,d as An,I as ur,e as hr,f as Se,F as K,T as gr,g as Rn,h as dr,i as Ot,k as Pn,l as fr,m as pr,n as mr,o as jn,A as vr,M as Ln,p as yr,q as Mn,r as Fn,s as In,t as ee,v as kn,w as Ht,L as A,x as Bn,y as Dn,z as br,C as Sr,D as wr,E as xr,S as zr,G as dt,H as _r,J as Er,K as Or,N as Hr,O as Tr,Q as Nr,R as Ar,U as Rr,V as Q,W as Pr,X as jr,Y as de,Z as Lr,_ as Mr,$ as Fr,a0 as Ir,a1 as H,a2 as kr,a3 as Br,a4 as Cn,a5 as Dr,a6 as j,a7 as Cr}from"./chakra-b5edfc98.js";import{a as $n,r as y,b as Un,H as $r,e as Ur,f as it,N as Gr,h as Vr,i as Wr,j as Kr,k as Yr}from"./react-f83802c2.js";function wg(){import.meta.url,import("_").catch(()=>1);async function*e(){}}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const Gn=e=>new Promise(t=>{setTimeout(t,e,"Timeout after ".concat(e/1e3," seconds"))});var X;(function(e){e.DEV="DEV",e.UAT="UAT",e.PRD="PRD"})(X||(X={}));var ft;(function(e){e.GITHUB="GitHub",e.GITLAB="GitLab",e.BITBUCKET="Bitbucket",e.LOCALHOST="localhost",e.UNKNOWN="unknown"})(ft||(ft={}));var Vn=globalThis&&globalThis.__awaiter||function(e,t,n,a){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function s(g){try{u(a.next(g))}catch(p){i(p)}}function l(g){try{u(a.throw(g))}catch(p){i(p)}}function u(g){g.done?o(g.value):r(g.value).then(s,l)}u((a=a.apply(e,t||[])).next())})};let Tt,Nt,At,Rt,Pt;const Wn=()=>{Tt=!1,Nt="rmg-unknown",At="unknown",Rt=X.PRD,Pt=ft.UNKNOWN},Jr=()=>Vn(void 0,void 0,void 0,function*(){const e=window.location.pathname.split("/")[1],t=e?"/".concat(e,"/info.json"):"/info.json",n=yield fetch(t);if(n.ok){const a=yield n.json();Nt=a.component,At=a.version,Rt=a.environment,Pt=a.instance}else throw new Error("Failed to fetch config from ".concat(t))}),qr=()=>Vn(void 0,void 0,void 0,function*(){try{console.log("[rmg-runtime] Loading config...");const e=yield Promise.race([Jr(),Gn(10*1e3)]);e?console.error("[rmg-runtime] Failed to load config.",e):(Tt=!0,console.log("[rmg-runtime] Config loaded!"))}catch(e){console.error("[rmg-runtime] Failed to load config.",e)}}),Xr=()=>Tt,Zr=()=>Nt,Qr=()=>At,eo=()=>Rt,to=()=>Pt;Wn();const C={loadWithTimeout:qr,isInitialised:Xr,getComponent:Zr,getVersion:Qr,getEnvironment:eo,getInstance:to,_resetConfig:Wn};window.dataLayer=window.dataLayer||[];const no=()=>{const e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=G-2HP8Y4MRRQ",document.head.append(e)};function pt(...e){if(C.getEnvironment()!==X.DEV)return window.dataLayer.push(arguments);console.log("[rmg-runtime] Not going to send event in DEV environment",e)}const ao=(e,t)=>{pt("event",e,t)},ro=()=>{no(),pt("js",new Date),pt("config","G-2HP8Y4MRRQ",{appName:C.getComponent(),version:C.getVersion(),environment:C.getEnvironment(),instance:C.getInstance()})},Te={init:ro,customEvent:ao},oo="rmg-runtime-channel",Oe={};let fe;try{fe=new BroadcastChannel(oo),fe.onmessage=e=>{var t;const{event:n,data:a,frameId:r}=e.data;(t=Oe[n])===null||t===void 0||t.forEach(o=>o(a,r))}}catch(e){console.warn("[rmg-runtime] Failed to initiate broadcast channel. Some features may be unavailable.",e)}const io=(e,t,n)=>{var a;n&&console.log("[rmg-runtime] Broadcasting event ".concat(e," with data"),t),fe==null||fe.postMessage({event:e,data:t,frameId:(a=window.frameElement)===null||a===void 0?void 0:a.id})},so=(e,t)=>{var n;e in Oe?(n=Oe[e])===null||n===void 0||n.push(t):Oe[e]=[t]},B={postEvent:io,onMessage:so},mt=()=>!window.frameElement,lo=()=>{var e;return!!(!((e=window.frameElement)===null||e===void 0)&&e.closest(".show-menu"))},co=()=>{if(!mt()){const t=document.createElement("style");t.textContent="body{padding: 0;}",document.head.appendChild(t)}const e=document.createElement("style");e.textContent=".rmg-window__header{margin-left: 40px;}",!mt()&&!lo()&&document.head.appendChild(e),B.onMessage("TOGGLE_NAV_MENU",t=>{if(t)try{document.head.removeChild(e)}catch(n){console.warn("[rmg-runtime] Unable to remove indent style from RmgWindowHeader",n)}else document.head.appendChild(e)})},uo=(e,t)=>{B.postEvent("OPEN_APP",{appId:e,url:t})},ho=e=>{B.postEvent("CLOSE_APP",e)},go=e=>{B.postEvent("UPDATE_URL",e)},fo=e=>{B.onMessage("OPEN_APP",e)},po=e=>{B.onMessage("CLOSE_APP",e)},mo=e=>{B.onMessage("UPDATE_URL",e)},vo=e=>{B.postEvent("TOGGLE_NAV_MENU",e,!0)},V={isStandaloneWindow:mt,injectUITools:co,openApp:uo,onAppOpen:fo,closeApp:ho,onAppClose:po,updateUrl:go,onUrlUpdate:mo,toggleNavMenu:vo},Kn="rmg-runtime__language",Yn="rmg-runtime__colourMode",Ne="rmg-runtime__allowAnalytics",Jn=["en","zh-Hans","zh-Hant","ko"],yo=e=>{Jn.includes(e)&&(B.postEvent("SET_LANGUAGE",e),window.localStorage.setItem(Kn,e))},bo=()=>{const e=window.localStorage.getItem(Kn);return e&&Jn.includes(e)?e:"en"},So=e=>{B.onMessage("SET_LANGUAGE",e)},qn=["light","dark","system"],wo=e=>{qn.includes(e)&&(B.postEvent("SET_COLOUR_MODE",e,!0),window.localStorage.setItem(Yn,e))},xo=()=>{const e=window.localStorage.getItem(Yn);return e&&qn.includes(e)?e:"system"},zo=e=>{B.onMessage("SET_COLOUR_MODE",e)},_o=()=>window.localStorage.getItem(Ne)!==null,Xn=()=>window.localStorage.getItem(Ne)==="true",Eo=e=>{const t=Xn();return e?(t||(window.localStorage.setItem(Ne,e.toString()),Te.init()),{refreshRequired:!1}):t?(window.localStorage.setItem(Ne,e.toString()),{refreshRequired:!0}):{refreshRequired:!1}},$={setLanguage:yo,getLanguage:bo,onLanguageChange:So,setColourMode:wo,getColourMode:xo,onColourModeChange:zo,isAnalyticsQADone:_o,isAllowAnalytics:Xn,allowAnalytics:Eo},Oo=new Date().getTime();function Ho(){const e=C.getComponent(),t=window.localStorage.getItem(e+"__startTime");return t===null?new Date().getTime()-Oo:new Date().getTime()-Number(t)}const To={getMsSinceStartUp:Ho},Zn=()=>{const e=C.getComponent();if(e==="rmg-unknown")throw new Error("[rmg-runtime] Unable to clear storage for unknown app");return e==="railmapgen.github.io"?"rmg-home":e},No=()=>{const e=Zn(),t={};let n=0;for(;n<window.localStorage.length;){const a=window.localStorage.key(n);if(a!=null&&a.startsWith(e+"__")){const r=window.localStorage.getItem(a);r&&(t[a]=r)}n++}return t},Ao=()=>{const e=Zn();let t=0;for(;t<window.localStorage.length;){const n=window.localStorage.key(t);n!=null&&n.startsWith(e+"__")?(window.localStorage.removeItem(n),console.log("[rmg-runtime] Removed item ".concat(n))):t++}},Vt={getStorageForCurrentApp:No,clearStorageForCurrentApp:Ao},Ro={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Ae{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(t,n)}init(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=t||Ro,this.options=n,this.debug=n.debug}log(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.forward(n,"log","",!0)}warn(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.forward(n,"warn","",!0)}error(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.forward(n,"error","")}deprecate(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(t,n,a,r){return r&&!this.debug?null:(typeof t[0]=="string"&&(t[0]="".concat(a).concat(this.prefix," ").concat(t[0])),this.logger[n](t))}create(t){return new Ae(this.logger,{prefix:"".concat(this.prefix,":").concat(t,":"),...this.options})}clone(t){return t=t||this.options,t.prefix=t.prefix||this.prefix,new Ae(this.logger,t)}}var W=new Ae;class Ge{constructor(){this.observers={}}on(t,n){return t.split(" ").forEach(a=>{this.observers[a]=this.observers[a]||[],this.observers[a].push(n)}),this}off(t,n){if(this.observers[t]){if(!n){delete this.observers[t];return}this.observers[t]=this.observers[t].filter(a=>a!==n)}}emit(t){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];this.observers[t]&&[].concat(this.observers[t]).forEach(i=>{i(...a)}),this.observers["*"]&&[].concat(this.observers["*"]).forEach(i=>{i.apply(i,[t,...a])})}}function ge(){let e,t;const n=new Promise((a,r)=>{e=a,t=r});return n.resolve=e,n.reject=t,n}function Wt(e){return e==null?"":""+e}function Po(e,t,n){e.forEach(a=>{t[a]&&(n[a]=t[a])})}function jt(e,t,n){function a(i){return i&&i.indexOf("###")>-1?i.replace(/###/g,"."):i}function r(){return!e||typeof e=="string"}const o=typeof t!="string"?[].concat(t):t.split(".");for(;o.length>1;){if(r())return{};const i=a(o.shift());!e[i]&&n&&(e[i]=new n),Object.prototype.hasOwnProperty.call(e,i)?e=e[i]:e={}}return r()?{}:{obj:e,k:a(o.shift())}}function Kt(e,t,n){const{obj:a,k:r}=jt(e,t,Object);a[r]=n}function jo(e,t,n,a){const{obj:r,k:o}=jt(e,t,Object);r[o]=r[o]||[],a&&(r[o]=r[o].concat(n)),a||r[o].push(n)}function Re(e,t){const{obj:n,k:a}=jt(e,t);if(n)return n[a]}function Lo(e,t,n){const a=Re(e,n);return a!==void 0?a:Re(t,n)}function Qn(e,t,n){for(const a in t)a!=="__proto__"&&a!=="constructor"&&(a in e?typeof e[a]=="string"||e[a]instanceof String||typeof t[a]=="string"||t[a]instanceof String?n&&(e[a]=t[a]):Qn(e[a],t[a],n):e[a]=t[a]);return e}function ne(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Mo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Fo(e){return typeof e=="string"?e.replace(/[&<>"'\/]/g,t=>Mo[t]):e}const Io=[" ",",","?","!",";"];function ko(e,t,n){t=t||"",n=n||"";const a=Io.filter(i=>t.indexOf(i)<0&&n.indexOf(i)<0);if(a.length===0)return!0;const r=new RegExp("(".concat(a.map(i=>i==="?"?"\\?":i).join("|"),")"));let o=!r.test(e);if(!o){const i=e.indexOf(n);i>0&&!r.test(e.substring(0,i))&&(o=!0)}return o}function Pe(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!e)return;if(e[t])return e[t];const a=t.split(n);let r=e;for(let o=0;o<a.length;++o){if(!r||typeof r[a[o]]=="string"&&o+1<a.length)return;if(r[a[o]]===void 0){let i=2,s=a.slice(o,o+i).join(n),l=r[s];for(;l===void 0&&a.length>o+i;)i++,s=a.slice(o,o+i).join(n),l=r[s];if(l===void 0)return;if(l===null)return null;if(t.endsWith(s)){if(typeof l=="string")return l;if(s&&typeof l[s]=="string")return l[s]}const u=a.slice(o+i).join(n);return u?Pe(l,u,n):void 0}r=r[a[o]]}return r}function je(e){return e&&e.indexOf("_")>0?e.replace("_","-"):e}class Yt extends Ge{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=t||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(t){this.options.ns.indexOf(t)<0&&this.options.ns.push(t)}removeNamespaces(t){const n=this.options.ns.indexOf(t);n>-1&&this.options.ns.splice(n,1)}getResource(t,n,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const o=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,i=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let s=[t,n];a&&typeof a!="string"&&(s=s.concat(a)),a&&typeof a=="string"&&(s=s.concat(o?a.split(o):a)),t.indexOf(".")>-1&&(s=t.split("."));const l=Re(this.data,s);return l||!i||typeof a!="string"?l:Pe(this.data&&this.data[t]&&this.data[t][n],a,o)}addResource(t,n,a,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator;let s=[t,n];a&&(s=s.concat(i?a.split(i):a)),t.indexOf(".")>-1&&(s=t.split("."),r=n,n=s[1]),this.addNamespaces(n),Kt(this.data,s,r),o.silent||this.emit("added",t,n,a,r)}addResources(t,n,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const o in a)(typeof a[o]=="string"||Object.prototype.toString.apply(a[o])==="[object Array]")&&this.addResource(t,n,o,a[o],{silent:!0});r.silent||this.emit("added",t,n,a)}addResourceBundle(t,n,a,r,o){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},s=[t,n];t.indexOf(".")>-1&&(s=t.split("."),r=a,a=n,n=s[1]),this.addNamespaces(n);let l=Re(this.data,s)||{};r?Qn(l,a,o):l={...l,...a},Kt(this.data,s,l),i.silent||this.emit("added",t,n,a)}removeResourceBundle(t,n){this.hasResourceBundle(t,n)&&delete this.data[t][n],this.removeNamespaces(n),this.emit("removed",t,n)}hasResourceBundle(t,n){return this.getResource(t,n)!==void 0}getResourceBundle(t,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(t,n)}:this.getResource(t,n)}getDataByLanguage(t){return this.data[t]}hasLanguageSomeTranslations(t){const n=this.getDataByLanguage(t);return!!(n&&Object.keys(n)||[]).find(r=>n[r]&&Object.keys(n[r]).length>0)}toJSON(){return this.data}}var ea={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,a,r){return e.forEach(o=>{this.processors[o]&&(t=this.processors[o].process(t,n,a,r))}),t}};const Jt={};class Le extends Ge{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Po(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],t,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=W.create("translator")}changeLanguage(t){t&&(this.language=t)}exists(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(t==null)return!1;const a=this.resolve(t,n);return a&&a.res!==void 0}extractFromKey(t,n){let a=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");const r=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let o=n.ns||this.options.defaultNS||[];const i=a&&t.indexOf(a)>-1,s=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!ko(t,a,r);if(i&&!s){const l=t.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:t,namespaces:o};const u=t.split(a);(a!==r||a===r&&this.options.ns.indexOf(u[0])>-1)&&(o=u.shift()),t=u.join(r)}return typeof o=="string"&&(o=[o]),{key:t,namespaces:o}}translate(t,n,a){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),t==null)return"";Array.isArray(t)||(t=[String(t)]);const r=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:i,namespaces:s}=this.extractFromKey(t[t.length-1],n),l=s[s.length-1],u=n.lng||this.language,g=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(g){const z=n.nsSeparator||this.options.nsSeparator;return r?{res:"".concat(l).concat(z).concat(i),usedKey:i,exactUsedKey:i,usedLng:u,usedNS:l}:"".concat(l).concat(z).concat(i)}return r?{res:i,usedKey:i,exactUsedKey:i,usedLng:u,usedNS:l}:i}const p=this.resolve(t,n);let f=p&&p.res;const v=p&&p.usedKey||i,m=p&&p.exactUsedKey||i,b=Object.prototype.toString.apply(f),w=["[object Number]","[object Function]","[object RegExp]"],S=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,x=!this.i18nFormat||this.i18nFormat.handleAsObject;if(x&&f&&(typeof f!="string"&&typeof f!="boolean"&&typeof f!="number")&&w.indexOf(b)<0&&!(typeof S=="string"&&b==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const z=this.options.returnedObjectHandler?this.options.returnedObjectHandler(v,f,{...n,ns:s}):"key '".concat(i," (").concat(this.language,")' returned an object instead of string.");return r?(p.res=z,p):z}if(o){const z=b==="[object Array]",O=z?[]:{},N=z?m:v;for(const M in f)if(Object.prototype.hasOwnProperty.call(f,M)){const ze="".concat(N).concat(o).concat(M);O[M]=this.translate(ze,{...n,joinArrays:!1,ns:s}),O[M]===ze&&(O[M]=f[M])}f=O}}else if(x&&typeof S=="string"&&b==="[object Array]")f=f.join(S),f&&(f=this.extendTranslation(f,t,n,a));else{let z=!1,O=!1;const N=n.count!==void 0&&typeof n.count!="string",M=Le.hasDefaultValue(n),ze=N?this.pluralResolver.getSuffix(u,n.count,n):"",sr=n.ordinal&&N?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",ce=n["defaultValue".concat(ze)]||n["defaultValue".concat(sr)]||n.defaultValue;!this.isValidLookup(f)&&M&&(z=!0,f=ce),this.isValidLookup(f)||(O=!0,f=i);const lr=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&O?void 0:f,ue=M&&ce!==f&&this.options.updateMissing;if(O||z||ue){if(this.logger.log(ue?"updateKey":"missingKey",u,l,i,ue?ce:f),o){const D=this.resolve(i,{...n,keySeparator:!1});D&&D.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let he=[];const _e=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&_e&&_e[0])for(let D=0;D<_e.length;D++)he.push(_e[D]);else this.options.saveMissingTo==="all"?he=this.languageUtils.toResolveHierarchy(n.lng||this.language):he.push(n.lng||this.language);const $t=(D,te,Ut)=>{const Gt=M&&Ut!==f?Ut:lr;this.options.missingKeyHandler?this.options.missingKeyHandler(D,l,te,Gt,ue,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(D,l,te,Gt,ue,n),this.emit("missingKey",D,l,te,f)};this.options.saveMissing&&(this.options.saveMissingPlurals&&N?he.forEach(D=>{this.pluralResolver.getSuffixes(D,n).forEach(te=>{$t([D],i+te,n["defaultValue".concat(te)]||ce)})}):$t(he,i,ce))}f=this.extendTranslation(f,t,n,p,a),O&&f===i&&this.options.appendNamespaceToMissingKey&&(f="".concat(l,":").concat(i)),(O||z)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?f=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(l,":").concat(i):i,z?f:void 0):f=this.options.parseMissingKeyHandler(f))}return r?(p.res=f,p):f}extendTranslation(t,n,a,r,o){var i=this;if(this.i18nFormat&&this.i18nFormat.parse)t=this.i18nFormat.parse(t,{...this.options.interpolation.defaultVariables,...a},r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init({...a,interpolation:{...this.options.interpolation,...a.interpolation}});const u=typeof t=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(u){const f=t.match(this.interpolator.nestingRegexp);g=f&&f.length}let p=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(p={...this.options.interpolation.defaultVariables,...p}),t=this.interpolator.interpolate(t,p,a.lng||this.language,a),u){const f=t.match(this.interpolator.nestingRegexp),v=f&&f.length;g<v&&(a.nest=!1)}!a.lng&&this.options.compatibilityAPI!=="v1"&&r&&r.res&&(a.lng=r.usedLng),a.nest!==!1&&(t=this.interpolator.nest(t,function(){for(var f=arguments.length,v=new Array(f),m=0;m<f;m++)v[m]=arguments[m];return o&&o[0]===v[0]&&!a.context?(i.logger.warn("It seems you are nesting recursively key: ".concat(v[0]," in key: ").concat(n[0])),null):i.translate(...v,n)},a)),a.interpolation&&this.interpolator.reset()}const s=a.postProcess||this.options.postProcess,l=typeof s=="string"?[s]:s;return t!=null&&l&&l.length&&a.applyPostProcessor!==!1&&(t=ea.handle(l,t,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:r,...a}:a,this)),t}resolve(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a,r,o,i,s;return typeof t=="string"&&(t=[t]),t.forEach(l=>{if(this.isValidLookup(a))return;const u=this.extractFromKey(l,n),g=u.key;r=g;let p=u.namespaces;this.options.fallbackNS&&(p=p.concat(this.options.fallbackNS));const f=n.count!==void 0&&typeof n.count!="string",v=f&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),m=n.context!==void 0&&(typeof n.context=="string"||typeof n.context=="number")&&n.context!=="",b=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);p.forEach(w=>{this.isValidLookup(a)||(s=w,!Jt["".concat(b[0],"-").concat(w)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(Jt["".concat(b[0],"-").concat(w)]=!0,this.logger.warn('key "'.concat(r,'" for languages "').concat(b.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(S=>{if(this.isValidLookup(a))return;i=S;const x=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(x,g,S,w,n);else{let z;f&&(z=this.pluralResolver.getSuffix(S,n.count,n));const O="".concat(this.options.pluralSeparator,"zero"),N="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(f&&(x.push(g+z),n.ordinal&&z.indexOf(N)===0&&x.push(g+z.replace(N,this.options.pluralSeparator)),v&&x.push(g+O)),m){const M="".concat(g).concat(this.options.contextSeparator).concat(n.context);x.push(M),f&&(x.push(M+z),n.ordinal&&z.indexOf(N)===0&&x.push(M+z.replace(N,this.options.pluralSeparator)),v&&x.push(M+O))}}let E;for(;E=x.pop();)this.isValidLookup(a)||(o=E,a=this.getResource(S,w,E,n))}))})}),{res:a,usedKey:r,exactUsedKey:o,usedLng:i,usedNS:s}}isValidLookup(t){return t!==void 0&&!(!this.options.returnNull&&t===null)&&!(!this.options.returnEmptyString&&t==="")}getResource(t,n,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(t,n,a,r):this.resourceStore.getResource(t,n,a,r)}static hasDefaultValue(t){const n="defaultValue";for(const a in t)if(Object.prototype.hasOwnProperty.call(t,a)&&n===a.substring(0,n.length)&&t[a]!==void 0)return!0;return!1}}function st(e){return e.charAt(0).toUpperCase()+e.slice(1)}class qt{constructor(t){this.options=t,this.supportedLngs=this.options.supportedLngs||!1,this.logger=W.create("languageUtils")}getScriptPartFromCode(t){if(t=je(t),!t||t.indexOf("-")<0)return null;const n=t.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(t){if(t=je(t),!t||t.indexOf("-")<0)return t;const n=t.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(t){if(typeof t=="string"&&t.indexOf("-")>-1){const n=["hans","hant","latn","cyrl","cans","mong","arab"];let a=t.split("-");return this.options.lowerCaseLng?a=a.map(r=>r.toLowerCase()):a.length===2?(a[0]=a[0].toLowerCase(),a[1]=a[1].toUpperCase(),n.indexOf(a[1].toLowerCase())>-1&&(a[1]=st(a[1].toLowerCase()))):a.length===3&&(a[0]=a[0].toLowerCase(),a[1].length===2&&(a[1]=a[1].toUpperCase()),a[0]!=="sgn"&&a[2].length===2&&(a[2]=a[2].toUpperCase()),n.indexOf(a[1].toLowerCase())>-1&&(a[1]=st(a[1].toLowerCase())),n.indexOf(a[2].toLowerCase())>-1&&(a[2]=st(a[2].toLowerCase()))),a.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?t.toLowerCase():t}isSupportedCode(t){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(t=this.getLanguagePartFromCode(t)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(t)>-1}getBestMatchFromCodes(t){if(!t)return null;let n;return t.forEach(a=>{if(n)return;const r=this.formatLanguageCode(a);(!this.options.supportedLngs||this.isSupportedCode(r))&&(n=r)}),!n&&this.options.supportedLngs&&t.forEach(a=>{if(n)return;const r=this.getLanguagePartFromCode(a);if(this.isSupportedCode(r))return n=r;n=this.options.supportedLngs.find(o=>{if(o===r)return o;if(!(o.indexOf("-")<0&&r.indexOf("-")<0)&&o.indexOf(r)===0)return o})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(t,n){if(!t)return[];if(typeof t=="function"&&(t=t(n)),typeof t=="string"&&(t=[t]),Object.prototype.toString.apply(t)==="[object Array]")return t;if(!n)return t.default||[];let a=t[n];return a||(a=t[this.getScriptPartFromCode(n)]),a||(a=t[this.formatLanguageCode(n)]),a||(a=t[this.getLanguagePartFromCode(n)]),a||(a=t.default),a||[]}toResolveHierarchy(t,n){const a=this.getFallbackCodes(n||this.options.fallbackLng||[],t),r=[],o=i=>{i&&(this.isSupportedCode(i)?r.push(i):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(i)))};return typeof t=="string"&&(t.indexOf("-")>-1||t.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(t)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(t)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(t))):typeof t=="string"&&o(this.formatLanguageCode(t)),a.forEach(i=>{r.indexOf(i)<0&&o(this.formatLanguageCode(i))}),r}}let Bo=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Do={1:function(e){return+(e>1)},2:function(e){return+(e!=1)},3:function(e){return 0},4:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},5:function(e){return e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},6:function(e){return e==1?0:e>=2&&e<=4?1:2},7:function(e){return e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},8:function(e){return e==1?0:e==2?1:e!=8&&e!=11?2:3},9:function(e){return+(e>=2)},10:function(e){return e==1?0:e==2?1:e<7?2:e<11?3:4},11:function(e){return e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3},12:function(e){return+(e%10!=1||e%100==11)},13:function(e){return+(e!==0)},14:function(e){return e==1?0:e==2?1:e==3?2:3},15:function(e){return e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2},16:function(e){return e%10==1&&e%100!=11?0:e!==0?1:2},17:function(e){return e==1||e%10==1&&e%100!=11?0:1},18:function(e){return e==0?0:e==1?1:2},19:function(e){return e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3},20:function(e){return e==1?0:e==0||e%100>0&&e%100<20?1:2},21:function(e){return e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0},22:function(e){return e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3}};const Co=["v1","v2","v3"],$o=["v4"],Xt={zero:0,one:1,two:2,few:3,many:4,other:5};function Uo(){const e={};return Bo.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:Do[t.fc]}})}),e}class Go{constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=t,this.options=n,this.logger=W.create("pluralResolver"),(!this.options.compatibilityJSON||$o.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=Uo()}addRule(t,n){this.rules[t]=n}getRule(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(je(t),{type:n.ordinal?"ordinal":"cardinal"})}catch(a){return}return this.rules[t]||this.rules[this.languageUtils.getLanguagePartFromCode(t)]}needsPlural(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.getRule(t,n);return this.shouldUseIntlApi()?a&&a.resolvedOptions().pluralCategories.length>1:a&&a.numbers.length>1}getPluralFormsOfKey(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(t,a).map(r=>"".concat(n).concat(r))}getSuffixes(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const a=this.getRule(t,n);return a?this.shouldUseIntlApi()?a.resolvedOptions().pluralCategories.sort((r,o)=>Xt[r]-Xt[o]).map(r=>"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(r)):a.numbers.map(r=>this.getSuffix(t,r,n)):[]}getSuffix(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=this.getRule(t,a);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(a.ordinal?"ordinal".concat(this.options.prepend):"").concat(r.select(n)):this.getSuffixRetroCompatible(r,n):(this.logger.warn("no plural rule found for: ".concat(t)),"")}getSuffixRetroCompatible(t,n){const a=t.noAbs?t.plurals(n):t.plurals(Math.abs(n));let r=t.numbers[a];this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1&&(r===2?r="plural":r===1&&(r=""));const o=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return this.options.compatibilityJSON==="v1"?r===1?"":typeof r=="number"?"_plural_".concat(r.toString()):o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&t.numbers.length===2&&t.numbers[0]===1?o():this.options.prepend&&a.toString()?this.options.prepend+a.toString():a.toString()}shouldUseIntlApi(){return!Co.includes(this.options.compatibilityJSON)}}function Zt(e,t,n){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=Lo(e,t,n);return!o&&r&&typeof n=="string"&&(o=Pe(e,n,a),o===void 0&&(o=Pe(t,n,a))),o}class Vo{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=W.create("interpolator"),this.options=t,this.format=t.interpolation&&t.interpolation.format||(n=>n),this.init(t)}init(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};t.interpolation||(t.interpolation={escapeValue:!0});const n=t.interpolation;this.escape=n.escape!==void 0?n.escape:Fo,this.escapeValue=n.escapeValue!==void 0?n.escapeValue:!0,this.useRawValueToEscape=n.useRawValueToEscape!==void 0?n.useRawValueToEscape:!1,this.prefix=n.prefix?ne(n.prefix):n.prefixEscaped||"{{",this.suffix=n.suffix?ne(n.suffix):n.suffixEscaped||"}}",this.formatSeparator=n.formatSeparator?n.formatSeparator:n.formatSeparator||",",this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"",this.nestingPrefix=n.nestingPrefix?ne(n.nestingPrefix):n.nestingPrefixEscaped||ne("$t("),this.nestingSuffix=n.nestingSuffix?ne(n.nestingSuffix):n.nestingSuffixEscaped||ne(")"),this.nestingOptionsSeparator=n.nestingOptionsSeparator?n.nestingOptionsSeparator:n.nestingOptionsSeparator||",",this.maxReplaces=n.maxReplaces?n.maxReplaces:1e3,this.alwaysFormat=n.alwaysFormat!==void 0?n.alwaysFormat:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const t="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(t,"g");const n="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(n,"g");const a="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(a,"g")}interpolate(t,n,a,r){let o,i,s;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function u(m){return m.replace(/\$/g,"$$$$")}const g=m=>{if(m.indexOf(this.formatSeparator)<0){const x=Zt(n,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,a,{...r,...n,interpolationkey:m}):x}const b=m.split(this.formatSeparator),w=b.shift().trim(),S=b.join(this.formatSeparator).trim();return this.format(Zt(n,l,w,this.options.keySeparator,this.options.ignoreJSONStructure),S,a,{...r,...n,interpolationkey:w})};this.resetRegExp();const p=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,f=r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>u(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?u(this.escape(m)):u(m)}].forEach(m=>{for(s=0;o=m.regex.exec(t);){const b=o[1].trim();if(i=g(b),i===void 0)if(typeof p=="function"){const S=p(t,o,r);i=typeof S=="string"?S:""}else if(r&&Object.prototype.hasOwnProperty.call(r,b))i="";else if(f){i=o[0];continue}else this.logger.warn("missed to pass in variable ".concat(b," for interpolating ").concat(t)),i="";else typeof i!="string"&&!this.useRawValueToEscape&&(i=Wt(i));const w=m.safeValue(i);if(t=t.replace(o[0],w),f?(m.regex.lastIndex+=i.length,m.regex.lastIndex-=o[0].length):m.regex.lastIndex=0,s++,s>=this.maxReplaces)break}}),t}nest(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,o,i;function s(l,u){const g=this.nestingOptionsSeparator;if(l.indexOf(g)<0)return l;const p=l.split(new RegExp("".concat(g,"[ ]*{")));let f="{".concat(p[1]);l=p[0],f=this.interpolate(f,i);const v=f.match(/'/g),m=f.match(/"/g);(v&&v.length%2===0&&!m||m.length%2!==0)&&(f=f.replace(/'/g,'"'));try{i=JSON.parse(f),u&&(i={...u,...i})}catch(b){return this.logger.warn("failed parsing options string in nesting for key ".concat(l),b),"".concat(l).concat(g).concat(f)}return delete i.defaultValue,l}for(;r=this.nestingRegexp.exec(t);){let l=[];i={...a},i=i.replace&&typeof i.replace!="string"?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let u=!1;if(r[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(r[1])){const g=r[1].split(this.formatSeparator).map(p=>p.trim());r[1]=g.shift(),l=g,u=!0}if(o=n(s.call(this,r[1].trim(),i),i),o&&r[0]===t&&typeof o!="string")return o;typeof o!="string"&&(o=Wt(o)),o||(this.logger.warn("missed to resolve ".concat(r[1]," for nesting ").concat(t)),o=""),u&&(o=l.reduce((g,p)=>this.format(g,p,a.lng,{...a,interpolationkey:r[1].trim()}),o.trim())),t=t.replace(r[0],o),this.regexp.lastIndex=0}return t}}function Wo(e){let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const a=e.split("(");t=a[0].toLowerCase().trim();const r=a[1].substring(0,a[1].length-1);t==="currency"&&r.indexOf(":")<0?n.currency||(n.currency=r.trim()):t==="relativetime"&&r.indexOf(":")<0?n.range||(n.range=r.trim()):r.split(";").forEach(i=>{if(!i)return;const[s,...l]=i.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,"");n[s.trim()]||(n[s.trim()]=u),u==="false"&&(n[s.trim()]=!1),u==="true"&&(n[s.trim()]=!0),isNaN(u)||(n[s.trim()]=parseInt(u,10))})}return{formatName:t,formatOptions:n}}function ae(e){const t={};return function(a,r,o){const i=r+JSON.stringify(o);let s=t[i];return s||(s=e(je(r),o),t[i]=s),s(a)}}class Ko{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=W.create("formatter"),this.options=t,this.formats={number:ae((n,a)=>{const r=new Intl.NumberFormat(n,{...a});return o=>r.format(o)}),currency:ae((n,a)=>{const r=new Intl.NumberFormat(n,{...a,style:"currency"});return o=>r.format(o)}),datetime:ae((n,a)=>{const r=new Intl.DateTimeFormat(n,{...a});return o=>r.format(o)}),relativetime:ae((n,a)=>{const r=new Intl.RelativeTimeFormat(n,{...a});return o=>r.format(o,a.range||"day")}),list:ae((n,a)=>{const r=new Intl.ListFormat(n,{...a});return o=>r.format(o)})},this.init(t)}init(t){const a=(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}}).interpolation;this.formatSeparator=a.formatSeparator?a.formatSeparator:a.formatSeparator||","}add(t,n){this.formats[t.toLowerCase().trim()]=n}addCached(t,n){this.formats[t.toLowerCase().trim()]=ae(n)}format(t,n,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return n.split(this.formatSeparator).reduce((s,l)=>{const{formatName:u,formatOptions:g}=Wo(l);if(this.formats[u]){let p=s;try{const f=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},v=f.locale||f.lng||r.locale||r.lng||a;p=this.formats[u](s,v,{...g,...r,...f})}catch(f){this.logger.warn(f)}return p}else this.logger.warn("there was no format function for ".concat(u));return s},t)}}function Yo(e,t){e.pending[t]!==void 0&&(delete e.pending[t],e.pendingCount--)}class Jo extends Ge{constructor(t,n,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=t,this.store=n,this.services=a,this.languageUtils=a.languageUtils,this.options=r,this.logger=W.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(a,r.backend,r)}queueLoad(t,n,a,r){const o={},i={},s={},l={};return t.forEach(u=>{let g=!0;n.forEach(p=>{const f="".concat(u,"|").concat(p);!a.reload&&this.store.hasResourceBundle(u,p)?this.state[f]=2:this.state[f]<0||(this.state[f]===1?i[f]===void 0&&(i[f]=!0):(this.state[f]=1,g=!1,i[f]===void 0&&(i[f]=!0),o[f]===void 0&&(o[f]=!0),l[p]===void 0&&(l[p]=!0)))}),g||(s[u]=!0)}),(Object.keys(o).length||Object.keys(i).length)&&this.queue.push({pending:i,pendingCount:Object.keys(i).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(o),pending:Object.keys(i),toLoadLanguages:Object.keys(s),toLoadNamespaces:Object.keys(l)}}loaded(t,n,a){const r=t.split("|"),o=r[0],i=r[1];n&&this.emit("failedLoading",o,i,n),a&&this.store.addResourceBundle(o,i,a),this.state[t]=n?-1:2;const s={};this.queue.forEach(l=>{jo(l.loaded,[o],i),Yo(l,t),n&&l.errors.push(n),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{s[u]||(s[u]={});const g=l.loaded[u];g.length&&g.forEach(p=>{s[u][p]===void 0&&(s[u][p]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",s),this.queue=this.queue.filter(l=>!l.done)}read(t,n,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,i=arguments.length>5?arguments[5]:void 0;if(!t.length)return i(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:t,ns:n,fcName:a,tried:r,wait:o,callback:i});return}this.readingCalls++;const s=(u,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const p=this.waitingReads.shift();this.read(p.lng,p.ns,p.fcName,p.tried,p.wait,p.callback)}if(u&&g&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,t,n,a,r+1,o*2,i)},o);return}i(u,g)},l=this.backend[a].bind(this.backend);if(l.length===2){try{const u=l(t,n);u&&typeof u.then=="function"?u.then(g=>s(null,g)).catch(s):s(null,u)}catch(u){s(u)}return}return l(t,n,s)}prepareLoading(t,n){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();typeof t=="string"&&(t=this.languageUtils.toResolveHierarchy(t)),typeof n=="string"&&(n=[n]);const o=this.queueLoad(t,n,a,r);if(!o.toLoad.length)return o.pending.length||r(),null;o.toLoad.forEach(i=>{this.loadOne(i)})}load(t,n,a){this.prepareLoading(t,n,{},a)}reload(t,n,a){this.prepareLoading(t,n,{reload:!0},a)}loadOne(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const a=t.split("|"),r=a[0],o=a[1];this.read(r,o,"read",void 0,void 0,(i,s)=>{i&&this.logger.warn("".concat(n,"loading namespace ").concat(o," for language ").concat(r," failed"),i),!i&&s&&this.logger.log("".concat(n,"loaded namespace ").concat(o," for language ").concat(r),s),this.loaded(t,i,s)})}saveMissing(t,n,a,r,o){let i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},s=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(n,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){const l={...i,isUpdate:o},u=this.backend.create.bind(this.backend);if(u.length<6)try{let g;u.length===5?g=u(t,n,a,r,l):g=u(t,n,a,r),g&&typeof g.then=="function"?g.then(p=>s(null,p)).catch(s):s(null,g)}catch(g){s(g)}else u(t,n,a,r,s,l)}!t||!t[0]||this.store.addResource(t[0],n,a,r)}}}function Qt(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(t){let n={};if(typeof t[1]=="object"&&(n=t[1]),typeof t[1]=="string"&&(n.defaultValue=t[1]),typeof t[2]=="string"&&(n.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const a=t[3]||t[2];Object.keys(a).forEach(r=>{n[r]=a[r]})}return n},interpolation:{escapeValue:!0,format:(e,t,n,a)=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function en(e){return typeof e.ns=="string"&&(e.ns=[e.ns]),typeof e.fallbackLng=="string"&&(e.fallbackLng=[e.fallbackLng]),typeof e.fallbackNS=="string"&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e}function Ee(){}function qo(e){Object.getOwnPropertyNames(Object.getPrototypeOf(e)).forEach(n=>{typeof e[n]=="function"&&(e[n]=e[n].bind(e))})}class we extends Ge{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=en(t),this.services={},this.logger=W,this.modules={external:[]},qo(this),n&&!this.isInitialized&&!t.isClone){if(!this.options.initImmediate)return this.init(t,n),this;setTimeout(()=>{this.init(t,n)},0)}}init(){var t=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof n=="function"&&(a=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(typeof n.ns=="string"?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const r=Qt();this.options={...r,...this.options,...en(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...r.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);function o(g){return g?typeof g=="function"?new g:g:null}if(!this.options.isClone){this.modules.logger?W.init(o(this.modules.logger),this.options):W.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=Ko);const p=new qt(this.options);this.store=new Yt(this.options.resources,this.options);const f=this.services;f.logger=W,f.resourceStore=this.store,f.languageUtils=p,f.pluralResolver=new Go(p,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===r.interpolation.format)&&(f.formatter=o(g),f.formatter.init(f,this.options),this.options.interpolation.format=f.formatter.format.bind(f.formatter)),f.interpolator=new Vo(this.options),f.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},f.backendConnector=new Jo(o(this.modules.backend),f.resourceStore,f,this.options),f.backendConnector.on("*",function(v){for(var m=arguments.length,b=new Array(m>1?m-1:0),w=1;w<m;w++)b[w-1]=arguments[w];t.emit(v,...b)}),this.modules.languageDetector&&(f.languageDetector=o(this.modules.languageDetector),f.languageDetector.init&&f.languageDetector.init(f,this.options.detection,this.options)),this.modules.i18nFormat&&(f.i18nFormat=o(this.modules.i18nFormat),f.i18nFormat.init&&f.i18nFormat.init(this)),this.translator=new Le(this.services,this.options),this.translator.on("*",function(v){for(var m=arguments.length,b=new Array(m>1?m-1:0),w=1;w<m;w++)b[w-1]=arguments[w];t.emit(v,...b)}),this.modules.external.forEach(v=>{v.init&&v.init(this)})}if(this.format=this.options.interpolation.format,a||(a=Ee),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return t.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return t.store[g](...arguments),t}});const l=ge(),u=()=>{const g=(p,f)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),l.resolve(f),a(p,f)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),l}loadResources(t){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee;const r=typeof t=="string"?t:this.language;if(typeof t=="function"&&(a=t),!this.options.resources||this.options.partialBundledLanguages){if(r&&r.toLowerCase()==="cimode")return a();const o=[],i=s=>{if(!s)return;this.services.languageUtils.toResolveHierarchy(s).forEach(u=>{o.indexOf(u)<0&&o.push(u)})};r?i(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(l=>i(l)),this.options.preload&&this.options.preload.forEach(s=>i(s)),this.services.backendConnector.load(o,this.options.ns,s=>{!s&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),a(s)})}else a(null)}reloadResources(t,n,a){const r=ge();return t||(t=this.languages),n||(n=this.options.ns),a||(a=Ee),this.services.backendConnector.reload(t,n,o=>{r.resolve(),a(o)}),r}use(t){if(!t)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!t.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return t.type==="backend"&&(this.modules.backend=t),(t.type==="logger"||t.log&&t.warn&&t.error)&&(this.modules.logger=t),t.type==="languageDetector"&&(this.modules.languageDetector=t),t.type==="i18nFormat"&&(this.modules.i18nFormat=t),t.type==="postProcessor"&&ea.addPostProcessor(t),t.type==="formatter"&&(this.modules.formatter=t),t.type==="3rdParty"&&this.modules.external.push(t),this}setResolvedLanguage(t){if(!(!t||!this.languages)&&!(["cimode","dev"].indexOf(t)>-1))for(let n=0;n<this.languages.length;n++){const a=this.languages[n];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}changeLanguage(t,n){var a=this;this.isLanguageChangingTo=t;const r=ge();this.emit("languageChanging",t);const o=l=>{this.language=l,this.languages=this.services.languageUtils.toResolveHierarchy(l),this.resolvedLanguage=void 0,this.setResolvedLanguage(l)},i=(l,u)=>{u?(o(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,r.resolve(function(){return a.t(...arguments)}),n&&n(l,function(){return a.t(...arguments)})},s=l=>{!t&&!l&&this.services.languageDetector&&(l=[]);const u=typeof l=="string"?l:this.services.languageUtils.getBestMatchFromCodes(l);u&&(this.language||o(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,g=>{i(g,u)})};return!t&&this.services.languageDetector&&!this.services.languageDetector.async?s(this.services.languageDetector.detect()):!t&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(s):this.services.languageDetector.detect(s):s(t),r}getFixedT(t,n,a){var r=this;const o=function(i,s){let l;if(typeof s!="object"){for(var u=arguments.length,g=new Array(u>2?u-2:0),p=2;p<u;p++)g[p-2]=arguments[p];l=r.options.overloadTranslationOptionHandler([i,s].concat(g))}else l={...s};l.lng=l.lng||o.lng,l.lngs=l.lngs||o.lngs,l.ns=l.ns||o.ns,l.keyPrefix=l.keyPrefix||a||o.keyPrefix;const f=r.options.keySeparator||".";let v;return l.keyPrefix&&Array.isArray(i)?v=i.map(m=>"".concat(l.keyPrefix).concat(f).concat(m)):v=l.keyPrefix?"".concat(l.keyPrefix).concat(f).concat(i):i,r.t(v,l)};return typeof t=="string"?o.lng=t:o.lngs=t,o.ns=n,o.keyPrefix=a,o}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(t){this.options.defaultNS=t}hasLoadedNamespace(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const a=n.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,o=this.languages[this.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const i=(s,l)=>{const u=this.services.backendConnector.state["".concat(s,"|").concat(l)];return u===-1||u===2};if(n.precheck){const s=n.precheck(this,i);if(s!==void 0)return s}return!!(this.hasResourceBundle(a,t)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||i(a,t)&&(!r||i(o,t)))}loadNamespaces(t,n){const a=ge();return this.options.ns?(typeof t=="string"&&(t=[t]),t.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{a.resolve(),n&&n(r)}),a):(n&&n(),Promise.resolve())}loadLanguages(t,n){const a=ge();typeof t=="string"&&(t=[t]);const r=this.options.preload||[],o=t.filter(i=>r.indexOf(i)<0);return o.length?(this.options.preload=r.concat(o),this.loadResources(i=>{a.resolve(),n&&n(i)}),a):(n&&n(),Promise.resolve())}dir(t){if(t||(t=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!t)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new qt(Qt());return n.indexOf(a.getLanguagePartFromCode(t))>-1||t.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new we(t,n)}cloneInstance(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ee;const a=t.forkResourceStore;a&&delete t.forkResourceStore;const r={...this.options,...t,isClone:!0},o=new we(r);return(t.debug!==void 0||t.prefix!==void 0)&&(o.logger=o.logger.clone(t)),["store","services","language"].forEach(s=>{o[s]=this[s]}),o.services={...this.services},o.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},a&&(o.store=new Yt(this.store.data,r),o.services.resourceStore=o.store),o.translator=new Le(o.services,r),o.translator.on("*",function(s){for(var l=arguments.length,u=new Array(l>1?l-1:0),g=1;g<l;g++)u[g-1]=arguments[g];o.emit(s,...u)}),o.init(r,n),o.translator.options=r,o.translator.backendConnector.services.utils={hasLoadedNamespace:o.hasLoadedNamespace.bind(o)},o}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const P=we.createInstance();P.createInstance=we.createInstance;P.createInstance;P.dir;P.init;P.loadResources;P.reloadResources;P.use;P.changeLanguage;P.getFixedT;P.t;P.exists;P.setDefaultNamespace;P.hasLoadedNamespace;P.loadNamespaces;P.loadLanguages;let re;const Xo=()=>re,Zo=e=>{$.onLanguageChange(t=>e.changeLanguage(t))};class Qo{constructor(){this._appName="RMG",this._lng=void 0,this._defaultResources={},this._resources={}}use(t){return P.use(t),this}withAppName(t){return this._appName=t,this}withLng(t){return this._lng=t,this}withDefaultResource(t){return Object.entries(t).forEach(([n,a])=>{this._defaultResources[n]=a}),this}withResource(t,n){return this._resources[t]=n,this}combineResource(){const t={};return Object.entries(this._defaultResources).forEach(([n,a])=>{t[n]={translation:a}}),Object.entries(this._resources).forEach(([n,a])=>{n in t?t[n].translation=Object.assign(Object.assign({},t[n].translation),a):t[n]={translation:a}}),t}build(){return re=P.createInstance({lng:this._lng,fallbackLng:{"zh-CN":["zh-Hans","zh-Hant","en"],"zh-HK":["zh-Hant","zh-Hans","en"],"zh-TW":["zh-Hant","zh-Hans","en"],default:["en"]},resources:this.combineResource()},(t,n)=>{var a;if(t){console.error("[rmg-runtime] unexpected error occurs while initialising i18n",t);return}document.title=n(this._appName),document.documentElement.lang=(a=this._lng)!==null&&a!==void 0?a:"en"}),re.on("languageChanged",t=>{document.title=re.t(this._appName),document.documentElement.lang=t}),Zo(re),re}}var ta=globalThis&&globalThis.__awaiter||function(e,t,n,a){function r(o){return o instanceof n?o:new n(function(i){i(o)})}return new(n||(n=Promise))(function(o,i){function s(g){try{u(a.next(g))}catch(p){i(p)}}function l(g){try{u(a.throw(g))}catch(p){i(p)}}function u(g){g.done?o(g.value):r(g.value).then(s,l)}u((a=a.apply(e,t||[])).next())})};let na=!1;const ei=()=>ta(void 0,void 0,void 0,function*(){yield C.loadWithTimeout(),$.isAnalyticsQADone()?$.isAllowAnalytics()&&(console.log("[rmg-runtime] User has previously allowed GA"),Te.init()):V.isStandaloneWindow()&&C.getComponent()!=="rmg-home"&&(console.warn("[rmg-runtime] App is opened in standalone window but analytics Q&A is not finished. GA will be init by default."),Te.init()),na=!0}),ti=()=>ta(void 0,void 0,void 0,function*(){let e=0;for(;e<=10&&!na;)yield Gn(1e3),e+=1}),R={ready:ti,getAppName:C.getComponent,getAppVersion:C.getVersion,getEnv:C.getEnvironment,getInstance:C.getInstance,event:Te.customEvent,isStandaloneWindow:V.isStandaloneWindow,injectUITools:V.injectUITools,openApp:V.openApp,onAppOpen:V.onAppOpen,closeApp:V.closeApp,onAppClose:V.onAppClose,updateUrl:V.updateUrl,onUrlUpdate:V.onUrlUpdate,toggleNavMenu:V.toggleNavMenu,postEvent:B.postEvent,onMessage:B.onMessage,setLanguage:$.setLanguage,getLanguage:$.getLanguage,onLanguageChange:$.onLanguageChange,setColourMode:$.setColourMode,getColourMode:$.getColourMode,onColourModeChange:$.onColourModeChange,isAnalyticsQADone:$.isAnalyticsQADone,isAllowAnalytics:$.isAllowAnalytics,allowAnalytics:$.allowAnalytics,getStorageForCurrentApp:Vt.getStorageForCurrentApp,clearStorageForCurrentApp:Vt.clearStorageForCurrentApp,getMsSinceStartUp:To.getMsSinceStartUp,I18nBuilder:Qo,getI18nInstance:Xo};ei().then();window.rmgRuntime=R;var aa,tn=$n;aa=tn.createRoot,tn.hydrateRoot;function ni(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),console.warn(...t)}}const nn={};function vt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];typeof t[0]=="string"&&nn[t[0]]||(typeof t[0]=="string"&&(nn[t[0]]=new Date),ni(...t))}const ra=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}};function an(e,t,n){e.loadNamespaces(t,ra(e,n))}function rn(e,t,n,a){typeof n=="string"&&(n=[n]),n.forEach(r=>{e.options.ns.indexOf(r)<0&&e.options.ns.push(r)}),e.loadLanguages(t,ra(e,a))}function ai(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const a=t.languages[0],r=t.options?t.options.fallbackLng:!1,o=t.languages[t.languages.length-1];if(a.toLowerCase()==="cimode")return!0;const i=(s,l)=>{const u=t.services.backendConnector.state["".concat(s,"|").concat(l)];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!i(t.isLanguageChangingTo,e)?!1:!!(t.hasResourceBundle(a,e)||!t.services.backendConnector.backend||t.options.resources&&!t.options.partialBundledLanguages||i(a,e)&&(!r||i(o,e)))}function ri(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!t.languages||!t.languages.length?(vt("i18n.languages were undefined or empty",t.languages),!0):t.options.ignoreJSONStructure!==void 0?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(r,o)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&r.services.backendConnector.backend&&r.isLanguageChangingTo&&!o(r.isLanguageChangingTo,e))return!1}}):ai(e,t,n)}const oi=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ii={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},si=e=>ii[e],li=e=>e.replace(oi,si);let yt={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:li};function ci(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yt={...yt,...e}}function ui(){return yt}let oa;function hi(e){oa=e}function gi(){return oa}const di={type:"3rdParty",init(e){ci(e.options.react),hi(e)}},ia=y.createContext();class fi{constructor(){this.usedNamespaces={}}addUsedNamespaces(t){t.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const pi=(e,t)=>{const n=y.useRef();return y.useEffect(()=>{n.current=t?n.current:e},[e,t]),n.current};function sa(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=t,{i18n:a,defaultNS:r}=y.useContext(ia)||{},o=n||a||gi();if(o&&!o.reportNamespaces&&(o.reportNamespaces=new fi),!o){vt("You will need to pass in an i18next instance by using initReactI18next");const E=(O,N)=>typeof N=="string"?N:N&&typeof N=="object"&&typeof N.defaultValue=="string"?N.defaultValue:Array.isArray(O)?O[O.length-1]:O,z=[E,{},!1];return z.t=E,z.i18n={},z.ready=!1,z}o.options.react&&o.options.react.wait!==void 0&&vt("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...ui(),...o.options.react,...t},{useSuspense:s,keyPrefix:l}=i;let u=e||r||o.options&&o.options.defaultNS;u=typeof u=="string"?[u]:u||["translation"],o.reportNamespaces.addUsedNamespaces&&o.reportNamespaces.addUsedNamespaces(u);const g=(o.isInitialized||o.initializedStoreOnce)&&u.every(E=>ri(E,o,i));function p(){return o.getFixedT(t.lng||null,i.nsMode==="fallback"?u:u[0],l)}const[f,v]=y.useState(p);let m=u.join();t.lng&&(m="".concat(t.lng).concat(m));const b=pi(m),w=y.useRef(!0);y.useEffect(()=>{const{bindI18n:E,bindI18nStore:z}=i;w.current=!0,!g&&!s&&(t.lng?rn(o,t.lng,u,()=>{w.current&&v(p)}):an(o,u,()=>{w.current&&v(p)})),g&&b&&b!==m&&w.current&&v(p);function O(){w.current&&v(p)}return E&&o&&o.on(E,O),z&&o&&o.store.on(z,O),()=>{w.current=!1,E&&o&&E.split(" ").forEach(N=>o.off(N,O)),z&&o&&z.split(" ").forEach(N=>o.store.off(N,O))}},[o,m]);const S=y.useRef(!0);y.useEffect(()=>{w.current&&!S.current&&v(p),S.current=!1},[o,l]);const x=[f,o,g];if(x.t=f,x.i18n=o,x.ready=g,g||!g&&!s)return x;throw new Promise(E=>{t.lng?rn(o,t.lng,u,()=>E()):an(o,u,()=>E())})}function mi(e){let{i18n:t,defaultNS:n,children:a}=e;const r=y.useMemo(()=>({i18n:t,defaultNS:n}),[t,n]);return y.createElement(ia.Provider,{value:r},a)}const vi="",yi="",bi="",Si="",wi="",xi="",zi="",_i="",Ei="",Oi="",Hi="/Language",Ti="",Ni="",Ai="",Ri="",Pi="",ji="",Li="",Mi="",Fi="",Ii="",ki="",Bi="",Di="",Ci={Action:vi,Apps:yi,"Back to list":"","Background colour":"",Black:bi,Cancel:Si,City:wi,Components:xi,"Configuration file":"",Confirm:zi,Continue:_i,"Country/Region":"/",Copy:Ei,Edit:Oi,"Foreground colour":"","Go back":"",Language:Hi,Justification:Ti,Name:Ni,Next:Ai,Open:Ri,Palette:Pi,"Please select...":"...",Previous:ji,"Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:Li,Reset:Mi,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":"",Settings:Fi,Submit:Ii,Translate:ki,Upload:Bi,White:Di},$i="",Ui="",Gi="",Vi="",Wi="",Ki="",Yi="",Ji="",qi="",Xi="",Zi="/Language",Qi="",es="",ts="",ns="",as="",rs="",os="",is="",ss="",ls="",cs="",us="",hs="",gs={Action:$i,Apps:Ui,"Back to list":"","Background colour":"",Black:Gi,Cancel:Vi,City:Wi,Components:Ki,"Configuration file":"",Confirm:Yi,Continue:Ji,Copy:qi,"Country/Region":"/",Edit:Xi,"Foreground colour":"","Go back":"",Language:Zi,Justification:Qi,Name:es,Next:ts,Open:ns,Palette:as,"Please select...":"...",Previous:rs,"Rail Map Generator":"","Rail Map Painter":"","Rail Map Toolkit":"",Remove:os,Reset:is,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":"",Settings:ss,Submit:ls,Translate:cs,Upload:us,White:hs},ds="",fs="",ps="",ms="",vs="",ys="",bs="",Ss="",ws="",xs="/Language",zs="",_s="",Es="",Os="",Hs="",Ts="",Ns="",As="",Rs="",Ps="",js="",Ls="",Ms="",Fs={Action:ds,Apps:fs,"Back to list":" ","Background colour":"",Black:ps,Cancel:ms,City:vs,Components:ys,"Configuration file":"  ",Confirm:bs,Copy:Ss,"Country/Region":"/",Edit:ws,"Foreground colour":"","Go back":"",Language:xs,Justification:zs,Name:_s,Next:Es,Open:Os,Palette:Hs,"Please select...":"",Previous:Ts,"Rail Map Generator":"  ","Rail Map Painter":"  ","Rail Map Toolkit":" ",Remove:Ns,Reset:As,"RMG Templates":"RMG ","RMP Gallery":"RMP ","Seed Project":" ",Settings:Rs,Submit:Ps,Translate:js,Upload:Ls,White:Ms};var Is={en:{},"zh-Hans":Ci,"zh-Hant":gs,ko:Fs};const ks={editStyle:"Edit style"},Bs={downloads:"Downloads",configFile:"Configuration file",images:"Images"},Ds={invalidType:"Invalid file type! Only file in JSON format is accepted.",unknownError:"Unknown error occurred while parsing the uploaded file! Please try again."},Cs={title:"Download images",canvas:"Canvas",transparent:"Transparent background",showBorder:"Display border",scale:"Scale",format:"Format",pleaseSelect:"Please select...",png:"PNG",svg:"SVG (Web use)",downloadOne:"Download current station",downloadAll:"Download all stations"},$s={main:"Main line",branch:"Branch",external:"External line",addStation:"Add station",editLine:"Edit line section"},Us={num:"Station code",zhName:"Chinese name",enName:"English name",interchange:"Interchanges",coline:"Tracks sharing"},Gs={header:"Edit style",layout:{title:"Layout",canvasHeight:"Canvas height",destinationWidth:"Destination width",runinWidth:"Running-in width",railmapWidth:"Rail map width",indoorWidth:"Indoor width",verticalPosition:"Vertical position",branchSpacing:"Branch spacing",branchSpacingLoop:"Vertical padding",padding:"Rail map padding",directionGzX:"Direction horizontal position",directionGzY:"Direction vertical position"},design:{title:"Design",zhLineName:"Chinese line name",enLineName:"English line name",lineNum:"Line code",direction:"Train direction",left:"Left",right:"Right",platformNum:"Platform number",psdNum:"Platform door number",panelType:"Panel type",gz1:"Line 1",gz28:"Line 2/8 (Panasonic)",gz2otis:"Line 2/8 (Otis)",gz3:"Line 3",gz1421:"2017 style",gz6:"2010 style",gzgf:"2016 style",gz4:"Line 4",gz5:"Line 5",sh:"Default",sh2020:"2020 (Beta)",nameDisplay:"Display station names",alternatively:"Alternatively",onOneSide:"Same side",flip:"Flip position",legacyDestination:"Display line name on direction sign",overrideTerminal:"Override terminal",terminalZhName:"Terminal Chinese name",terminalEnName:"Terminal English name"},note:{title:"Notes",add:"Add note",zhNote:"Chinese note",enNote:"English note",positionX:"Horizontal position",positionY:"Vertical position",border:"Display border",remove:"Remove note"},loop:{title:"Loop",isLoop:"Treat as loop line",isBank:"Display loop as a parallelogram in Rail map",leftRightFactor:"Left and right factor",bottomFactor:"Bottom factor"}},Vs={header:"Edit line section",branch:{title:"Branch"},coline:{title:"Tracks sharing",add:"Add sharing track"},action:{title:"Actions",autoNum:"Auto numbering stations",reverse:"Rotate entire line",flip:"Flip entire line"}},Ws={info:{title:"Station info",num:"Station code",zhName:"Chinese name",enName:"English name",zhSecondary:"Chinese secondary",enSecondary:"English secondary"},interchange:{title:"Interchanges",within:"Within-station interchange",outStation:"Out-of-station interchange",outSystem:"Out-of-system interchange",addGroup:"Add interchange group",noInterchanges:"No interchanges",zhName:"Chinese name",enName:"English name",add:"Add interchange",copy:"Copy interchange",remove:"Remove interchange"},branch:{type:"Type",through:"Through",nonThrough:"Non-through",firstStation:"First station",position:"Position",upper:"Upper",lower:"Lower"},more:{title:"More settings",service:"Train services",local:"Local",express:"Express",direct:"Direct",facility:"Nearby facility",none:"None",pivot:"Pivot station on loop line",oneLine:"Display Chinese and English in one line",intPadding:"Padding between station name and interchange box",intPaddingApplyGlobal:"Apply current padding to all stations",apply:"Apply"},footer:{current:"Set as current",remove:"Remove"}},Ks={title:"Add station",where:"Target location",main:"Main line",branch:"Branch",external:"External line",preposition:"Preposition",before:"Before",after:"After",pivot:"Pivot station",pleaseSelect:"Please select...",error:"Failed to add station. Please check your selections and try again."},Ys={title:"Create a new branch or external line",where:"Target location",new:"Create a new branch",ext:"Create an external line",from:"Between",to:"and",pleaseSelect:"Please select...",position:"Position",upper:"Upper",lower:"Lower"},Js={title:"Station auto numbering",where:"Target location",main:"Main line",branch:"Branch",external:"External line",from:"Starting index",maxLength:"Number of digits",sort:"Sorting",asc:"Ascending",desc:"Descending"},qs={all:"All",destination:"Destination",runin:"Running-in",railmap:"Rail map",indoor:"Indoor"},Xs={mtr:"MTR",gzmtr:"Guangzhou Metro",shmetro:"Shanghai Metro"},Zs={HeaderActions:ks,DownloadActions:Bs,OpenActions:Ds,DownloadModal:Cs,GridTabs:$s,StationAgGrid:Us,StyleSidePanel:Gs,BranchSidePanel:Vs,StationSidePanel:Ws,AddStationModal:Ks,NewBranchModal:Ys,AutoNumModal:Js,CanvasType:qs,RmgStyle:Xs},Qs={editStyle:""},el={downloads:"",configFile:"",images:""},tl={invalidType:"JSON",unknownError:""},nl={title:"",canvas:"",transparent:"",showBorder:"",scale:"",format:"",pleaseSelect:"...",png:"PNG",svg:"SVG",downloadOne:"",downloadAll:""},al={main:"",branch:"",external:"",addStation:"",editLine:""},rl={num:"",interchange:"",coline:""},ol={header:"",layout:{title:"",canvasHeight:"",destinationWidth:"",runinWidth:"",railmapWidth:"",indoorWidth:"",verticalPosition:"",branchSpacing:"",branchSpacingLoop:"",padding:"",directionGzX:"",directionGzY:""},design:{title:"",zhLineName:"",enLineName:"",lineNum:"",direction:"",left:"",right:"",platformNum:"",psdNum:"",panelType:"",gz1:"1",gz28:"2/8",gz2otis:"2/8",gz3:"3",gz1421:"2017",gz6:"2010",gzgf:"2016",gz4:"4",gz5:"5",sh:"",sh2020:"2020",nameDisplay:"",alternatively:"",onOneSide:"",flip:"",legacyDestination:"",overrideTerminal:"",terminalZhName:"",terminalEnName:""},note:{title:"",add:"",zhNote:"",enNote:"",positionX:"",positionY:"",border:"",remove:""},loop:{title:"",isLoop:"",isBank:"",leftRightFactor:"",bottomFactor:""}},il={header:"",branch:{title:""},coline:{title:"",add:""},action:{title:"",autoNum:"",reverse:"",flip:""}},sl={info:{title:"",num:"",zhSecondary:"",enSecondary:""},interchange:{title:"",within:"",outStation:"",outSystem:"",addGroup:"",noInterchanges:"",add:"",copy:"",remove:""},branch:{type:"",through:"",nonThrough:"",firstStation:"",position:"",upper:"",lower:""},more:{title:"",service:"",local:"",express:"",direct:"",facility:"",pivot:"",oneLine:"",intPadding:"",intPaddingApplyGlobal:"",apply:""},footer:{current:"",remove:""}},ll={title:"",where:"",main:"",branch:"",external:"",preposition:"",before:"",after:"",pivot:"",pleaseSelect:"...",error:""},cl={title:"",where:"",new:"",ext:"",from:"",to:"",pleaseSelect:"...",position:"",upper:"",lower:""},ul={title:"",where:"",main:"",branch:"",external:"",from:"",maxLength:"",sort:"",asc:"",desc:""},hl="",gl="",dl="",fl="",pl="",ml="",vl="",yl="",bl="",Sl="",wl="",xl="",zl="",_l="",El={all:"",destination:"",runin:"",railmap:"",indoor:""},Ol={mtr:"",gzmtr:"",shmetro:""},Hl={HeaderActions:Qs,DownloadActions:el,OpenActions:tl,DownloadModal:nl,GridTabs:al,StationAgGrid:rl,StyleSidePanel:ol,BranchSidePanel:il,StationSidePanel:sl,AddStationModal:ll,NewBranchModal:cl,AutoNumModal:ul,Airport:hl,"All projects":"","Are you sure to remove station? You cannot undo this action.":"","Blank project":"","Branch left end":"","Branch on the left":"","Branch on the right":"","Branch right end":"","Branch spacing":"",Branches:gl,by:dl,"Canvas scale":"","Chinese name":"",Close:fl,Colour:pl,"Connect to main line":"","day ago":"","days ago":"","Disconnect from main line":"","Disneyland resort":"","Don't show me again":"","Edit project info":"","Empty template":"","English name":"","Help and support":"","High speed rail":"","hour ago":"","hours ago":"",Import:ml,"Import project":"","Just now":"","Last modified":"",Manage:vl,"minute ago":"","minutes ago":"","National rail":"","Ngong Ping 360":"360","No branches found":"",None:yl,"now and enjoy an even better rail map design experience!":"","Open selected":"","Open template":"","Paid area":"",Project:bl,"Project selected is invalid or corrupted.":"","Project name":"",Reload:Sl,"Remove project":"","Remove station":"","Saved projects":"","Select canvas":"",Style:wl,"Station Chinese name":"","Station English name":"","Station name":"","Target station":"","Terms and conditions":"","Text on the left":"","Text on the right":"","Try out":"","Unable to connect to main line.":"","Unable to disconnect from main line.":"","Unable to remove this station.":"",Unknown:xl,View:zl,Visit:_l,"Visit GitHub":"GitHub","You have reached the maximum number of projects.":"",CanvasType:El,RmgStyle:Ol},Tl={editStyle:""},Nl={downloads:"",configFile:"",images:""},Al={invalidType:"JSON",unknownError:""},Rl={title:"",canvas:"",transparent:"",showBorder:"",scale:"",format:"",pleaseSelect:"...",png:"PNG",svg:"SVG",downloadOne:"",downloadAll:""},Pl={main:"",branch:"",external:"",addStation:"",editLine:""},jl={num:"",interchange:"",coline:""},Ll={header:"",layout:{title:"",canvasHeight:"",destinationWidth:"",runinWidth:"",railmapWidth:"",indoorWidth:"",verticalPosition:"",branchSpacing:"",branchSpacingLoop:"",padding:"",directionGzX:"",directionGzY:""},design:{title:"",zhLineName:"",enLineName:"",lineNum:"",direction:"",left:"",right:"",platformNum:"",psdNum:"",panelType:"",gz1:"1",gz28:"2/8",gz2otis:"2/8",gz3:"3",gz1421:"2017",gz6:"2010",gzgf:"2016",gz4:"4",gz5:"5",sh:"",sh2020:"2020",nameDisplay:"",alternatively:"",onOneSide:"",flip:"",legacyDestination:"",overrideTerminal:"",terminalZhName:"",terminalEnName:""},note:{title:"",add:"",zhNote:"",enNote:"",positionX:"",positionY:"",border:"",remove:""},loop:{title:"",isLoop:"",isBank:"",leftRightFactor:"",bottomFactor:""}},Ml={header:"",branch:{title:""},coline:{title:"",add:""},action:{title:"",autoNum:"",reverse:"",flip:""}},Fl={info:{title:"",num:"",zhSecondary:"",enSecondary:""},interchange:{title:"",within:"",outStation:"",outSystem:"",addGroup:"",noInterchanges:"",add:"",copy:"",remove:""},branch:{type:"",through:"",nonThrough:"",firstStation:"",position:"",upper:"",lower:""},more:{title:"",service:"",local:"",express:"",direct:"",facility:"",none:"",pivot:"",oneLine:"",intPadding:"",intPaddingApplyGlobal:"",apply:""},footer:{current:"",remove:""}},Il={title:"",where:"",main:"",branch:"",external:"",preposition:"",before:"",after:"",pivot:"",pleaseSelect:"...",error:""},kl={title:"",where:"",new:"",ext:"",from:"",to:"",pleaseSelect:"...",position:"",upper:"",lower:""},Bl={title:"",where:"",main:"",branch:"",external:"",from:"",maxLength:"",sort:"",asc:"",desc:""},Dl="",Cl="",$l="",Ul="",Gl="",Vl="",Wl="",Kl="",Yl="",Jl="",ql="",Xl="",Zl="",Ql="",ec={all:"",destination:"",runin:"",railmap:"",indoor:""},tc={mtr:"",gzmtr:"",shmetro:""},nc={HeaderActions:Tl,DownloadActions:Nl,OpenActions:Al,DownloadModal:Rl,GridTabs:Pl,StationAgGrid:jl,StyleSidePanel:Ll,BranchSidePanel:Ml,StationSidePanel:Fl,AddStationModal:Il,NewBranchModal:kl,AutoNumModal:Bl,Airport:Dl,"All projects":"","Are you sure to remove station? You cannot undo this action.":"","Blank project":"","Branch left end":"","Branch on the left":"","Branch on the right":"","Branch right end":"","Branch spacing":"",Branches:Cl,by:$l,"Canvas scale":"","Chinese name":"",Close:Ul,Colour:Gl,"Connect to main line":"","day ago":"","days ago":"","Disconnect from main line":"","Disneyland resort":"","Don't show me again":"","Edit project info":"","Empty template":"","English name":"","Help and support":"","High speed rail":"","hour ago":"","hours ago":"",Import:Vl,"Import project":"","Just now":"","Last modified":"",Manage:Wl,"minute ago":"","minutes ago":"","National rail":"","Ngong Ping 360":"360","No branches found":"",None:Kl,"now and enjoy an even better rail map design experience!":"","Open selected":"","Open template":"","Paid area":"",Project:Yl,"Project selected is invalid or corrupted.":"","Project name":"",Reload:Jl,"Remove project":"","Remove station":"","Saved projects":"","Select canvas":"",Style:ql,"Station Chinese name":"","Station English name":"","Station name":"","Target station":"","Terms and conditions":"","Text on the left":"","Text on the right":"","Try out":"","Unable to connect to main line.":"","Unable to disconnect from main line.":"","Unable to remove this station.":"",Unknown:Xl,View:Zl,Visit:Ql,"Visit GitHub":"GitHub","You have reached the maximum number of projects.":"",CanvasType:ec,RmgStyle:tc},ac={editStyle:" "},rc={downloads:"",configFile:" ",images:""},oc={invalidType:"  ! JSON   .",unknownError:"     !   ."},ic={title:" ",canvas:"",transparent:" ",showBorder:" ",scale:"/  ",format:" ",pleaseSelect:"",png:"PNG ",svg:"SVG ",downloadOne:"  ",downloadAll:"  "},sc={main:"",branch:"",external:" ",addStation:" ",editLine:"  "},lc={num:" ",interchange:"",coline:""},cc={header:" ",layout:{title:"",canvasHeight:" ",destinationWidth:"  ",runinWidth:"  ",railmapWidth:"  ",indoorWidth:"  ",verticalPosition:"  ",branchSpacing:" ",branchSpacingLoop:" ",padding:" ",directionGzX:"   ",directionGzY:"   "},design:{title:"",zhLineName:"  ",enLineName:"  ",lineNum:" ",direction:" ",left:"",right:"",platformNum:" ",psdNum:"  ",panelType:"   ",gz1:"1",gz28:"2/8",gz2otis:"2/8",gz3:"3",gz1421:"2017 ",gz6:"2010 ",gzgf:"2016 ",gz4:"4",gz5:"5",sh:"",sh2020:"2020 ",nameDisplay:"  ",alternatively:" ",onOneSide:" ",flip:" ",legacyDestination:"   ",overrideTerminal:"  ",terminalZhName:"  ",terminalEnName:"  "},note:{title:"",add:" ",zhNote:" ",enNote:" ",positionX:"  ",positionY:"  ",border:" ",remove:" "},loop:{title:"",isLoop:" ",isBank:"    ",leftRightFactor:" ",bottomFactor:" "}},uc={header:"  ",branch:{title:""},coline:{title:"",add:" "},action:{title:"",autoNum:"   ",reverse:"  ",flip:"  "}},hc={info:{title:" ",num:" ",zhSecondary:" 2",enSecondary:" 2"},interchange:{title:"",within:"  ",outStation:"  ",outSystem:"",addGroup:"  ",noInterchanges:"",add:" ",copy:" ",remove:" "},branch:{type:"",through:"( )",nonThrough:"( )",firstStation:"  ",position:"",upper:"",lower:""},more:{title:" ",service:" ",local:"",express:"",direct:"",facility:" ",pivot:"  ",oneLine:"      ",intPadding:"    ",intPaddingApplyGlobal:"    ",apply:""},footer:{current:"  ",remove:""}},gc={title:" ",where:" ",main:"",branch:"",external:" ",preposition:" ",before:"",after:"",pivot:"",pleaseSelect:"",error:"  ,     ."},dc={title:"    ",where:" ",new:" ",ext:"  ",from:"",to:"",pleaseSelect:"",position:"",upper:"",lower:""},fc={title:"   ",where:" ",main:"",branch:"",external:" ",from:" ",maxLength:" ",sort:" ",asc:"",desc:""},pc="",mc="",vc=" ",yc="",bc="",Sc="",wc="",xc="",zc=" ",_c="",Ec={all:"",destination:" ",runin:"  ",railmap:"  ",indoor:" "},Oc={mtr:" ",gzmtr:" ",shmetro:" "},Hc={HeaderActions:ac,DownloadActions:rc,OpenActions:oc,DownloadModal:ic,GridTabs:sc,StationAgGrid:lc,StyleSidePanel:cc,BranchSidePanel:uc,StationSidePanel:hc,AddStationModal:gc,NewBranchModal:dc,AutoNumModal:fc,Airport:pc,"All projects":" ","Are you sure to remove station? You cannot undo this action.":"  ?     .","Blank project":" ","Branch left end":" ","Branch on the left":" ","Branch on the right":" ","Branch right end":" ","Branch spacing":" ",Branches:mc,by:vc,"Canvas scale":"   ","Chinese name":" ",Colour:yc,"Connect to main line":"  ","day ago":" ","days ago":" ","Disconnect from main line":" ","Disneyland resort":"","Edit project info":"  ","Empty template":" ","English name":" ","Help and support":" ","High speed rail":" ","hour ago":" ","hours ago":" ","Import project":" ","Just now":"","Last modified":" ","minute ago":" ","minutes ago":" ","National rail":" ","No branches found":"  .",None:bc,"Open selected":"  ","Open template":" ","Paid area":"",Project:Sc,"Project selected is invalid or corrupted.":"   .","Project name":" ","Remove project":" ","Remove station":" ","Saved projects":" ","Select canvas":" ",Style:wc,"Station Chinese name":"  ","Station English name":"  ","Station name":" ","Target station":" ","Terms and conditions":"  ","Text on the left":"   ","Text on the right":"   ","Unable to connect to main line.":"    .","Unable to disconnect from main line.":"   .","Unable to remove this station.":"    .",Unknown:xc,View:zc,Visit:_c,"Visit GitHub":"GitHub ","You have reached the maximum number of projects.":"   .",CanvasType:Ec,RmgStyle:Oc},Tc=new R.I18nBuilder().use(di).withAppName("Rail Map Generator").withLng(R.getLanguage()).withDefaultResource(Is).withResource("en",Zs).withResource("zh-Hans",Hl).withResource("zh-Hant",nc).withResource("ko",Hc).build(),Nc="modulepreload",Ac=function(e){return"/rmg/"+e},on={},la=function(t,n,a){if(!n||n.length===0)return t();const r=document.getElementsByTagName("link");return Promise.all(n.map(o=>{if(o=Ac(o),o in on)return;on[o]=!0;const i=o.endsWith(".css"),s=i?'[rel="stylesheet"]':"";if(!!a)for(let g=r.length-1;g>=0;g--){const p=r[g];if(p.href===o&&(!i||p.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(o,'"]').concat(s)))return;const u=document.createElement("link");if(u.rel=i?"stylesheet":Nc,i||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),i)return new Promise((g,p)=>{u.addEventListener("load",g),u.addEventListener("error",()=>p(new Error("Unable to preload CSS for ".concat(o))))})})).then(()=>t()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};var ca=function(){if(typeof Map<"u")return Map;function e(t,n){var a=-1;return t.some(function(r,o){return r[0]===n?(a=o,!0):!1}),a}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var a=e(this.__entries__,n),r=this.__entries__[a];return r&&r[1]},t.prototype.set=function(n,a){var r=e(this.__entries__,n);~r?this.__entries__[r][1]=a:this.__entries__.push([n,a])},t.prototype.delete=function(n){var a=this.__entries__,r=e(a,n);~r&&a.splice(r,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,a){a===void 0&&(a=null);for(var r=0,o=this.__entries__;r<o.length;r++){var i=o[r];n.call(a,i[1],i[0])}},t}()}(),bt=typeof window<"u"&&typeof document<"u"&&window.document===document,Me=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),Rc=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Me):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Pc=2;function jc(e,t){var n=!1,a=!1,r=0;function o(){n&&(n=!1,e()),a&&s()}function i(){Rc(o)}function s(){var l=Date.now();if(n){if(l-r<Pc)return;a=!0}else n=!0,a=!1,setTimeout(i,t);r=l}return s}var Lc=20,Mc=["top","right","bottom","left","width","height","size","weight"],Fc=typeof MutationObserver<"u",Ic=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=jc(this.refresh.bind(this),Lc)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,a=n.indexOf(t);~a&&n.splice(a,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!bt||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Fc?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!bt||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,a=n===void 0?"":n,r=Mc.some(function(o){return!!~a.indexOf(o)});r&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),ua=function(e,t){for(var n=0,a=Object.keys(t);n<a.length;n++){var r=a[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},se=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Me},ha=Ve(0,0,0,0);function Fe(e){return parseFloat(e)||0}function sn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(a,r){var o=e["border-"+r+"-width"];return a+Fe(o)},0)}function kc(e){for(var t=["top","right","bottom","left"],n={},a=0,r=t;a<r.length;a++){var o=r[a],i=e["padding-"+o];n[o]=Fe(i)}return n}function Bc(e){var t=e.getBBox();return Ve(0,0,t.width,t.height)}function Dc(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return ha;var a=se(e).getComputedStyle(e),r=kc(a),o=r.left+r.right,i=r.top+r.bottom,s=Fe(a.width),l=Fe(a.height);if(a.boxSizing==="border-box"&&(Math.round(s+o)!==t&&(s-=sn(a,"left","right")+o),Math.round(l+i)!==n&&(l-=sn(a,"top","bottom")+i)),!$c(e)){var u=Math.round(s+o)-t,g=Math.round(l+i)-n;Math.abs(u)!==1&&(s-=u),Math.abs(g)!==1&&(l-=g)}return Ve(r.left,r.top,s,l)}var Cc=function(){return typeof SVGGraphicsElement<"u"?function(e){return e instanceof se(e).SVGGraphicsElement}:function(e){return e instanceof se(e).SVGElement&&typeof e.getBBox=="function"}}();function $c(e){return e===se(e).document.documentElement}function Uc(e){return bt?Cc(e)?Bc(e):Dc(e):ha}function Gc(e){var t=e.x,n=e.y,a=e.width,r=e.height,o=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,i=Object.create(o.prototype);return ua(i,{x:t,y:n,width:a,height:r,top:n,right:t+a,bottom:r+n,left:t}),i}function Ve(e,t,n,a){return{x:e,y:t,width:n,height:a}}var Vc=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Ve(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=Uc(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),Wc=function(){function e(t,n){var a=Gc(n);ua(this,{target:t,contentRect:a})}return e}(),Kc=function(){function e(t,n,a){if(this.activeObservations_=[],this.observations_=new ca,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=a}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof se(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new Vc(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(t instanceof se(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)&&(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(a){return new Wc(a.target,a.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ga=typeof WeakMap<"u"?new WeakMap:new ca,da=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Ic.getInstance(),a=new Kc(t,n,this);ga.set(this,a)}return e}();["observe","unobserve","disconnect"].forEach(function(e){da.prototype[e]=function(){var t;return(t=ga.get(this))[e].apply(t,arguments)}});var Yc=function(){return typeof Me.ResizeObserver<"u"?Me.ResizeObserver:da}();window.ResizeObserver||(window.ResizeObserver=Yc);var St=globalThis&&globalThis.__assign||function(){return St=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},St.apply(this,arguments)},_g=function(e){var t=e.children,n=Tn().colorMode,a=F("RmgAgGrid");return h.jsx(He,St({className:n==="light"?"ag-theme-alpine":"ag-theme-alpine-dark",sx:a},{children:t}))},pe=globalThis&&globalThis.__assign||function(){return pe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pe.apply(this,arguments)},Jc=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Eg=function(e){var t=e.isOpen,n=e.onClose,a=e.children,r=e.sx,o=e.size,i=Jc(e,["isOpen","onClose","children","sx","size"]),s=F("RmgAppClip",{size:o}),l=y.useRef(null);return Nn({ref:l,handler:n}),h.jsx(cr,{children:h.jsxs(He,pe({className:t?"show-app-clip":"",sx:s},i,{children:[h.jsx("div",{className:"rmg-app-clip__overlay"}),h.jsx("div",pe({className:"rmg-app-clip__container"},{children:h.jsx(He,pe({ref:l,as:"section",role:"dialog",className:"rmg-app-clip__content",sx:r},{children:a}))}))]}))})},Ie=globalThis&&globalThis.__assign||function(){return Ie=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ie.apply(this,arguments)},qc=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Xc=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},Zc=function(e,t){var n=e.validator,a=e.onDebouncedChange,r=e.delay,o=e.optionList,i=e.defaultValue;e.onChange;var s=qc(e,["validator","onDebouncedChange","delay","optionList","defaultValue","onChange"]),l=y.useRef(null),u=An(l,t),g=y.useRef("datalist-"+new Date().valueOf()),p=Xc(y.useState(!1),2),f=p[0],v=p[1],m=y.useRef();y.useEffect(function(){l.current&&(l.current.value=(i==null?void 0:i.toString())||"")},[i]);var b=function(S){var x=S.target.value;window.clearTimeout(m.current),n&&v(!n(x)),m.current=window.setTimeout(function(){a==null||a(x),m.current=void 0},r!=null?r:500)},w=function(S){var x=S.target.value;m.current!==void 0&&(window.clearTimeout(m.current),n&&v(!n(x)),a==null||a(x),m.current=void 0)};return h.jsxs(h.Fragment,{children:[h.jsx(ur,Ie({ref:u,list:g.current,variant:"flushed",size:"sm",h:6,onChange:b,onBlur:w,isInvalid:f},s)),o&&h.jsx("datalist",Ie({id:g.current},{children:o==null?void 0:o.map(function(S,x){return h.jsx("option",{children:S},x)})}))]})},Qc=y.forwardRef(Zc),ln=globalThis&&globalThis.__assign||function(){return ln=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ln.apply(this,arguments)};globalThis&&globalThis.__read;var ke=globalThis&&globalThis.__assign||function(){return ke=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ke.apply(this,arguments)},cn=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},un=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var a=0,r=t.length,o;a<r;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))};function Og(e){var t=e.selections,n=e.defaultValue,a=e.onChange,r=e.multiSelect,o=cn(y.useState(n),2),i=o[0],s=o[1];y.useEffect(function(){n.toString()&&s(n)},[n.toString()]);var l=function(u){if(r){var g=i,p=g.includes(u)?g.filter(function(f){return f!==u}):un(un([],cn(g),!1),[u],!1);s(p),a==null||a(p)}else s(u),a==null||a(u)};return h.jsx(hr,ke({size:"xs",isAttached:!0,colorScheme:"primary",variant:"outline"},{children:t.map(function(u,g){var p=typeof i=="object"&&i.includes(u.value)||i===u.value,f=g!==t.length-1&&!p?"-px":void 0;return h.jsx(Se,ke({role:"checkbox","aria-checked":p,variant:p?"solid":"outline",mr:f,isDisabled:u.disabled,onClick:function(){return l(u.value)}},{children:u.label}),u.value.toString())})}))}var me=globalThis&&globalThis.__assign||function(){return me=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},me.apply(this,arguments)},eu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Hg=function(e){var t=e.children,n=e.sx,a=eu(e,["children","sx"]),r=F("RmgCard");return h.jsx(K,me({sx:me(me({},r),n)},a,{children:t}))},hn=globalThis&&globalThis.__assign||function(){return hn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hn.apply(this,arguments)},wt=globalThis&&globalThis.__assign||function(){return wt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},wt.apply(this,arguments)},tu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},nu=function(e,t){var n=e.onDebouncedChange,a=e.defaultValue;e.onChange;var r=tu(e,["onDebouncedChange","defaultValue","onChange"]),o=y.useRef(null),i=An(o,t),s=y.useRef();y.useEffect(function(){o.current&&(o.current.value=(a==null?void 0:a.toString())||"")},[a]);var l=function(u){var g=u.target.value;window.clearTimeout(s.current),s.current=window.setTimeout(function(){n==null||n(g)},500)};return h.jsx(gr,wt({ref:i,variant:"flushed",size:"sm",resize:"none",onChange:l},r))},au=y.forwardRef(nu),ve=globalThis&&globalThis.__assign||function(){return ve=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ve.apply(this,arguments)},ru=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Tg=function(e){var t=e.primaryText,n=e.secondaryText,a=e.sx,r=ru(e,["primaryText","secondaryText","sx"]),o=F("RmgEnrichedButton");return h.jsxs(Se,ve({sx:ve(ve({},o),a)},r,{children:[h.jsx("span",{children:t}),h.jsx("span",{children:n})]}))},Be=globalThis&&globalThis.__assign||function(){return Be=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Be.apply(this,arguments)},ou=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},iu=function(e){switch(e){case X.DEV:return"red";case X.UAT:return"orange";case X.PRD:return"green"}};function su(e){var t=e.environment,n=e.version,a=e.popoverHeader,r=e.popoverBody,o=ou(y.useState(!1),2),i=o[0],s=o[1];return h.jsxs(Rn,Be({isOpen:i,onOpen:function(){return a&&s(!0)},onClose:function(){return s(!1)}},{children:[h.jsx(dr,{children:h.jsx(Ot,Be({ml:1,colorScheme:iu(t),title:"".concat(t,": ").concat(n),cursor:a?"pointer":"help"},{children:t===X.PRD?n:t}))}),h.jsxs(Pn,{children:[h.jsx(fr,{}),h.jsx(pr,{}),h.jsx(mr,{children:a}),h.jsx(jn,{children:r})]})]}))}var lu=function(e,t,n){var a=new Blob([n],{type:t});cu(e,a)},cu=function(e,t){var n=window.URL.createObjectURL(t),a=document.createElement("a");a.href=n,a.download=e,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(n)},oe=globalThis&&globalThis.__assign||function(){return oe=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},oe.apply(this,arguments)},uu=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function hu(e){var t=e.cancelRef,n=e.isOpen,a=e.onClose,r=uu(y.useState(!1),2),o=r[0],i=r[1],s=function(){i(!0);var l=R.getStorageForCurrentApp(),u=R.getAppName(),g="".concat(u,"_BACKUP_").concat(new Date().toISOString(),".json");lu(g,"application/json",JSON.stringify(l)),R.clearStorageForCurrentApp(),setTimeout(function(){window.location.reload()},2e3)};return h.jsxs(vr,oe({leastDestructiveRef:t,isOpen:n,onClose:a},{children:[h.jsx(Ln,{}),h.jsxs(yr,{children:[h.jsx(Mn,{children:"Warning "}),h.jsx(Fn,{}),h.jsxs(In,oe({sx:{"& p":{my:1}}},{children:[h.jsx(ee,{children:"Are you sure you want to reset the app? The webpage local storage for this app will be cleared. A copy of the local storage will be downloaded and it may be used for restoration (varies with app)."}),h.jsx(ee,{children:""}),h.jsx(ee,{children:""})]})),h.jsxs(kn,{children:[h.jsx(Se,oe({ref:t,onClick:a},{children:"Cancel"})),h.jsx(Se,oe({isLoading:o,colorScheme:"red",ml:3,onClick:s},{children:"Confirm and reload"}))]})]})]}))}var q=globalThis&&globalThis.__assign||function(){return q=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},q.apply(this,arguments)},gu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},du=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function fu(e){var t=e.error,n=e.errorInfo,a=e.allowReset,r=e.sx,o=gu(e,["error","errorInfo","allowReset","sx"]),i=F("RmgErrorBoundary"),s=Ht("primary.500","primary.300"),l=du(y.useState(!1),2),u=l[0],g=l[1],p=y.useRef(null),f=function(b){return h.jsx(A,q({color:s,role:"button",onClick:function(){return g(!0)}},{children:b}))},v=R.getAppName(),m=h.jsx(A,q({color:s,href:"https://github.com/railmapgen/".concat(v,"/issues"),isExternal:!0},{children:"GitHub Issue"}));return h.jsxs(Bn,q({status:"error",sx:q(q({},i),r)},o,{children:[h.jsx(Dn,{}),h.jsx(br,{children:"Something went wrong!"}),h.jsxs(Sr,{children:[h.jsxs(ee,{children:["Please try to refresh or re-import your configuration files. If the issue still persists, please consider upgrading your browser",a?h.jsxs(h.Fragment,{children:[" or ",f("reset this app")]}):"",". Should you need any help, please contact us by submitting an issue in ",m," with the details shown below."]}),h.jsxs(ee,{children:["",a?h.jsxs(h.Fragment,{children:["",f("")]}):""," ",m,"  Issue "]}),h.jsxs(ee,{children:["",a?h.jsxs(h.Fragment,{children:["",f("")]}):""," ",m,"  Issue "]}),h.jsxs(ee,q({as:"details"},{children:[t==null?void 0:t.toString(),h.jsx("br",{}),n==null?void 0:n.componentStack]})),a&&h.jsx(hu,{cancelRef:p,isOpen:u,onClose:function(){return g(!1)}})]})]}))}var pu=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,r){a.__proto__=r}||function(a,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(a[o]=r[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),De=globalThis&&globalThis.__assign||function(){return De=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},De.apply(this,arguments)},mu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},gn=function(e){pu(t,e);function t(n){var a=e.call(this,n)||this;return a.state={hasError:!1,error:null,errorInfo:null},a}return t.getDerivedStateFromError=function(){return{hasError:!0}},t.prototype.componentDidCatch=function(n,a){this.setState({error:n,errorInfo:a})},t.prototype.render=function(){var n=this.props,a=n.children,r=n.suspenseFallback,o=n.allowReset,i=mu(n,["children","suspenseFallback","allowReset"]);return this.state.hasError?h.jsx(fu,De({error:this.state.error,errorInfo:this.state.errorInfo,allowReset:o},i)):r?h.jsx(y.Suspense,De({fallback:r},{children:a})):a},t}(Un.Component),Ce=globalThis&&globalThis.__assign||function(){return Ce=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ce.apply(this,arguments)},vu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},yu=function(e){var t=e.label,n=e.children;e.width;var a=e.noLabel,r=e.oneLine,o=e.className,i=vu(e,["label","children","width","noLabel","oneLine","className"]),s=F("RmgLabel");return h.jsxs(wr,Ce({className:"".concat(r?"rmg-label__one-line":""," ").concat(o!=null?o:""),"aria-label":t,sx:s},i,{children:[!a&&h.jsx(xr,Ce({size:"xs"},{children:t})),n]}))},ye=globalThis&&globalThis.__assign||function(){return ye=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ye.apply(this,arguments)},bu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},dn=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function Su(e){var t=e.defaultValue,n=e.options,a=e.disabledOptions,r=bu(e,["defaultValue","options","disabledOptions"]),o=y.useRef(null);y.useEffect(function(){o.current&&(o.current.value=(t==null?void 0:t.toString())||"")},[t]);var i=function(s,l){return h.jsx("option",ye({value:s,disabled:(a==null?void 0:a.find(function(u){return u.toString()===s}))!==void 0},{children:l}),s)};return h.jsx(zr,ye({ref:o,variant:"flushed",size:"sm",h:6},r,{children:Object.entries(n).map(function(s){var l=dn(s,2),u=l[0],g=l[1];return typeof g=="object"?h.jsx("optgroup",ye({label:u},{children:Object.entries(g).map(function(p){var f=dn(p,2),v=f[0],m=f[1];return i(v,m)})}),u):i(u,g)})}))}globalThis&&globalThis.__read;globalThis&&globalThis.__read;var lt=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},fn=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var a=0,r=t.length,o;a<r;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},wu=function(e,t){t===void 0&&(t=500);var n=lt(y.useState(!0),2),a=n[0],r=n[1],o=y.useRef([]),i=y.useRef(),s=y.useCallback(function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];if(!a){o.current=l;return}r(!1),o.current=[],e.apply(void 0,fn([],lt(l),!1))},[a,e]);return y.useEffect(function(){if(!a)return i.current=window.setTimeout(function(){r(!0),o.current.length&&e.apply(void 0,fn([],lt(o.current),!1))},t),function(){window.clearTimeout(i.current)}},[a,t]),s},$e=globalThis&&globalThis.__assign||function(){return $e=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$e.apply(this,arguments)},xu=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o};function zu(e){var t=e.defaultValue,n=e.min,a=e.max,r=e.step,o=e.onThrottledChange,i=e.leftIcon,s=e.rightIcon,l=F("RmgThrottledSlider"),u=xu(y.useState(t!=null?t:0),2),g=u[0],p=u[1],f=wu(o!=null?o:function(){},500),v=function(){var b=Math.min(g+(r!=null?r:1)*10,a!=null?a:100);o==null||o(b),p(b)},m=function(){var b=Math.max(g-(r!=null?r:1)*10,n!=null?n:0);o==null||o(b),p(b)};return h.jsxs(K,$e({sx:l},{children:[i&&h.jsx(dt,{size:"xs",variant:"ghost","aria-label":"Drag left",icon:i,onClick:m}),h.jsxs(_r,$e({value:g,min:n,max:a,step:r,onChange:function(b){f(b),p(b)}},{children:[h.jsx(Er,{children:h.jsx(Or,{})}),h.jsx(Hr,{})]})),s&&h.jsx(dt,{size:"xs",variant:"ghost","aria-label":"Drag right",icon:s,onClick:v})]}))}var Ue=globalThis&&globalThis.__assign||function(){return Ue=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ue.apply(this,arguments)};function Ng(e){var t=e.fields,n=e.noLabel,a=e.minW;return h.jsx(K,Ue({wrap:"wrap"},{children:t.map(function(r,o){if(r.hidden)return h.jsx(y.Fragment,{},o);var i=r.minW||a,s=i==="full";return h.jsx(yu,Ue({className:s?"mw-full":"",label:r.label,flex:s?void 0:1,minW:s?void 0:i,noLabel:n,oneLine:r.oneLine},{children:function(l){switch(l.type){case"input":return h.jsx(Qc,{placeholder:l.placeholder,defaultValue:l.value,type:l.variant,validator:l.validator,onDebouncedChange:l.onChange,delay:l.debouncedDelay,optionList:l.optionList});case"textarea":return h.jsx(au,{placeholder:l.placeholder,defaultValue:l.value,onDebouncedChange:l.onChange});case"slider":return h.jsx(zu,{defaultValue:l.value,min:l.min,max:l.max,step:l.step,onThrottledChange:l.onChange,leftIcon:l.leftIcon,rightIcon:l.rightIcon});case"select":return h.jsx(Su,{defaultValue:l.value,onChange:function(u){var g,p=u.target.value;return(g=l.onChange)===null||g===void 0?void 0:g.call(l,typeof l.value=="number"?Number(p):p.toString())},options:l.options,disabledOptions:l.disabledOptions,isInvalid:l.isInvalid});case"switch":return h.jsx(Tr,{isChecked:l.isChecked,isDisabled:l.isDisabled,onChange:function(u){var g,p=u.target.checked;return(g=l.onChange)===null||g===void 0?void 0:g.call(l,p)}});case"custom":return l.component;default:return h.jsx("div",{})}}(r)}),o)})}))}var k=globalThis&&globalThis.__assign||function(){return k=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},k.apply(this,arguments)},We=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},_u=function(e){var t=e.sx,n=e.className,a=We(e,["sx","className"]),r=F("RmgWindow");return h.jsx(K,k({className:"rmg-window ".concat(n!=null?n:""),sx:k(k({},r),t)},a))},Eu=function(e){var t=e.sx,n=e.className,a=We(e,["sx","className"]),r=F("RmgWindowHeader");return h.jsx(K,k({className:"rmg-window__header ".concat(n!=null?n:""),sx:k(k({},r),t)},a))},Ag=function(e){var t=e.sx,n=e.className,a=We(e,["sx","className"]),r=F("RmgPage");return h.jsx(K,k({className:"rmg-page ".concat(n!=null?n:""),sx:k(k({},r),t)},a))},Rg=function(e){var t=e.sx,n=e.className,a=We(e,["sx","className"]),r=F("RmgPageHeader");return h.jsx(K,k({className:"rmg-page__header ".concat(n!=null?n:""),sx:k(k({},r),t)},a))},xt=globalThis&&globalThis.__assign||function(){return xt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xt.apply(this,arguments)},Ou=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Pg=function(e){var t=e.name,n=e.fg,a=e.bg,r=e.showShortName,o=e.actions,i=Ou(e,["name","fg","bg","showShortName","actions"]),s=F("RmgLineBadge"),l=function(u){var g,p;return typeof u=="object"?((g=u[0].match(/^[\d\w]+/))===null||g===void 0?void 0:g[0])||u[0]:((p=u.match(/^[\d\w]+/))===null||p===void 0?void 0:p[0])||u};return h.jsxs(Ot,xt({color:n,bg:a,sx:s},i,{children:[r?l(t):typeof t=="object"?t[0]:t,o]}))},ie=globalThis&&globalThis.__assign||function(){return ie=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ie.apply(this,arguments)},Hu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},pn=function(e){var t=e.isIndeterminate,n=e.value,a=e.sx,r=Hu(e,["isIndeterminate","value","sx"]),o=Ht("primary.500","primary.300"),i=F("RmgLoader");return h.jsxs(K,ie({sx:ie(ie({},i),a)},{children:[h.jsx("div",{className:"rmg-loader__backdrop"}),h.jsx(Nr,ie({isIndeterminate:t,value:n,color:o},r))]}))},G=globalThis&&globalThis.__assign||function(){return G=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},G.apply(this,arguments)},ct=globalThis&&globalThis.__read||function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var a=n.call(e),r,o=[],i;try{for(;(t===void 0||t-- >0)&&!(r=a.next()).done;)o.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(i)throw i.error}}return o},mn=globalThis&&globalThis.__spreadArray||function(e,t,n){if(n||arguments.length===2)for(var a=0,r=t.length,o;a<r;a++)(o||!(a in t))&&(o||(o=Array.prototype.slice.call(t,0,a)),o[a]=t[a]);return e.concat(o||Array.prototype.slice.call(t))},jg=function(e){var t,n=e.displayValue,a=e.selections,r=e.defaultValue,o=e.onChange,i=F("RmgMultiSelect"),s=ct(y.useState(r),2),l=s[0],u=s[1],g=ct(y.useState(!1),2),p=g[0],f=g[1],v=y.useRef(null),m=y.useRef(null);Nn({ref:v,handler:function(){return f(!1)}}),y.useEffect(function(){r.toString()&&u(r)},[r.toString()]);var b=l.filter(function(S){return a.some(function(x){return x.value===S})}).length,w=function(S,x){if(x){if(!l.includes(S.value)){var E=mn(mn([],ct(l),!1),[S.value],!1);u(E),o==null||o(E)}}else{var E=l.filter(function(O){return O!==S.value});u(E),o==null||o(E)}};return h.jsx(He,G({ref:v,sx:i},{children:h.jsxs(Rn,G({placement:"bottom-start",isOpen:p,autoFocus:!1},{children:[h.jsx(Ar,{children:h.jsxs("div",G({className:"rmg-multi-select__wrapper",role:"combobox","aria-expanded":p,"aria-controls":(t=m.current)===null||t===void 0?void 0:t.id,"aria-label":n,onClick:function(){return f(function(S){return!S})}},{children:[h.jsxs("div",G({className:"rmg-multi-select__field ".concat(p?"active":"")},{children:[h.jsx("span",{children:n}),h.jsxs(Ot,G({colorScheme:b?"blue":void 0,role:"status"},{children:[b,"/",a.length]}))]})),h.jsx("div",G({className:"rmg-multi-select__icon-wrapper"},{children:h.jsx("svg",G({viewBox:"0 0 24 24"},{children:h.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}))}))]}))}),h.jsx(Pn,G({ref:m},{children:h.jsx(jn,{children:h.jsx(Rr,{children:a.map(function(S){return h.jsx(Q,{children:h.jsx(Pr,G({isChecked:l.includes(S.value),isDisabled:S.disabled,onChange:function(x){var E=x.target.checked;return w(S,E)}},{children:S.label}))},S.value.toString())})})})}))]}))}))},Y=globalThis&&globalThis.__assign||function(){return Y=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Y.apply(this,arguments)},Tu=globalThis&&globalThis.__rest||function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]]);return n},Lg=function(e){var t=e.isOpen,n=e.alwaysOverlay,a=e.width,r=e.sx,o=e.children,i=Tu(e,["isOpen","alwaysOverlay","width","sx","children"]),s=F("RmgSidePanel",{width:a!=null?a:320,alwaysOverlay:n});return h.jsx(K,Y({as:"section",className:t?"show-side-panel":"",sx:Y(Y({},s),r),"data-testid":"side-panel-root"},i,{children:h.jsx(K,Y({className:"rmg-side-panel__inner"},{children:o}))}))},Mg=function(e){var t=e.onClose,n=e.children;return h.jsxs(Bn,Y({className:"rmg-side-panel__header",status:"info",variant:"solid",size:"xs"},{children:[h.jsx(Dn,{}),n,h.jsx(jr,{onClick:t})]}))},Fg=function(e){var t=e.children;return h.jsx("div",Y({className:"rmg-side-panel__body"},{children:t}))},Ig=function(e){var t=e.children;return h.jsx("div",Y({className:"rmg-side-panel__footer"},{children:t}))},vn=function(e){return e==="dark"?"primary.300":"primary.500"},ut={variants:{flushed:function(e){var t=e.theme,n=e.colorMode;return{field:{_focusVisible:{borderColor:vn(n),boxShadow:"0px 1px 0px 0px ".concat(de(t,vn(n)))}}}}}},Nu={defaultProps:{colorScheme:"primary"}},yn={defaultProps:{colorScheme:"primary"}},Au={baseStyle:{w:"100%",h:"100%","& .ag-header-cell:not(.ag-header-cell-auto-height) .ag-header-cell-comp-wrapper":{height:"unset"},"& .ag-cell":{display:"flex",lineHeight:"unset",alignItems:"center"},"& .ag-cell, & .ag-header-cell":{padding:"8px 9px"},"& .ag-row, & .ag-header":{border:"unset"},"&.ag-theme-alpine .ag-row .ag-cell, &.ag-theme-alpine .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, #dde2eb))"},"&.ag-theme-alpine-dark .ag-row .ag-cell, &.ag-theme-alpine-dark .ag-header .ag-header-cell":{borderRight:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))",borderBottom:"1px solid var(--ag-row-border-color, var(--ag-secondary-border-color, rgba(88, 86, 82, 0.5)))"},"& .ag-pinned-left-cols-container, & .ag-pinned-left-header":{boxShadow:"var(--chakra-shadows-lg)",zIndex:1},"&.ag-theme-alpine":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #fff)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #fcfcfc)"}},"&.ag-theme-alpine-dark":{"& .ag-row .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-background-color, #181d1f)"},"& .ag-row-odd .rmg-ag-grid--spanned-cell":{backgroundColor:"var(--ag-odd-row-background-color, #222628)"}}}},Ru={baseStyle:function(e){var t=e.colorMode;return{display:"none","&.show-app-clip":{display:"block"},"& .rmg-app-clip__overlay":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",zIndex:1400,bg:"blackAlpha.600"},"& .rmg-app-clip__container":{position:"fixed",top:0,left:0,w:"100vw",h:"100vh",display:"flex",justifyContent:"center",alignItems:"flex-start",zIndex:1400},"& .rmg-app-clip__content":{display:"flex",w:"100%",maxW:"md",my:16,bg:t==="light"?"white":"gray.700",boxShadow:"lg",borderRadius:"md",overflow:"hidden"}}},sizes:{xs:{"& .rmg-app-clip__content":{maxW:"xs"}},sm:{"& .rmg-app-clip__content":{maxW:"sm"}},lg:{"& .rmg-app-clip__content":{maxW:"lg"}},xl:{"& .rmg-app-clip__content":{maxW:"xl"}},full:{"& .rmg-app-clip__content":{maxW:"100vw",minH:"var(--chakra-vh)",my:0,borderRadius:0}}}},Pu={baseStyle:function(e){var t=e.colorMode;return{p:1,my:1,w:"100%",borderRadius:2,bg:t==="dark"?"gray.700":"gray.50",boxShadow:"lg"}}},ju={baseStyle:function(e){var t=e.colorMode;return{"& thead":{position:"sticky",top:0,zIndex:10},"& td, th":{borderRight:"1px solid",borderColor:t==="dark"?"whiteAlpha.400":"blackAlpha.200",backgroundColor:t==="dark"?"gray.700":"gray.50",whiteSpace:"nowrap","&:first-of-type":{position:"sticky",left:0,zIndex:1},"&:last-of-type":{borderRight:"none",position:"sticky",right:0,zIndex:1}}}}},Lu={baseStyle:function(){return{flexGrow:1,flexDirection:"column",justifyContent:"center",alignItems:"flex-start",h:10,"& span":{maxW:"100%",textOverflow:"ellipsis",overflow:"hidden"},"& span:last-of-type":{fontWeight:"normal",fontSize:"2xs"}}}},Mu={baseStyle:{flexDirection:"column",alignItems:"center",maxH:"100%",overflowY:"auto","& .chakra-alert__icon":{w:"40px",h:"40px",mr:0},"& .chakra-alert__title":{mt:4,mb:1,fontSize:"lg"},"& .chakra-alert__desc":{w:"100%","& p":{my:1},"& details":{whiteSpace:"pre-wrap",fontFamily:"monospace",fontSize:"sm"}}}},Fu={baseStyle:{m:1,w:"unset","& label":{overflow:"hidden",fontSize:12,mr:0,mb:-.5,whiteSpace:"nowrap",textOverflow:"ellipsis"},"&.rmg-label__one-line":{display:"flex",alignItems:"center","& label:first-of-type":{mr:"auto"}}}},Iu={baseStyle:{display:"inline-flex",alignItems:"center","& > button:first-of-type":{ml:1}}},ku={baseStyle:{w:"100%",h:"100%",position:"absolute",top:0,right:0,alignItems:"center",justifyContent:"center","& .rmg-loader__backdrop":{position:"absolute",w:"100%",h:"100%",zIndex:1500,bg:"blackAlpha.400"},"& .chakra-progress":{zIndex:2e3}}},J=function(e){return e==="dark"?"primary.300":"primary.500"},Bu={baseStyle:function(e){var t=e.theme,n=e.colorMode;return{"& .rmg-multi-select__wrapper":{position:"relative",w:"100%",h:"25.75px",transform:"translateY(1.75px)",cursor:"default"},"& .rmg-multi-select__field":{position:"relative",w:"100%",minW:0,outline:0,appearance:"none",transitionProperty:"common",transitionDuration:"normal",pb:"1px",fontSize:"sm",h:"6",borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_active:{borderColor:J(n),boxShadow:"0px 1px 0px 0px ".concat(de(t,J(n)))},_focus:{borderColor:J(n),boxShadow:"0px 1px 0px 0px ".concat(de(t,J(n)))},_focusVisible:{borderColor:J(n),boxShadow:"0px 1px 0px 0px ".concat(de(t,J(n)))},"&.active":{borderColor:J(n),boxShadow:"0px 1px 0px 0px ".concat(de(t,J(n)))},"& > span:last-of-type":{position:"absolute",right:8}},"& .rmg-multi-select__icon-wrapper":{display:"inline-flex",justifyContent:"center",w:6,h:"100%",position:"absolute",right:2,top:0,fontSize:"xl","& svg":{h:"1em",w:"1em"}},"& .chakra-popover__content":{w:"unset",minW:200},"& .chakra-popover__body":{p:0,"li label":{p:2,w:"100%",_hover:{bg:n==="dark"?"whiteAlpha.200":"gray.100"},_active:{bg:n==="dark"?"whiteAlpha.300":"gray.200"}}}}}},Du={baseStyle:{position:"relative",flexDirection:"column",flex:1,overflow:"hidden"}},Cu={baseStyle:{alignItems:"center",flexWrap:"wrap",pl:2,pr:3,py:1,zIndex:10}},$u={baseStyle:function(e){var t=e.colorMode,n=e.width,a=e.alwaysOverlay;return{height:"100%",position:a?"absolute":{base:"absolute",lg:"relative"},right:a?0:{base:0,lg:"unset"},background:t==="light"?"white":"gray.800",boxShadow:"lg",flexShrink:0,flexDirection:"column",transition:"0.3s ease-in-out",maxW:0,visibility:"hidden",zIndex:5,"&.show-side-panel":{maxW:{base:"100%",sm:n},w:{base:"100%",sm:"unset"},visibility:"initial"},"& .rmg-side-panel__inner":{flexDirection:"column",h:"100%",w:{base:"100vw",sm:n}},"& .rmg-side-panel__header":{flexShrink:0,pl:3,pr:1,py:0,"& button":{ml:"auto"}},"& .rmg-side-panel__body":{display:"flex",flexDirection:"column",flex:1,overflowY:"auto",p:1},"& .rmg-side-panel__footer":{display:"flex",justifyContent:"flex-end",p:1}}}},Uu={baseStyle:{h:6,alignItems:"center","& .chakra-button:first-of-type":{mr:1},"& .chakra-button:last-of-type":{ml:1}}},Gu={baseStyle:{position:"relative",flexDirection:"column",height:"100%",overflow:"hidden"}},Vu={baseStyle:{px:2,alignItems:"center",zIndex:15,minH:10,transition:"0.3s ease-in-out"}},Wu={Input:ut,Checkbox:yn,Select:ut,Slider:Nu,Switch:yn,Textarea:ut,RmgAgGrid:Au,RmgAppClip:Ru,RmgCard:Pu,RmgDataTable:ju,RmgEnrichedButton:Lu,RmgErrorBoundary:Mu,RmgLabel:Fu,RmgLineBadge:Iu,RmgLoader:ku,RmgMultiSelect:Bu,RmgPage:Du,RmgPageHeader:Cu,RmgSidePanel:$u,RmgThrottledSlider:Uu,RmgWindow:Gu,RmgWindowHeader:Vu},zt=globalThis&&globalThis.__assign||function(){return zt=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zt.apply(this,arguments)},bn="chakra-ui-color-mode",Ku=function(){var e=R.getColourMode()==="system";return R.isStandaloneWindow()&&(e?window.localStorage.removeItem(bn):window.localStorage.setItem(bn,R.getColourMode())),{initialColorMode:"system",useSystemColorMode:e}},Yu={primary:zt({},Lr.colors.teal)},Ju={global:{".mw-full":{w:"100%",flexBasis:"100%"}}},qu=function(){return Mr({config:Ku(),colors:Yu,styles:Ju,components:Wu})},_t=globalThis&&globalThis.__assign||function(){return _t=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_t.apply(this,arguments)},Xu=function(e){var t=e.children;return h.jsx(Fr,_t({theme:qu()},{children:h.jsx(Zu,{children:t})}))},Zu=function(e){var t=e.children,n=Tn().setColorMode,a=Ir();return y.useEffect(function(){console.log("[rmg-components] RMG theme is initialised with",a.config),R.onColourModeChange(function(r){if(r==="system"){var o=window.matchMedia("(prefers-color-scheme: dark)").matches;n(o?"dark":"light")}else n(r)})},[n]),h.jsx(h.Fragment,{children:t})};function kg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6a5.87 5.87 0 01-2.8-.7l-1.46 1.46A7.93 7.93 0 0012 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46A7.93 7.93 0 0012 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}}]})(e)}function Bg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}}]})(e)}function Qu(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"}}]})(e)}function Dg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 4H5a2 2 0 00-2 2v12a2 2 0 002 2h4v-2H5V8h14v10h-4v2h4c1.1 0 2-.9 2-2V6a2 2 0 00-2-2zm-7 6l-4 4h3v6h2v-6h3l-4-4z"}}]})(e)}function L(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 19H5V5h7V3H5a2 2 0 00-2 2v14a2 2 0 002 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z"}}]})(e)}function Cg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.488.488 0 00-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 00-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}}]})(e)}function $g(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 17.01V10h-2v7.01h-3L15 21l4-3.99h-3zM9 3L5 6.99h3V14h2V6.99h3L9 3z"}}]})(e)}function Ug(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}},{tag:"path",attr:{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}}]})(e)}function Gg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"}},{tag:"path",attr:{d:"M15.5 14h-.79l-.28-.27A6.471 6.471 0 0016 9.5 6.5 6.5 0 109.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"}}]})(e)}function Vg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}}]})(e)}function Wg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}}]})(e)}function Kg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M19 13H5v-2h14v2z"}}]})(e)}function Yg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M6 2c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6H6zm7 7V3.5L18.5 9H13z"}}]})(e)}function Jg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"}}]})(e)}function qg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"}}]})(e)}function Xg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"}}]})(e)}function Zg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a.996.996 0 000-1.41l-2.34-2.34a.996.996 0 00-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}}]})(e)}function Qg(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M3 5H1v16c0 1.1.9 2 2 2h16v-2H3V5zm11 10h2V5h-4v2h2v8zm7-14H7c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V3c0-1.1-.9-2-2-2zm0 16H7V3h14v14z"}}]})(e)}function ed(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10a2.5 2.5 0 002.5-2.5c0-.61-.23-1.2-.64-1.67a.528.528 0 01-.13-.33c0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9zm5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9zM5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5zm6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5z"}}]})(e)}function td(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 10l5 5 5-5z"}}]})(e)}function nd(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M7 14l5-5 5 5z"}}]})(e)}function ad(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M14 7l-5 5 5 5V7z"}},{tag:"path",attr:{fill:"none",d:"M24 0v24H0V0h24z"}}]})(e)}function rd(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M10 17l5-5-5-5v10z"}},{tag:"path",attr:{fill:"none",d:"M0 24V0h24v24H0z"}}]})(e)}function od(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"}}]})(e)}function id(e){return H({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{d:"M17.65 6.35A7.958 7.958 0 0012 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08A5.99 5.99 0 0112 18c-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"}}]})(e)}function eh(e){const{isOpen:t,onClose:n}=e,{t:a}=sa(),r=Ht("primary.500","primary.300");return h.jsxs(kr,{isOpen:t,onClose:n,size:"xl",scrollBehavior:"inside",children:[h.jsx(Ln,{}),h.jsxs(Br,{children:[h.jsx(Mn,{children:a("Help and support")}),h.jsx(Fn,{}),h.jsxs(In,{children:[h.jsx(Cn,{as:"h5",size:"sm",mb:2,children:a("Terms and conditions")}),h.jsxs(Dr,{children:[h.jsxs(Q,{children:["The layout of the elements on the signage or rail map, is designed by"," ",h.jsxs(A,{color:r,href:"https://www.gzmtr.com/",isExternal:!0,children:["Guangzhou Metro Group ",h.jsx(j,{as:L})]}),", ",h.jsxs(A,{color:r,href:"https://www.mtr.com.hk/",isExternal:!0,children:["MTR Corporation ",h.jsx(j,{as:L})]})," or ",h.jsxs(A,{color:r,href:"https://www.shmetro.com/",isExternal:!0,children:["Shanghai Shentong Metro Group ",h.jsx(j,{as:L})]}),", depending on your selection. You shall grant appropriate permit or license from the relevant company above before using the generated images for commercial purposes, if it is required to do so.",h.jsx("br",{}),"",h.jsxs(A,{color:r,href:"https://www.gzmtr.com/",isExternal:!0,children:[" ",h.jsx(j,{as:L})]}),"",h.jsxs(A,{color:r,href:"https://www.mtr.com.hk/",isExternal:!0,children:[" ",h.jsx(j,{as:L})]}),"",h.jsxs(A,{color:r,href:"https://www.shmetro.com/",isExternal:!0,children:[" ",h.jsx(j,{as:L})]}),""]}),h.jsxs(Q,{children:["The elements including shapes and lines on the image are drawn by"," ",h.jsxs(A,{color:r,href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",h.jsx(j,{as:L})]})," and ",h.jsxs(A,{color:r,href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",h.jsx(j,{as:L})]}),", based on the design standards or rules of the companies listed above. You may use them for any purposes, but it is recommended to state the name and the link of software alongside.",h.jsx("br",{}),"",h.jsxs(A,{color:r,href:"https://www.github.com/wongchito",isExternal:!0,children:["Chito Wong ",h.jsx(j,{as:L})]}),"",h.jsxs(A,{color:r,href:"https://www.github.com/thekingofcity",isExternal:!0,children:["thekingofcity ",h.jsx(j,{as:L})]}),""]}),h.jsxs(Q,{children:["Due to copyright, licensing and other legal restrictions, Rail Map Generator uses"," ",h.jsxs(A,{color:r,href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["GenYoMin provided by ButTaiwan ",h.jsx(j,{as:L})]}),", and Vegur instead of MTRSung and Myriad Pro respectively to display and generate MTR-style signage. You shall grant appropriate permit or license from the manufacturers before using those generated images for commercial purposes.",h.jsx("br",{}),"",h.jsxs(A,{color:r,href:"https://github.com/ButTaiwan/genyo-font",isExternal:!0,children:["ButTaiwan ",h.jsx(j,{as:L})]}),"VegurMyriad Pro"]}),h.jsxs(Q,{children:["The exported images in PNG or SVG format may be modified, published, or used for other purposes, under the conditions above.",h.jsx("br",{}),"PNGSVG"]}),h.jsxs(Q,{children:["All flag emojis shown on Windows platforms are designed by"," ",h.jsxs(A,{color:r,href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",h.jsx(j,{as:L})]})," "," the open-source emoji and icon project. License:",h.jsxs(A,{color:r,href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",h.jsx(j,{as:L})]}),h.jsx("br",{}),"WindowsEmoji",h.jsxs(A,{color:r,href:"https://openmoji.org/",isExternal:!0,children:["OpenMoji ",h.jsx(j,{as:L})]}),"",h.jsxs(A,{color:r,href:"https://creativecommons.org/licenses/by-sa/4.0/",isExternal:!0,children:["CC BY-SA 4.0 ",h.jsx(j,{as:L})]})]}),h.jsxs(Q,{children:["We reserve the rights, without prior notice, to modify, add, or remove these terms. The Chinese translation is for reference only. In case of any discrepancy between the English version and the Chinese version, the English version shall prevail.",h.jsx("br",{}),""]})]})]}),h.jsx(kn,{children:h.jsx(Se,{colorScheme:"primary",onClick:()=>window.open("https://github.com/railmapgen/rmg","_blank"),children:a("Visit GitHub")})})]})]})}function th(){const{t:e}=sa(),t=R.getEnv(),n=R.getAppVersion(),[a,r]=y.useState(!1);return h.jsxs(Eu,{children:[h.jsx(Cn,{as:"h4",size:"md",children:e("Rail Map Generator")}),h.jsx(su,{environment:t,version:n}),h.jsx(Cr,{ml:"auto",children:h.jsx(dt,{size:"sm",variant:"ghost","aria-label":"Help",icon:h.jsx(Qu,{}),onClick:()=>r(!0)})}),h.jsx(eh,{isOpen:a,onClose:()=>r(!1)})]})}const nh=y.lazy(()=>la(()=>import("./app-router-3591f5d0.js").then(e=>e.a),["assets/app-router-3591f5d0.js","assets/chakra-b5edfc98.js","assets/react-f83802c2.js","assets/param-updater-utils-704e90a0.js"])),ah=y.lazy(()=>la(()=>import("./app-clip-view-0976fd30.js"),["assets/app-clip-view-0976fd30.js","assets/chakra-b5edfc98.js","assets/react-f83802c2.js","assets/param-updater-utils-704e90a0.js"]));function rh(){return h.jsx($r,{children:h.jsx(Xu,{children:h.jsxs(_u,{children:[h.jsx(th,{}),h.jsxs(Ur,{children:[h.jsx(it,{path:"/import",element:h.jsx(gn,{suspenseFallback:h.jsx(pn,{isIndeterminate:!0}),children:h.jsx(ah,{})})}),h.jsx(it,{path:"/",element:h.jsx(gn,{suspenseFallback:h.jsx(pn,{isIndeterminate:!0}),allowReset:!0,children:h.jsx(nh,{})})}),h.jsx(it,{path:"*",element:h.jsx(Gr,{to:"/"})})]})]})})})}window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/);function oh(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}var Lt=(e=>(e.MTR="mtr",e.GZMTR="gzmtr",e.SHMetro="shmetro",e))(Lt||{}),Ke=(e=>(e.Destination="destination",e.RunIn="runin",e.RailMap="railmap",e.Indoor="indoor",e))(Ke||{});const sd={mtr:["destination","railmap"],gzmtr:["runin","railmap"],shmetro:["destination","runin","railmap","indoor"]};var fa=(e=>(e.CLOSE="CLOSE",e.STATION="STATION",e.STYLE="STYLE",e.BRANCH="BRANCH",e))(fa||{}),be=(e=>(e.left="left",e.right="right",e))(be||{}),pa=(e=>(e.left="l",e.right="r",e))(pa||{}),ih=(e=>(e.through="through",e.nonThrough="nonthrough",e))(ih||{}),sh=(e=>(e.local="local",e.express="express",e.direct="direct",e))(sh||{});const ld={"":"None",airport:"Airport",hsr:"High speed rail",railway:"National rail",disney:"Disneyland resort",np360:"Ngong Ping 360"};var ma=(e=>(e.gz1="gz1",e.gz28="gz28",e.gz2otis="gz2otis",e.gz3="gz3",e.gz4="gz4",e.gz5="gz5",e.gz1421="gz1421",e.gz6="gz6",e.gzgf="gzgf",e))(ma||{}),lh=(e=>(e.sh="sh",e.sh2020="sh2020",e))(lh||{}),ch=(e=>(e[e.PASSED=-1]="PASSED",e[e.CURRENT=0]="CURRENT",e[e.FUTURE=1]="FUTURE",e))(ch||{}),uh=(e=>(e.UP="UP",e.DOWN="DOWN",e.LEFT="LEFT",e.RIGHT="RIGHT",e))(uh||{}),T=(e=>(e.CANVAS_TO_SHOW="rmg__canvasToShow",e.CANVAS_SCALE="rmg__canvasScale",e.PARAM="rmg__param",e.PARAM_BY_ID="rmg__param:",e.PARAM_REGISTRY="rmg__paramRegistry",e.PARAM_CONFIG_BY_ID="rmg__paramConfig:",e.DO_NOT_SHOW_RMT_MSG="rmg__doNotShowRMTMsg",e))(T||{}),va=(e=>(e.APP_LOAD="APP_LOAD",e.STYLE_CHANGE="STYLE_CHANGE",e.OPEN_PARAM="OPEN_PARAM",e.NEW_PARAM="NEW_PARAM",e.UPLOAD_PARAM="UPLOAD_PARAM",e.OPEN_TEMPLATE="OPEN_TEMPLATE",e.REMOVE_PARAM="REMOVE_PARAM",e.UPDATE_PARAM_CONFIG="UPDATE_PARAM_CONFIG",e.ADD_STATION="ADD_STATION",e.REMOVE_STATION="REMOVE_STATION",e.ADD_BRANCH="ADD_BRANCH",e.AUTO_NUMBERING="AUTO_NUMBERING",e.REVERSE_STATIONS="REVERSE_STATIONS",e.CONNECT_BRANCH="CONNECT_BRANCH",e.DISCONNECT_BRANCH="DISCONNECT_BRANCH",e.SELECT_COLOUR="SELECT_COLOUR",e.DOWNLOAD_PARAM="DOWNLOAD_PARAM",e.DOWNLOAD_IMAGES="DOWNLOAD_IMAGES",e.APP_CLIP_VIEW_OPENED="APP_CLIP_VIEW_OPENED",e.APP_CLIP_VIEW_CLOSED="APP_CLIP_VIEW_CLOSED",e.APP_CLIP_VIEW_IMPORT="APP_CLIP_VIEW_IMPORT",e))(va||{});const hh={rmgStyle:Lt.MTR,paramConfig:void 0,canvasScale:1,canvasToShow:Object.values(Ke),sidePanelMode:fa.CLOSE,selectedStation:"linestart",selectedColine:void 0,selectedBranch:0,isShareTrackEnabled:void 0,globalAlerts:{},isLoading:void 0},ya=Vr({name:"app",initialState:hh,reducers:{setParamConfig:(e,t)=>{e.paramConfig=t.payload},updateParamModifiedTime:(e,t)=>{e.paramConfig&&(e.paramConfig.lastModified=t.payload)},setCanvasScale:(e,t)=>{e.canvasScale=t.payload},setCanvasToShow:(e,t)=>{e.canvasToShow=t.payload},setSidePanelMode:(e,t)=>{e.sidePanelMode=t.payload},setSelectedStation:(e,t)=>{e.selectedStation=t.payload},setSelectedColine:(e,t)=>{e.selectedColine=t.payload},setSelectedBranch:(e,t)=>{e.selectedBranch=t.payload},setIsShareTrackEnabled:(e,t)=>{e.isShareTrackEnabled=t.payload},setGlobalAlert:(e,t)=>{const{status:n,message:a,url:r,linkedApp:o}=t.payload;e.globalAlerts[n]={message:a,url:r,linkedApp:o}},closeGlobalAlert:(e,t)=>{delete e.globalAlerts[t.payload]},startLoading:e=>{e.isLoading=-1},setLoadingProgress:(e,t)=>{e.isLoading=t.payload},stopLoading:e=>{e.isLoading=void 0},openPaletteAppClip:(e,t)=>{e.paletteAppClipInput=t.payload,e.paletteAppClipOutput=void 0},closePaletteAppClip:e=>{e.paletteAppClipInput=void 0},onPaletteAppClipEmit:(e,t)=>{e.paletteAppClipOutput=t.payload,e.paletteAppClipInput=void 0}}}),{setParamConfig:cd,updateParamModifiedTime:gh,setCanvasScale:Sn,setCanvasToShow:wn,setSidePanelMode:ud,setSelectedStation:hd,setSelectedColine:gd,setSelectedBranch:dd,setIsShareTrackEnabled:fd,setGlobalAlert:pd,closeGlobalAlert:md,startLoading:vd,setLoadingProgress:yd,stopLoading:bd,openPaletteAppClip:Sd,closePaletteAppClip:wd,onPaletteAppClipEmit:xd}=ya.actions,dh=ya.reducer;var Et;(function(e){e.black="#000",e.white="#fff"})(Et||(Et={}));var d;(function(e){e.Adelaide="adelaide",e.Almaty="almaty",e.Amsterdam="amsterdam",e.Ankara="ankara",e.Athens="athens",e.Baku="baku",e.Bangkok="bangkok",e.Barcelona="barcelona",e.Beijing="beijing",e.Berlin="berlin",e.Bne="bne",e.Bonn="bonn",e.Bordeaux="bordeaux",e.Boston="boston",e.Brussels="brussels",e.Bucharest="bucharest",e.Budapest="budapest",e.Buenosaires="buenosaires",e.Busan="busan",e.Cairo="cairo",e.Caracas="caracas",e.Cbr="cbr",e.Changchun="changchun",e.Changsha="changsha",e.Changzhou="changzhou",e.Chengdu="chengdu",e.Chennai="chennai",e.Chongqing="chongqing",e.Chuzhou="chuzhou",e.Cochabamba="cochabamba",e.Cologne="cologne",e.Copenhagen="copenhagen",e.Daegu="daegu",e.Dalian="dalian",e.Delhi="delhi",e.Dongguan="dongguan",e.Dortmund="dortmund",e.Dublin="dublin",e.Edinburgh="edinburgh",e.Eskisehir="eskisehir",e.Foshan="foshan",e.Frankfurt="frankfurt",e.Fuzhou="fuzhou",e.Glasgow="glasgow",e.Gothenburg="gothenburg",e.Guadalajara="guadalajara",e.Guangzhou="guangzhou",e.Guiyang="guiyang",e.Hamburg="hamburg",e.Hangzhou="hangzhou",e.Hanoi="hanoi",e.Harbin="harbin",e.Hefei="hefei",e.Hiroshima="hiroshima",e.Hochiminh="hochiminh",e.Hohhot="hohhot",e.Hongkong="hongkong",e.Iashi="iashi",e.Istanbul="istanbul",e.Jakarta="jakarta",e.Jinan="jinan",e.Kansai="kansai",e.Kaohsiung="kaohsiung",e.Kaosiung="kaosiung",e.Kharkiv="kharkiv",e.Klangvalley="klangvalley",e.Kunming="kunming",e.Kyiv="kyiv",e.Lahore="lahore",e.Lanzhou="lanzhou",e.Liege="liege",e.Lille="lille",e.Lima="lima",e.Lisbon="lisbon",e.Littlerockcity="littlerockcity",e.London="london",e.Losangeles="losangeles",e.Lucknow="lucknow",e.Luoyang="luoyang",e.Lyon="lyon",e.Macao="macao",e.Madrid="madrid",e.Manchester="manchester",e.Marseille="marseille",e.Melbourne="melbourne",e.Mexicocity="mexicocity",e.Milan="milan",e.Monterrey="monterrey",e.Montreal="montreal",e.Moscow="moscow",e.Munich="munich",e.Nagpur="nagpur",e.Nanchang="nanchang",e.Nanjing="nanjing",e.Nanning="nanning",e.Nantes="nantes",e.Nantong="nantong",e.Naples="naples",e.Neworleans="neworleans",e.Newtaipei="newtaipei",e.Newyork="newyork",e.Nice="nice",e.Ningbo="ningbo",e.Novosibirsk="novosibirsk",e.Osaka="osaka",e.Oslo="oslo",e.Other="other",e.Ottawa="ottawa",e.Panamacity="panamacity",e.Paris="paris",e.Perth="perth",e.Pyongyang="pyongyang",e.Qingdao="qingdao",e.Rheinruhr="rheinruhr",e.Rio="rio",e.Riyadh="riyadh",e.Rome="rome",e.Rotterdam="rotterdam",e.Saltlakecity="saltlakecity",e.Samara="samara",e.Sanfrancisco="sanfrancisco",e.Sanktpeterburg="sanktpeterburg",e.Santiago="santiago",e.Saopaulo="saopaulo",e.Sapporo="sapporo",e.Seoul="seoul",e.Sevilla="sevilla",e.Shanghai="shanghai",e.Shaoxing="shaoxing",e.Shenyang="shenyang",e.Shenzhen="shenzhen",e.Shijiazhuang="shijiazhuang",e.Shiraz="shiraz",e.Singapore="singapore",e.Stlouis="stlouis",e.Stockholm="stockholm",e.Suzhou="suzhou",e.Sydney="sydney",e.Taichung="taichung",e.Taipei="taipei",e.Taiyuan="taiyuan",e.Taoyuan="taoyuan",e.Tashkent="tashkent",e.Tehran="tehran",e.Tianjin="tianjin",e.Tokyo="tokyo",e.Toronto="toronto",e.Turin="turin",e.Tyneandwear="tyneandwear",e.Urumqi="urumqi",e.Vienna="vienna",e.Warsaw="warsaw",e.Washington="washington",e.Wenzhou="wenzhou",e.Wuhan="wuhan",e.Wuxi="wuxi",e.Xiamen="xiamen",e.Xian="xian",e.Xuzhou="xuzhou",e.Yekaterinburg="yekaterinburg",e.Yevpatoria="yevpatoria",e.Yokohama="yokohama",e.Zhengzhou="zhengzhou"})(d||(d={}));var c;(function(e){e.AR="AR",e.AT="AT",e.AU="AU",e.AZ="AZ",e.BE="BE",e.BO="BO",e.BR="BR",e.CA="CA",e.CL="CL",e.CN="CN",e.DE="DE",e.DK="DK",e.EG="EG",e.ES="ES",e.FR="FR",e.GBENG="GBENG",e.GBSCT="GBSCT",e.GR="GR",e.HK="HK",e.HU="HU",e.ID="ID",e.IE="IE",e.IN="IN",e.IR="IR",e.IT="IT",e.JP="JP",e.KP="KP",e.KR="KR",e.KZ="KZ",e.MO="MO",e.MX="MX",e.MY="MY",e.NL="NL",e.NO="NO",e.PA="PA",e.PE="PE",e.PK="PK",e.PL="PL",e.PT="PT",e.RO="RO",e.RU="RU",e.SA="SA",e.SE="SE",e.SG="SG",e.TH="TH",e.TR="TR",e.TW="TW",e.UA="UA",e.UN="UN",e.US="US",e.UZ="UZ",e.VE="VE",e.VN="VN"})(c||(c={}));d.Adelaide,c.AU,d.Almaty,c.KZ,d.Amsterdam,c.NL,d.Ankara,c.TR,d.Athens,c.GR,d.Baku,c.AZ,d.Bangkok,c.TH,d.Barcelona,c.ES,d.Beijing,c.CN,d.Berlin,c.DE,d.Bne,c.AU,d.Bonn,c.DE,d.Bordeaux,c.FR,d.Boston,c.US,d.Brussels,c.BE,d.Bucharest,c.RO,d.Budapest,c.HU,d.Buenosaires,c.AR,d.Busan,c.KR,d.Cairo,c.EG,d.Caracas,c.VE,d.Cbr,c.AU,d.Changchun,c.CN,d.Changsha,c.CN,d.Changzhou,c.CN,d.Chengdu,c.CN,d.Chennai,c.IN,d.Chongqing,c.CN,d.Chuzhou,c.CN,d.Cochabamba,c.BO,d.Cologne,c.DE,d.Copenhagen,c.DK,d.Daegu,c.KR,d.Dalian,c.CN,d.Delhi,c.IN,d.Dongguan,c.CN,d.Dortmund,c.DE,d.Dublin,c.IE,d.Edinburgh,c.GBSCT,d.Eskisehir,c.TR,d.Foshan,c.CN,d.Frankfurt,c.DE,d.Fuzhou,c.CN,d.Glasgow,c.GBSCT,d.Gothenburg,c.SE,d.Guadalajara,c.MX,d.Guangzhou,c.CN,d.Guiyang,c.CN,d.Hamburg,c.DE,d.Hangzhou,c.CN,d.Hanoi,c.VN,d.Harbin,c.CN,d.Hefei,c.CN,d.Hiroshima,c.JP,d.Hochiminh,c.VN,d.Hohhot,c.CN,d.Hongkong,c.HK,d.Iashi,c.RO,d.Istanbul,c.TR,d.Jakarta,c.ID,d.Jinan,c.CN,d.Kansai,c.JP,d.Kaohsiung,c.TW,d.Kaosiung,c.TW,d.Kharkiv,c.UA,d.Klangvalley,c.MY,d.Kunming,c.CN,d.Kyiv,c.UA,d.Lahore,c.PK,d.Lanzhou,c.CN,d.Liege,c.BE,d.Lille,c.FR,d.Lima,c.PE,d.Lisbon,c.PT,d.Littlerockcity,c.US,d.London,c.GBENG,d.Losangeles,c.US,d.Lucknow,c.IN,d.Luoyang,c.CN,d.Lyon,c.FR,d.Macao,c.MO,d.Madrid,c.ES,d.Manchester,c.GBENG,d.Marseille,c.FR,d.Melbourne,c.AU,d.Mexicocity,c.MX,d.Milan,c.IT,d.Monterrey,c.MX,d.Montreal,c.CA,d.Moscow,c.RU,d.Munich,c.DE,d.Nagpur,c.IN,d.Nanchang,c.CN,d.Nanjing,c.CN,d.Nanning,c.CN,d.Nantes,c.FR,d.Nantong,c.CN,d.Naples,c.IT,d.Neworleans,c.US,d.Newtaipei,c.TW,d.Newyork,c.US,d.Nice,c.FR,d.Ningbo,c.CN,d.Novosibirsk,c.RU,d.Osaka,c.JP,d.Oslo,c.NO,d.Other,c.UN,d.Ottawa,c.CA,d.Panamacity,c.PA,d.Paris,c.FR,d.Perth,c.AU,d.Pyongyang,c.KP,d.Qingdao,c.CN,d.Rheinruhr,c.DE,d.Rio,c.BR,d.Riyadh,c.SA,d.Rome,c.IT,d.Rotterdam,c.NL,d.Saltlakecity,c.US,d.Samara,c.RU,d.Sanfrancisco,c.US,d.Sanktpeterburg,c.RU,d.Santiago,c.CL,d.Saopaulo,c.BR,d.Sapporo,c.JP,d.Seoul,c.KR,d.Sevilla,c.ES,d.Shanghai,c.CN,d.Shaoxing,c.CN,d.Shenyang,c.CN,d.Shenzhen,c.CN,d.Shijiazhuang,c.CN,d.Shiraz,c.IR,d.Singapore,c.SG,d.Stlouis,c.US,d.Stockholm,c.SE,d.Suzhou,c.CN,d.Sydney,c.AU,d.Taichung,c.TW,d.Taipei,c.TW,d.Taiyuan,c.CN,d.Taoyuan,c.TW,d.Tashkent,c.UZ,d.Tehran,c.IR,d.Tianjin,c.CN,d.Tokyo,c.JP,d.Toronto,c.CA,d.Turin,c.IT,d.Tyneandwear,c.GBENG,d.Urumqi,c.CN,d.Vienna,c.AT,d.Warsaw,c.PL,d.Washington,c.US,d.Wenzhou,c.CN,d.Wuhan,c.CN,d.Wuxi,c.CN,d.Xiamen,c.CN,d.Xian,c.CN,d.Xuzhou,c.CN,d.Yekaterinburg,c.RU,d.Yevpatoria,c.UA,d.Yokohama,c.JP,d.Zhengzhou,c.CN;c.AR,c.AT,c.AU,c.AZ,c.BE,c.BO,c.BR,c.CA,c.CL,c.CN,c.DE,c.DK,c.EG,c.ES,c.FR,c.GBENG,c.GBSCT,c.GR,c.HK,c.HU,c.ID,c.IE,c.IN,c.IR,c.IT,c.JP,c.KP,c.KR,c.KZ,c.MO,c.MX,c.MY,c.NL,c.NO,c.PA,c.PE,c.PK,c.PL,c.PT,c.RO,c.RU,c.SA,c.SE,c.SG,c.TH,c.TR,c.TW,c.UA,c.UN,c.US,c.UZ,c.VE,c.VN;const fh=e=>{const t=["linestart"],n=[["linestart"]];let a=0;for(;t.length;){let r=t.shift(),o=n[a].slice(-1)[0]||null;for(o&&r!=="linestart"?n[a].push(r):n[a]=[r];r!=="lineend";){o=r;const i=e[o].children;switch(i.length){case 1:r=i[0];break;case 2:{const s=e[o].branch.right[1];e[o].branch.right[0]==="through"?(n.push([r]),t.push(s)):a===0&&(n.push([o]),t.push(s)),r=i.filter(l=>l!==s)[0];break}}if(n[a].push(r),o===e[r].branch.left[1])break}a++}return n},ph=e=>{const t=["linestart"],n=[["linestart"]];let a=0;for(;t.length;){let r=t.shift(),o=n[a].slice(-1)[0]||null;for(o&&r!=="linestart"?n[a].push(r):n[a]=[r];r!=="lineend";){o=r;const i=e[o].children;switch(i.length){case 1:r=i[0];break;case 2:{const s=e[o].branch.right[1];e[o].branch.right[0]==="through"?(n.push(n[a].slice()),t.push(s)):a===0&&(n.push([o]),t.push(s)),r=i.filter(l=>l!==s)[0];break}}if(n[a].push(r),o===e[r].branch.left[1]&&e[r].branch.left[0]==="nonthrough")break}a++}return n},mh=e=>e.length===1?e[0].slice(1,-1):e.reduce((t,n)=>{const a=t.indexOf(n[n.length-1]);return[...t.slice(0,a),...n.slice(1),...t.slice(a+1)]},["lineend"]).slice(0,-1),ba="SET_DEPS_STR",Sa="SET_BRANCHES",wa="SET_ROUTES",xa="SET_TPO",vh=e=>({type:ba,depsStr:e}),yh=e=>({type:Sa,branches:e}),bh=e=>({type:wa,routes:e}),Sh=e=>({type:xa,tpo:e}),wh=()=>(e,t)=>{const n=t().param.stn_list,a=Object.entries(n).map(([r,o])=>r+o.parents.toString()+o.children.toString()+JSON.stringify(o.branch)).join("");return e(vh(a)),a},xh=()=>(e,t)=>{console.log("Re-calculating branches...");const n=t().param.stn_list,a=fh(n);return e(yh(a)),a},zh=()=>(e,t)=>{console.log("Re-calculating routes...");const n=t().param.stn_list;e(bh(ph(n)))},Mt=()=>(e,t)=>{const n=t().helper.depsStr,a=e(wh());if(n!==a){e(zh());const r=t().helper.branches,o=e(xh());r.toString()!==o.toString()&&(console.log("Re-calculating topology ordering..."),e(Sh(mh(o))))}},za="SET_FULL_PARAM",_a="SET_STYLE",Ea="SET_SVG_HEIGHT",Oa="SET_SVG_WIDTH",Ha="SET_Y_PERCENTAGE",Ta="SET_BRANCH_SPACING_PCT",Na="SET_PADDING_PERCENTAGE",Aa="SET_DIRECTION_INDICATOR_X",Ra="SET_DIRECTION_INDICATOR_Y",Pa="SET_THEME",ja="SET_LINE_NAME",La="SET_DIRECTION",Ma="SET_PLATFORM",Fa="SET_LINE_NUM",Ia="SET_PSD_NUM",ka="SET_PANEL_TYPE",Ba="SET_NOTES",Da="SET_NAME_POSITION",Ca="SET_CUSTOMISED_MTR_DESTINATION",$a="SET_LOOP",Ua="SET_LOOP_INFO",Ga="SET_CURRENT_STATION",Va="SET_STATION",Wa="SET_STATIONS_BULK",Ka="SET_COLINE_BULK",zd=e=>t=>{t({type:za,fullParam:e}),t(Mt())},_d=e=>({type:Ea,svgHeight:e}),Ed=(e,t)=>({type:Oa,svgWidth:e,canvas:t}),Od=e=>({type:_a,style:e}),Hd=e=>({type:Ha,yPercentage:e}),Td=e=>({type:Ta,branchSpacingPct:e}),Nd=e=>({type:Na,paddingPercentage:e}),Ad=e=>({type:Aa,directionIndicatorX:e}),Rd=e=>({type:Ra,directionIndicatorY:e}),Pd=e=>({type:Pa,theme:e}),jd=e=>({type:ja,lineName:e}),Ld=e=>({type:La,direction:e}),Md=e=>({type:Ma,platform:e}),Fd=e=>({type:Fa,lineNum:e}),Id=e=>({type:Ia,psdNum:e}),kd=e=>({type:ka,panelType:e}),Ft=e=>({type:Ba,notes:e}),Bd=()=>(e,t)=>{const n=t().param.notesGZMTR;e(Ft(n.concat([["","",10,10,!1]])))},Dd=(e,t)=>(n,a)=>{const r=a().param.notesGZMTR;n(Ft(r.map((o,i)=>i===e?t:o)))},Cd=e=>(t,n)=>{const a=n().param.notesGZMTR;t(Ft(a.filter((r,o)=>o!==e)))},Ya=e=>({type:Da,namePosition:e}),$d=e=>(t,n)=>{const a=n().param.namePosMTR;t(Ya({...a,isStagger:e}))},Ud=()=>(e,t)=>{const n=t().param.namePosMTR;e(Ya({...n,isFlip:!n.isFlip}))},Ja=e=>({type:Ca,customisedMtrDestination:e}),Gd=e=>t=>{t(Ye({bank:!0,left_and_right_factor:0,bottom_factor:1})),t({type:$a,loop:e})},Ye=e=>({type:Ua,loop_info:e}),Vd=e=>(t,n)=>{const a=n().param.loop_info;t(Ye({...a,bank:e}))},Wd=e=>(t,n)=>{const a=n().param.loop_info;t(Ye({...a,left_and_right_factor:e}))},Kd=e=>(t,n)=>{const a=n().param.loop_info;t(Ye({...a,bottom_factor:e}))},Yd=e=>(t,n)=>{const a=n().param.customiseMTRDest;t(Ja({...a,isLegacy:e}))},Jd=e=>(t,n)=>{const a=n().param.customiseMTRDest;t(Ja({...a,terminal:e}))},qd=e=>t=>{t({type:Ga,currentStation:e})},I=(e,t)=>n=>{n({type:Va,stationId:e,station:t}),n(Mt())},xe=e=>t=>{t({type:Wa,stations:e}),t(Mt())},Xd=e=>({type:Ka,coline:e}),Zd=(e=!1)=>(t,n)=>{const{stn_list:a}=n().param,r=Object.keys(a).reduce((o,i)=>({...o,[i]:(s=>{switch(s){case"linestart":return{...a.lineend,parents:[],children:e?a.lineend.parents:a.lineend.parents.slice().reverse(),branch:{left:[],right:a.lineend.branch.left}};case"lineend":return{...a.linestart,parents:e?a.linestart.children:a.linestart.children.slice().reverse(),children:[],branch:{left:a.linestart.branch.right,right:[]}};default:{const l=a[s].children.map(g=>g==="linestart"?"lineend":g==="lineend"?"linestart":g),u=a[s].parents.map(g=>g==="linestart"?"lineend":g==="lineend"?"linestart":g);return{...a[s],parents:e?l:l.reverse(),children:e?u:u.reverse(),branch:{left:a[s].branch.right,right:a[s].branch.left}}}}})(i)}),{});t(xe(r))},Qd=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,name:t}))},ef=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,secondaryName:t}))},tf=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,num:t}))},nf=(e,t,n)=>(a,r)=>{var s;const o=r().param.stn_list[e],i=o.transfer.groups.map(l=>({...l}));if(i.length>t)i[t]={...i[t],lines:i[t].lines.concat(n)};else{for(let l=i.length;l<t;l++)i[l]={lines:[]};i[t]={lines:[n]}}a(I(e,{...o,transfer:{...o.transfer,groups:[i[0],...(s=i.slice(1))!=null?s:[]]}}))},af=(e,t,n)=>(a,r)=>{var i;const o=r().param.stn_list[e];if(o.transfer.groups.length>t&&o.transfer.groups[t].lines.length>n){const s=o.transfer.groups.map((l,u)=>u===t?{...l,lines:l.lines.filter((g,p)=>p!==n)}:l);a(I(e,{...o,transfer:{...o.transfer,groups:[s[0],...(i=s.slice(1))!=null?i:[]]}}))}},rf=(e,t,n,a)=>(r,o)=>{var s;const i=o().param.stn_list[e];if(i.transfer.groups.length>t&&i.transfer.groups[t].lines.length>n){const l=i.transfer.groups.map((u,g)=>g===t?{...u,lines:u.lines.map((p,f)=>f===n?a:p)}:u);r(I(e,{...i,transfer:{...i.transfer,groups:[l[0],...(s=l.slice(1))!=null?s:[]]}}))}},of=(e,t,n)=>(a,r)=>{var s;const o=r().param.stn_list[e],i=o.transfer.groups.map(l=>({...l}));i.length>t&&(i[t]={...i[t],name:n},a(I(e,{...o,transfer:{...o.transfer,groups:[i[0],...(s=i.slice(1))!=null?s:[]]}})))},sf=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,transfer:{...r.transfer,tick_direc:t}}))},lf=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,transfer:{...r.transfer,paid_area:t}}))},cf=(e,t,n)=>(a,r)=>{const o=r().param.stn_list[e];a(I(e,{...o,branch:{...o.branch,[t]:[n,o.branch[t][1]]}}))},uf=(e,t,n)=>(a,r)=>{var s,l,u;const o=r().helper.branches,i={stnId:e,direction:t,first:n};if(t===be.left){const g=(s=o.slice(1).find(p=>p.slice(-1)[0]===e))==null?void 0:s[0];if(g){const p=o[0][o[0].indexOf(g)+1];a(xn([i,{stnId:g,direction:be.right,first:p}]))}}else{const g=(u=(l=o.slice(1).find(p=>p[0]===e))==null?void 0:l.slice(-1))==null?void 0:u[0];if(g){const p=o[0][o[0].indexOf(g)-1];a(xn([i,{stnId:g,direction:be.left,first:p}]))}}},xn=e=>(t,n)=>{const{stn_list:a}=n().param;t(xe({...a,[e[0].stnId]:{...a[e[0].stnId],branch:{...a[e[0].stnId].branch,[e[0].direction]:[a[e[0].stnId].branch[e[0].direction][0],e[0].first]}},[e[1].stnId]:{...a[e[1].stnId],branch:{...a[e[1].stnId].branch,[e[1].direction]:[a[e[1].stnId].branch[e[1].direction][0],e[1].first]}}}))},hf=(e,t)=>(n,a)=>{var o,i,s;const r=a().helper.branches;if(t===be.left){const l=(o=r.slice(1).find(u=>u.slice(-1)[0]===e))==null?void 0:o[0];l&&n(zn(e,l))}else{const l=(s=(i=r.slice(1).find(u=>u[0]===e))==null?void 0:i.slice(-1))==null?void 0:s[0];l&&n(zn(l,e))}},zn=(e,t)=>(n,a)=>{const{stn_list:r}=a().param;n(xe({...r,[e]:{...r[e],parents:r[e].parents.slice().reverse()},[t]:{...r[t],children:r[t].children.slice().reverse()}}))},gf=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,facility:t}))},df=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,services:t}))},ff=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,loop_pivot:t}))},pf=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,one_line:t}))},mf=(e,t)=>(n,a)=>{const r=a().param.stn_list[e];n(I(e,{...r,int_padding:t}))},vf=e=>(t,n)=>{const r=n().param.stn_list[e].int_padding,o=JSON.parse(JSON.stringify(n().param.stn_list));Object.values(o).forEach(i=>{i.int_padding=r}),t(xe(o))},yf=(e,t,n=2,a="asc")=>(r,o)=>{var u;const i=o().param.stn_list,l=(u=o().helper.branches[e])==null?void 0:u.slice(1,-1);if(l){const g=l.reduce((p,f,v)=>({...p,[f]:{...i[f],num:(t+v*(a==="desc"?-1:1)).toString().padStart(n,"0")}}),i);r(xe(g))}},_h={svgWidth:{destination:100,runin:100,railmap:100,indoor:100},svg_height:100,style:Lt.MTR,y_pc:50,padding:10,branchSpacingPct:10,direction:pa.left,platform_num:"1",theme:[d.Hongkong,"twl","#E2231A",Et.white],line_name:["","line"],current_stn_idx:"",stn_list:{},namePosMTR:{isStagger:!0,isFlip:!0},customiseMTRDest:{isLegacy:!1,terminal:!1},line_num:"1",psd_num:"1",info_panel_type:ma.gz1,notesGZMTR:[],direction_gz_x:0,direction_gz_y:0,coline:{},loop:!1,loop_info:{bank:!0,left_and_right_factor:1,bottom_factor:1}};function Eh(e=_h,t){switch(t.type){case za:return t.fullParam;case _a:return{...e,style:t.style};case Ea:return{...e,svg_height:t.svgHeight};case Oa:return{...e,svgWidth:{...e.svgWidth,[t.canvas]:t.svgWidth}};case Ha:return{...e,y_pc:t.yPercentage};case Ta:return{...e,branchSpacingPct:t.branchSpacingPct};case Na:return{...e,padding:t.paddingPercentage};case Aa:return{...e,direction_gz_x:t.directionIndicatorX};case Ra:return{...e,direction_gz_y:t.directionIndicatorY};case Pa:return{...e,theme:t.theme};case ja:return{...e,line_name:t.lineName};case La:return{...e,direction:t.direction};case Ma:return{...e,platform_num:t.platform};case Fa:return{...e,line_num:t.lineNum};case Ia:return{...e,psd_num:t.psdNum};case ka:return{...e,info_panel_type:t.panelType};case Ba:return{...e,notesGZMTR:t.notes};case Da:return{...e,namePosMTR:t.namePosition};case Ca:return{...e,customiseMTRDest:t.customisedMtrDestination};case Ga:return{...e,current_stn_idx:t.currentStation};case Va:return{...e,stn_list:{...e.stn_list,[t.stationId]:t.station}};case Wa:return{...e,stn_list:t.stations};case Ka:return{...e,coline:t.coline};case $a:return{...e,loop:t.loop};case Ua:return{...e,loop_info:t.loop_info};default:return e}}const Oh={depsStr:"",branches:[],routes:[],tpo:[]};function Hh(e=Oh,t){switch(t.type){case ba:return{...e,depsStr:t.depsStr};case Sa:return{...e,branches:t.branches};case wa:return{...e,routes:t.routes};case xa:return{...e,tpo:t.tpo};default:return e}}var qa={exports:{}},Xa={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var le=y;function Th(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Nh=typeof Object.is=="function"?Object.is:Th,Ah=le.useState,Rh=le.useEffect,Ph=le.useLayoutEffect,jh=le.useDebugValue;function Lh(e,t){var n=t(),a=Ah({inst:{value:n,getSnapshot:t}}),r=a[0].inst,o=a[1];return Ph(function(){r.value=n,r.getSnapshot=t,ht(r)&&o({inst:r})},[e,n,t]),Rh(function(){return ht(r)&&o({inst:r}),e(function(){ht(r)&&o({inst:r})})},[e]),jh(n),n}function ht(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Nh(e,n)}catch(a){return!0}}function Mh(e,t){return t()}var Fh=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Mh:Lh;Xa.useSyncExternalStore=le.useSyncExternalStore!==void 0?le.useSyncExternalStore:Fh;qa.exports=Xa;var Ih=qa.exports,Za={exports:{}},Qa={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Je=y,kh=Ih;function Bh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Dh=typeof Object.is=="function"?Object.is:Bh,Ch=kh.useSyncExternalStore,$h=Je.useRef,Uh=Je.useEffect,Gh=Je.useMemo,Vh=Je.useDebugValue;Qa.useSyncExternalStoreWithSelector=function(e,t,n,a,r){var o=$h(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Gh(function(){function l(v){if(!u){if(u=!0,g=v,v=a(v),r!==void 0&&i.hasValue){var m=i.value;if(r(m,v))return p=m}return p=v}if(m=p,Dh(g,v))return m;var b=a(v);return r!==void 0&&r(m,b)?m:(g=v,p=b)}var u=!1,g,p,f=n===void 0?null:n;return[function(){return l(t())},f===null?void 0:function(){return l(f())}]},[t,n,a,r]);var s=Ch(e,o[0],o[1]);return Uh(function(){i.hasValue=!0,i.value=s},[s]),Vh(s),s};Za.exports=Qa;var Wh=Za.exports;function Kh(e){e()}let er=Kh;const Yh=e=>er=e,Jh=()=>er,_n=Symbol.for("react-redux-context-".concat(y.version)),En=globalThis;function qh(){let e=En[_n];return e||(e=y.createContext(null),En[_n]=e),e}const Z=new Proxy({},new Proxy({},{get(e,t){const n=qh();return(a,...r)=>Reflect[t](n,...r)}}));function It(e=Z){return function(){return y.useContext(e)}}const tr=It(),Xh=()=>{throw new Error("uSES not initialized!")};let nr=Xh;const Zh=e=>{nr=e},Qh=(e,t)=>e===t;function eg(e=Z){const t=e===Z?tr:It(e);return function(a,r={}){const{equalityFn:o=Qh,stabilityCheck:i=void 0,noopCheck:s=void 0}=typeof r=="function"?{equalityFn:r}:r,{store:l,subscription:u,getServerState:g,stabilityCheck:p,noopCheck:f}=t();y.useRef(!0);const v=y.useCallback({[a.name](b){return a(b)}}[a.name],[a,p,i]),m=nr(u.addNestedSub,l.getState,g||l.getState,v,o);return y.useDebugValue(m),m}}const tg=eg();var _={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kt=Symbol.for("react.element"),Bt=Symbol.for("react.portal"),qe=Symbol.for("react.fragment"),Xe=Symbol.for("react.strict_mode"),Ze=Symbol.for("react.profiler"),Qe=Symbol.for("react.provider"),et=Symbol.for("react.context"),ng=Symbol.for("react.server_context"),tt=Symbol.for("react.forward_ref"),nt=Symbol.for("react.suspense"),at=Symbol.for("react.suspense_list"),rt=Symbol.for("react.memo"),ot=Symbol.for("react.lazy"),ag=Symbol.for("react.offscreen"),ar;ar=Symbol.for("react.module.reference");function U(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case kt:switch(e=e.type,e){case qe:case Ze:case Xe:case nt:case at:return e;default:switch(e=e&&e.$$typeof,e){case ng:case et:case tt:case ot:case rt:case Qe:return e;default:return t}}case Bt:return t}}}_.ContextConsumer=et;_.ContextProvider=Qe;_.Element=kt;_.ForwardRef=tt;_.Fragment=qe;_.Lazy=ot;_.Memo=rt;_.Portal=Bt;_.Profiler=Ze;_.StrictMode=Xe;_.Suspense=nt;_.SuspenseList=at;_.isAsyncMode=function(){return!1};_.isConcurrentMode=function(){return!1};_.isContextConsumer=function(e){return U(e)===et};_.isContextProvider=function(e){return U(e)===Qe};_.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===kt};_.isForwardRef=function(e){return U(e)===tt};_.isFragment=function(e){return U(e)===qe};_.isLazy=function(e){return U(e)===ot};_.isMemo=function(e){return U(e)===rt};_.isPortal=function(e){return U(e)===Bt};_.isProfiler=function(e){return U(e)===Ze};_.isStrictMode=function(e){return U(e)===Xe};_.isSuspense=function(e){return U(e)===nt};_.isSuspenseList=function(e){return U(e)===at};_.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===qe||e===Ze||e===Xe||e===nt||e===at||e===ag||typeof e=="object"&&e!==null&&(e.$$typeof===ot||e.$$typeof===rt||e.$$typeof===Qe||e.$$typeof===et||e.$$typeof===tt||e.$$typeof===ar||e.getModuleId!==void 0)};_.typeOf=U;function rg(){const e=Jh();let t=null,n=null;return{clear(){t=null,n=null},notify(){e(()=>{let a=t;for(;a;)a.callback(),a=a.next})},get(){let a=[],r=t;for(;r;)a.push(r),r=r.next;return a},subscribe(a){let r=!0,o=n={callback:a,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){!r||t===null||(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}const On={notify(){},get:()=>[]};function og(e,t){let n,a=On;function r(p){return l(),a.subscribe(p)}function o(){a.notify()}function i(){g.onStateChange&&g.onStateChange()}function s(){return!!n}function l(){n||(n=t?t.addNestedSub(i):e.subscribe(i),a=rg())}function u(){n&&(n(),n=void 0,a.clear(),a=On)}const g={addNestedSub:r,notifyNestedSubs:o,handleChangeWrapper:i,isSubscribed:s,trySubscribe:l,tryUnsubscribe:u,getListeners:()=>a};return g}const ig=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",sg=ig?y.useLayoutEffect:y.useEffect;function lg({store:e,context:t,children:n,serverState:a,stabilityCheck:r="once",noopCheck:o="once"}){const i=y.useMemo(()=>{const u=og(e);return{store:e,subscription:u,getServerState:a?()=>a:void 0,stabilityCheck:r,noopCheck:o}},[e,a,r,o]),s=y.useMemo(()=>e.getState(),[e]);sg(()=>{const{subscription:u}=i;return u.onStateChange=u.notifyNestedSubs,u.trySubscribe(),s!==e.getState()&&u.notifyNestedSubs(),()=>{u.tryUnsubscribe(),u.onStateChange=void 0}},[i,s]);const l=t||Z;return Un.createElement(l.Provider,{value:i},n)}function rr(e=Z){const t=e===Z?tr:It(e);return function(){const{store:a}=t();return a}}const cg=rr();function ug(e=Z){const t=e===Z?cg:rr(e);return function(){return t().dispatch}}const hg=ug();Zh(Wh.useSyncExternalStoreWithSelector);Yh($n.unstable_batchedUpdates);const gg=Wr({app:dh,param:Eh,helper:Hh}),or=Kr(),Dt=Yr({reducer:gg,middleware:e=>e().prepend(or.middleware)}),bf=()=>hg(),Sf=tg,gt=or.startListening;window.rmgStore=Dt;let Ct=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const dg=()=>{const e=[];return ir(t=>t.startsWith(T.PARAM_CONFIG_BY_ID),(t,n)=>{const a=t.slice(T.PARAM_CONFIG_BY_ID.length);if(n)try{const r=JSON.parse(n);e.push({...r,id:a})}catch(r){e.push({id:a})}else e.push({id:a})}),console.log("loadParamRegistry():: Found param config in localStorage",e.map(t=>t.id)),e},fg=()=>{let e=window.localStorage.getItem(T.PARAM);if(e===null&&(e=window.localStorage.getItem("rmgParam"),window.localStorage.removeItem("rmgParam"),window.localStorage.removeItem("rmgParamRedux")),e!==null){const t=Ct();console.log("upgradeLegacyParam():: Found legacy param. Assigning ID:",t),window.localStorage.setItem(T.PARAM_BY_ID+t,e),window.localStorage.removeItem(T.PARAM)}},wf=()=>{const e=dg(),t=[];return ir(n=>n.startsWith(T.PARAM_BY_ID),n=>{const a=n.slice(T.PARAM_BY_ID.length),r=e.find(o=>o.id===a);r?t.push(r):t.push({id:a})}),console.log("getParamRegistry():: Actual param found in localStorage",t.map(n=>n.id)),e.filter(n=>t.every(a=>a.id!==n.id)).forEach(n=>window.localStorage.removeItem(T.PARAM_CONFIG_BY_ID+n.id)),t},ir=(e,t)=>{let n=0;for(;n<window.localStorage.length;){const a=window.localStorage.key(n);a!==null&&e(a)&&t(a,window.localStorage.getItem(a)),n++}},xf=(e,t)=>{const n=Ct();return window.localStorage.setItem(T.PARAM_BY_ID+n,e),window.localStorage.setItem(T.PARAM_CONFIG_BY_ID+n,JSON.stringify({name:t,lastModified:Date.now()})),n},zf=async e=>{const t=e.split("/").at(-1);try{const n=await fetch(e);if(n.ok){const a=await n.text(),r=Ct();return window.localStorage.setItem(T.PARAM_BY_ID+r,a),window.localStorage.setItem(T.PARAM_CONFIG_BY_ID+r,JSON.stringify({name:t,lastModified:Date.now()})),r}else return console.warn("Failed to download param"),null}catch(n){return console.warn("Failed to download param.",n),null}},pg=e=>{try{let t=window.localStorage.getItem(T.CANVAS_SCALE);if(t==null){const a=window.localStorage.getItem("rmgScale");a!=null&&(t=a,console.log("Migrating canvas scale from old key..."),window.localStorage.setItem(T.CANVAS_SCALE,t),window.localStorage.removeItem("rmgScale"))}const n=Number(t);n>=.1&&e.dispatch(Sn(n))}catch(t){console.warn("Error in reading canvas scale. Initiating as 1...",t),e.dispatch(Sn(1))}},mg=e=>{try{let t=window.localStorage.getItem(T.CANVAS_TO_SHOW);if(t==null){const n=window.localStorage.getItem("rmgCanvas");n!=null&&(t=n,console.log("Migrating canvas to show from old key..."),window.localStorage.setItem(T.CANVAS_TO_SHOW,t),window.localStorage.removeItem("rmgCanvas"))}if(t!==null){if(Object.values(Ke).includes(t)){e.dispatch(wn([t]));return}const n=JSON.parse(t);if(Array.isArray(n)){e.dispatch(wn(n));return}}}catch(t){console.warn("Error in reading canvas to show. Initiating as all...",t)}},vg=e=>{fg(),pg(e),mg(e),gt({predicate:(t,n,a)=>n.app.canvasScale.toString()!==a.app.canvasScale.toString(),effect:(t,n)=>{window.localStorage.setItem(T.CANVAS_SCALE,n.getState().app.canvasScale.toString())}}),gt({predicate:(t,n,a)=>n.app.canvasToShow.toString()!==a.app.canvasToShow.toString(),effect:(t,n)=>{window.localStorage.setItem(T.CANVAS_TO_SHOW,JSON.stringify(n.getState().app.canvasToShow))}}),gt({predicate:(t,n,a)=>JSON.stringify(n.param)!==JSON.stringify(a.param),effect:yg})},yg=(e,t)=>{var r;const{id:n,...a}=(r=t.getState().app.paramConfig)!=null?r:{};if(n){const o=window.localStorage.getItem(T.PARAM_BY_ID+n),i=JSON.stringify(t.getState().param);if(o!==i){console.log("ListenerMiddleware:: Writing param and paramConfig to localStorage, ID="+n),window.localStorage.setItem(T.PARAM_BY_ID+n,i);const s=Date.now();t.dispatch(gh(s)),window.localStorage.setItem(T.PARAM_CONFIG_BY_ID+n,JSON.stringify({...a,lastModified:s}))}else console.log("ListenerMiddleware:: Do not write to localStorage as no changes in param, ID="+n)}};oh();document.head.append(...["share",...Object.values(Ke)].map(e=>{const t=document.createElement("link");return t.rel="stylesheet",t.id="css_"+e,t}));let Hn;const bg=()=>{Hn=aa(document.getElementById("root")),Hn.render(h.jsx(y.StrictMode,{children:h.jsx(lg,{store:Dt,children:h.jsx(mi,{i18n:Tc,children:h.jsx(rh,{})})})}))};R.ready().then(()=>{vg(Dt),bg(),R.injectUITools(),R.event(va.APP_LOAD,{isStandaloneWindow:R.isStandaloneWindow})}).catch(e=>{const t=document.querySelector("#root");t&&(t.innerHTML="<div>\n                Failed to load Rail Map Generator!\n                <br />\n                ".concat(e.toString(),'\n                <br />\n                Please contact us in \n                <a href="https://github.com/railmapgen/rmg" target="_blank" rel="noreferrer">GitHub</a>.\n            </div>'))});export{Ad as $,gf as A,ff as B,pf as C,mf as D,va as E,ld as F,vf as G,ih as H,be as I,cf as J,uf as K,hf as L,Xg as M,Fg as N,hg as O,sd as P,Ed as Q,pn as R,pa as S,_d as T,Hd as U,nd as V,td as W,Td as X,Kg as Y,Nd as Z,la as _,wg as __vite_legacy_guard,gn as a,qg as a$,ad as a0,rd as a1,Rd as a2,Pd as a3,ma as a4,lh as a5,jd as a6,Fd as a7,Md as a8,Id as a9,Qg as aA,kg as aB,Zd as aC,Eg as aD,Lg as aE,Mg as aF,wd as aG,xd as aH,yd as aI,bd as aJ,od as aK,Jg as aL,ed as aM,cd as aN,jg as aO,wn as aP,Sn as aQ,Gg as aR,Ug as aS,Rg as aT,Od as aU,d as aV,dd as aW,md as aX,T as aY,Ag as aZ,Yg as a_,kd as aa,Ld as ab,$g as ac,Ud as ad,$d as ae,Yd as af,Jd as ag,Gd as ah,Vd as ai,Wd as aj,Kd as ak,Dd as al,Cd as am,Bd as an,xe as ao,Xd as ap,Ct as aq,ud as ar,fa as as,hd as at,Ig as au,qd as av,pd as aw,yf as ax,Qc as ay,Su as az,sa as b,Dg as b0,xf as b1,wf as b2,zd as b3,zf as b4,Cg as b5,id as b6,Tg as b7,Zg as b8,Pg as b9,fd as ba,_g as bb,Ke as bc,uh as bd,ch as be,bf as c,tf as d,Lt as e,Qd as f,ef as g,Ng as h,Hg as i,Et as j,Vg as k,yu as l,Wg as m,Bg as n,Sd as o,Og as p,sf as q,R as r,of as s,lf as t,Sf as u,nf as v,af as w,rf as x,sh as y,df as z};
