(self.webpackChunkrmg=self.webpackChunkrmg||[]).push([[2377],{4018:function(n,e,t){var a={"./1F1E6-1F1F9.svg":[9121,9121],"./1F1E6-1F1FF.svg":[9427,9427],"./1F1E7-1F1F7.svg":[7304,7304],"./1F1E8-1F1E6.svg":[56,56],"./1F1E8-1F1F1.svg":[3450,3450],"./1F1E8-1F1F3.svg":[2537,2537],"./1F1E9-1F1EA.svg":[6311,6311],"./1F1EA-1F1EC.svg":[7365,7365],"./1F1EA-1F1F8.svg":[8721,8721],"./1F1EB-1F1F7.svg":[8514,8514],"./1F1EC-1F1F7.svg":[9515,9515],"./1F1ED-1F1F0.svg":[2248,2248],"./1F1ED-1F1FA.svg":[268,268],"./1F1EE-1F1F3.svg":[6236,6236],"./1F1EE-1F1F7.svg":[2617,2617],"./1F1EE-1F1F9.svg":[3541,3541],"./1F1EF-1F1F5.svg":[2741,2741],"./1F1F0-1F1F7.svg":[2255,2255],"./1F1F2-1F1F4.svg":[6435,6435],"./1F1F2-1F1FD.svg":[3086,3086],"./1F1F2-1F1FE.svg":[6082,6082],"./1F1F3-1F1F4.svg":[6095,6095],"./1F1F5-1F1EA.svg":[2955,2955],"./1F1F5-1F1F9.svg":[7791,7791],"./1F1F7-1F1F4.svg":[7224,7224],"./1F1F7-1F1FA.svg":[6031,6031],"./1F1F8-1F1EA.svg":[1550,1550],"./1F1F8-1F1EC.svg":[1229,1229],"./1F1F9-1F1F7.svg":[2237,2237],"./1F1F9-1F1FC.svg":[4252,4252],"./1F1FA-1F1F3.svg":[3353,3353],"./1F1FA-1F1F8.svg":[5439,5439],"./1F1FB-1F1F3.svg":[3886,3886],"./1F3F4-E0067-E0062-E0065-E006E-E0067-E007F.svg":[6129,6129],"./1F3F4-E0067-E0062-E0073-E0063-E0074-E007F.svg":[138,138]};function i(n){if(!t.o(a,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[n],i=e[0];return t.e(e[1]).then((function(){return t.t(i,17)}))}i.keys=function(){return Object.keys(a)},i.id=4018,n.exports=i},7827:function(n,e,t){var a={"./athens.js":[6128,6869],"./baku.js":[2481,6810],"./barcelona.js":[6340,5792],"./beijing.js":[2145,2358],"./berlin.js":[7976,436],"./bucharest.js":[5249,5520],"./budapest.js":[8895,1321],"./cairo.js":[6509,5189],"./changsha.js":[574,6739],"./chengdu.js":[6312,7599],"./chongqing.js":[300,7081],"./daegu.js":[6995,4874],"./dalian.js":[5169,9186],"./delhi.js":[3707,8719],"./dongguan.js":[3280,7206],"./dortmund.js":[6079,134],"./edinburgh.js":[285,9770],"./eskisehir.js":[1686,8189],"./foshan.js":[3204,9898],"./frankfurt.js":[2040,4447],"./glasgow.js":[4476,1847],"./gothenburg.js":[6801,6951],"./guadalajara.js":[9399,1392],"./guangzhou.js":[5841,5449],"./hangzhou.js":[3427,17],"./hanoi.js":[507,8237],"./harbin.js":[4826,886],"./hochiminh.js":[6770,4788],"./hongkong.js":[4243,3106],"./istanbul.js":[3107,4073],"./jinan.js":[5719,5303],"./kansai.js":[382,310],"./kaohsiung.js":[3037,5081],"./klangvalley.js":[137,1951],"./kunming.js":[8852,8183],"./lima.js":[9118,8140],"./lisbon.js":[8814,3417],"./london.js":[8087,3875],"./macao.js":[8015,425],"./madrid.js":[8020,7826],"./milan.js":[4410,2028],"./munich.js":[7368,9890],"./nanjing.js":[1664,5944],"./newtaipei.js":[9114,4737],"./osaka.js":[1064,3579],"./oslo.js":[8057,8975],"./other.js":[7642,1614],"./paris.js":[2720,5066],"./qingdao.js":[7994,2168],"./rheinruhr.js":[6870,743],"./sanfrancisco.js":[4747,8291],"./sanktpeterburg.js":[1832,8413],"./santiago.js":[2568,6195],"./saopaulo.js":[6956,441],"./seoul.js":[3266,6546],"./shanghai.js":[9656,5288],"./shenyang.js":[2266,3658],"./shenzhen.js":[4691,2194],"./singapore.js":[2459,1342],"./stockholm.js":[4606,7153],"./suzhou.js":[9819,5885],"./taipei.js":[9489,6977],"./tehran.js":[2573,7719],"./tianjin.js":[7942,9],"./tokyo.js":[3762,9450],"./toronto.js":[8148,1608],"./tyneandwear.js":[9314,2871],"./vienna.js":[5252,2832],"./wuxi.js":[4099,1902],"./xiamen.js":[4610,530],"./xian.js":[2591,7101],"./zhengzhou.js":[7357,4111]};function i(n){if(!t.o(a,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[n],i=e[0];return t.e(e[1]).then((function(){return t(i)}))}i.keys=function(){return Object.keys(a)},i.id=7827,n.exports=i},235:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return ze}});var a=t(2791),i=t(4942),r=t(713),o=t(6169),s=t(8228),l=t(7279),u=t(184);function c(n){var e,t=n.type,r=n.style,o=n.svgWidth,c=n.svgHeight,h=n.canvasScale,d=n.theme,m=n.children;return(0,a.useEffect)((function(){return document.getElementById("css_"+t).href="/rmg"+"/styles/".concat(t,"_").concat(r,".css"),function(){document.getElementById("css_"+t).href=""}}),[r]),(0,u.jsxs)("svg",{id:t,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",height:c*h,viewBox:"0 0 ".concat(o," ").concat(c),colorInterpolationFilters:"sRGB",style:(e={},(0,i.Z)(e,"--rmg-svg-width",o+"px"),(0,i.Z)(e,"--rmg-svg-height",c+"px"),(0,i.Z)(e,"--rmg-theme-colour",d[2]),(0,i.Z)(e,"--rmg-theme-fg",d[3]),e),children:[(0,u.jsx)("rect",{id:"canvas-bg",fill:"white",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}}),(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(l.D8,{isIndeterminate:!0}),children:(0,u.jsx)(s.Z,{children:m})}),(0,u.jsx)("rect",{id:"canvas-border",fill:"none",strokeWidth:3,stroke:"none",style:{height:"var(--rmg-svg-height)",width:"var(--rmg-svg-width)"}})]})}var h,d,m,f,p=t(6030),g=t(533),x=t(6871),v=t(8735),j={flexDirection:"row",overflowX:"auto","&::before, &::after":{content:'""',margin:"auto"},"& > svg":{flex:"0 0 auto",border:"1px solid black"}};function z(){var n=(0,x.TH)(),e=(0,x.s0)(),t=(0,p.I0)(),i=(0,o.CG)((function(n){return n.app})),s=i.canvasToShow,l=i.canvasScale,h=(0,o.CG)((function(n){return n.param})),d=h.svgWidth,m=h.svg_height,f=h.style,z=h.theme;if(n.pathname!=="/"+f&&n.pathname!=="/v3/"+f){var b=n.pathname.split("/").slice(-1)[0];Object.values(r.RM).includes(b)?t((0,g.yL)(b)):e(f)}(0,a.useEffect)((function(){document.getElementById("css_share").href="/rmg"+"/styles/share_".concat(f,".css")}),[f]);var y=Object.keys(M[f]).filter((function(n){return"all"===s||s===n}));return(0,u.jsx)(v.kC,{sx:j,children:y.map((function(n){return(0,u.jsx)(c,{type:n,style:f,svgWidth:d[n],svgHeight:m,canvasScale:l,theme:z,children:M[f][n]},n+f)}))})}var b=(0,a.lazy)((function(){return t.e(8506).then(t.bind(t,6787))})),y=(0,a.lazy)((function(){return t.e(4822).then(t.bind(t,5951))})),S=(0,a.lazy)((function(){return t.e(4555).then(t.bind(t,4990))})),C=(0,a.lazy)((function(){return t.e(3472).then(t.bind(t,995))})),H=(0,a.lazy)((function(){return t.e(9586).then(t.bind(t,4074))})),Z=(0,a.lazy)((function(){return t.e(1273).then(t.bind(t,5387))})),w=(0,a.lazy)((function(){return Promise.all([t.e(1928),t.e(3957)]).then(t.bind(t,8076))})),k=(0,a.lazy)((function(){return Promise.all([t.e(1928),t.e(4880)]).then(t.bind(t,1552))})),M=(f={},(0,i.Z)(f,r.RM.GZMTR,(h={},(0,i.Z)(h,r.Ht.RunIn,(0,u.jsx)(b,{})),(0,i.Z)(h,r.Ht.RailMap,(0,u.jsx)(y,{})),h)),(0,i.Z)(f,r.RM.MTR,(d={},(0,i.Z)(d,r.Ht.Destination,(0,u.jsx)(S,{})),(0,i.Z)(d,r.Ht.RailMap,(0,u.jsx)(C,{})),d)),(0,i.Z)(f,r.RM.SHMetro,(m={},(0,i.Z)(m,r.Ht.Destination,(0,u.jsx)(H,{})),(0,i.Z)(m,r.Ht.RunIn,(0,u.jsx)(Z,{})),(0,i.Z)(m,r.Ht.RailMap,(0,u.jsx)(w,{})),(0,i.Z)(m,r.Ht.Indoor,(0,u.jsx)(k,{})),m)),f),A=t(8539),L=t(1677),P=t(3168);function F(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.app.selectedStation}));console.log("InfoSection:: Rendering for",t);var a=(0,o.CG)((function(n){return n.param.style})),i=(0,o.CG)((function(n){return n.param.stn_list[t]})),s=i.num,l=i.name,c=i.secondaryName,h=[{type:"input",label:n("StationSidePanel.info.num"),value:s,placeholder:"01",onChange:function(n){return e((0,g.Uf)(t,n))},hidden:![r.RM.GZMTR].includes(a)},{type:"input",label:n("StationSidePanel.info.zhName"),value:l[0],onChange:function(n){return e((0,g.PD)(t,[n,l[1]]))}},{type:"input",label:n("StationSidePanel.info.enName"),value:l[1],onChange:function(n){return e((0,g.PD)(t,[l[0],n]))}},{type:"input",label:n("StationSidePanel.info.zhSecondary"),value:c?c[0]:"",placeholder:"1\u53f7\u822a\u7ad9\u697c",onChange:function(n){return e((0,g.uJ)(t,[n,c?c[1]:""]))},hidden:![r.RM.GZMTR].includes(a)},{type:"input",label:n("StationSidePanel.info.enSecondary"),value:c?c[1]:"",placeholder:"Terminal 1",onChange:function(n){return e((0,g.uJ)(t,[c?c[0]:"",n]))},hidden:![r.RM.GZMTR].includes(a)}];return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("StationSidePanel.info.title")}),(0,u.jsx)(L.M5,{fields:h,minW:100})]})}var T=t(7805),R=t(3433),D=t(9439),O=t(7322),E=t(1497),N=t(3822),_=t(9113),U=t(5223),G=t(4817);function I(n){var e=n.data,t=n.displayValue,i=n.displayHandler,r=n.predicate,o=n.defaultValue,s=n.onChange,l=n.isInvalid,c=(0,a.useRef)(null),h=(0,a.useState)(o?t(o):""),d=(0,D.Z)(h,2),m=d[0],f=d[1],p=(0,a.useState)(!1),g=(0,D.Z)(p,2),x=g[0],j=g[1];(0,U.O3)({ref:c,handler:function(){return j(!1)}}),(0,a.useEffect)((function(){f(o?t(o):"")}),[JSON.stringify(e),JSON.stringify(o)]);return(0,u.jsx)(v.xu,{ref:c,children:(0,u.jsxs)(G.J2,{placement:"bottom-start",isOpen:x,autoFocus:!1,children:[(0,u.jsx)(G.tW,{children:(0,u.jsx)(L.bV,{defaultValue:m,onDebouncedChange:function(n){return f(n)},onFocus:function(){return j(!0)},isInvalid:l})}),(0,u.jsx)(G.yk,{w:"unset",minW:200,children:(0,u.jsx)(G.b,{p:0,children:(0,u.jsx)(v.kC,{direction:"column",maxH:270,overflowY:"auto",children:e.filter((function(n){return r(n,m)})).map((function(n){return(0,u.jsx)(T.zx,{size:"sm",variant:"ghost",justifyContent:"flex-start",flexShrink:0,role:"menuitem",onClick:function(){return function(n){f(t(n)),j(!1),null===s||void 0===s||s(n)}(n)},children:i?i(n):t(n)},n.id)}))})})})]})})}var B=t(1125),J=t(3046);function W(n){var e=n.countryCode,i=n.svgFilename,r=(0,a.useState)(void 0),o=(0,D.Z)(r,2),s=o[0],l=o[1];return(0,a.useEffect)((function(){i&&t(4018)("./"+i).then((function(n){return n.default})).then(l).catch((function(n){return console.error("Failed to find SVG file ".concat(i," as ").concat(null===n||void 0===n?void 0:n.message))}))}),[i]),s?(0,u.jsx)(J.Ee,{src:s,alt:"Flag of ".concat(e),h:17,mr:1}):(0,u.jsx)(u.Fragment,{})}function $(n){var e=n.defaultValueId,t=n.onChange,a=(0,P.$)().i18n,i=B.nB,o=e?i.find((function(n){return n.id===e})):void 0;return(0,u.jsx)(I,{data:i,displayValue:function(n){return a.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n}))},displayHandler:function(n){var e,t,i="TW"===n.country&&[r.sp.ChineseSimp,r.sp.ChineseCN].includes(a.language),o=["Win32","Win64"].includes(navigator.platform),s=a.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n})),l=null===(e=B.Jm.find((function(e){return e.id===n.country})))||void 0===e?void 0:e.flagSvg,c=null===(t=B.Jm.find((function(e){return e.id===n.country})))||void 0===t?void 0:t.flagEmoji;return(0,u.jsxs)(u.Fragment,{children:[i?(0,u.jsx)("span",{children:"\ud83c\udff4\xa0"}):o?(0,u.jsx)(W,{countryCode:n.country,svgFilename:l}):(0,u.jsxs)("span",{children:[c,"\xa0"]}),s]})},predicate:function(n,e){return Object.values(n.name).some((function(n){return n.includes(e)}))},defaultValue:o,onChange:function(n){return null===t||void 0===t?void 0:t(n.id)}})}function V(n){var e=n.city,i=n.defaultValueId,o=n.onChange,s=(0,P.$)().i18n,l=function(n){var e=(0,a.useState)([]),i=(0,D.Z)(e,2),r=i[0],o=i[1];return(0,a.useEffect)((function(){t(7827)("./".concat(n,".js")).then((function(n){return o(n.default)})).catch((function(){return o([])}))}),[n]),r}(e),c=i?l.find((function(n){return n.id===i})):void 0,h=function(n){return s.languages.map((function(e){return n.name[e]})).find((function(n){return void 0!==n}))};return(0,u.jsx)(I,{data:l,displayValue:h,displayHandler:function(n){var e=h(n);return(0,u.jsx)(L.l2,{name:e,fg:n.fg||r.AJ.white,bg:n.colour})},predicate:function(n,e){return Object.values(n.name).some((function(n){return n.includes(e)}))},defaultValue:c,onChange:function(n){return null===o||void 0===o?void 0:o(n.id,n.colour,n.fg||r.AJ.white)}})}function K(n){var e,t=n.isOpen,o=n.onClose,s=n.defaultTheme,l=n.onUpdate,c=(0,P.$)().t,h=(0,a.useState)(null===s||void 0===s?void 0:s[0]),d=(0,D.Z)(h,2),m=d[0],f=d[1],p=(0,a.useState)(null===s||void 0===s?void 0:s[1]),g=(0,D.Z)(p,2),x=g[0],j=g[1],z=(0,a.useState)((null===s||void 0===s?void 0:s[2])||"#AAAAAA"),b=(0,D.Z)(z,2),y=b[0],S=b[1],C=(0,a.useState)((null===s||void 0===s?void 0:s[3])||r.AJ.white),H=(0,D.Z)(C,2),Z=H[0],w=H[1];(0,a.useEffect)((function(){s&&(f(s[0]),j(s[1]),S(s[2]),w(s[3]))}),[t,null===s||void 0===s?void 0:s.toString()]);var k=[{type:"custom",label:c("ColourModal.city"),component:(0,u.jsx)($,{defaultValueId:m,onChange:function(n){f(n),j(void 0),S("#AAAAAA"),w(r.AJ.white)}})},{type:"custom",label:c("ColourModal.line"),component:(0,u.jsx)(V,{city:m,defaultValueId:x,onChange:function(n,e,t){j(n),S(e),w(t)}})}],M=[{type:"input",label:c("ColourModal.bg"),variant:"color",value:y,placeholder:"#F3D03E",onChange:function(n){f(B.jk.Other),j("other"),S(n)}},{type:"select",label:c("ColourModal.fg"),value:Z,options:(e={},(0,i.Z)(e,r.AJ.white,c("ColourModal.white")),(0,i.Z)(e,r.AJ.black,c("ColourModal.black")),e),onChange:function(n){f(B.jk.Other),j("other"),w(n)}}],A=m&&x&&y&&Z;return(0,u.jsxs)(E.u_,{isOpen:t,onClose:o,children:[(0,u.jsx)(E.ZA,{}),(0,u.jsxs)(E.hz,{children:[(0,u.jsx)(E.xB,{children:c("ColourModal.title")}),(0,u.jsx)(E.ol,{}),(0,u.jsx)(E.fe,{children:(0,u.jsxs)(v.gC,{children:[(0,u.jsx)(L.l2,{name:c("ColourModal.example"),fg:Z,bg:y}),(0,u.jsxs)(N.mQ,{isFitted:!0,colorScheme:"teal",w:"100%",defaultIndex:m===B.jk.Other?1:0,children:[(0,u.jsxs)(N.td,{children:[(0,u.jsx)(N.OK,{children:c("ColourModal.palette")}),(0,u.jsx)(N.OK,{children:c("ColourModal.custom")})]}),(0,u.jsxs)(N.nP,{children:[(0,u.jsx)(N.x4,{children:(0,u.jsx)(L.M5,{fields:k})}),(0,u.jsx)(N.x4,{children:(0,u.jsx)(L.M5,{fields:M})})]})]})]})}),(0,u.jsxs)(E.mz,{children:[(0,u.jsxs)(v.xv,{fontSize:"sm",marginRight:2,children:[c("ColourModal.seeAll"),(0,u.jsxs)(v.rU,{color:"teal.500",href:"/rmg-palette",isExternal:!0,children:["RMG Palette ",(0,u.jsx)(_.JO,{as:O.jhj})]})]}),(0,u.jsx)(T.zx,{colorScheme:"teal",onClick:function(){A&&(null===l||void 0===l||l([m,x,y,Z]),o())},disabled:!A,children:c("ColourModal.submit")})]})]})]})}var q=t(5671),X=t(3144),Y=function(){function n(){(0,q.Z)(this,n)}return(0,X.Z)(n,null,[{key:"hexToRgb",value:function(n){return[parseInt(n.slice(1,3),16),parseInt(n.slice(3,5),16),parseInt(n.slice(5,7),16)]}},{key:"fade",value:function(n,e){return"rgba(".concat([].concat((0,R.Z)(this.hexToRgb(n)),[e]).join(","),")")}},{key:"euclideanDistance",value:function(n,e){var t=this;return this.hexToRgb(n).reduce((function(n,a,i){return n+Math.pow(a-t.hexToRgb(e)[i],2)}),0)}}]),n}();function Q(n){var e=n.theme,t=n.onClick;return(0,u.jsx)(T.hU,{size:"xs","aria-label":"Theme colour",mt:"0.45px",color:e[3],bg:e[2],_hover:{bg:Y.fade(e[2],.7)},icon:(0,u.jsx)(O.uAz,{}),onClick:t})}function nn(n){var e,t=n.interchangeList,i=n.onAdd,s=n.onDelete,l=n.onUpdate,c=(0,P.$)().t,h=(0,a.useState)(!1),d=(0,D.Z)(h,2),m=d[0],f=d[1],p=(0,a.useState)(0),g=(0,D.Z)(p,2),x=g[0],j=g[1],z=(0,o.CG)((function(n){return n.param.theme})),b=t.map((function(n,e){return[{type:"input",label:c("StationSidePanel.interchange.zhName"),value:n[4],minW:"80px",onChange:function(t){return null===l||void 0===l?void 0:l(e,[n[0],n[1],n[2],n[3],t,n[5]])}},{type:"input",label:c("StationSidePanel.interchange.enName"),value:n[5],minW:"80px",onChange:function(t){return null===l||void 0===l?void 0:l(e,[n[0],n[1],n[2],n[3],n[4],t])}}]}));return(0,u.jsxs)(L.bg,{direction:"column",children:[0===t.length&&(0,u.jsxs)(v.Ug,{spacing:.5,children:[(0,u.jsx)(v.xv,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:c("StationSidePanel.interchange.noInterchanges")}),(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":c("StationSidePanel.interchange.add"),onClick:function(){return null===i||void 0===i?void 0:i([z[0],"","#aaaaaa",r.AJ.white,"",""])},icon:(0,u.jsx)(O.x06,{})})]}),t.map((function(n,e){return(0,u.jsxs)(v.Ug,{spacing:.5,children:[(0,u.jsx)(L.Nv,{label:c("StationSidePanel.interchange.colour"),minW:"40px",noLabel:0!==e,children:(0,u.jsx)(Q,{theme:[n[0],n[1],n[2],n[3]],onClick:function(){f(!0),j(e)}})}),(0,u.jsx)(L.M5,{fields:b[e],noLabel:0!==e}),i&&e===b.length-1?(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":c("StationSidePanel.interchange.copy"),onClick:function(){return null===i||void 0===i?void 0:i(t.slice(-1)[0])},icon:(0,u.jsx)(O.Fqs,{})}):(0,u.jsx)(v.xu,{minW:8}),s&&(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":c("StationSidePanel.interchange.remove"),onClick:function(){return null===s||void 0===s?void 0:s(e)},icon:(0,u.jsx)(O.ZkW,{})})]},e)})),(0,u.jsx)(K,{isOpen:m,onClose:function(){return f(!1)},defaultTheme:null===(e=t[x])||void 0===e?void 0:e.slice(0,4),onUpdate:function(n){return null===l||void 0===l?void 0:l(x,[].concat((0,R.Z)(n),[t[x][4],t[x][5]]))}})]})}function en(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.app.selectedStation})),i=(0,o.CG)((function(n){return n.param.theme})),s=(0,o.CG)((function(n){return n.param.stn_list[t]})).transfer,l=function(a){var i,r;return[{type:"input",label:n("StationSidePanel.interchange.stationZhName"),value:null===(i=s.osi_names[a])||void 0===i?void 0:i[0],onChange:function(n){var i;return e((0,g.fr)(t,a,[n,null===(i=s.osi_names[a])||void 0===i?void 0:i[1]]))}},{type:"input",label:n("StationSidePanel.interchange.stationEnName"),value:null===(r=s.osi_names[a])||void 0===r?void 0:r[1],onChange:function(n){var i;return e((0,g.fr)(t,a,[null===(i=s.osi_names[a])||void 0===i?void 0:i[0],n]))}}]},c=function(n){return function(a){e((0,g.Ui)(t,n,a))}},h=function(n){return function(a){e((0,g.SA)(t,n,a))}},d=function(n){return function(a,i){e((0,g.vM)(t,n,a,i))}};return(0,u.jsxs)(v.gC,{align:"flex-start",p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("StationSidePanel.interchange.title")}),s.info.map((function(e,t){return(0,u.jsxs)(a.Fragment,{children:[(0,u.jsx)(v.X6,{as:"h6",size:"xs",children:n(0===t?"StationSidePanel.interchange.within":1===t?"StationSidePanel.interchange.outStation":"StationSidePanel.interchange.outSystem")}),0!==t&&(0,u.jsx)(L.M5,{fields:l(t-1)}),(0,u.jsx)(nn,{interchangeList:e,onAdd:c(t),onDelete:h(t),onUpdate:d(t)})]},t)})),s.info.length<3&&(0,u.jsx)(T.zx,{size:"xs",variant:"ghost",alignSelf:"flex-end",leftIcon:(0,u.jsx)(O.x06,{}),onClick:function(){e((0,g.Ui)(t,s.info.length,[i[0],"","#AAAAAA",r.AJ.white,"",""]))},children:n("StationSidePanel.interchange.addGroup")})]})}function tn(n){var e=n.selections,t=n.defaultValue,i=n.onChange,r=n.multiSelect,o=(0,a.useState)(t),s=(0,D.Z)(o,2),l=s[0],c=s[1];(0,a.useEffect)((function(){t.toString()&&c(t)}),[t.toString()]);return(0,u.jsx)(T.hE,{size:"xs",isAttached:!0,colorScheme:"teal",variant:"outline",children:e.map((function(n,t){var a="object"===typeof l&&l.includes(n.value)||l===n.value,o=t===e.length-1||a?void 0:"-px";return(0,u.jsx)(T.zx,{variant:a?"solid":"outline",mr:o,isDisabled:n.disabled,onClick:function(){return function(n){if(r){var e=l,t=e.includes(n)?e.filter((function(e){return e!==n})):[].concat((0,R.Z)(e),[n]);c(t),null===i||void 0===i||i(t)}else c(n),null===i||void 0===i||i(n)}(n.value)},children:n.label},n.value.toString())}))})}function an(){var n,e,t=(0,P.$)().t,a=(0,p.I0)(),s=(0,o.CG)((function(n){return n.app.selectedStation})),l=(0,o.CG)((function(n){return n.param.style})),c=(0,o.CG)((function(n){return n.param.stn_list[s]})),h=c.services,d=c.facility,m=c.loop_pivot,f=Object.values(r.K9).map((function(n){return{label:t("StationSidePanel.more."+n),value:n,disabled:n===r.K9.local&&l!==r.RM.SHMetro}})),x=(n={},(0,i.Z)(n,r.mV.none,t("StationSidePanel.more.none")),(0,i.Z)(n,r.mV.airport,t("StationSidePanel.more.airport")),(0,i.Z)(n,r.mV.hsr,t("StationSidePanel.more.hsr")),(0,i.Z)(n,r.mV.disney,t("StationSidePanel.more.disney")),n),j=(e={},(0,i.Z)(e,r.mV.none,t("StationSidePanel.more.none")),(0,i.Z)(e,r.mV.airport,t("StationSidePanel.more.airport")),(0,i.Z)(e,r.mV.railway,t("StationSidePanel.more.railway")),(0,i.Z)(e,r.mV.disney,t("StationSidePanel.more.disney")),e),z=[{type:"custom",label:t("StationSidePanel.more.service"),component:(0,u.jsx)(tn,{selections:f,defaultValue:h,onChange:function(n){return a((0,g.k6)(s,n))},multiSelect:!0}),hidden:![r.RM.GZMTR,r.RM.SHMetro].includes(l)},{type:"select",label:t("StationSidePanel.more.facility"),value:d,options:l===r.RM.MTR?x:j,onChange:function(n){return a((0,g.cm)(s,n))},hidden:![r.RM.MTR,r.RM.SHMetro].includes(l)},{type:"switch",label:t("StationSidePanel.more.pivot"),isChecked:m,onChange:function(n){return a((0,g.Hz)(s,n))},hidden:![r.RM.SHMetro].includes(l),minW:"full",oneLine:!0}];return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:t("StationSidePanel.more.title")}),(0,u.jsx)(L.M5,{fields:z})]})}var rn=t(1413);function on(){var n,e=(0,P.$)().t,t=(0,p.I0)(),a=(0,o.CG)((function(n){return n.app.selectedStation})),s=(0,o.CG)((function(n){return n.param.stn_list})),l=s[a],c=l.parents,h=l.children,d=l.branch,m=(n={},(0,i.Z)(n,r.H_.through,e("StationSidePanel.branch.through")),(0,i.Z)(n,r.H_.nonThrough,e("StationSidePanel.branch.nonThrough")),n),f=function(n){return(n===r.Nm.left?c:h).reduce((function(n,e){return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},e,s[e].name.join(" ")))}),{})},x={upper:e("StationSidePanel.branch.upper"),lower:e("StationSidePanel.branch.lower")},j=function(n){return d[n].length?[{type:"select",label:e("StationSidePanel.branch.type"),options:m,value:d[n][0],onChange:function(e){return t((0,g.kM)(a,n,e))}},{type:"select",label:e("StationSidePanel.branch.firstStation"),options:f(n),value:d[n][1],onChange:function(e){return t((0,g.B6)(a,n,e))}},{type:"select",label:e("StationSidePanel.branch.position"),options:x,value:0===(n===r.Nm.left?c:h).indexOf(d[n][1])?"upper":"lower",onChange:function(){return t((0,g.HT)(a,n))}}]:[]};return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:e("StationSidePanel.branch.title")}),(0,u.jsx)(v.X6,{as:"h6",size:"xs",children:e("StationSidePanel.branch.left")}),(0,u.jsx)(L.bg,{direction:"column",children:2===c.length?(0,u.jsx)(L.M5,{fields:j(r.Nm.left)}):(0,u.jsx)(v.xv,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:e("StationSidePanel.branch.noBranch")})}),(0,u.jsx)(v.X6,{as:"h6",size:"xs",children:e("StationSidePanel.branch.left")}),(0,u.jsx)(L.bg,{direction:"column",children:2===h.length?(0,u.jsx)(L.M5,{fields:j(r.Nm.right)}):(0,u.jsx)(v.xv,{as:"i",flex:1,align:"center",fontSize:"md",colorScheme:"gray",children:e("StationSidePanel.branch.noBranch")})})]})}function sn(){return(0,u.jsxs)(L.EI,{children:[(0,u.jsx)(F,{}),(0,u.jsx)(v.iz,{}),(0,u.jsx)(en,{}),(0,u.jsx)(v.iz,{}),(0,u.jsx)(on,{}),(0,u.jsx)(v.iz,{}),(0,u.jsx)(an,{})]})}function ln(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.param})),a=t.style,i=t.svgWidth,s=t.svg_height,l=t.y_pc,c=t.branch_spacing,h=t.padding,d=t.direction_gz_x,m=t.direction_gz_y,f=[].concat((0,R.Z)(r.tK[a].map((function(t){return{type:"input",label:n("StyleSidePanel.layout.".concat(t,"Width")),value:i[t].toString(),onChange:function(n){return e((0,g.gS)(Number(n),t))}}}))),[{type:"input",label:n("StyleSidePanel.layout.canvasHeight"),value:s.toString(),onChange:function(n){return e((0,g.K0)(Number(n)))}},{type:"slider",label:n("StyleSidePanel.layout.verticalPosition"),value:l,min:0,max:100,onChange:function(n){return e((0,g.Tt)(n))},hidden:![r.RM.MTR,r.RM.GZMTR].includes(a)},{type:"slider",label:n("StyleSidePanel.layout.branchSpacing"),value:c,min:0,max:100,onChange:function(n){return e((0,g.J3)(n))}},{type:"slider",label:n("StyleSidePanel.layout.padding"),value:h,min:0,max:100,onChange:function(n){return e((0,g.xd)(n))}},{type:"slider",label:n("StyleSidePanel.layout.directionGzX"),value:d,min:0,max:100,onChange:function(n){return e((0,g.$m)(n))},hidden:![r.RM.GZMTR].includes(a)},{type:"slider",label:n("StyleSidePanel.layout.directionGzY"),value:m,min:0,max:100,onChange:function(n){return e((0,g.rR)(n))},hidden:![r.RM.GZMTR].includes(a)}]);return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("StyleSidePanel.layout.title")}),(0,u.jsx)(L.M5,{fields:f,minW:100})]})}function un(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.param})),s=t.style,l=t.theme,c=t.line_name,h=t.line_num,d=t.direction,m=t.platform_num,f=t.psd_num,x=t.namePosMTR,j=t.customiseMTRDest,z=t.info_panel_type,b=(0,a.useState)(!1),y=(0,D.Z)(b,2),S=y[0],C=y[1],H=[{label:n("StyleSidePanel.design.left"),value:r.wA.left},{label:n("StyleSidePanel.design.right"),value:r.wA.right}],Z=Object.values(r.p).reduce((function(e,t){return(0,rn.Z)((0,rn.Z)({},e),{},(0,i.Z)({},t,n("StyleSidePanel.design."+t)))}),{}),w=Object.values(r.hi).reduce((function(e,t){return(0,rn.Z)((0,rn.Z)({},e),{},(0,i.Z)({},t,n("StyleSidePanel.design."+t)))}),{}),k=[{type:"custom",label:n("StyleSidePanel.design.colour"),component:(0,u.jsx)(Q,{theme:l,onClick:function(){return C(!0)}}),minW:"40px"},{type:"input",label:n("StyleSidePanel.design.zhLineName"),value:c[0],onChange:function(n){return e((0,g.il)([n,c[1]]))},minW:"115px"},{type:"input",label:n("StyleSidePanel.design.enLineName"),value:c[1],onChange:function(n){return e((0,g.il)([c[0],n]))},minW:"115px"},{type:"input",label:n("StyleSidePanel.design.lineNum"),value:h,onChange:function(n){return e((0,g.bh)(n))},hidden:![r.RM.GZMTR].includes(s)},{type:"input",label:n("StyleSidePanel.design.platformNum"),value:m||"",onChange:function(n){return e((0,g.VY)(n))}},{type:"input",label:n("StyleSidePanel.design.psdNum"),value:f,onChange:function(n){return e((0,g.lT)(n))},hidden:![r.RM.GZMTR].includes(s)},{type:"select",label:n("StyleSidePanel.design.panelType"),value:z,options:s===r.RM.GZMTR?Z:w,onChange:function(n){return e((0,g.NQ)(n))},hidden:![r.RM.GZMTR,r.RM.SHMetro].includes(s)},{type:"custom",label:n("StyleSidePanel.design.direction"),component:(0,u.jsx)(tn,{selections:H,defaultValue:d,onChange:function(n){return e((0,g.mU)(n))}}),minW:"full",oneLine:!0}],M=[{label:n("StyleSidePanel.design.alternatively"),value:!0},{label:n("StyleSidePanel.design.onOneSide"),value:!1}],A=[{type:"custom",label:n("StyleSidePanel.design.nameDisplay"),component:(0,u.jsxs)(v.Ug,{children:[(0,u.jsx)(tn,{selections:M,defaultValue:x.isStagger,onChange:function(n){return e((0,g.gn)(n))}}),(0,u.jsx)(T.zx,{size:"xs",variant:"ghost",leftIcon:(0,u.jsx)(O.Llt,{}),onClick:function(){return e((0,g.jv)())},children:n("StyleSidePanel.design.flip")})]}),minW:"full",oneLine:!0,hidden:![r.RM.MTR].includes(s)},{type:"switch",label:n("StyleSidePanel.design.legacyDestination"),isChecked:j.isLegacy,onChange:function(n){return e((0,g.nR)(n))},hidden:![r.RM.MTR].includes(s),minW:"full",oneLine:!0},{type:"switch",label:n("StyleSidePanel.design.overrideTerminal"),isChecked:!1!==j.terminal,onChange:function(n){return e((0,g.An)(!!n&&["",""]))},hidden:![r.RM.MTR].includes(s),minW:"full",oneLine:!0},{type:"input",label:n("StyleSidePanel.design.terminalZhName"),value:j.terminal?j.terminal[0]:"",placeholder:"\u6a5f\u5834\u53ca\u535a\u89bd\u9928",onChange:function(n){return e((0,g.An)([n,j.terminal?j.terminal[1]:""]))},hidden:![r.RM.MTR].includes(s)||!1===j.terminal},{type:"input",label:n("StyleSidePanel.design.terminalEnName"),value:j.terminal?j.terminal[1]:"",placeholder:"Airport and AsiaWorld-Expo",onChange:function(n){return e((0,g.An)([j.terminal?j.terminal[0]:"",n]))},hidden:![r.RM.MTR].includes(s)||!1===j.terminal}];return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("StyleSidePanel.design.title")}),(0,u.jsx)(L.M5,{fields:[].concat(k,A),minW:"110px"}),(0,u.jsx)(K,{isOpen:S,onClose:function(){return C(!1)},defaultTheme:l,onUpdate:function(n){return e((0,g.Dc)(n))}})]})}function cn(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.helper})).branches,a=(0,o.CG)((function(n){return n.param})),i=a.loop,r=a.loop_info,s=r.bank,l=r.left_and_right_factor,c=r.bottom_factor,h=[{type:"switch",label:n("StyleSidePanel.loop.isLoop"),isChecked:i,onChange:function(n){return e((0,g.rY)(n))},minW:"full",oneLine:!0},{type:"switch",label:n("StyleSidePanel.loop.isBank"),isChecked:s,isDisabled:!0,onChange:function(n){return e((0,g.qi)(n))},minW:"full",oneLine:!0},{type:"slider",label:n("StyleSidePanel.loop.leftRightFactor"),value:l,min:0,max:Math.floor((t[0].length-2*c)/2),onChange:function(n){return e((0,g.lh)(Math.floor(n)))},hidden:!i},{type:"slider",label:n("StyleSidePanel.loop.bottomFactor"),value:c,min:1,max:Math.floor((t[0].length-2*l)/2),onChange:function(n){return e((0,g.Hv)(Math.floor(n)))},hidden:!i}];return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("StyleSidePanel.loop.title")}),(0,u.jsx)(L.M5,{fields:h})]})}function hn(n){var e=n.note,t=n.onUpdate,a=n.onDelete,i=(0,P.$)().t,r=[{type:"textarea",label:i("StyleSidePanel.note.zhNote"),value:e[0],onChange:function(n){return null===t||void 0===t?void 0:t([n,e[1],e[2],e[3],e[4]])}},{type:"textarea",label:i("StyleSidePanel.note.enNote"),value:e[1],onChange:function(n){return null===t||void 0===t?void 0:t([e[0],n,e[2],e[3],e[4]])}},{type:"switch",label:i("StyleSidePanel.note.border"),isChecked:e[4],onChange:function(n){return null===t||void 0===t?void 0:t([e[0],e[1],e[2],e[3],n])},oneLine:!0}],o=[{type:"slider",label:i("StyleSidePanel.note.positionX"),value:e[2],min:0,max:100,onChange:function(n){return null===t||void 0===t?void 0:t([e[0],e[1],n,e[3],e[4]])}},{type:"slider",label:i("StyleSidePanel.note.positionY"),value:e[3],min:0,max:100,onChange:function(n){return null===t||void 0===t?void 0:t([e[0],e[1],e[2],n,e[4]])}}];return(0,u.jsxs)(L.bg,{direction:"column",children:[(0,u.jsx)(L.M5,{fields:r,minW:"full"}),(0,u.jsxs)(v.Ug,{spacing:.5,children:[(0,u.jsx)(L.M5,{fields:o}),(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":i("StyleSidePanel.note.remove"),onClick:function(){return null===a||void 0===a?void 0:a()},icon:(0,u.jsx)(O.ZkW,{})})]})]})}function dn(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.param.notesGZMTR}));return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("StyleSidePanel.note.title")}),(0,u.jsxs)(v.gC,{spacing:.5,children:[t.map((function(n,t){return(0,u.jsx)(hn,{note:n,onUpdate:function(n){return e((0,g.Qk)(t,n))},onDelete:function(){return e((0,g.lj)(t))}},t)})),(0,u.jsx)(T.zx,{size:"xs",variant:"ghost",leftIcon:(0,u.jsx)(O.x06,{}),alignSelf:"flex-end",onClick:function(){return e((0,g.AL)())},children:n("StyleSidePanel.note.add")})]})]})}function mn(){var n=(0,o.CG)((function(n){return n.param})).style;return(0,u.jsxs)(L.EI,{children:[(0,u.jsx)(ln,{}),(0,u.jsx)(v.iz,{}),(0,u.jsx)(un,{}),n===r.RM.GZMTR&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.iz,{}),(0,u.jsx)(dn,{})]}),n===r.RM.SHMetro&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(v.iz,{}),(0,u.jsx)(cn,{})]})]})}var fn=t(6705),pn=function n(e,t){if(["linestart","lineend"].includes(e)||t[e].parents.length>1||t[e].children.length>1)return 0;var a=t[e].parents[0];return a?1===t[a].children.length?n(a,t):0===t[a].children.indexOf(e)?1:-1:0};function gn(n){var e=n.isOpen,t=n.onClose,a=n.cancelRef,i=n.onConfirm,r=(0,P.$)().t;return(0,u.jsx)(E.aR,{isOpen:e,leastDestructiveRef:a,onClose:t,children:(0,u.jsx)(E.dh,{children:(0,u.jsxs)(E._T,{children:[(0,u.jsx)(E.fY,{fontSize:"lg",fontWeight:"bold",children:r("RemoveConfirmModal.title")}),(0,u.jsx)(E.iP,{children:"Are you sure to remove station? You cannot undo this action."}),(0,u.jsxs)(E.xo,{children:[(0,u.jsx)(T.zx,{ref:a,onClick:t,children:r("RemoveConfirmModal.cancel")}),(0,u.jsx)(T.zx,{colorScheme:"teal",onClick:i,ml:3,children:r("RemoveConfirmModal.confirm")})]})]})})})}function xn(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.app.selectedStation})),s=(0,a.useState)(!1),l=(0,D.Z)(s,2),c=l[0],h=l[1];return(0,u.jsxs)(L.B0,{children:[(0,u.jsxs)(v.Ug,{children:[(0,u.jsx)(T.zx,{size:"sm",variant:"outline",onClick:function(){return e((0,g.lS)(t))},children:n("StationSidePanel.footer.current")}),(0,u.jsx)(T.zx,{size:"sm",variant:"outline",onClick:function(){return h(!0)},children:n("StationSidePanel.footer.remove")})]}),(0,u.jsx)(gn,{isOpen:c,onClose:function(){return h(!1)},onConfirm:function(){var a;e((a=t,function(n,e){var t=e().param.stn_list,i=t[a],r=i.parents,o=i.children;return 4===Object.keys(t).length?(console.log("removeStation():: failed as only 2 stations remaining"),!1):2===r.length&&2===o.length?(console.log("removeStation():: failed as branches on both sides cannot be combined"),!1):!!Object.keys(t).some((function(n){return![a,"linestart","lineend"].includes(n)&&0===pn(n,t)}))||(console.log("removeStation():: failed as selected station is the only station without siblings"),!1)}))?(e((0,A.B4)(r.Sg.CLOSE)),e((0,A.NQ)("linestart")),e((0,fn.NC)(t)),e(function(n){return function(e,t){var a=t().param.stn_list,r=a[n],o=r.parents,s=r.children,l=JSON.parse(JSON.stringify(a));if(2===o.length||2===s.length)o.forEach((function(n){l[n].children=s})),s.forEach((function(n){l[n].parents=o})),1===o.length&&(l[o[0]].branch.right=l[n].branch.right),1===s.length&&(l[s[0]].branch.left=l[n].branch.left);else if(2===a[o[0]].children.length&&2===a[s[0]].parents.length){var u;l=(0,rn.Z)((0,rn.Z)({},a),{},(u={},(0,i.Z)(u,o[0],(0,rn.Z)((0,rn.Z)({},a[o[0]]),{},{children:a[o[0]].children.filter((function(e){return e!==n})),branch:(0,rn.Z)((0,rn.Z)({},a[o[0]].branch),{},{right:[]})})),(0,i.Z)(u,s[0],(0,rn.Z)((0,rn.Z)({},a[s[0]]),{},{parents:a[s[0]].parents.filter((function(e){return e!==n})),branch:(0,rn.Z)((0,rn.Z)({},a[s[0]].branch),{},{left:[]})})),u))}else o.forEach((function(e){var t=l[e].children.indexOf(n);s.length?l[e].children[t]=s[0]:l[e].children.splice(t,1),l[e].branch.right[1]===n&&(l[e].branch.right[1]=s[0])})),s.forEach((function(e){var t=l[e].parents.indexOf(n);o.length?l[e].parents[t]=o[0]:l[e].parents.splice(t,1),l[e].branch.left[1]===n&&(l[e].branch.left[1]=o[0])}));delete l[n],e((0,g.BI)(l))}}(t)),h(!1)):e((0,A.bI)({status:"error",message:n("StationSidePanel.footer.errorOnRemove")}))}})]})}function vn(n){var e=n.colineInfo,t=n.routeOptions,i=n.onUpdateRoute,r=n.onUpdateColourInfo,o=n.onDelete,s=(0,a.useState)(!1),l=(0,D.Z)(s,2),c=l[0],h=l[1],d=[{type:"select",label:"Route",value:[e.from,e.to].join(","),options:t,onChange:function(n){return null===i||void 0===i?void 0:i(n)}}],m=[{type:"custom",label:"Colour",component:(0,u.jsx)(Q,{theme:[e.colors[0][0],e.colors[0][1],e.colors[0][2],e.colors[0][3]],onClick:function(){return h(!0)}})},{type:"input",label:"Chinese name",value:e.colors[0][4],minW:"95px",onChange:function(n){return null===r||void 0===r?void 0:r([e.colors[0][0],e.colors[0][1],e.colors[0][2],e.colors[0][3],n,e.colors[0][5]])}},{type:"input",label:"English name",value:e.colors[0][5],minW:"95px",onChange:function(n){return null===r||void 0===r?void 0:r([e.colors[0][0],e.colors[0][1],e.colors[0][2],e.colors[0][3],e.colors[0][4],n])}}];return(0,u.jsxs)(L.bg,{direction:"column",children:[(0,u.jsx)(L.M5,{fields:d,minW:"full"}),(0,u.jsxs)(v.Ug,{spacing:.5,children:[(0,u.jsx)(L.M5,{fields:m}),(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":"Delete colour for route",onClick:function(){return null===o||void 0===o?void 0:o(0)},icon:(0,u.jsx)(O.ZkW,{})})]}),(0,u.jsx)(K,{isOpen:c,onClose:function(){return h(!1)},defaultTheme:e.colors[0].slice(0,4),onUpdate:function(n){return null===r||void 0===r?void 0:r([].concat((0,R.Z)(n),[e.colors[0][4],e.colors[0][5]]))}})]})}function jn(){var n=(0,P.$)().t,e=(0,o.TL)(),t=(0,o.CG)((function(n){return n.app.selectedBranch})),a=(0,o.CG)((function(n){return n.param})),s=a.theme,l=a.stn_list,c=e((0,fn._G)(t)),h=e((0,fn.ku)(t)),d=h.reduce((function(n,e){return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},e.join(","),e.map((function(n){return l[n].name.join(" - ")})).join(" ~ ")))}),{});return(0,u.jsxs)(v.gC,{align:"flex-start",p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("BranchSidePanel.coline.title")}),Object.entries(c).map((function(n){var t,a=(0,D.Z)(n,2),i=a[0],r=a[1];return(0,u.jsx)(vn,{colineInfo:r,routeOptions:d,onUpdateRoute:(t=i,function(n){var a=n.split(","),i=(0,D.Z)(a,2),r=i[0],o=i[1];console.log("ColineSection.handleUpdateRoute():: Updating route, colineId=".concat(t,", from=").concat(r,", to=").concat(o));try{e((0,fn.l$)(t,r,o))}catch(s){e((0,A.bI)({status:"error",message:"Unable to draw this share track."}))}}),onUpdateColourInfo:function(n){return e((0,fn.Di)(i,0,n))},onDelete:function(n){return function(n,t){e((0,fn.wX)(n,t))}(i,n)}},i)})),(0===t||0===Object.keys(c).length)&&(0,u.jsx)(T.zx,{size:"xs",variant:"ghost",alignSelf:"flex-end",leftIcon:(0,u.jsx)(O.x06,{}),onClick:function(){console.log("ColineSection.handleAddTrackSharing():: Adding track sharing to branch ".concat(t," with default combination"),h[0]),e((0,fn._g)(h[0][0],h[0][1],[[s[0],"","#AAAAAA",r.AJ.white,"",""]]))},children:n("BranchSidePanel.coline.add")})]})}function zn(n){var e=n.isOpen,t=n.onClose,s=(0,P.$)().t,l=(0,o.TL)(),c=(0,o.CG)((function(n){return n.app.selectedBranch})),h=(0,o.CG)((function(n){return n.param})),d=h.style,m=h.stn_list,f=(0,o.CG)((function(n){return n.helper.branches})),p=(0,a.useState)(c),x=(0,D.Z)(p,2),v=x[0],j=x[1],z=(0,a.useState)("1"),b=(0,D.Z)(z,2),y=b[0],S=b[1],C=(0,a.useState)("2"),H=(0,D.Z)(C,2),Z=H[0],w=H[1],k=(0,a.useState)("asc"),M=(0,D.Z)(k,2),A=M[0],F=M[1];(0,a.useEffect)((function(){j(c)}),[c]);var R=[{type:"select",label:s("AutoNumModal.where"),value:v,options:(0,rn.Z)({},f.reduce((function(n,e,t){return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},t,0===t?s("AutoNumModal.main"):d===r.RM.SHMetro&&(0,fn.Qo)(e,m)?s("AutoNumModal.external")+" "+t:s("AutoNumModal.branch")+" "+t))}),{})),onChange:function(n){return j(n)}},{type:"input",label:s("AutoNumModal.from"),value:y,validator:function(n){return!isNaN(Number(n))},onChange:S,debouncedDelay:0},{type:"input",label:s("AutoNumModal.maxLength"),validator:function(n){return!isNaN(Number(n))},value:Z,onChange:w,debouncedDelay:0},{type:"select",label:s("AutoNumModal.sort"),value:A,options:{asc:s("AutoNumModal.asc"),desc:s("AutoNumModal.desc")},onChange:function(n){return F(n)}}],O=!y||!Z||isNaN(Number(y))||isNaN(Number(Z));return(0,u.jsxs)(E.u_,{isOpen:e,onClose:t,children:[(0,u.jsx)(E.ZA,{}),(0,u.jsxs)(E.hz,{children:[(0,u.jsx)(E.xB,{children:s("AutoNumModal.title")}),(0,u.jsx)(E.ol,{}),(0,u.jsx)(E.fe,{children:(0,u.jsx)(L.M5,{fields:R})}),(0,u.jsx)(E.mz,{children:(0,u.jsx)(T.zx,{colorScheme:"teal",isDisabled:O,onClick:function(){l((0,g.av)(v,Number(y),Number(Z),A)),t()},children:s("AutoNumModal.submit")})})]})]})}function bn(){var n=(0,P.$)().t,e=(0,o.TL)(),t=(0,o.CG)((function(n){return n.param.style})),i=(0,a.useState)(!1),s=(0,D.Z)(i,2),l=s[0],c=s[1];return(0,u.jsxs)(v.xu,{p:1,children:[(0,u.jsx)(v.X6,{as:"h5",size:"sm",children:n("BranchSidePanel.action.title")}),(0,u.jsxs)(v.kC,{wrap:"wrap",sx:{p:1,"&> *":{flexShrink:0,flexBasis:"100%","&:not(:first-child)":{marginTop:2}}},children:[t===r.RM.GZMTR&&(0,u.jsx)(T.zx,{size:"sm",variant:"outline",leftIcon:(0,u.jsx)(O.OIZ,{}),alignSelf:"flex-end",onClick:function(){return c(!0)},children:n("BranchSidePanel.action.autoNum")}),(0,u.jsx)(T.zx,{size:"sm",variant:"outline",leftIcon:(0,u.jsx)(O.bef,{}),alignSelf:"flex-end",onClick:function(){return e((0,g.iI)(t===r.RM.SHMetro))},children:t===r.RM.SHMetro?n("BranchSidePanel.action.flip"):n("BranchSidePanel.action.reverse")})]}),(0,u.jsx)(zn,{isOpen:l,onClose:function(){return c(!1)}})]})}function yn(){var n=(0,o.CG)((function(n){return n.app.selectedBranch})),e=(0,o.CG)((function(n){return n.param})),t=e.style,a=e.stn_list,i=(0,o.CG)((function(n){return n.helper.branches}));return(0,u.jsxs)(L.EI,{children:[t===r.RM.SHMetro&&(0===n||(0,fn.Qo)(i[n],a))&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(jn,{}),(0,u.jsx)(v.iz,{})]}),(0,u.jsx)(bn,{})]})}function Sn(){var n,e,t=(0,P.$)().t,a=(0,p.I0)(),i=(0,o.CG)((function(n){return n.app})),s=i.sidePanelMode,l=i.selectedStation,c=(0,o.CG)((function(n){var e;return null===(e=n.param.stn_list[l])||void 0===e?void 0:e.name})),h={STATION:{header:(0,u.jsx)(L.iR,{text:(null===c||void 0===c?void 0:c.join(" - "))||""}),body:(0,u.jsx)(sn,{}),footer:(0,u.jsx)(xn,{})},STYLE:{header:t("StyleSidePanel.header"),body:(0,u.jsx)(mn,{})},BRANCH:{header:t("BranchSidePanel.header"),body:(0,u.jsx)(yn,{})},CLOSE:{header:"Close"}};return(0,u.jsxs)(L.L$,{isOpen:s!==r.Sg.CLOSE,width:320,header:"Dummy header",children:[(0,u.jsx)(L.mQ,{onClose:function(){a((0,A.B4)(r.Sg.CLOSE))},children:h[s].header}),null===(n=h[s])||void 0===n?void 0:n.body,null===(e=h[s])||void 0===e?void 0:e.footer]})}var Cn=t(1641),Hn=function(n,e,t){var a=new Blob([t],{type:e});Zn(n,a)},Zn=function(n,e){var t=window.URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=n,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t)},wn=function(n){return new Promise((function(e){var t=new FileReader;t.onloadend=function(){return e(t.result)},t.readAsText(n)}))},kn=t(7762),Mn=t(5861),An=t(7757),Ln=t.n(An),Pn=t(5587),Fn=t.n(Pn),Tn=function(){var n=(0,Mn.Z)(Ln().mark((function n(e,t,a,i,o){var s,l,u,c,h,d,m,f;return Ln().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u=["--rmg-svg-width","--rmg-svg-height"].map((function(n){return document.querySelector("svg#".concat(e)).style.getPropertyValue(n).match(/\d+/g)[0]})).map(Number),c=(0,D.Z)(u,2),h=c[1],(d=document.querySelector("svg#".concat(e)).cloneNode(!0)).setAttribute("height",(h*(o||100)/100).toString()),d.style.setProperty("all","initial"),["share",e].map((function(n){var e;return(0,R.Z)((null===(e=(0,R.Z)(document.querySelectorAll("link")).filter((function(e){return e.id==="css_"+n}))[0])||void 0===e?void 0:e.sheet).cssRules).map((function(n){return n.cssText})).join(" ")})).forEach((function(n){var e=document.createElement("style");e.textContent=n,d.prepend(e)})),null===(s=d.querySelector("rect#canvas-border"))||void 0===s||s.setAttribute("stroke",i?"black":"none"),null===(l=d.querySelector("rect#canvas-bg"))||void 0===l||l.setAttribute("fill",a?"none":"white"),t!==r.RM.MTR){n.next=21;break}return n.prev=8,n.next=11,Dn(d);case 11:m=n.sent,(f=document.createElement("style")).textContent=m.join("\n"),d.prepend(f),n.next=21;break;case 17:n.prev=17,n.t0=n.catch(8),alert("Failed to fonts. Fonts in the exported PNG will be missing."),console.error(n.t0);case 21:return n.abrupt("return",d);case 22:case"end":return n.stop()}}),n,null,[[8,17]])})));return function(e,t,a,i,r){return n.apply(this,arguments)}}(),Rn=function(n){return new Promise((function(e){var t=new FileReader;t.onloadend=function(){return e(t.result)},t.readAsDataURL(n)}))},Dn=function(){var n=(0,Mn.Z)(Ln().mark((function n(e){var t,a,i,r;return Ln().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=Array.from(new Set([].concat((0,R.Z)(e.querySelectorAll(".rmg-name__zh")),(0,R.Z)(e.querySelectorAll(".rmg-name__en"))).map((function(n){return n.innerHTML})).join("").replace(/[\s]/g,""))).join(""),n.next=3,document.fonts.load("80px GenYoMin TW, Vegur",t);case 3:return a=n.sent,i=Array.from(document.querySelector("link#css_share").sheet.cssRules[0].styleSheet.cssRules),r=a.reduce((function(n,e){var t,a=(t=e,i.find((function(n){var e=n.style;return e.fontFamily.replace(/^"(.+)"$/,"$1")===t.family&&e.unicodeRange===t.unicodeRange})));return a?n.find((function(n){var e=n.style,t=a.style;return e.fontFamily===t.fontFamily&&e.unicodeRange===t.unicodeRange}))?n:n.concat(a):n}),[]),n.next=8,Promise.all(r.map(function(){var n=(0,Mn.Z)(Ln().mark((function n(e){var t,a,i,r,o,s;return Ln().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a=e.style.src,i=navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome"),r=i?a.replace(/^url\(([\S]+)\).*$/,"$1"):"/rmg/styles/"+(null===(t=a.match(/^url\("([\S*]+)"\)/))||void 0===t?void 0:t[1]),n.next=6,fetch(r);case 6:return o=n.sent,n.t0=Rn,n.next=10,o.blob();case 10:return n.t1=n.sent,n.next=13,(0,n.t0)(n.t1);case 13:return s=n.sent,n.abrupt("return",e.cssText.replace(/src:[ \w('",\-:/.)]+;/g,"src: url('".concat(s,"'); ")));case 17:return n.prev=17,n.t2=n.catch(0),console.error(n.t2),n.abrupt("return","");case 21:case"end":return n.stop()}}),n,null,[[0,17]])})));return function(e){return n.apply(this,arguments)}}()));case 8:return n.abrupt("return",n.sent);case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),On=function(){var n=(0,Mn.Z)(Ln().mark((function n(e,t){var a,i,r,o;return Ln().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=e.viewBox.baseVal.width,i=e.viewBox.baseVal.height,(r=document.querySelectorAll("canvas")[0]).width=Number(a)*window.devicePixelRatio*t,r.height=Number(i)*window.devicePixelRatio*t,e.setAttribute("width",r.width.toString()),e.setAttribute("height",r.height.toString()),(o=r.getContext("2d")).clearRect(0,0,r.width,r.height),e.querySelectorAll(".rmg-name__en.rmg-name__mtr--station").forEach((function(n){return n.setAttribute("font-size","11px")})),e.querySelectorAll(".rmg-name__zh.IntName").forEach((function(n){return n.setAttribute("font-size","10px")})),e.querySelectorAll(".rmg-name__en.rmg-name__mtr--osi").forEach((function(n){return n.setAttribute("font-size","9px")})),e.querySelectorAll(".rmg-name__en.rmg-name__gzmtr--next2-dest").forEach((function(n){return n.setAttribute("font-size","8.5px")})),e.querySelectorAll(".rmg-name__en.IntName").forEach((function(n){return n.setAttribute("font-size","7px")})),e.querySelectorAll("text, tspan").forEach((function(n){var e=window.getComputedStyle(n);n.setAttribute("font-family",e.fontFamily),n.setAttribute("fill",e.fill),n.setAttribute("dominant-baseline",e.dominantBaseline),n.setAttribute("text-anchor",e.textAnchor||"")})),n.abrupt("return",new Promise((function(n,t){var a=new Image;a.onload=function(){o.drawImage(a,0,0,r.width,r.height),r.toBlob((function(e){return n(e)}),"image/png")},a.onerror=t,a.src="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(e.outerHTML)))})));case 16:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();function En(n){var e=n.isOpen,t=n.onClose,s=(0,P.$)().t,l=(0,p.I0)(),c=(0,a.useState)(""),h=(0,D.Z)(c,2),d=h[0],m=h[1],f=(0,a.useState)(!1),x=(0,D.Z)(f,2),j=x[0],z=x[1],b=(0,a.useState)(!1),y=(0,D.Z)(b,2),S=y[0],C=y[1],H=(0,a.useState)(100),Z=(0,D.Z)(H,2),w=Z[0],k=Z[1],M=(0,a.useState)("png"),A=(0,D.Z)(M,2),F=A[0],R=A[1],O=(0,o.CG)((function(n){return n.param})),N=O.style,_=O.stn_list,U=O.current_stn_idx,G=O.line_name,I=r.tK[N].reduce((function(n,e){return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},e,e))}),{"":s("DownloadModal.pleaseSelect")}),B=[25,33,50,67,75,80,90,100,110,125,150,175,200,250,300,400,500].reduce((function(n,e){return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},e,"".concat(e,"%")))}),{}),J={png:s("DownloadModal.png"),svg:s("DownloadModal.svg")},W=[{type:"select",label:s("DownloadModal.canvas"),value:d,options:I,disabledOptions:[""],onChange:function(n){return m(n)},minW:"full"},{type:"switch",label:s("DownloadModal.transparent"),isChecked:j,onChange:z,oneLine:!0,minW:"full"},{type:"switch",label:s("DownloadModal.showBorder"),isChecked:S,onChange:C,oneLine:!0,minW:"full"},{type:"select",label:s("DownloadModal.scale"),value:w,options:B,onChange:function(n){return k(n)}},{type:"select",label:s("DownloadModal.format"),value:F,options:J,onChange:function(n){return R(n)}}],$=function(){var n=(0,Mn.Z)(Ln().mark((function n(e){var a,i,r,o,s,u,c,h,m,f,p;return Ln().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a="current"===e?[U]:Object.keys(_).filter((function(n){return!["linestart","lineend"].includes(n)})),i=new(Fn()),r=(0,kn.Z)(a),n.prev=3,r.s();case 5:if((o=r.n()).done){n.next=28;break}return s=o.value,n.next=9,l((0,g.lS)(s));case 9:return n.next=11,Tn(d,N,j,S,w);case 11:if(u=n.sent,document.body.appendChild(u),c="rmg.".concat(s,".").concat(_[s].name[0],".").concat(_[s].name[1]).replaceAll(" ","_"),"png"!==F){n.next=24;break}return n.next=17,On(u,w/100);case 17:if(h=n.sent,!navigator.userAgent.includes("Safari")||navigator.userAgent.includes("Chrome")){n.next=21;break}return n.next=21,new Promise((function(n){setTimeout((function(){console.log("Sleep 1 second for Safari"),n()}),1e3)}));case 21:a.length>1?i.file("".concat(c,".png"),h):Zn("".concat(c,".png"),h),n.next=25;break;case 24:"svg"===F&&(u.removeAttribute("height"),m="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(u.outerHTML))),a.length>1?i.file("".concat(c,".svg"),m.split("base64,")[1],{base64:!0}):Hn(c+".svg","image/svg+xml",u.outerHTML));case 25:document.body.removeChild(u);case 26:n.next=5;break;case 28:n.next=33;break;case 30:n.prev=30,n.t0=n.catch(3),r.e(n.t0);case 33:return n.prev=33,r.f(),n.finish(33);case 36:if(!(a.length>1)){n.next=42;break}return n.next=39,i.generateAsync({type:"blob"});case 39:f=n.sent,p="rmg.".concat(G[0],".").concat(G[1],".zip").replaceAll(" ","_"),Zn(p,f);case 42:return n.next=44,l((0,g.lS)(U));case 44:t();case 45:case"end":return n.stop()}}),n,null,[[3,30,33,36]])})));return function(e){return n.apply(this,arguments)}}();return(0,u.jsxs)(E.u_,{isOpen:e,onClose:t,children:[(0,u.jsx)(E.ZA,{}),(0,u.jsxs)(E.hz,{children:[(0,u.jsx)(E.xB,{children:s("DownloadModal.title")}),(0,u.jsx)(E.ol,{}),(0,u.jsx)(E.fe,{children:(0,u.jsx)(L.M5,{fields:W})}),(0,u.jsx)(E.mz,{children:(0,u.jsxs)(v.Ug,{children:[(0,u.jsx)(T.zx,{colorScheme:"teal",variant:"outline",size:"sm",onClick:function(){return $("current")},disabled:!d,children:s("DownloadModal.downloadOne")}),N!==r.RM.GZMTR&&(0,u.jsx)(T.zx,{colorScheme:"teal",variant:"outline",size:"sm",onClick:function(){return $("all")},disabled:!d,children:s("DownloadModal.downloadAll")})]})})]})]})}function Nn(){var n=(0,P.$)().t,e=(0,a.useState)(!1),t=(0,D.Z)(e,2),i=t[0],r=t[1],s=(0,o.CG)((function(n){return n.param}));return(0,u.jsxs)(Cn.v2,{children:[(0,u.jsx)(Cn.j2,{as:T.zx,variant:"ghost",size:"sm",rightIcon:(0,u.jsx)(O.Yc6,{}),children:n("DownloadActions.downloads")}),(0,u.jsxs)(Cn.qy,{children:[(0,u.jsx)(Cn.sN,{onClick:function(){Hn("RMG_".concat((new Date).valueOf(),".json"),"application/json",JSON.stringify(s))},children:n("DownloadActions.configFile")}),(0,u.jsx)(Cn.sN,{onClick:function(){return r(!0)},children:n("DownloadActions.images")})]}),(0,u.jsx)(En,{isOpen:i,onClose:function(){return r(!1)}})]})}var _n,Un,Gn,In,Bn,Jn,Wn,$n,Vn,Kn,qn,Xn=t(7253);function Yn(n){var e,t,a,i=n.isOpen,o=n.onClose,s=n.cancelRef,l=n.uploadedParam,c=n.onOpenParam,h=(0,P.$)().t;return(0,u.jsx)(E.aR,{isOpen:i,leastDestructiveRef:s,onClose:o,children:(0,u.jsx)(E.dh,{children:(0,u.jsxs)(E._T,{children:[(0,u.jsx)(E.fY,{fontSize:"lg",fontWeight:"bold",children:h("UploadConfirmModal.title")}),(0,u.jsxs)(E.iP,{children:[h("UploadConfirmModal.message1"),(0,u.jsx)(L.l2,{name:(null===l||void 0===l||null===(e=l.line_name)||void 0===e?void 0:e.join(" "))||"",fg:(null===l||void 0===l||null===(t=l.theme)||void 0===t?void 0:t[3])||r.AJ.white,bg:(null===l||void 0===l||null===(a=l.theme)||void 0===a?void 0:a[2])||"#AAAAAA"}),h("UploadConfirmModal.message2")+(l?Object.keys(l.stn_list).length-2:0)+h("UploadConfirmModal.message3")]}),(0,u.jsxs)(E.xo,{children:[(0,u.jsx)(T.zx,{ref:s,onClick:o,children:h("UploadConfirmModal.cancel")}),(0,u.jsx)(T.zx,{colorScheme:"teal",onClick:function(){l&&c(l),o()},ml:3,children:h("UploadConfirmModal.confirm")})]})]})})})}!function(n){n.basic="basic",n.bjsubway="bjsubway",n.fmetro="fmetro",n.gzmtr="gzmtr",n.kmrailtransit="kmrailtransit",n.kvtransit="kvtransit",n.mlm="mlm",n.mtr="mtr",n.njmetro="njmetro",n.shmetro="shmetro",n.saopaulometro="saopaulometro",n.szmetro="szmetro",n.zzmetro="zzmetro"}(qn||(qn={}));var Qn=[{id:qn.basic,name:(_n={},(0,i.Z)(_n,r.sp.English,"Basic"),(0,i.Z)(_n,r.sp.Chinese,"\u57fa\u672c"),_n)},{id:qn.mtr,name:(Un={},(0,i.Z)(Un,r.sp.English,"MTR"),(0,i.Z)(Un,r.sp.ChineseSimp,"\u6e2f\u94c1"),(0,i.Z)(Un,r.sp.ChineseTrad,"\u6e2f\u9435"),Un)},{id:qn.gzmtr,name:(Gn={},(0,i.Z)(Gn,r.sp.English,"Guangzhou Metro"),(0,i.Z)(Gn,r.sp.ChineseSimp,"\u5e7f\u5dde\u5730\u94c1"),(0,i.Z)(Gn,r.sp.ChineseTrad,"\u5ee3\u5dde\u5730\u9435"),Gn)},{id:qn.shmetro,name:(In={},(0,i.Z)(In,r.sp.English,"Shanghai Metro"),(0,i.Z)(In,r.sp.ChineseSimp,"\u4e0a\u6d77\u5730\u94c1"),(0,i.Z)(In,r.sp.ChineseTrad,"\u4e0a\u6d77\u5730\u9435"),In)},{id:qn.bjsubway,name:(Bn={},(0,i.Z)(Bn,r.sp.English,"Beijing Subway"),(0,i.Z)(Bn,r.sp.ChineseSimp,"\u5317\u4eac\u5730\u94c1"),(0,i.Z)(Bn,r.sp.ChineseTrad,"\u5317\u4eac\u5730\u9435"),Bn)},{id:qn.fmetro,name:{en:"Foshan Metro","zh-Hans":"\u4f5b\u5c71\u5730\u94c1","zh-Hant":"\u4f5b\u5c71\u5730\u9435"}},{id:qn.kmrailtransit,name:{en:"Kunming Metro","zh-Hans":"\u6606\u660e\u5730\u94c1","zh-Hant":"\u6606\u660e\u5730\u9435"}},{id:qn.kvtransit,name:(Jn={},(0,i.Z)(Jn,r.sp.English,"Klang Valley Integrated Transit System"),(0,i.Z)(Jn,r.sp.ChineseSimp,"\u5df4\u751f\u8c37\u7efc\u5408\u8fd0\u8f93\u7cfb\u7edf"),(0,i.Z)(Jn,r.sp.ChineseTrad,"\u5df4\u751f\u8c37\u7d9c\u5408\u904b\u8f38\u7cfb\u7d71"),Jn)},{id:qn.mlm,name:(Wn={},(0,i.Z)(Wn,r.sp.English,"Macao LRT"),(0,i.Z)(Wn,r.sp.Portuguese,"Metro Ligeiro de Macau"),(0,i.Z)(Wn,r.sp.ChineseSimp,"\u6fb3\u95e8\u8f7b\u8f68"),(0,i.Z)(Wn,r.sp.ChineseTrad,"\u6fb3\u9580\u8f15\u8ecc"),Wn)},{id:qn.njmetro,name:($n={},(0,i.Z)($n,r.sp.English,"Nanjing Metro"),(0,i.Z)($n,r.sp.ChineseSimp,"\u5357\u4eac\u5730\u94c1"),(0,i.Z)($n,r.sp.ChineseTrad,"\u5357\u4eac\u5730\u9435"),$n)},{id:qn.saopaulometro,name:{en:"S\xe3o Paulo Metro",pt:"Metr\xf4 de S\xe3o Paulo","zh-Hans":"\u5723\u4fdd\u7f57\u5730\u94c1","zh-Hant":"\u8056\u4fdd\u7f85\u5730\u9435"}},{id:qn.szmetro,name:(Vn={},(0,i.Z)(Vn,r.sp.English,"Shenzhen Metro"),(0,i.Z)(Vn,r.sp.ChineseSimp,"\u6df1\u5733\u5730\u94c1"),(0,i.Z)(Vn,r.sp.ChineseTrad,"\u6df1\u5733\u5730\u9435"),Vn)},{id:qn.zzmetro,name:(Kn={},(0,i.Z)(Kn,r.sp.English,"Zhenzhou Metro"),(0,i.Z)(Kn,r.sp.ChineseSimp,"\u90d1\u5dde\u5730\u94c1"),(0,i.Z)(Kn,r.sp.ChineseTrad,"\u912d\u5dde\u5730\u9435"),Kn)}],ne=t(9794),ee=t(6726);function te(n){var e=n.isOpen,a=n.onClose,i=n.onOpenParam,r=(0,P.$)().t,o=function(){var n=(0,Mn.Z)(Ln().mark((function n(e,a){var r;return Ln().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t(2770)("./".concat(e,"/").concat(a));case 2:r=n.sent,i(r.default);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return(0,u.jsxs)(E.u_,{isOpen:e,onClose:a,children:[(0,u.jsx)(E.ZA,{}),(0,u.jsxs)(E.hz,{children:[(0,u.jsx)(E.xB,{children:r("TemplateModal.title")}),(0,u.jsx)(E.ol,{}),(0,u.jsx)(E.fe,{children:(0,u.jsxs)(N.mQ,{isLazy:!0,size:"sm",orientation:"vertical",children:[(0,u.jsx)(N.td,{maxW:150,children:Qn.map((function(n){return(0,u.jsx)(N.OK,{children:(0,ee.O)(n.name)},n.id)}))}),(0,u.jsx)(N.nP,{maxW:250,children:Object.entries(ne.templateList).sort((function(n,e){return Qn.findIndex((function(e){return e.id===n[0]}))-Qn.findIndex((function(n){return n.id===e[0]}))})).map((function(n){var e=(0,D.Z)(n,2),t=e[0],a=e[1];return(0,u.jsx)(N.x4,{as:v.kC,flexDirection:"column",py:0,px:1,children:a.map((function(n){return(0,u.jsx)(T.zx,{variant:"ghost",size:"sm",justifyContent:"flex-start",overflow:"hidden",onClick:function(){return o(t,n.filename)},children:(0,ee.O)(n.name)},n.filename)}))},t)}))})]})})]})]})}var ae=t(5023);function ie(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,a.useState)(!1),i=(0,D.Z)(t,2),o=i[0],s=i[1],l=(0,a.useState)(!1),c=(0,D.Z)(l,2),h=c[0],d=c[1],m=(0,a.useState)(void 0),f=(0,D.Z)(m,2),g=f[0],x=f[1],v=(0,a.useRef)(null),j=(0,a.useRef)(null),z=function(){var t=(0,Mn.Z)(Ln().mark((function t(a){var i,r,o,l;return Ln().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(i=a.target.files)||void 0===i?void 0:i[0],console.log("OpenActions.handleUpload():: received file",r),"application/json"===(null===r||void 0===r?void 0:r.type)){t.next=6;break}e((0,A.bI)({status:"error",message:n("OpenActions.invalidType")})),t.next=19;break;case 6:return t.prev=6,t.next=9,wn(r);case 9:o=t.sent,l=(0,Xn.db)(JSON.parse(o)),x(l),s(!0),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(6),e((0,A.bI)({status:"error",message:n("OpenActions.unknownError")})),console.error("OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file",t.t0);case 19:a.target.value="";case 20:case"end":return t.stop()}}),t,null,[[6,15]])})));return function(n){return t.apply(this,arguments)}}(),b=function(n){e(function(n){return function(){var e=(0,Mn.Z)(Ln().mark((function e(t,a){var i,o,s;return Ln().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,Xn.db)(n),e.next=3,window.rmgStorage.writeFile("rmgParam",JSON.stringify(i));case 3:return t((0,A.B4)(r.Sg.CLOSE)),t((0,A.NQ)("linestart")),o=a().app.canvasToShow,s=r.tK[i.style].some((function(n){return n===o}))?o:r.iu,e.next=9,t((0,A.SC)(s));case 9:(0,ae.P)(i);case 10:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}()}(n))};return(0,u.jsxs)(Cn.v2,{children:[(0,u.jsx)(Cn.j2,{as:T.zx,variant:"ghost",size:"sm",rightIcon:(0,u.jsx)(O.Yc6,{}),children:n("OpenActions.openFrom")}),(0,u.jsxs)(Cn.qy,{children:[(0,u.jsx)("input",{ref:j,type:"file",accept:".json",hidden:!0,onChange:z}),(0,u.jsx)(Cn.sN,{icon:(0,u.jsx)(O.Ap8,{}),onClick:function(){var n;return null===j||void 0===j||null===(n=j.current)||void 0===n?void 0:n.click()},children:n("OpenActions.upload")}),(0,u.jsx)(Cn.sN,{icon:(0,u.jsx)(O.uEt,{}),onClick:function(){return d(!0)},children:n("OpenActions.templates")})]}),(0,u.jsx)(Yn,{isOpen:o,onClose:function(){return s(!1)},cancelRef:v,uploadedParam:g,onOpenParam:b}),(0,u.jsx)(te,{isOpen:h,onClose:function(){return d(!1)},onOpenParam:b})]})}function re(){var n=(0,P.$)().t,e=(0,p.I0)();return(0,u.jsxs)(v.Ug,{ml:"auto",children:[(0,u.jsx)(Nn,{}),(0,u.jsx)(ie,{}),(0,u.jsx)(T.zx,{variant:"solid",size:"sm",colorScheme:"teal",leftIcon:(0,u.jsx)(O.Zox,{}),onClick:function(){return e((0,A.B4)(r.Sg.STYLE))},children:n("HeaderActions.editStyle")})]})}function oe(){var n=(0,P.$)().t,e=(0,p.I0)(),t=(0,o.CG)((function(n){return n.app.canvasToShow})),a=(0,o.CG)((function(n){return n.param.style})),i=[r.iu].concat((0,R.Z)(r.tK[a])).map((function(e){return{label:n("CanvasButtonGroup."+e),value:e}}));return(0,u.jsxs)(v.kC,{align:"center",wrap:"wrap",pl:2,pr:3,children:[(0,u.jsx)(L.Nv,{label:n("CanvasButtonGroup.label"),children:(0,u.jsx)(tn,{selections:i,defaultValue:t,onChange:function(n){return e((0,A.SC)(n))}})}),(0,u.jsx)(re,{})]})}var se,le="5.0.0";!function(n){n.DEV="DEV",n.UAT="UAT",n.PRD="PRD"}(se||(se={}));var ue=t(3504);function ce(){var n=(0,P.$)(),e=n.t,t=n.i18n,a=(0,p.I0)(),i="localhost"===window.location.hostname?se.DEV:window.location.hostname.includes("uat")?se.UAT:se.PRD,o=function(){var n=(0,Mn.Z)(Ln().mark((function n(e){var a;return Ln().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.changeLanguage(e);case 2:a=n.sent,document.documentElement.lang=e,document.title=a("WindowHeader.heading");case 5:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,u.jsxs)(v.kC,{pl:2,pr:2,align:"center",children:[(0,u.jsxs)(v.X6,{as:"h4",size:"md",children:[e("WindowHeader.heading"),(0,u.jsx)(v.Ct,{ml:1,colorScheme:function(n){switch(n){case se.DEV:return"red";case se.UAT:return"orange";case se.PRD:return"green"}}(i),children:i===se.PRD?le:i})]}),(0,u.jsxs)(v.Ug,{ml:"auto",children:[(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":"Zoom out",icon:(0,u.jsx)(O._a6,{}),onClick:function(){return a((0,A.vG)())}}),(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":"Zoom in",icon:(0,u.jsx)(O.Ers,{}),onClick:function(){return a((0,A.kr)())}}),(0,u.jsxs)(Cn.v2,{children:[(0,u.jsx)(Cn.j2,{as:T.hU,icon:(0,u.jsx)(O.Ys1,{}),variant:"ghost",size:"sm"}),(0,u.jsx)(Cn.qy,{children:Object.values(r.RM).map((function(n){return(0,u.jsx)(ue.rU,{to:n,children:(0,u.jsx)(Cn.sN,{onClick:function(){return a((0,g.yL)(n))},children:e("WindowHeader."+n)})},n)}))})]}),(0,u.jsxs)(Cn.v2,{children:[(0,u.jsx)(Cn.j2,{as:T.hU,icon:(0,u.jsx)(O.mp2,{}),variant:"ghost",size:"sm"}),(0,u.jsxs)(Cn.qy,{children:[(0,u.jsx)(Cn.sN,{onClick:function(){return o(r.sp.English)},children:"English"}),(0,u.jsx)(Cn.sN,{onClick:function(){return o(r.sp.ChineseSimp)},children:"\u7b80\u4f53\u4e2d\u6587"}),(0,u.jsx)(Cn.sN,{onClick:function(){return o(r.sp.ChineseTrad)},children:"\u7e41\u9ad4\u4e2d\u6587"})]})]}),(0,u.jsx)(T.hU,{size:"sm",variant:"ghost","aria-label":"Help",icon:(0,u.jsx)(O.r$n,{}),onClick:function(){return window.open("https://github.com/railmapgen/rmg","_blank")}})]})]})}var he=t(1762),de=t(3329),me=t(5984),fe=function(n,e,t,a){return function(o,s){var l,u,c=s().param.stn_list,h=(0,me.x0)(6),d={name:["\u672a\u547d\u540d "+(l=h),"Unnamed "+l],secondaryName:!1,num:"00",services:[r.K9.local],parents:[],children:[],branch:{left:[],right:[]},transfer:{info:[[]],tick_direc:r.wA.right,paid_area:!0,osi_names:[]},facility:r.mV.none,loop_pivot:!1};if("new"!==n){var m,f=(0,rn.Z)((0,rn.Z)({},c),{},(m={},(0,i.Z)(m,e,(0,rn.Z)((0,rn.Z)({},c[e]),{},{children:c[e].children.map((function(n){return n===t?h:n})),branch:{left:c[e].branch.left,right:c[e].branch.right.length&&c[e].branch.right[1]===t?[c[e].branch.right[0],h]:c[e].branch.right}})),(0,i.Z)(m,t,(0,rn.Z)((0,rn.Z)({},c[t]),{},{parents:c[t].parents.map((function(n){return n===e?h:n})),branch:{left:c[t].branch.left.length&&c[t].branch.left[1]===e?[c[t].branch.left[0],h]:c[t].branch.left,right:c[t].branch.right}})),(0,i.Z)(m,h,(0,rn.Z)((0,rn.Z)({},d),{},{parents:[e],children:[t]})),m));return o((0,g.BI)(f)),h}if(!a)return!1;var p=(0,rn.Z)((0,rn.Z)({},c),{},(u={},(0,i.Z)(u,e,(0,rn.Z)((0,rn.Z)({},c[e]),{},{children:"upper"===a?[h,c[e].children[0]]:[c[e].children[0],h],branch:{left:c[e].branch.left,right:[r.H_.through,h]}})),(0,i.Z)(u,t,(0,rn.Z)((0,rn.Z)({},c[t]),{},{parents:"upper"===a?[h,c[t].parents[0]]:[c[t].parents[0],h],branch:{left:[r.H_.through,h],right:c[t].branch.right}})),(0,i.Z)(u,h,(0,rn.Z)((0,rn.Z)({},d),{},{parents:[e],children:[t]})),u));return o((0,g.BI)(p)),h}},pe=function(n,e){return function(t,a){var i=a().param.stn_list,r=a().helper.branches;return r[0].includes(n)&&r[0].includes(e)?r[0].indexOf(n)>r[0].indexOf(e)?"Not in correct ordering":"linestart"===n&&1===r[0].indexOf(e)?"Branch should not be open jaw from the first station":"lineend"===e&&r[0].indexOf(n)===r[0].length-2?"Branch should not be open jaw from the last station":i[n].children.length>1||i[e].parents.length>1?"Branch already exist":r.slice(1).some((function(t){return t.slice(1,-1).includes(n)||t.slice(1,-1).includes(e)}))?"Cannot branch out from existing branch":r[0].slice(r[0].indexOf(n)+1,r[0].indexOf(e)).every((function(n){return 1===i[n].parents.length&&1===i[n].children.length}))?"":"One or more stations between both ends are branching out":"Branch should end at main line"}};function ge(n){var e,t,s=n.isOpen,l=n.onClose,c=(0,P.$)().t,h=(0,o.TL)(),d=(0,o.CG)((function(n){return n.app.selectedBranch})),m=(0,o.CG)((function(n){return n.param})),f=m.style,p=m.stn_list,g=(0,o.CG)((function(n){return n.helper.branches})),x=(0,a.useState)(d),j=(0,D.Z)(x,2),z=j[0],b=j[1],y=(0,a.useState)("before"),S=(0,D.Z)(y,2),C=S[0],H=S[1],Z=(0,a.useState)(""),w=(0,D.Z)(Z,2),k=w[0],M=w[1],F=(0,a.useState)(!1),R=(0,D.Z)(F,2),O=R[0],N=R[1];(0,a.useEffect)((function(){b(d)}),[d]),(0,a.useEffect)((function(){s||N(!1)}),[s]);var _,U=null!==(e=null===(t=g[Number(z)])||void 0===t?void 0:t.slice(1,-1))&&void 0!==e?e:[],G=[{type:"select",label:c("AddStationModal.where"),value:z,options:(0,rn.Z)({},g.reduce((function(n,e,t){return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},t,0===t?c("AddStationModal.main"):f===r.RM.SHMetro&&(0,fn.Qo)(e,p)?c("AddStationModal.external")+" "+t:c("AddStationModal.branch")+" "+t))}),{})),onChange:function(n){return I(n)},minW:"full"},{type:"select",label:c("AddStationModal.preposition"),value:C,options:{before:c("AddStationModal.before"),after:c("AddStationModal.after")},onChange:function(n){return H(n)}},{type:"select",label:c("AddStationModal.pivot"),value:k,options:(_=U,_.reduce((function(n,e){var t;return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},e,null===(t=p[e])||void 0===t?void 0:t.name.join(" - ")))}),{"":c("AddStationModal.pleaseSelect")})),disabledOptions:[""],onChange:function(n){return M(n)}}],I=function(n){b(n),M("")};return(0,u.jsxs)(E.u_,{isOpen:s,onClose:l,children:[(0,u.jsx)(E.ZA,{}),(0,u.jsxs)(E.hz,{children:[O&&(0,u.jsxs)(he.bZ,{status:"error",variant:"solid",size:"xs",children:[(0,u.jsx)(he.zM,{}),c("AddStationModal.error")]}),(0,u.jsxs)(v.xu,{position:"relative",children:[(0,u.jsx)(E.xB,{children:c("AddStationModal.title")}),(0,u.jsx)(E.ol,{})]}),(0,u.jsx)(E.fe,{children:(0,u.jsx)(L.M5,{fields:G})}),(0,u.jsx)(E.mz,{children:(0,u.jsx)(T.zx,{colorScheme:"teal",onClick:function(){var n=h(function(n,e,t){return function(a,i){var r=i().helper.branches[n];if(null!==r&&void 0!==r&&r.length){if("before"===e){var o=r[r.indexOf(t)-1];return a(fe(n.toString(),o,t))}var s=r[r.indexOf(t)+1];return a(fe(n.toString(),t,s))}return!1}}(z,C,k));n?(l(),h((0,A.NQ)(n)),h((0,A.B4)(r.Sg.STATION))):(console.log("false here"),N(!0))},disabled:!k,children:c("AddStationModal.submit")})})]})]})}function xe(n){var e=n.isOpen,t=n.onClose,s=(0,P.$)().t,l=(0,o.TL)(),c=(0,a.useState)("new"),h=(0,D.Z)(c,2),d=h[0],m=h[1],f=(0,a.useState)(""),p=(0,D.Z)(f,2),g=p[0],x=p[1],v=(0,a.useState)(""),j=(0,D.Z)(v,2),z=j[0],b=j[1],y=(0,a.useState)("upper"),S=(0,D.Z)(y,2),C=S[0],H=S[1],Z=(0,a.useState)(""),w=(0,D.Z)(Z,2),k=w[0],M=w[1],A=(0,a.useState)(""),F=(0,D.Z)(A,2),R=F[0],O=F[1],N=(0,o.CG)((function(n){return n.param})),_=N.style,U=N.stn_list;(0,a.useEffect)((function(){e||(m("new"),x(""),b(""))}),[e]);var G,I=(G=l((function(n,e){var t=e().param.stn_list;return e().helper.branches[0].filter((function(n){var e=t[n].parents.length+t[n].children.length===4,a=0===pn(n,t);return!e&&a}))})),G.reduce((function(n,e){var t;return(0,rn.Z)((0,rn.Z)({},n),{},(0,i.Z)({},e,null===(t=U[e])||void 0===t?void 0:t.name.join(" - ")))}),{"":s("NewBranchModal.pleaseSelect")})),B=[{type:"select",label:s("NewBranchModal.where"),value:d,options:{new:s("NewBranchModal.new"),ext:s("NewBranchModal.ext")},disabledOptions:_===r.RM.SHMetro?[]:["ext"],onChange:function(n){return J(n)},minW:"full"},{type:"select",label:s("NewBranchModal.from"),value:g,options:I,disabledOptions:[""],onChange:function(n){return W(n)},isInvalid:Boolean(k)},{type:"select",label:s("NewBranchModal.to"),value:z,options:I,disabledOptions:[""],onChange:function(n){return $(n)},isInvalid:Boolean(R)},{type:"select",label:s("NewBranchModal.position"),value:C,options:{upper:s("NewBranchModal.upper"),lower:s("NewBranchModal.lower")},onChange:function(n){return H(n)},minW:"full",hidden:"new"!==d||_===r.RM.SHMetro}],J=function(n){m(n),x(""),b(""),M(""),O("")},W=function(n){x(n),M(""),n&&z&&O(l(pe(n,z)))},$=function(n){b(n),O(""),g&&n&&M(l(pe(g,n)))},V=Boolean(!g||!z||k||R);return(0,u.jsxs)(E.u_,{isOpen:e,onClose:t,children:[(0,u.jsx)(E.ZA,{}),(0,u.jsxs)(E.hz,{children:[(0,u.jsx)(E.xB,{children:s("NewBranchModal.title")}),(0,u.jsx)(E.ol,{}),(0,u.jsx)(E.fe,{children:(0,u.jsx)(L.M5,{fields:B})}),(0,u.jsx)(E.mz,{children:(0,u.jsx)(T.zx,{colorScheme:"teal",title:V?k||R:s("NewBranchModal.submit"),onClick:function(){("ext"===d?l(fe("new",g,z,"lower")):_===r.RM.SHMetro?l(fe("new",g,z,"upper")):l(fe("new",g,z,C)))&&t()},disabled:V,children:s("NewBranchModal.submit")})})]})]})}var ve=(0,a.lazy)((function(){return Promise.all([t.e(2953),t.e(1985)]).then(t.bind(t,4523))}));function je(){var n=(0,P.$)().t,e=(0,o.TL)(),t=(0,a.useState)(!1),i=(0,D.Z)(t,2),c=i[0],h=i[1],d=(0,a.useState)(!1),m=(0,D.Z)(d,2),f=m[0],p=m[1],g=(0,o.CG)((function(n){return n.app.selectedBranch})),x=(0,o.CG)((function(n){return n.param})),j=x.style,z=x.stn_list,b=(0,o.CG)((function(n){return n.helper.branches}));return(0,u.jsxs)(v.xu,{flex:1,overflow:"hidden",children:[(0,u.jsxs)(N.mQ,{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",index:g,onChange:function(n){return e((0,A.Pg)(n))},children:[(0,u.jsxs)(N.td,{children:[b.map((function(e,t){return 0===t?(0,u.jsx)(N.OK,{children:n("GridTabs.main")},t):j===r.RM.SHMetro&&(0,fn.Qo)(e,z)?(0,u.jsx)(N.OK,{children:n("GridTabs.external")+" "+t},t):(0,u.jsx)(N.OK,{children:n("GridTabs.branch")+" "+t},t)})),(0,u.jsx)(T.hU,{size:"sm",variant:"ghost",alignSelf:"center","aria-label":"New branch",onClick:function(){return p(!0)},icon:(0,u.jsx)(O.x06,{})}),(0,u.jsxs)(v.Ug,{marginLeft:"auto",marginRight:1,children:[(0,u.jsx)(T.zx,{variant:"outline",size:"xs",leftIcon:(0,u.jsx)(O.x06,{}),onClick:function(){return h(!0)},children:n("GridTabs.addStation")}),(0,u.jsx)(T.zx,{size:"xs",colorScheme:"teal",onClick:function(){e((0,A.B4)(r.Sg.BRANCH))},children:n("GridTabs.editLine")})]})]}),(0,u.jsx)(N.nP,{flex:1,overflowY:"auto",children:b.map((function(n,e){return(0,u.jsx)(N.x4,{padding:0,h:"100%",children:(0,u.jsx)(a.Suspense,{fallback:(0,u.jsx)(l.Ex,{isIndeterminate:!0}),children:(0,u.jsx)(s.Z,{children:(0,u.jsx)(ve,{branchIndex:e})})})},e)}))})]}),(0,u.jsx)(ge,{isOpen:c,onClose:function(){return h(!1)}}),(0,u.jsx)(xe,{isOpen:f,onClose:function(){return p(!1)}})]})}function ze(){var n=(0,p.I0)(),e=(0,o.CG)((function(n){return n.app.globalAlert})),t=(0,o.CG)((function(n){return n.param})),i=JSON.stringify(t);return(0,a.useEffect)((function(){window.rmgStorage.writeFile("rmgParam",i).then()}),[i]),(0,u.jsxs)(v.kC,{direction:"column",height:"100%",overflow:"hidden",children:[(0,u.jsx)(ce,{}),(0,u.jsxs)(v.kC,{direction:"column",flex:1,overflow:"hidden",children:[(0,u.jsx)(oe,{}),(0,u.jsxs)(v.kC,{flex:1,overflow:"hidden",position:"relative",children:[(0,u.jsxs)(v.kC,{as:"section",direction:"column",flex:1,ml:1,mr:1,overflow:"hidden",children:[e&&(0,u.jsxs)(he.bZ,{status:e.status,variant:"solid",size:"xs",pl:3,pr:1,pb:0,pt:0,children:[(0,u.jsx)(he.zM,{}),e.message,(0,u.jsx)(de.P,{ml:"auto",onClick:function(){return n((0,A.bI)())}})]}),(0,u.jsx)(v.xu,{children:(0,u.jsx)(z,{})}),(0,u.jsx)(je,{})]}),(0,u.jsx)(Sn,{})]})]}),(0,u.jsx)("canvas",{style:{display:"none"}})]})}},9794:function(n,e,t){"use strict";t.r(e),t.d(e,{templateList:function(){return a}});var a={basic:[{filename:"blank",name:{en:"Blank",zh:"\u7a7a\u767d"}},{filename:"default",name:{en:"Default","zh-Hans":"\u9ed8\u8ba4","zh-Hant":"\u9810\u8a2d"}},{filename:"coline",name:{en:"Track Share","zh-Hans":"\u5171\u7ebf","zh-Hant":"\u5171\u7dab"}},{filename:"loop",name:{en:"Loop Line","zh-Hans":"\u73af\u7ebf","zh-Hant":"\u74b0\u7dab"}}],bjsubway:[{filename:"bj1",name:{en:"Line 1 by AnDanJuneUnderline","zh-Hans":"1\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"1\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj2",name:{en:"Line 2 by AnDanJuneUnderline","zh-Hans":"2\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"2\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj4",name:{en:"Line 4 by AnDanJuneUnderline","zh-Hans":"4\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"4\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj5",name:{en:"Line 5 by AnDanJuneUnderline","zh-Hans":"5\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"5\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj6",name:{en:"Line 6 by AnDanJuneUnderline","zh-Hans":"6\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"6\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj7",name:{en:"Line 7 by AnDanJuneUnderline","zh-Hans":"7\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"7\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj8",name:{en:"Line 8 by Jay20081229","zh-Hans":"8\u53f7\u7ebf \u6765\u81ea Jay20081229","zh-Hant":"8\u865f\u7dda \u4f86\u81ea Jay20081229"}},{filename:"bj9",name:{en:"Line 9 by AnDanJuneUnderline","zh-Hans":"9\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"9\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj10",name:{en:"Line 10 by 52PD","zh-Hans":"10\u53f7\u7ebf \u6765\u81ea 52PD","zh-Hant":"10\u865f\u7dda \u4f86\u81ea 52PD"}},{filename:"bj11",name:{en:"Line 11 by Jay20081229","zh-Hans":"11\u53f7\u7ebf \u6765\u81ea Jay20081229","zh-Hant":"11\u865f\u7dda \u4f86\u81ea Jay20081229"}},{filename:"bj13",name:{en:"Line 13 by AnDanJuneUnderline","zh-Hans":"13\u53f7\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"13\u865f\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"bj14",name:{en:"Line 14 by Jay20081229","zh-Hans":"14\u53f7\u7ebf \u6765\u81ea Jay20081229","zh-Hant":"14\u865f\u7dda \u4f86\u81ea Jay20081229"}},{filename:"yzl",name:{en:"Yizhuang Line by AnDanJuneUnderline","zh-Hans":"\u4ea6\u5e84\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"\u4ea6\u838a\u7dda \u4f86\u81ea AnDanJuneUnderline"}},{filename:"t1l",name:{en:"Yizhuang T1 Line by AnDanJuneUnderline","zh-Hans":"\u4ea6\u5e84T1\u7ebf \u6765\u81ea AnDanJuneUnderline","zh-Hant":"\u4ea6\u838aT1\u7dda \u4f86\u81ea AnDanJuneUnderline"}}],fmetro:[{filename:"fs2",name:{en:"Line 2 by Dingdong2334","zh-Hans":"2\u53f7\u7ebf \u6765\u81ea Dingdong2334","zh-Hant":"2\u865f\u7dda \u4f86\u81ea Dingdong2334"}},{filename:"tnh1",name:{en:"Nanhai Tram Line 1 by clearng-kly","zh-Hans":"\u5357\u6d77\u6709\u8f681\u53f7\u7ebf \u6765\u81ea clearng-kly","zh-Hant":"\u5357\u6d77\u6709\u8ecc1\u865f\u7dda \u4f86\u81ea clearng-kly"}},{filename:"tgm1",name:{en:"Gaoming Tram by clearng-kly","zh-Hans":"\u9ad8\u660e\u6709\u8f68\u7535\u8f66 \u6765\u81ea clearng-kly","zh-Hant":"\u9ad8\u660e\u6709\u8ecc\u96fb\u8eca \u4f86\u81ea clearng-kly"}}],gzmtr:[{filename:"gz1",name:{en:"Line 1","zh-Hans":"1\u53f7\u7ebf","zh-Hant":"1\u865f\u7dda"}},{filename:"gz2",name:{en:"Line 2","zh-Hans":"2\u53f7\u7ebf","zh-Hant":"2\u865f\u7dda"}},{filename:"gz3",name:{en:"Line 3","zh-Hans":"3\u53f7\u7ebf","zh-Hant":"3\u865f\u7dda"}},{filename:"gz4",name:{en:"Line 4","zh-Hans":"4\u53f7\u7ebf","zh-Hant":"4\u865f\u7dda"}},{filename:"gz5",name:{en:"Line 5","zh-Hans":"5\u53f7\u7ebf","zh-Hant":"5\u865f\u7dda"}},{filename:"gz6",name:{en:"Line 6","zh-Hans":"6\u53f7\u7ebf","zh-Hant":"6\u865f\u7dda"}},{filename:"gz7",name:{en:"Line 7","zh-Hans":"7\u53f7\u7ebf","zh-Hant":"7\u865f\u7dda"}},{filename:"gz8",name:{en:"Line 8","zh-Hans":"8\u53f7\u7ebf","zh-Hant":"8\u865f\u7dda"}},{filename:"gz9",name:{en:"Line 9","zh-Hans":"9\u53f7\u7ebf","zh-Hant":"9\u865f\u7dda"}},{filename:"gz13",name:{en:"Line 13 by Dingdong2334","zh-Hans":"13\u53f7\u7ebf \u6765\u81ea Dingdong2334","zh-Hant":"13\u865f\u7dda \u4f86\u81ea Dingdong2334"}},{filename:"gz14",name:{en:"Line 14","zh-Hans":"14\u53f7\u7ebf","zh-Hant":"14\u865f\u7dda"}},{filename:"gz18",name:{en:"Line 18 by Dingdong2334","zh-Hans":"18\u53f7\u7ebf \u6765\u81ea Dingdong2334","zh-Hant":"18\u865f\u7dda \u4f86\u81ea Dingdong2334"}},{filename:"gz21",name:{en:"Line 21","zh-Hans":"21\u53f7\u7ebf","zh-Hant":"21\u865f\u7dda"}},{filename:"gz22",name:{en:"Line 22","zh-Hans":"22\u53f7\u7ebf","zh-Hant":"22\u865f\u7dda"}},{filename:"gf",name:{en:"Guangfo Line","zh-Hans":"\u5e7f\u4f5b\u7ebf","zh-Hant":"\u5ee3\u4f5b\u7dda"}},{filename:"apm",name:{en:"APM Line by Dingdong2334","zh-Hans":"APM\u7ebf \u6765\u81ea Dingdong2334","zh-Hant":"APM\u7dda \u4f86\u81ea Dingdong2334"}},{filename:"thz1",name:{en:"Haizhu Tram Line 1","zh-Hans":"\u6d77\u73e0\u6709\u8f681\u53f7\u7ebf \u6765\u81ea clearng-kly","zh-Hant":"\u6d77\u73e0\u6709\u8ecc1\u865f\u7dda \u4f86\u81ea clearng-kly"}},{filename:"thp1",name:{en:"Huangpu Tram Line 1","zh-Hans":"\u9ec4\u57d4\u6709\u8f681\u53f7\u7ebf \u6765\u81ea clearng-kly","zh-Hant":"\u9ec3\u57d4\u6709\u8ecc1\u865f\u7dda \u4f86\u81ea clearng-kly"}}],kmrailtransit:[{filename:"km1",name:{en:"Line 1 by 52PD","zh-Hans":"1\u53f7\u7ebf \u6765\u81ea 52PD","zh-Hant":"1\u865f\u7dda \u4f86\u81ea 52PD"}},{filename:"km2",name:{en:"Line 2 by 52PD","zh-Hans":"2\u53f7\u7ebf \u6765\u81ea 52PD","zh-Hant":"2\u865f\u7dda \u4f86\u81ea 52PD"}},{filename:"km3",name:{en:"Line 3 by 52PD","zh-Hans":"3\u53f7\u7ebf \u6765\u81ea 52PD","zh-Hant":"3\u865f\u7dda \u4f86\u81ea 52PD"}},{filename:"km4",name:{en:"Line 4 by 52PD","zh-Hans":"4\u53f7\u7ebf \u6765\u81ea 52PD","zh-Hant":"4\u865f\u7dda \u4f86\u81ea 52PD"}},{filename:"km5",name:{en:"Line 5 by 52PD","zh-Hans":"5\u53f7\u7ebf \u6765\u81ea 52PD","zh-Hant":"5\u865f\u7dda \u4f86\u81ea 52PD"}},{filename:"km6",name:{en:"Line 6 by 52PD","zh-Hans":"6\u53f7\u7ebf \u6765\u81ea 52PD","zh-Hant":"6\u865f\u7dda \u4f86\u81ea 52PD"}}],kvtransit:[{filename:"klMonorail",name:{en:"KL Monorail",ms:"KL Monorail","zh-Hans":"\u5409\u9686\u5761\u5355\u8f68","zh-Hant":"\u5409\u9686\u5761\u55ae\u8ecc"}},{filename:"lrtAmpang",name:{en:"Ampang Line",ms:"Laluan Ampang","zh-Hans":"\u5b89\u90a6\u7ebf","zh-Hant":"\u5b89\u90a6\u7dda"}},{filename:"lrtKelanaJaya",name:{en:"Kelana Jaya Line",ms:"Laluan Kelana Jaya","zh-Hans":"\u683c\u62c9\u90a3\u518d\u4e5f\u7ebf","zh-Hant":"\u683c\u62c9\u90a3\u518d\u4e5f\u7dda"}},{filename:"lrtSriPataling",name:{en:"Sri Pataling Line",ms:"Laluan Sri Pataling","zh-Hans":"\u5927\u57ce\u5821\u7ebf","zh-Hant":"\u5927\u57ce\u5821\u7dda"}},{filename:"mrtKajang",name:{en:"Kajang Line",ms:"Laluan Kajang","zh-Hans":"\u52a0\u5f71\u7ebf","zh-Hant":"\u52a0\u5f71\u7dda"}}],mlm:[{filename:"taipa",name:{en:"Taipa Line",pt:"Linha Taipa","zh-Hans":"\u6c39\u4ed4\u7ebf","zh-Hant":"\u6c39\u4ed4\u7dda"}}],mtr:[{filename:"twl",name:{en:"Tsuen Wan Line","zh-Hans":"\u8343\u6e7e\u7ebf","zh-Hant":"\u8343\u7063\u7dab"}},{filename:"ktl",name:{en:"Kwun Tong Line","zh-Hans":"\u89c2\u5858\u7ebf","zh-Hant":"\u89c0\u5858\u7dab"}},{filename:"isl",name:{en:"Island Line","zh-Hans":"\u6e2f\u5c9b\u7ebf","zh-Hant":"\u6e2f\u5cf6\u7dab"}},{filename:"tkl",name:{en:"Tseung Kwan O Line","zh-Hans":"\u5c06\u519b\u6fb3\u7ebf","zh-Hant":"\u5c07\u8ecd\u6fb3\u7dab"}},{filename:"sile",name:{en:"South Island Line","zh-Hans":"\u5357\u6e2f\u5c9b\u7ebf","zh-Hant":"\u5357\u6e2f\u5cf6\u7dab"}},{filename:"eal",name:{en:"East Rail Line","zh-Hans":"\u4e1c\u94c1\u7ebf","zh-Hant":"\u6771\u9435\u7dab"}},{filename:"drl",name:{en:"Disneyland Resort Line","zh-Hans":"\u8fea\u58eb\u5c3c\u7ebf","zh-Hant":"\u8fea\u58eb\u5c3c\u7dab"}},{filename:"ael",name:{en:"Airport Express","zh-Hans":"\u673a\u573a\u5feb\u7ebf","zh-Hant":"\u6a5f\u5834\u5feb\u7dab"}},{filename:"tml",name:{en:"Tuen Ma Line","zh-Hans":"\u5c6f\u9a6c\u7ebf","zh-Hant":"\u5c6f\u99ac\u7dab"}}],njmetro:[{filename:"nj1",name:{en:"Line 1 by linchen1965","zh-Hans":"1\u53f7\u7ebf \u6765\u81ea linchen1965","zh-Hant":"1\u865f\u7dda \u4f86\u81ea linchen1965"}},{filename:"nj2",name:{en:"Line 2 by linchen1965","zh-Hans":"2\u53f7\u7ebf \u6765\u81ea linchen1965","zh-Hant":"2\u865f\u7dda \u4f86\u81ea linchen1965"}},{filename:"nj3",name:{en:"Line 3 by linchen1965","zh-Hans":"3\u53f7\u7ebf \u6765\u81ea linchen1965","zh-Hant":"3\u865f\u7dda \u4f86\u81ea linchen1965"}},{filename:"nj4",name:{en:"Line 4 by linchen1965","zh-Hans":"4\u53f7\u7ebf \u6765\u81ea linchen1965","zh-Hant":"4\u865f\u7dda \u4f86\u81ea linchen1965"}},{filename:"nj10",name:{en:"Line 10 by linchen1965","zh-Hans":"10\u53f7\u7ebf \u6765\u81ea linchen1965","zh-Hant":"10\u865f\u7dda \u4f86\u81ea linchen1965"}}],shmetro:[{filename:"sh1",name:{en:"Line 1","zh-Hans":"1\u53f7\u7ebf","zh-Hant":"1\u865f\u7dda"}},{filename:"sh2",name:{en:"Line 2","zh-Hans":"2\u53f7\u7ebf","zh-Hant":"2\u865f\u7dda"}},{filename:"sh3",name:{en:"Line 3","zh-Hans":"3\u53f7\u7ebf","zh-Hant":"3\u865f\u7dda"}},{filename:"sh4",name:{en:"Line 4","zh-Hans":"4\u53f7\u7ebf","zh-Hant":"4\u865f\u7dda"}},{filename:"sh5",name:{en:"Line 5 by Tianxiu11111","zh-Hans":"5\u53f7\u7ebf \u6765\u81ea Tianxiu11111","zh-Hant":"5\u865f\u7dda \u4f86\u81ea Tianxiu11111"}},{filename:"sh6",name:{en:"Line 6 by Thomastzc","zh-Hans":"6\u53f7\u7ebf \u6765\u81ea Thomastzc","zh-Hant":"6\u865f\u7dda \u4f86\u81ea Thomastzc"}},{filename:"sh7",name:{en:"Line 7 by Thomastzc","zh-Hans":"7\u53f7\u7ebf \u6765\u81ea Thomastzc","zh-Hant":"7\u865f\u7dda \u4f86\u81ea Thomastzc"}},{filename:"sh8",name:{en:"Line 8 by Thomastzc","zh-Hans":"8\u53f7\u7ebf \u6765\u81ea Thomastzc","zh-Hant":"8\u865f\u7dda \u4f86\u81ea Thomastzc"}},{filename:"sh9",name:{en:"Line 9","zh-Hans":"9\u53f7\u7ebf","zh-Hant":"9\u865f\u7dda"}},{filename:"sh10",name:{en:"Line 10","zh-Hans":"10\u53f7\u7ebf","zh-Hant":"10\u865f\u7dda"}},{filename:"sh11",name:{en:"Line 11 by Tianxiu11111","zh-Hans":"11\u53f7\u7ebf \u6765\u81ea Tianxiu11111","zh-Hant":"11\u865f\u7dda \u4f86\u81ea Tianxiu11111"}},{filename:"sh12",name:{en:"Line 12 by Andy1782010","zh-Hans":"12\u53f7\u7ebf \u6765\u81ea Andy1782010","zh-Hant":"12\u865f\u7dda \u4f86\u81ea Andy1782010"}},{filename:"sh13",name:{en:"Line 13 by Andy1782010","zh-Hans":"13\u53f7\u7ebf \u6765\u81ea Andy1782010","zh-Hant":"13\u865f\u7dda \u4f86\u81ea Andy1782010"}},{filename:"sh14",name:{en:"Line 14","zh-Hans":"14\u53f7\u7ebf","zh-Hant":"14\u865f\u7dda"}},{filename:"sh15",name:{en:"Line 15 by Thomastzc","zh-Hans":"15\u53f7\u7ebf \u6765\u81ea Thomastzc","zh-Hant":"15\u865f\u7dda \u4f86\u81ea Thomastzc"}},{filename:"sh16",name:{en:"Line 16","zh-Hans":"16\u53f7\u7ebf","zh-Hant":"16\u865f\u7dda"}},{filename:"sh17",name:{en:"Line 17 by Thomastzc","zh-Hans":"17\u53f7\u7ebf \u6765\u81ea Thomastzc","zh-Hant":"17\u865f\u7dda \u4f86\u81ea Thomastzc"}},{filename:"sh18",name:{en:"Line 18 by Tianxiu11111","zh-Hans":"18\u53f7\u7ebf \u6765\u81ea Tianxiu11111","zh-Hant":"18\u865f\u7dda \u4f86\u81ea Tianxiu11111"}}],saopaulometro:[{filename:"sp1",name:{en:"Line 1",pt:"Linha 1","zh-Hans":"1\u53f7\u7ebf","zh-Hant":"1\u865f\u7dda"}},{filename:"sp2",name:{en:"Line 2",pt:"Linha 2","zh-Hans":"2\u53f7\u7ebf","zh-Hant":"2\u865f\u7dda"}},{filename:"sp3",name:{en:"Line 3",pt:"Linha 3","zh-Hans":"3\u53f7\u7ebf","zh-Hant":"3\u865f\u7dda"}},{filename:"sp4",name:{en:"Line 4",pt:"Linha 4","zh-Hans":"4\u53f7\u7ebf","zh-Hant":"4\u865f\u7dda"}},{filename:"sp5",name:{en:"Line 5",pt:"Linha 5","zh-Hans":"5\u53f7\u7ebf","zh-Hant":"5\u865f\u7dda"}},{filename:"sp7",name:{en:"Line 7",pt:"Linha 7","zh-Hans":"7\u53f7\u7ebf","zh-Hant":"7\u865f\u7dda"}},{filename:"sp8",name:{en:"Line 8",pt:"Linha 8","zh-Hans":"8\u53f7\u7ebf","zh-Hant":"8\u865f\u7dda"}},{filename:"sp9",name:{en:"Line 9",pt:"Linha 9","zh-Hans":"9\u53f7\u7ebf","zh-Hant":"9\u865f\u7dda"}},{filename:"sp10",name:{en:"Line 10",pt:"Linha 10","zh-Hans":"10\u53f7\u7ebf","zh-Hant":"10\u865f\u7dda"}},{filename:"sp11",name:{en:"Line 11",pt:"Linha 11","zh-Hans":"11\u53f7\u7ebf","zh-Hant":"11\u865f\u7dda"}},{filename:"sp12",name:{en:"Line 12",pt:"Linha 12","zh-Hans":"12\u53f7\u7ebf","zh-Hant":"12\u865f\u7dda"}},{filename:"sp13",name:{en:"Line 13",pt:"Linha 13","zh-Hans":"13\u53f7\u7ebf","zh-Hant":"13\u865f\u7dda"}},{filename:"sp15",name:{en:"Line 15",pt:"Linha 15","zh-Hans":"15\u53f7\u7ebf","zh-Hant":"15\u865f\u7dda"}}],szmetro:[{filename:"sz1",name:{en:"Line 1","zh-Hans":"1\u53f7\u7ebf","zh-Hant":"1\u865f\u7dda"}},{filename:"sz3",name:{en:"Line 3","zh-Hans":"3\u53f7\u7ebf","zh-Hant":"3\u865f\u7dda"}},{filename:"sz4",name:{en:"Line 4","zh-Hans":"4\u53f7\u7ebf","zh-Hant":"4\u865f\u7dda"}}],zzmetro:[{filename:"zz1",name:{en:"Line 1","zh-Hans":"1\u53f7\u7ebf","zh-Hant":"1\u865f\u7dda"}},{filename:"zz3",name:{en:"Line 3","zh-Hans":"3\u53f7\u7ebf","zh-Hant":"3\u865f\u7dda"}},{filename:"zz4",name:{en:"Line 4","zh-Hans":"4\u53f7\u7ebf","zh-Hant":"4\u865f\u7dda"}},{filename:"zz6",name:{en:"Line 6","zh-Hans":"6\u53f7\u7ebf","zh-Hant":"6\u865f\u7dda"}},{filename:"zz14",name:{en:"Line 14","zh-Hans":"14\u53f7\u7ebf","zh-Hant":"14\u865f\u7dda"}}]}},6705:function(n,e,t){"use strict";t.d(e,{Qo:function(){return h},ku:function(){return m},z7:function(){return f},_G:function(){return g},NC:function(){return x},_g:function(){return v},l$:function(){return j},wX:function(){return z},Di:function(){return b}});var a=t(5987),i=t(9142),r=t(4942),o=t(1413),s=t(9439),l=t(3433),u=t(533),c=t(5984);var h=function(n,e){return!!e[n[0]].children.indexOf(n[1])},d=function(n,e){return[n[0][1],n[0][n[0].length-2]].concat((0,l.Z)(n[0].filter((function(t){return n.slice(1).filter((function(n){return h(n,e)})).map((function(n){return n.filter((function(n){return!["linestart","lineend"].includes(n)}))})).map((function(n){return[n[0],n[n.length-1]]})).flat().includes(t)}))))},m=function(n){return function(e,t){var a=t().helper.branches;if(0===n){var i=t().param.stn_list,r=d(a,i);return function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.reduce((function(n,e){return n.map((function(n){return e.map((function(e){return n.concat([e])}))})).reduce((function(n,e){return n.concat(e)}),[])}),[[]])}(r,r).filter((function(n){return n[0]!==n[1]}))}var o=a[n];if(o){var s=o.filter((function(n){return!["linestart","lineend"].includes(n)}));return[[s[0],s.slice(-1)[0]]]}return[]}},f=function(n,e){return function(t,a){for(var i=a().param.coline,r=a().helper.branches[e],o=0,l=Object.entries(i);o<l.length;o++){var u=(0,s.Z)(l[o],2),c=u[0],h=u[1];if(h.from===n&&r.includes(h.to)){var d=r.indexOf(n),m=r.indexOf(h.to);if(m>d)return[m-d+1,c]}else if(h.to===n&&r.includes(h.to)){var f=r.indexOf(n),p=r.indexOf(h.from);if(p>f)return[p-f+1,c]}}return[0,void 0]}},p=function(n,e){return function(t,a){var i=a().param.stn_list,r=a().helper.branches;if(n===e)throw new Error("addColine():: failed for same stnId");var o=d(r,i).filter((function(t){return[n,e].includes(t)})),s=function(n,e){return n.slice(1).filter((function(n){return h(n,e)})).map((function(n){return n.filter((function(n){return!["linestart","lineend"].includes(n)}))})).map((function(n){return[n[0],n[n.length-1]]}))}(r,i).filter((function(t){return[n,e].every((function(n){return t.includes(n)}))}));if(2===o.length&&s.length>0)throw new Error("addColine():: failed");if(2!==o.length&&1!==s.length)throw new Error("addColine():: failed")}},g=function(n){return function(e,t){var a=t().param.coline,i=t().helper.branches[n];return i?Object.entries(a).reduce((function(n,e){return i.includes(e[1].from)&&i.includes(e[1].to)?(0,o.Z)((0,o.Z)({},n),{},(0,r.Z)({},e[0],e[1])):(0,o.Z)({},n)}),{}):{}}},x=function(n){return function(e,t){var a=t().param.coline;if(0!==Object.keys(a).length){var i=Object.entries(a).reduce((function(e,t){return t[1].from!==n&&t[1].to!==n?(0,o.Z)((0,o.Z)({},e),{},(0,r.Z)({},t[0],t[1])):(0,o.Z)({},e)}),{});e((0,u.tA)(i))}}},v=function(n,e,t){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(i,s){var l=s().param.coline;i(p(n,e)),i((0,u.tA)((0,o.Z)((0,o.Z)({},l),{},(0,r.Z)({},(0,c.x0)(4),{from:n,to:e,colors:t,display:a}))))}},j=function(n,e,t){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return function(i,s){var l=s().param.coline;if(n in l){i(p(e,t));var c=(0,o.Z)((0,o.Z)({},l),{},(0,r.Z)({},n,(0,o.Z)((0,o.Z)({},l[n]),{},{from:e,to:t,display:a})));i((0,u.tA)(c))}}},z=function(n,e){return function(t,s){var l=s().param.coline;if(n in l&&l[n].colors.length>e){var c=l[n].colors.filter((function(n,t){return t!==e}));if(0===c.length){l[n];var h=(0,a.Z)(l,[n].map(i.Z));t((0,u.tA)(h))}else{var d=(0,o.Z)((0,o.Z)({},l),{},(0,r.Z)({},n,(0,o.Z)((0,o.Z)({},l[n]),{},{colors:c})));t((0,u.tA)(d))}}}},b=function(n,e,t){return function(a,i){var r=i().param.coline;n in r&&r[n].colors.length>e&&(r[n].colors=r[n].colors.map((function(n,a){return a===e?[0,1,2,3,4,5].map((function(e){return void 0===t[e]?n[e]:t[e]})):n})),a((0,u.tA)(r)))}}},2770:function(n,e,t){var a={"./basic/blank":[8107,8014],"./basic/blank.ts":[8107,8014],"./basic/coline":[255,9410],"./basic/coline.ts":[255,9410],"./basic/default":[25,6230],"./basic/default.ts":[25,6230],"./basic/loop":[7861,1188],"./basic/loop.ts":[7861,1188],"./bjsubway/bj1":[8731,6698],"./bjsubway/bj1.ts":[8731,6698],"./bjsubway/bj10":[8009,2773],"./bjsubway/bj10.ts":[8009,2773],"./bjsubway/bj11":[4050,7680],"./bjsubway/bj11.ts":[4050,7680],"./bjsubway/bj13":[9248,9259],"./bjsubway/bj13.ts":[9248,9259],"./bjsubway/bj14":[203,9797],"./bjsubway/bj14.ts":[203,9797],"./bjsubway/bj2":[6466,3981],"./bjsubway/bj2.ts":[6466,3981],"./bjsubway/bj4":[2428,7200],"./bjsubway/bj4.ts":[2428,7200],"./bjsubway/bj5":[3968,2244],"./bjsubway/bj5.ts":[3968,2244],"./bjsubway/bj6":[4140,7149],"./bjsubway/bj6.ts":[4140,7149],"./bjsubway/bj7":[9755,6452],"./bjsubway/bj7.ts":[9755,6452],"./bjsubway/bj8":[2013,2200],"./bjsubway/bj8.ts":[2013,2200],"./bjsubway/bj9":[7639,9950],"./bjsubway/bj9.ts":[7639,9950],"./bjsubway/t1l":[9891,6583],"./bjsubway/t1l.ts":[9891,6583],"./bjsubway/yzl":[8602,4015],"./bjsubway/yzl.ts":[8602,4015],"./data":[9794],"./data.ts":[9794],"./fmetro/fs2":[4188,2846],"./fmetro/fs2.ts":[4188,2846],"./fmetro/tgm1":[3231,8924],"./fmetro/tgm1.ts":[3231,8924],"./fmetro/tnh1":[7549,2100],"./fmetro/tnh1.ts":[7549,2100],"./gzmtr/apm":[5540,199],"./gzmtr/apm.ts":[5540,199],"./gzmtr/gf":[5670,8512],"./gzmtr/gf.ts":[5670,8512],"./gzmtr/gz1":[4867,9655],"./gzmtr/gz1.ts":[4867,9655],"./gzmtr/gz13":[5811,6555],"./gzmtr/gz13.ts":[5811,6555],"./gzmtr/gz14":[8492,2663],"./gzmtr/gz14.ts":[8492,2663],"./gzmtr/gz18":[8778,6080],"./gzmtr/gz18.ts":[8778,6080],"./gzmtr/gz2":[4887,8724],"./gzmtr/gz2.ts":[4887,8724],"./gzmtr/gz21":[5884,4694],"./gzmtr/gz21.ts":[5884,4694],"./gzmtr/gz22":[7653,5074],"./gzmtr/gz22.ts":[7653,5074],"./gzmtr/gz3":[3328,4754],"./gzmtr/gz3.ts":[3328,4754],"./gzmtr/gz4":[8505,2490],"./gzmtr/gz4.ts":[8505,2490],"./gzmtr/gz5":[3691,5910],"./gzmtr/gz5.ts":[3691,5910],"./gzmtr/gz6":[8793,403],"./gzmtr/gz6.ts":[8793,403],"./gzmtr/gz7":[3208,1180],"./gzmtr/gz7.ts":[3208,1180],"./gzmtr/gz8":[1796,1899],"./gzmtr/gz8.ts":[1796,1899],"./gzmtr/gz9":[9086,6899],"./gzmtr/gz9.ts":[9086,6899],"./gzmtr/thp1":[1663,1471],"./gzmtr/thp1.ts":[1663,1471],"./gzmtr/thz1":[4742,6293],"./gzmtr/thz1.ts":[4742,6293],"./kmrailtransit/km1":[3390,5680],"./kmrailtransit/km1.ts":[3390,5680],"./kmrailtransit/km2":[6465,852],"./kmrailtransit/km2.ts":[6465,852],"./kmrailtransit/km3":[6934,758],"./kmrailtransit/km3.ts":[6934,758],"./kmrailtransit/km4":[9884,7855],"./kmrailtransit/km4.ts":[9884,7855],"./kmrailtransit/km5":[2968,4387],"./kmrailtransit/km5.ts":[2968,4387],"./kmrailtransit/km6":[6496,4996],"./kmrailtransit/km6.ts":[6496,4996],"./kvtransit/klMonorail":[4423,6569],"./kvtransit/klMonorail.ts":[4423,6569],"./kvtransit/lrtAmpang":[8096,3692],"./kvtransit/lrtAmpang.ts":[8096,3692],"./kvtransit/lrtKelanaJaya":[8971,2791],"./kvtransit/lrtKelanaJaya.ts":[8971,2791],"./kvtransit/lrtSriPataling":[175,4254],"./kvtransit/lrtSriPataling.ts":[175,4254],"./kvtransit/mrtKajang":[1683,74],"./kvtransit/mrtKajang.ts":[1683,74],"./mlm/taipa":[9897,3456],"./mlm/taipa.ts":[9897,3456],"./mtr/ael":[6641,7211],"./mtr/ael.ts":[6641,7211],"./mtr/drl":[27,7769],"./mtr/drl.ts":[27,7769],"./mtr/eal":[6301,1475],"./mtr/eal.ts":[6301,1475],"./mtr/isl":[8173,7321],"./mtr/isl.ts":[8173,7321],"./mtr/ktl":[9023,7910],"./mtr/ktl.ts":[9023,7910],"./mtr/sile":[9776,6153],"./mtr/sile.ts":[9776,6153],"./mtr/tkl":[4254,6568],"./mtr/tkl.ts":[4254,6568],"./mtr/tml":[2593,8476],"./mtr/tml.ts":[2593,8476],"./mtr/twl":[457,8330],"./mtr/twl.ts":[457,8330],"./njmetro/nj1":[2530,8615],"./njmetro/nj1.ts":[2530,8615],"./njmetro/nj10":[1931,5797],"./njmetro/nj10.ts":[1931,5797],"./njmetro/nj2":[6630,388],"./njmetro/nj2.ts":[6630,388],"./njmetro/nj3":[9413,1074],"./njmetro/nj3.ts":[9413,1074],"./njmetro/nj4":[9002,3437],"./njmetro/nj4.ts":[9002,3437],"./saopaulometro/sp1":[7216,6010],"./saopaulometro/sp1.ts":[7216,6010],"./saopaulometro/sp10":[2468,5458],"./saopaulometro/sp10.ts":[2468,5458],"./saopaulometro/sp11":[8094,6432],"./saopaulometro/sp11.ts":[8094,6432],"./saopaulometro/sp12":[7121,5391],"./saopaulometro/sp12.ts":[7121,5391],"./saopaulometro/sp13":[731,2259],"./saopaulometro/sp13.ts":[731,2259],"./saopaulometro/sp15":[6637,3969],"./saopaulometro/sp15.ts":[6637,3969],"./saopaulometro/sp2":[2032,1416],"./saopaulometro/sp2.ts":[2032,1416],"./saopaulometro/sp3":[4985,2856],"./saopaulometro/sp3.ts":[4985,2856],"./saopaulometro/sp4":[3619,45],"./saopaulometro/sp4.ts":[3619,45],"./saopaulometro/sp5":[4700,7425],"./saopaulometro/sp5.ts":[4700,7425],"./saopaulometro/sp7":[6199,4636],"./saopaulometro/sp7.ts":[6199,4636],"./saopaulometro/sp8":[7222,9538],"./saopaulometro/sp8.ts":[7222,9538],"./saopaulometro/sp9":[6612,4985],"./saopaulometro/sp9.ts":[6612,4985],"./shmetro/sh1":[3056,2198],"./shmetro/sh1.ts":[3056,2198],"./shmetro/sh10":[1809,9963],"./shmetro/sh10.ts":[1809,9963],"./shmetro/sh11":[9749,9714],"./shmetro/sh11.ts":[9749,9714],"./shmetro/sh12":[3035,7866],"./shmetro/sh12.ts":[3035,7866],"./shmetro/sh13":[784,9874],"./shmetro/sh13.ts":[784,9874],"./shmetro/sh14":[7883,5503],"./shmetro/sh14.ts":[7883,5503],"./shmetro/sh15":[8178,8832],"./shmetro/sh15.ts":[8178,8832],"./shmetro/sh16":[4303,2808],"./shmetro/sh16.ts":[4303,2808],"./shmetro/sh17":[8987,2494],"./shmetro/sh17.ts":[8987,2494],"./shmetro/sh18":[7594,5758],"./shmetro/sh18.ts":[7594,5758],"./shmetro/sh2":[2039,1456],"./shmetro/sh2.ts":[2039,1456],"./shmetro/sh3":[1280,4655],"./shmetro/sh3.ts":[1280,4655],"./shmetro/sh4":[1608,854],"./shmetro/sh4.ts":[1608,854],"./shmetro/sh5":[1912,5364],"./shmetro/sh5.ts":[1912,5364],"./shmetro/sh6":[269,8424],"./shmetro/sh6.ts":[269,8424],"./shmetro/sh7":[231,1756],"./shmetro/sh7.ts":[231,1756],"./shmetro/sh8":[3760,5091],"./shmetro/sh8.ts":[3760,5091],"./shmetro/sh9":[2179,3510],"./shmetro/sh9.ts":[2179,3510],"./szmetro/sz1":[5794,4615],"./szmetro/sz1.ts":[5794,4615],"./szmetro/sz3":[9290,3236],"./szmetro/sz3.ts":[9290,3236],"./szmetro/sz4":[4750,2605],"./szmetro/sz4.ts":[4750,2605],"./zzmetro/zz1":[4586,9912],"./zzmetro/zz1.ts":[4586,9912],"./zzmetro/zz14":[5633,875],"./zzmetro/zz14.ts":[5633,875],"./zzmetro/zz3":[2873,9387],"./zzmetro/zz3.ts":[2873,9387],"./zzmetro/zz4":[3284,5402],"./zzmetro/zz4.ts":[3284,5402],"./zzmetro/zz6":[3577,9708],"./zzmetro/zz6.ts":[3577,9708]};function i(n){if(!t.o(a,n))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+n+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=a[n],i=e[0];return Promise.all(e.slice(1).map(t.e)).then((function(){return t(i)}))}i.keys=function(){return Object.keys(a)},i.id=2770,n.exports=i}}]);
//# sourceMappingURL=AppRoot.ebedf559.chunk.js.map