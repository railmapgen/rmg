{"version":3,"file":"static/js/AppRoot.ebedf559.chunk.js","mappings":"mFAAA,IAAIA,EAAM,CACT,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,GACA,IAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,IACA,KAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,kDAAmD,CAClD,KACA,MAED,kDAAmD,CAClD,IACA,MAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAOR,EAAoBK,EAAEG,EAAI,IAAIJ,MAAK,WACzC,OAAOJ,EAAoBU,EAAED,EAAI,OAGnCX,EAAoBa,KAAO,WAAa,OAAOC,OAAOD,KAAKd,IAC3DC,EAAoBW,GAAK,KACzBI,EAAOC,QAAUhB,G,qBC9JjB,IAAID,EAAM,CACT,cAAe,CACd,KACA,MAED,YAAa,CACZ,KACA,MAED,iBAAkB,CACjB,KACA,MAED,eAAgB,CACf,KACA,MAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,aAAc,CACb,KACA,MAED,gBAAiB,CAChB,IACA,MAED,eAAgB,CACf,KACA,MAED,iBAAkB,CACjB,IACA,MAED,aAAc,CACb,KACA,MAED,cAAe,CACd,KACA,MAED,aAAc,CACb,KACA,MAED,gBAAiB,CAChB,KACA,MAED,gBAAiB,CAChB,KACA,KAED,iBAAkB,CACjB,IACA,MAED,iBAAkB,CACjB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,gBAAiB,CAChB,KACA,IAED,aAAc,CACb,IACA,MAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,aAAc,CACb,KACA,MAED,cAAe,CACd,IACA,KAED,iBAAkB,CACjB,KACA,MAED,mBAAoB,CACnB,IACA,MAED,eAAgB,CACf,KACA,MAED,YAAa,CACZ,KACA,MAED,cAAe,CACd,KACA,MAED,cAAe,CACd,KACA,MAED,aAAc,CACb,KACA,KAED,cAAe,CACd,KACA,MAED,aAAc,CACb,KACA,MAED,cAAe,CACd,KACA,MAED,eAAgB,CACf,KACA,MAED,iBAAkB,CACjB,KACA,MAED,aAAc,CACb,KACA,MAED,YAAa,CACZ,KACA,MAED,aAAc,CACb,KACA,MAED,aAAc,CACb,KACA,MAED,eAAgB,CACf,KACA,MAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,gBAAiB,CAChB,KACA,KAED,aAAc,CACb,KACA,MAED,gBAAiB,CAChB,KACA,MAED,gBAAiB,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ACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,SAAU,CACT,MAED,YAAa,CACZ,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,aAAc,CACb,KACA,MAED,gBAAiB,CAChB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,cAAe,CACd,KACA,KAED,iBAAkB,CACjB,KACA,KAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,eAAgB,CACf,KACA,MAED,kBAAmB,CAClB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,sBAAuB,CACtB,KACA,KAED,yBAA0B,CACzB,KACA,KAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,4BAA6B,CAC5B,KACA,MAED,wBAAyB,CACxB,KACA,MAED,2BAA4B,CAC3B,KACA,MAED,4BAA6B,CAC5B,KACA,MAED,+BAAgC,CAC/B,KACA,MAED,6BAA8B,CAC7B,IACA,MAED,gCAAiC,CAChC,IACA,MAED,wBAAyB,CACxB,KACA,IAED,2BAA4B,CAC3B,KACA,IAED,cAAe,CACd,KACA,MAED,iBAAkB,CACjB,KACA,MAED,YAAa,CACZ,KACA,MAED,eAAgB,CACf,KACA,MAED,YAAa,CACZ,GACA,MAED,eAAgB,CACf,GACA,MAED,YAAa,CACZ,KACA,MAED,eAAgB,CACf,KACA,MAED,YAAa,CACZ,KACA,MAED,eAAgB,CACf,KACA,MAED,YAAa,CACZ,KACA,MAED,eAAgB,CACf,KACA,MAED,aAAc,CACb,KACA,MAED,gBAAiB,CAChB,KACA,MAED,YAAa,CACZ,KACA,MAED,eAAgB,CACf,KACA,MAED,YAAa,CACZ,KACA,MAED,eAAgB,CACf,KACA,MAED,YAAa,CACZ,IACA,MAED,eAAgB,CACf,IACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,uBAAwB,CACvB,KACA,MAED,0BAA2B,CAC1B,KACA,MAED,uBAAwB,CACvB,KACA,MAED,0BAA2B,CAC1B,KACA,MAED,uBAAwB,CACvB,KACA,MAED,0BAA2B,CAC1B,KACA,MAED,uBAAwB,CACvB,IACA,MAED,0BAA2B,CAC1B,IACA,MAED,uBAAwB,CACvB,KACA,MAED,0BAA2B,CAC1B,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,IAED,yBAA0B,CACzB,KACA,IAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,sBAAuB,CACtB,KACA,MAED,yBAA0B,CACzB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,IACA,MAED,oBAAqB,CACpB,IACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,iBAAkB,CACjB,KACA,MAED,oBAAqB,CACpB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,KAED,mBAAoB,CACnB,KACA,KAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,IACA,MAED,mBAAoB,CACnB,IACA,MAED,gBAAiB,CAChB,IACA,MAED,mBAAoB,CACnB,IACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,iBAAkB,CACjB,KACA,KAED,oBAAqB,CACpB,KACA,KAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,MAED,gBAAiB,CAChB,KACA,MAED,mBAAoB,CACnB,KACA,OAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OAAOG,QAAQC,UAAUC,MAAK,WAC7B,IAAIC,EAAI,IAAIC,MAAM,uBAAyBP,EAAM,KAEjD,MADAM,EAAEE,KAAO,mBACHF,KAIR,IAAIG,EAAMX,EAAIE,GAAMU,EAAKD,EAAI,GAC7B,OAAON,QAAQyiB,IAAIniB,EAAIwD,MAAM,GAAGnE,IAAIG,EAAoBK,IAAID,MAAK,WAChE,OAAOJ,EAAoBS,MAG7BX,EAAoBa,KAAO,WAAa,OAAOC,OAAOD,KAAKd,IAC3DC,EAAoBW,GAAK,KACzBI,EAAOC,QAAUhB","sources":["../node_modules/@railmapgen/rmg-palette-resources/flags|lazy|/^/.//.*$/|groupOptions: {}|namespace object","../node_modules/@railmapgen/rmg-palette-resources/palettes|lazy|/^/.//.*/.js$/|chunkName: palettes|groupOptions: {}|namespace object","svgs/svg-wrapper.tsx","svgs/svg-router.tsx","components/side-panel/station-side-panel/info-section.tsx","components/common/rmg-auto-complete.tsx","components/modal/colour-modal/flag-svg-emoji.tsx","components/modal/colour-modal/city-picker.tsx","components/modal/colour-modal/colour-picker.tsx","components/modal/colour-modal/colour-modal.tsx","theme/colour-util.ts","components/side-panel/theme-button.tsx","components/side-panel/station-side-panel/interchange-card.tsx","components/side-panel/station-side-panel/interchange-section.tsx","components/common/rmg-button-group.tsx","components/side-panel/station-side-panel/more-section.tsx","components/side-panel/station-side-panel/branch-section.tsx","components/side-panel/station-side-panel/station-side-panel.tsx","components/side-panel/style-side-panel/layout-section.tsx","components/side-panel/style-side-panel/design-section.tsx","components/side-panel/style-side-panel/loop-section.tsx","components/side-panel/style-side-panel/gzmtr-note-card.tsx","components/side-panel/style-side-panel/gzmtr-note-section.tsx","components/side-panel/style-side-panel/style-side-panel.tsx","methods.ts","components/modal/remove-confirm-modal.tsx","components/side-panel/station-side-panel/station-side-panel-footer.tsx","redux/param/remove-station-action.ts","components/side-panel/branch-side-panel/coline-card.tsx","components/side-panel/branch-side-panel/coline-section.tsx","components/modal/auto-num-modal.tsx","components/side-panel/branch-side-panel/action-section.tsx","components/side-panel/branch-side-panel/branch-side-panel.tsx","components/side-panel/side-panel.tsx","util/utils.ts","util/export-utils.ts","components/modal/download-modal.tsx","components/page-header/download-actions.tsx","constants/company-config.ts","components/modal/upload-confirm-modal.tsx","components/modal/template-modal.tsx","components/page-header/open-actions.tsx","redux/param/open-new-action.ts","components/page-header/header-actions.tsx","components/page-header/page-header.tsx","util/config.ts","components/window-header.tsx","redux/param/add-station-action.ts","components/modal/add-station-modal.tsx","components/modal/new-branch-modal.tsx","components/ag-grid/grid-tabs.tsx","components/app-root.tsx","constants/templates/data.ts","redux/param/coline-action.ts","constants/templates|lazy|/^/.//.*$/|chunkName: templates|groupOptions: {}|namespace object"],"sourcesContent":["var map = {\n\t\"./1F1E6-1F1F9.svg\": [\n\t\t9121,\n\t\t9121\n\t],\n\t\"./1F1E6-1F1FF.svg\": [\n\t\t9427,\n\t\t9427\n\t],\n\t\"./1F1E7-1F1F7.svg\": [\n\t\t7304,\n\t\t7304\n\t],\n\t\"./1F1E8-1F1E6.svg\": [\n\t\t56,\n\t\t56\n\t],\n\t\"./1F1E8-1F1F1.svg\": [\n\t\t3450,\n\t\t3450\n\t],\n\t\"./1F1E8-1F1F3.svg\": [\n\t\t2537,\n\t\t2537\n\t],\n\t\"./1F1E9-1F1EA.svg\": [\n\t\t6311,\n\t\t6311\n\t],\n\t\"./1F1EA-1F1EC.svg\": [\n\t\t7365,\n\t\t7365\n\t],\n\t\"./1F1EA-1F1F8.svg\": [\n\t\t8721,\n\t\t8721\n\t],\n\t\"./1F1EB-1F1F7.svg\": [\n\t\t8514,\n\t\t8514\n\t],\n\t\"./1F1EC-1F1F7.svg\": [\n\t\t9515,\n\t\t9515\n\t],\n\t\"./1F1ED-1F1F0.svg\": [\n\t\t2248,\n\t\t2248\n\t],\n\t\"./1F1ED-1F1FA.svg\": [\n\t\t268,\n\t\t268\n\t],\n\t\"./1F1EE-1F1F3.svg\": [\n\t\t6236,\n\t\t6236\n\t],\n\t\"./1F1EE-1F1F7.svg\": [\n\t\t2617,\n\t\t2617\n\t],\n\t\"./1F1EE-1F1F9.svg\": [\n\t\t3541,\n\t\t3541\n\t],\n\t\"./1F1EF-1F1F5.svg\": [\n\t\t2741,\n\t\t2741\n\t],\n\t\"./1F1F0-1F1F7.svg\": [\n\t\t2255,\n\t\t2255\n\t],\n\t\"./1F1F2-1F1F4.svg\": [\n\t\t6435,\n\t\t6435\n\t],\n\t\"./1F1F2-1F1FD.svg\": [\n\t\t3086,\n\t\t3086\n\t],\n\t\"./1F1F2-1F1FE.svg\": [\n\t\t6082,\n\t\t6082\n\t],\n\t\"./1F1F3-1F1F4.svg\": [\n\t\t6095,\n\t\t6095\n\t],\n\t\"./1F1F5-1F1EA.svg\": [\n\t\t2955,\n\t\t2955\n\t],\n\t\"./1F1F5-1F1F9.svg\": [\n\t\t7791,\n\t\t7791\n\t],\n\t\"./1F1F7-1F1F4.svg\": [\n\t\t7224,\n\t\t7224\n\t],\n\t\"./1F1F7-1F1FA.svg\": [\n\t\t6031,\n\t\t6031\n\t],\n\t\"./1F1F8-1F1EA.svg\": [\n\t\t1550,\n\t\t1550\n\t],\n\t\"./1F1F8-1F1EC.svg\": [\n\t\t1229,\n\t\t1229\n\t],\n\t\"./1F1F9-1F1F7.svg\": [\n\t\t2237,\n\t\t2237\n\t],\n\t\"./1F1F9-1F1FC.svg\": [\n\t\t4252,\n\t\t4252\n\t],\n\t\"./1F1FA-1F1F3.svg\": [\n\t\t3353,\n\t\t3353\n\t],\n\t\"./1F1FA-1F1F8.svg\": [\n\t\t5439,\n\t\t5439\n\t],\n\t\"./1F1FB-1F1F3.svg\": [\n\t\t3886,\n\t\t3886\n\t],\n\t\"./1F3F4-E0067-E0062-E0065-E006E-E0067-E007F.svg\": [\n\t\t6129,\n\t\t6129\n\t],\n\t\"./1F3F4-E0067-E0062-E0073-E0063-E0074-E007F.svg\": [\n\t\t138,\n\t\t138\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__.t(id, 1 | 16);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 4018;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./athens.js\": [\n\t\t6128,\n\t\t6869\n\t],\n\t\"./baku.js\": [\n\t\t2481,\n\t\t6810\n\t],\n\t\"./barcelona.js\": [\n\t\t6340,\n\t\t5792\n\t],\n\t\"./beijing.js\": [\n\t\t2145,\n\t\t2358\n\t],\n\t\"./berlin.js\": [\n\t\t7976,\n\t\t436\n\t],\n\t\"./bucharest.js\": [\n\t\t5249,\n\t\t5520\n\t],\n\t\"./budapest.js\": [\n\t\t8895,\n\t\t1321\n\t],\n\t\"./cairo.js\": [\n\t\t6509,\n\t\t5189\n\t],\n\t\"./changsha.js\": [\n\t\t574,\n\t\t6739\n\t],\n\t\"./chengdu.js\": [\n\t\t6312,\n\t\t7599\n\t],\n\t\"./chongqing.js\": [\n\t\t300,\n\t\t7081\n\t],\n\t\"./daegu.js\": [\n\t\t6995,\n\t\t4874\n\t],\n\t\"./dalian.js\": [\n\t\t5169,\n\t\t9186\n\t],\n\t\"./delhi.js\": [\n\t\t3707,\n\t\t8719\n\t],\n\t\"./dongguan.js\": [\n\t\t3280,\n\t\t7206\n\t],\n\t\"./dortmund.js\": [\n\t\t6079,\n\t\t134\n\t],\n\t\"./edinburgh.js\": [\n\t\t285,\n\t\t9770\n\t],\n\t\"./eskisehir.js\": [\n\t\t1686,\n\t\t8189\n\t],\n\t\"./foshan.js\": [\n\t\t3204,\n\t\t9898\n\t],\n\t\"./frankfurt.js\": [\n\t\t2040,\n\t\t4447\n\t],\n\t\"./glasgow.js\": [\n\t\t4476,\n\t\t1847\n\t],\n\t\"./gothenburg.js\": [\n\t\t6801,\n\t\t6951\n\t],\n\t\"./guadalajara.js\": [\n\t\t9399,\n\t\t1392\n\t],\n\t\"./guangzhou.js\": [\n\t\t5841,\n\t\t5449\n\t],\n\t\"./hangzhou.js\": [\n\t\t3427,\n\t\t17\n\t],\n\t\"./hanoi.js\": [\n\t\t507,\n\t\t8237\n\t],\n\t\"./harbin.js\": [\n\t\t4826,\n\t\t886\n\t],\n\t\"./hochiminh.js\": [\n\t\t6770,\n\t\t4788\n\t],\n\t\"./hongkong.js\": [\n\t\t4243,\n\t\t3106\n\t],\n\t\"./istanbul.js\": [\n\t\t3107,\n\t\t4073\n\t],\n\t\"./jinan.js\": [\n\t\t5719,\n\t\t5303\n\t],\n\t\"./kansai.js\": [\n\t\t382,\n\t\t310\n\t],\n\t\"./kaohsiung.js\": [\n\t\t3037,\n\t\t5081\n\t],\n\t\"./klangvalley.js\": [\n\t\t137,\n\t\t1951\n\t],\n\t\"./kunming.js\": [\n\t\t8852,\n\t\t8183\n\t],\n\t\"./lima.js\": [\n\t\t9118,\n\t\t8140\n\t],\n\t\"./lisbon.js\": [\n\t\t8814,\n\t\t3417\n\t],\n\t\"./london.js\": [\n\t\t8087,\n\t\t3875\n\t],\n\t\"./macao.js\": [\n\t\t8015,\n\t\t425\n\t],\n\t\"./madrid.js\": [\n\t\t8020,\n\t\t7826\n\t],\n\t\"./milan.js\": [\n\t\t4410,\n\t\t2028\n\t],\n\t\"./munich.js\": [\n\t\t7368,\n\t\t9890\n\t],\n\t\"./nanjing.js\": [\n\t\t1664,\n\t\t5944\n\t],\n\t\"./newtaipei.js\": [\n\t\t9114,\n\t\t4737\n\t],\n\t\"./osaka.js\": [\n\t\t1064,\n\t\t3579\n\t],\n\t\"./oslo.js\": [\n\t\t8057,\n\t\t8975\n\t],\n\t\"./other.js\": [\n\t\t7642,\n\t\t1614\n\t],\n\t\"./paris.js\": [\n\t\t2720,\n\t\t5066\n\t],\n\t\"./qingdao.js\": [\n\t\t7994,\n\t\t2168\n\t],\n\t\"./rheinruhr.js\": [\n\t\t6870,\n\t\t743\n\t],\n\t\"./sanfrancisco.js\": [\n\t\t4747,\n\t\t8291\n\t],\n\t\"./sanktpeterburg.js\": [\n\t\t1832,\n\t\t8413\n\t],\n\t\"./santiago.js\": [\n\t\t2568,\n\t\t6195\n\t],\n\t\"./saopaulo.js\": [\n\t\t6956,\n\t\t441\n\t],\n\t\"./seoul.js\": [\n\t\t3266,\n\t\t6546\n\t],\n\t\"./shanghai.js\": [\n\t\t9656,\n\t\t5288\n\t],\n\t\"./shenyang.js\": [\n\t\t2266,\n\t\t3658\n\t],\n\t\"./shenzhen.js\": [\n\t\t4691,\n\t\t2194\n\t],\n\t\"./singapore.js\": [\n\t\t2459,\n\t\t1342\n\t],\n\t\"./stockholm.js\": [\n\t\t4606,\n\t\t7153\n\t],\n\t\"./suzhou.js\": [\n\t\t9819,\n\t\t5885\n\t],\n\t\"./taipei.js\": [\n\t\t9489,\n\t\t6977\n\t],\n\t\"./tehran.js\": [\n\t\t2573,\n\t\t7719\n\t],\n\t\"./tianjin.js\": [\n\t\t7942,\n\t\t9\n\t],\n\t\"./tokyo.js\": [\n\t\t3762,\n\t\t9450\n\t],\n\t\"./toronto.js\": [\n\t\t8148,\n\t\t1608\n\t],\n\t\"./tyneandwear.js\": [\n\t\t9314,\n\t\t2871\n\t],\n\t\"./vienna.js\": [\n\t\t5252,\n\t\t2832\n\t],\n\t\"./wuxi.js\": [\n\t\t4099,\n\t\t1902\n\t],\n\t\"./xiamen.js\": [\n\t\t4610,\n\t\t530\n\t],\n\t\"./xian.js\": [\n\t\t2591,\n\t\t7101\n\t],\n\t\"./zhengzhou.js\": [\n\t\t7357,\n\t\t4111\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 7827;\nmodule.exports = webpackAsyncContext;","import { CanvasType, RmgStyle, Theme } from '../constants/constants';\nimport React, { ReactNode, useEffect } from 'react';\nimport ErrorBoundary from '../error-boundary';\nimport { CircularProgress } from '@chakra-ui/react';\n\ninterface SvgWrapperProps {\n    type: CanvasType;\n    style: RmgStyle;\n    svgWidth: number;\n    svgHeight: number;\n    canvasScale: number;\n    theme: Theme;\n    children: ReactNode;\n}\n\nexport default function SvgWrapper(props: SvgWrapperProps) {\n    const { type, style, svgWidth, svgHeight, canvasScale, theme, children } = props;\n\n    useEffect(() => {\n        (document.getElementById('css_' + type) as HTMLLinkElement).href =\n            process.env.PUBLIC_URL + `/styles/${type}_${style}.css`;\n        return () => {\n            (document.getElementById('css_' + type) as HTMLLinkElement).href = '';\n        };\n    }, [style]);\n\n    return (\n        <svg\n            id={type}\n            xmlns=\"http://www.w3.org/2000/svg\"\n            xmlnsXlink=\"http://www.w3.org/1999/xlink\"\n            height={svgHeight * canvasScale}\n            viewBox={`0 0 ${svgWidth} ${svgHeight}`}\n            colorInterpolationFilters=\"sRGB\"\n            style={{\n                ['--rmg-svg-width' as any]: svgWidth + 'px',\n                ['--rmg-svg-height' as any]: svgHeight + 'px',\n                ['--rmg-theme-colour' as any]: theme[2],\n                ['--rmg-theme-fg' as any]: theme[3],\n            }}\n        >\n            <rect\n                id=\"canvas-bg\"\n                fill=\"white\"\n                style={{ height: 'var(--rmg-svg-height)', width: 'var(--rmg-svg-width)' }}\n            />\n            <React.Suspense fallback={<CircularProgress isIndeterminate />}>\n                <ErrorBoundary>{children}</ErrorBoundary>\n            </React.Suspense>\n            <rect\n                id=\"canvas-border\"\n                fill=\"none\"\n                strokeWidth={3}\n                stroke=\"none\"\n                style={{ height: 'var(--rmg-svg-height)', width: 'var(--rmg-svg-width)' }}\n            />\n        </svg>\n    );\n}\n","import React, { lazy, ReactNode, useEffect } from 'react';\nimport { CanvasType, RmgStyle } from '../constants/constants';\nimport { useAppSelector } from '../redux';\nimport SvgWrapper from './svg-wrapper';\nimport { useDispatch } from 'react-redux';\nimport { setStyle } from '../redux/param/action';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport { Flex } from '@chakra-ui/react';\n\nconst style = {\n    flexDirection: 'row',\n    overflowX: 'auto',\n    '&::before, &::after': {\n        content: '\"\"',\n        margin: 'auto',\n    },\n    '& > svg': {\n        flex: '0 0 auto',\n        border: '1px solid black',\n    },\n};\n\nexport default function SvgRouter() {\n    const location = useLocation();\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const { canvasToShow, canvasScale } = useAppSelector(state => state.app);\n    const { svgWidth: svgWidths, svg_height: svgHeight, style: rmgStyle, theme } = useAppSelector(state => state.param);\n\n    if (location.pathname !== '/' + rmgStyle && location.pathname !== '/v3/' + rmgStyle) {\n        const nextStyle = location.pathname.split('/').slice(-1)[0] as RmgStyle;\n        if (Object.values(RmgStyle).includes(nextStyle)) {\n            // set style in param\n            dispatch(setStyle(nextStyle));\n        } else {\n            // push route to match param's style\n            navigate(rmgStyle);\n        }\n    }\n\n    useEffect(() => {\n        (document.getElementById('css_share') as HTMLLinkElement).href =\n            process.env.PUBLIC_URL + `/styles/share_${rmgStyle}.css`;\n    }, [rmgStyle]);\n\n    const filteredCanvas = (Object.keys(canvasList[rmgStyle]) as CanvasType[]).filter(canvas =>\n        canvasToShow === 'all' ? true : canvasToShow === canvas\n    );\n\n    return (\n        <Flex sx={style}>\n            {filteredCanvas.map(canvas => (\n                <SvgWrapper\n                    key={canvas + rmgStyle}\n                    type={canvas}\n                    style={rmgStyle}\n                    svgWidth={svgWidths[canvas]}\n                    svgHeight={svgHeight}\n                    canvasScale={canvasScale}\n                    theme={theme}\n                >\n                    {canvasList[rmgStyle][canvas]}\n                </SvgWrapper>\n            ))}\n        </Flex>\n    );\n}\n\n// Canvas available\n\nconst RunInGZMTR = lazy(() => import(/* webpackChunkName: \"runinGZMTR\" */ './runin/runin-gzmtr'));\nconst RailMapGZMTR = lazy(() => import(/* webpackChunkName: \"railmapGZMTR\" */ './railmap/railmap-gzmtr'));\n\nconst DestinationMTR = lazy(() => import(/* webpackChunkName: \"destinationMTR\" */ './destination/destination-mtr'));\nconst RailMapMTR = lazy(() => import(/* webpackChunkName: \"railmapMTR\" */ './railmap/railmap-mtr'));\n\nconst DestinationSHMetro = lazy(\n    () => import(/* webpackChunkName: \"destinationSHMetro\" */ './destination/destination-shmetro')\n);\nconst RunInSHMetro = lazy(() => import(/* webpackChunkName: \"runinSHMetro\" */ './runin/runin-shmetro'));\nconst RailMapSHMetro = lazy(() => import(/* webpackChunkName: \"railmapSHMetro\" */ './railmap/railmap-shmetro'));\nconst IndoorSHMetro = lazy(() => import(/* webpackChunkName: \"indoorSHMetro\" */ './indoor/indoor-shmetro'));\n\n/**\n * Each value of this object is an object of ORDERED key-value pairs\n */\nconst canvasList: Record<RmgStyle, { [c in CanvasType]?: ReactNode }> = {\n    [RmgStyle.GZMTR]: {\n        [CanvasType.RunIn]: <RunInGZMTR />,\n        [CanvasType.RailMap]: <RailMapGZMTR />,\n    },\n    [RmgStyle.MTR]: {\n        [CanvasType.Destination]: <DestinationMTR />,\n        [CanvasType.RailMap]: <RailMapMTR />,\n    },\n    [RmgStyle.SHMetro]: {\n        [CanvasType.Destination]: <DestinationSHMetro />,\n        [CanvasType.RunIn]: <RunInSHMetro />,\n        [CanvasType.RailMap]: <RailMapSHMetro />,\n        [CanvasType.Indoor]: <IndoorSHMetro />,\n    },\n};\n","import React from 'react';\nimport { Box, Heading } from '@chakra-ui/react';\nimport { updateStationName, updateStationNum, updateStationSecondaryName } from '../../../redux/param/action';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function InfoSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const selectedStation = useAppSelector(state => state.app.selectedStation);\n    console.log('InfoSection:: Rendering for', selectedStation);\n    const style = useAppSelector(state => state.param.style);\n    const { num, name, secondaryName } = useAppSelector(state => state.param.stn_list[selectedStation]);\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.num'),\n            value: num,\n            placeholder: '01',\n            onChange: (value: string) => dispatch(updateStationNum(selectedStation, value)),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.zhName'),\n            value: name[0],\n            onChange: (value: string) => dispatch(updateStationName(selectedStation, [value, name[1]])),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.enName'),\n            value: name[1],\n            onChange: (value: string) => dispatch(updateStationName(selectedStation, [name[0], value])),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.zhSecondary'),\n            value: secondaryName ? secondaryName[0] : '',\n            placeholder: '1',\n            onChange: (value: string) =>\n                dispatch(updateStationSecondaryName(selectedStation, [value, secondaryName ? secondaryName[1] : ''])),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.info.enSecondary'),\n            value: secondaryName ? secondaryName[1] : '',\n            placeholder: 'Terminal 1',\n            onChange: (value: string) =>\n                dispatch(updateStationSecondaryName(selectedStation, [secondaryName ? secondaryName[0] : '', value])),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StationSidePanel.info.title')}\n            </Heading>\n\n            <RmgFields fields={fields} minW={100} />\n        </Box>\n    );\n}\n","import {\n    Box,\n    Button,\n    Flex,\n    Popover,\n    PopoverAnchor,\n    PopoverBody,\n    PopoverContent,\n    useOutsideClick,\n} from '@chakra-ui/react';\nimport { RmgDebouncedInput } from '@railmapgen/rmg-components';\nimport React, { ReactElement, useEffect, useRef, useState } from 'react';\n\ninterface RmgAutoCompleteProps<T> {\n    data: T[];\n    displayValue: (item: T) => string;\n    displayHandler?: (item: T) => ReactElement | string | number;\n    predicate: (item: T, input: string) => boolean;\n    defaultValue?: T;\n    onChange?: (item: T) => void;\n    isInvalid?: boolean; // inherit from chakra input\n}\n\nexport default function RmgAutoComplete<T extends { id: string }>(props: RmgAutoCompleteProps<T>) {\n    const { data, displayValue, displayHandler, predicate, defaultValue, onChange, isInvalid } = props;\n\n    const wrapperRef = useRef<HTMLDivElement>(null);\n    const [inputValue, setInputValue] = useState(defaultValue ? displayValue(defaultValue) : '');\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\n\n    useOutsideClick({ ref: wrapperRef, handler: () => setIsDropdownOpen(false) });\n\n    useEffect(\n        () => {\n            if (defaultValue) {\n                setInputValue(displayValue(defaultValue));\n            } else {\n                setInputValue('');\n            }\n        },\n        // force update input field when data is changed\n        // to prevent last selected text remains on the field if defaultValue are undefined before and after\n        [JSON.stringify(data), JSON.stringify(defaultValue)]\n    );\n\n    const handleSelect = (item: T) => {\n        setInputValue(displayValue(item));\n        setIsDropdownOpen(false);\n        onChange?.(item);\n    };\n\n    return (\n        <Box ref={wrapperRef}>\n            <Popover placement=\"bottom-start\" isOpen={isDropdownOpen} autoFocus={false}>\n                <PopoverAnchor>\n                    <RmgDebouncedInput\n                        defaultValue={inputValue}\n                        onDebouncedChange={val => setInputValue(val)}\n                        onFocus={() => setIsDropdownOpen(true)}\n                        isInvalid={isInvalid}\n                    />\n                </PopoverAnchor>\n\n                <PopoverContent w=\"unset\" minW={200}>\n                    <PopoverBody p={0}>\n                        <Flex direction=\"column\" maxH={270} overflowY=\"auto\">\n                            {data\n                                .filter(item => predicate(item, inputValue))\n                                .map(item => (\n                                    <Button\n                                        key={item.id}\n                                        size=\"sm\"\n                                        variant=\"ghost\"\n                                        justifyContent=\"flex-start\"\n                                        flexShrink={0}\n                                        role=\"menuitem\"\n                                        onClick={() => handleSelect(item)}\n                                    >\n                                        {displayHandler ? displayHandler(item) : displayValue(item)}\n                                    </Button>\n                                ))}\n                        </Flex>\n                    </PopoverBody>\n                </PopoverContent>\n            </Popover>\n        </Box>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { Image } from '@chakra-ui/react';\n\ninterface FlagSvgEmojiProps {\n    countryCode: string;\n    svgFilename?: string;\n}\n\nexport default function FlagSvgEmoji(props: FlagSvgEmojiProps) {\n    const { countryCode, svgFilename } = props;\n\n    const [src, setSrc] = useState<string | undefined>(undefined);\n\n    useEffect(() => {\n        if (svgFilename) {\n            import('@railmapgen/rmg-palette-resources/flags/' + svgFilename)\n                .then(module => module.default)\n                .then(setSrc)\n                .catch(err => console.error(`Failed to find SVG file ${svgFilename} as ${err?.message}`));\n        }\n    }, [svgFilename]);\n\n    return src ? <Image src={src} alt={`Flag of ${countryCode}`} h={17} mr={1} /> : <></>;\n}\n","import React from 'react';\nimport RmgAutoComplete from '../../common/rmg-auto-complete';\nimport { CityCode, CityEntry, cityList, countryList } from '@railmapgen/rmg-palette-resources';\nimport { LanguageCode } from '../../../constants/constants';\nimport { useTranslation } from 'react-i18next';\nimport FlagSvgEmoji from './flag-svg-emoji';\n\ninterface CityPickerProps {\n    defaultValueId?: CityCode;\n    onChange?: (val: CityCode) => void;\n}\n\nexport default function CityPicker(props: CityPickerProps) {\n    const { defaultValueId, onChange } = props;\n\n    const { i18n } = useTranslation();\n\n    const data = cityList;\n    const currentItem = defaultValueId ? data.find(item => item.id === defaultValueId) : undefined;\n\n    const displayValue = (item: CityEntry): string => {\n        return i18n.languages.map(lng => item.name[lng as LanguageCode]).find(name => name !== undefined)!!;\n    };\n\n    const displayHandler = (item: CityEntry) => {\n        const isCensorTWFlag =\n            item.country === 'TW' &&\n            [LanguageCode.ChineseSimp, LanguageCode.ChineseCN].includes(i18n.language as LanguageCode);\n        const isWindowsClient = ['Win32', 'Win64'].includes(navigator.platform);\n        // const isWindowsClient = true; // uncomment this line for Windows testing\n\n        const name = i18n.languages.map(lng => item.name[lng as LanguageCode]).find(name => name !== undefined);\n        const flagSvg = countryList.find(country => country.id === item.country)?.flagSvg;\n        const flagEmoji = countryList.find(country => country.id === item.country)?.flagEmoji;\n\n        return (\n            <>\n                {isCensorTWFlag ? (\n                    <span>&nbsp;</span>\n                ) : isWindowsClient ? (\n                    <FlagSvgEmoji countryCode={item.country} svgFilename={flagSvg} />\n                ) : (\n                    <span>{flagEmoji}&nbsp;</span>\n                )}\n                {name}\n            </>\n        );\n    };\n\n    const predicate = (item: CityEntry, input: string): boolean => {\n        return Object.values(item.name).some(name => name.includes(input));\n    };\n\n    return (\n        <RmgAutoComplete\n            data={data}\n            displayValue={displayValue}\n            displayHandler={displayHandler}\n            predicate={predicate}\n            defaultValue={currentItem}\n            onChange={item => onChange?.(item.id)}\n        />\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { ColourHex, LanguageCode, MonoColour, PaletteEntry } from '../../../constants/constants';\nimport RmgAutoComplete from '../../common/rmg-auto-complete';\nimport { CityCode } from '@railmapgen/rmg-palette-resources';\nimport { useTranslation } from 'react-i18next';\nimport { RmgLineBadge } from '@railmapgen/rmg-components';\n\nconst usePalette = (cityCode?: CityCode) => {\n    const [paletteList, setPaletteList] = useState<PaletteEntry[]>([]);\n\n    useEffect(() => {\n        import(/* webpackChunkName: \"palettes\" */ `@railmapgen/rmg-palette-resources/palettes/${cityCode}.js`)\n            .then(module => setPaletteList(module.default))\n            .catch(() => setPaletteList([]));\n    }, [cityCode]);\n\n    return paletteList;\n};\n\ninterface ColourPickerProps {\n    city?: CityCode;\n    defaultValueId?: string;\n    onChange?: (lineCode: string, bg: ColourHex, fg: MonoColour) => void;\n}\n\nexport default function ColourPicker(props: ColourPickerProps) {\n    const { city, defaultValueId, onChange } = props;\n\n    const { i18n } = useTranslation();\n\n    const paletteList = usePalette(city);\n\n    const currentItem = defaultValueId ? paletteList.find(palette => palette.id === defaultValueId) : undefined;\n\n    const displayValue = (item: PaletteEntry): string => {\n        return i18n.languages.map(lng => item.name[lng as LanguageCode]).find(name => name !== undefined)!!;\n    };\n\n    const displayHandler = (item: PaletteEntry) => {\n        const displayName = displayValue(item);\n\n        return <RmgLineBadge name={displayName} fg={item.fg || MonoColour.white} bg={item.colour} />;\n    };\n\n    const predicate = (item: PaletteEntry, input: string): boolean => {\n        return Object.values(item.name).some(name => name.includes(input));\n    };\n\n    return (\n        <RmgAutoComplete\n            data={paletteList}\n            displayValue={displayValue}\n            displayHandler={displayHandler}\n            predicate={predicate}\n            defaultValue={currentItem}\n            onChange={item => onChange?.(item.id, item.colour, item.fg || MonoColour.white)}\n        />\n    );\n}\n","import {\n    Button,\n    Icon,\n    Link,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n    Tab,\n    TabList,\n    TabPanel,\n    TabPanels,\n    Tabs,\n    Text,\n    VStack,\n} from '@chakra-ui/react';\nimport React, { useEffect, useState } from 'react';\nimport { ColourHex, MonoColour, Theme } from '../../../constants/constants';\nimport CityPicker from './city-picker';\nimport ColourPicker from './colour-picker';\nimport { CityCode } from '@railmapgen/rmg-palette-resources';\nimport { useTranslation } from 'react-i18next';\nimport { RmgFields, RmgFieldsField, RmgLineBadge } from '@railmapgen/rmg-components';\nimport { MdOpenInNew } from 'react-icons/md';\n\ninterface ColourModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    defaultTheme?: Theme;\n    onUpdate?: (theme: Theme) => void;\n}\n\nexport default function ColourModal(props: ColourModalProps) {\n    const { isOpen, onClose, defaultTheme, onUpdate } = props;\n\n    const { t } = useTranslation();\n\n    const [cityCode, setCityCode] = useState(defaultTheme?.[0]);\n    const [lineCode, setLineCode] = useState(defaultTheme?.[1]);\n    const [bgColour, setBgColour] = useState(defaultTheme?.[2] || '#AAAAAA');\n    const [fgColour, setFgColour] = useState(defaultTheme?.[3] || MonoColour.white);\n\n    useEffect(() => {\n        if (defaultTheme) {\n            setCityCode(defaultTheme[0]);\n            setLineCode(defaultTheme[1]);\n            setBgColour(defaultTheme[2]);\n            setFgColour(defaultTheme[3]);\n        }\n    }, [isOpen, defaultTheme?.toString()]);\n\n    const paletteFields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('ColourModal.city'),\n            component: (\n                <CityPicker\n                    defaultValueId={cityCode}\n                    onChange={value => {\n                        setCityCode(value);\n                        setLineCode(undefined);\n                        setBgColour('#AAAAAA');\n                        setFgColour(MonoColour.white);\n                    }}\n                />\n            ),\n        },\n        {\n            type: 'custom',\n            label: t('ColourModal.line'),\n            component: (\n                <ColourPicker\n                    city={cityCode}\n                    defaultValueId={lineCode}\n                    onChange={(line, bg, fg) => {\n                        setLineCode(line);\n                        setBgColour(bg);\n                        setFgColour(fg);\n                    }}\n                />\n            ),\n        },\n    ];\n\n    const customFields: RmgFieldsField[] = [\n        {\n            type: 'input',\n            label: t('ColourModal.bg'),\n            variant: 'color',\n            value: bgColour,\n            placeholder: '#F3D03E',\n            onChange: value => {\n                setCityCode(CityCode.Other);\n                setLineCode('other');\n                setBgColour(value as ColourHex);\n            },\n        },\n        {\n            type: 'select',\n            label: t('ColourModal.fg'),\n            value: fgColour,\n            options: {\n                [MonoColour.white]: t('ColourModal.white'),\n                [MonoColour.black]: t('ColourModal.black'),\n            },\n            onChange: value => {\n                setCityCode(CityCode.Other);\n                setLineCode('other');\n                setFgColour(value as MonoColour);\n            },\n        },\n    ];\n\n    const isSubmitEnabled = cityCode && lineCode && bgColour && fgColour;\n\n    const handleSubmit = () => {\n        if (isSubmitEnabled) {\n            onUpdate?.([cityCode, lineCode, bgColour, fgColour]);\n            onClose();\n        }\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('ColourModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <VStack>\n                        <RmgLineBadge name={t('ColourModal.example')} fg={fgColour} bg={bgColour} />\n\n                        <Tabs isFitted colorScheme=\"teal\" w=\"100%\" defaultIndex={cityCode === CityCode.Other ? 1 : 0}>\n                            <TabList>\n                                <Tab>{t('ColourModal.palette')}</Tab>\n                                <Tab>{t('ColourModal.custom')}</Tab>\n                            </TabList>\n\n                            <TabPanels>\n                                <TabPanel>\n                                    <RmgFields fields={paletteFields} />\n                                </TabPanel>\n                                <TabPanel>\n                                    <RmgFields fields={customFields} />\n                                </TabPanel>\n                            </TabPanels>\n                        </Tabs>\n                    </VStack>\n                </ModalBody>\n\n                <ModalFooter>\n                    <Text fontSize=\"sm\" marginRight={2}>\n                        {t('ColourModal.seeAll')}\n                        <Link color=\"teal.500\" href=\"/rmg-palette\" isExternal={true}>\n                            RMG Palette <Icon as={MdOpenInNew} />\n                        </Link>\n                    </Text>\n\n                    <Button colorScheme=\"teal\" onClick={handleSubmit} disabled={!isSubmitEnabled}>\n                        {t('ColourModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import { ColourHex } from '../constants/constants';\nimport { rmgChakraTheme } from '@railmapgen/rmg-components';\n\nexport default class ColourUtil {\n    private static hexToRgb(hex: ColourHex): [number, number, number] {\n        return [parseInt(hex.slice(1, 3), 16), parseInt(hex.slice(3, 5), 16), parseInt(hex.slice(5, 7), 16)];\n    }\n\n    public static fade(hex: ColourHex, alpha: number): `rgba(${string})` {\n        return `rgba(${[...this.hexToRgb(hex), alpha].join(',')})`;\n    }\n\n    public static euclideanDistance(hex1: ColourHex, hex2: ColourHex): number {\n        return this.hexToRgb(hex1).reduce((acc, cur, idx) => {\n            return acc + Math.pow(cur - this.hexToRgb(hex2)[idx], 2);\n        }, 0);\n    }\n}\n\nexport const findNearestColour = (hex: ColourHex): string => {\n    const colourDb: Record<string, Record<string, ColourHex> | ColourHex> = rmgChakraTheme.colors;\n\n    const [nearestColour] = Object.entries(colourDb).reduce(\n        (acc, cur) => {\n            if (cur[0].includes('Alpha') || cur[0] === 'current') {\n                return acc;\n            } else if (typeof cur[1] === 'string') {\n                const dist = ColourUtil.euclideanDistance(hex, cur[1]);\n                return dist < acc[1] ? [cur[0], dist] : acc;\n            } else {\n                const dist = ColourUtil.euclideanDistance(hex, cur[1]['600']);\n                return dist < acc[1] ? [cur[0], dist] : acc;\n            }\n        },\n        ['brand', Infinity]\n    );\n    return nearestColour;\n};\n","import React from 'react';\nimport ColourUtil from '../../theme/colour-util';\nimport { MdCircle } from 'react-icons/md';\nimport { IconButton } from '@chakra-ui/react';\nimport { Theme } from '../../constants/constants';\n\ninterface ThemeButtonProps {\n    theme: Theme;\n    onClick?: () => void;\n}\n\nexport default function ThemeButton(props: ThemeButtonProps) {\n    const { theme, onClick } = props;\n\n    return (\n        <IconButton\n            size=\"xs\"\n            aria-label=\"Theme colour\"\n            mt=\"0.45px\"\n            color={theme[3]}\n            bg={theme[2]}\n            _hover={{ bg: ColourUtil.fade(theme[2], 0.7) }}\n            icon={<MdCircle />}\n            onClick={onClick}\n        />\n    );\n}\n","import React, { useState } from 'react';\nimport { Box, HStack, IconButton, Text } from '@chakra-ui/react';\nimport { InterchangeInfo, MonoColour, Theme } from '../../../constants/constants';\nimport { MdAdd, MdContentCopy, MdDelete } from 'react-icons/md';\nimport ColourModal from '../../modal/colour-modal/colour-modal';\nimport { useTranslation } from 'react-i18next';\nimport { useAppSelector } from '../../../redux';\nimport ThemeButton from '../theme-button';\nimport { RmgCard, RmgFields, RmgFieldsField, RmgLabel } from '@railmapgen/rmg-components';\n\ninterface InterchangeCardProps {\n    interchangeList: InterchangeInfo[];\n    onAdd?: (info: InterchangeInfo) => void;\n    onDelete?: (index: number) => void;\n    onUpdate?: (index: number, info: InterchangeInfo) => void;\n}\n\nexport default function InterchangeCard(props: InterchangeCardProps) {\n    const { interchangeList, onAdd, onDelete, onUpdate } = props;\n\n    const { t } = useTranslation();\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n    const [selectedIndex, setSelectedIndex] = useState(0);\n\n    const theme = useAppSelector(state => state.param.theme);\n\n    const interchangeFields: RmgFieldsField[][] = interchangeList.map((it, i) => [\n        {\n            type: 'input',\n            label: t('StationSidePanel.interchange.zhName'),\n            value: it[4],\n            minW: '80px',\n            onChange: val => onUpdate?.(i, [it[0], it[1], it[2], it[3], val, it[5]]),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.interchange.enName'),\n            value: it[5],\n            minW: '80px',\n            onChange: val => onUpdate?.(i, [it[0], it[1], it[2], it[3], it[4], val]),\n        },\n    ]);\n\n    return (\n        <RmgCard direction=\"column\">\n            {interchangeList.length === 0 && (\n                <HStack spacing={0.5}>\n                    <Text as=\"i\" flex={1} align=\"center\" fontSize=\"md\" colorScheme=\"gray\">\n                        {t('StationSidePanel.interchange.noInterchanges')}\n                    </Text>\n\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        aria-label={t('StationSidePanel.interchange.add')}\n                        onClick={() => onAdd?.([theme[0], '', '#aaaaaa', MonoColour.white, '', ''])}\n                        icon={<MdAdd />}\n                    />\n                </HStack>\n            )}\n\n            {interchangeList.map((it, i) => (\n                <HStack key={i} spacing={0.5}>\n                    <RmgLabel label={t('StationSidePanel.interchange.colour')} minW=\"40px\" noLabel={i !== 0}>\n                        <ThemeButton\n                            theme={[it[0], it[1], it[2], it[3]]}\n                            onClick={() => {\n                                setIsModalOpen(true);\n                                setSelectedIndex(i);\n                            }}\n                        />\n                    </RmgLabel>\n\n                    <RmgFields fields={interchangeFields[i]} noLabel={i !== 0} />\n\n                    {onAdd && i === interchangeFields.length - 1 ? (\n                        <IconButton\n                            size=\"sm\"\n                            variant=\"ghost\"\n                            aria-label={t('StationSidePanel.interchange.copy')}\n                            onClick={() => onAdd?.(interchangeList.slice(-1)[0])} // duplicate last leg\n                            icon={<MdContentCopy />}\n                        />\n                    ) : (\n                        <Box minW={8} />\n                    )}\n\n                    {onDelete && (\n                        <IconButton\n                            size=\"sm\"\n                            variant=\"ghost\"\n                            aria-label={t('StationSidePanel.interchange.remove')}\n                            onClick={() => onDelete?.(i)}\n                            icon={<MdDelete />}\n                        />\n                    )}\n                </HStack>\n            ))}\n\n            <ColourModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                defaultTheme={interchangeList[selectedIndex]?.slice(0, 4) as Theme}\n                onUpdate={theme =>\n                    onUpdate?.(selectedIndex, [\n                        ...theme,\n                        interchangeList[selectedIndex][4],\n                        interchangeList[selectedIndex][5],\n                    ])\n                }\n            />\n        </RmgCard>\n    );\n}\n","import React, { Fragment } from 'react';\nimport { Button, Heading, VStack } from '@chakra-ui/react';\nimport { useAppSelector } from '../../../redux';\nimport InterchangeCard from './interchange-card';\nimport { useDispatch } from 'react-redux';\nimport {\n    addInterchange,\n    removeInterchange,\n    updateInterchange,\n    updateStationOsiName,\n} from '../../../redux/param/action';\nimport { InterchangeInfo, MonoColour } from '../../../constants/constants';\nimport { MdAdd } from 'react-icons/md';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function InterchangeSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const selectedStation = useAppSelector(state => state.app.selectedStation);\n    const theme = useAppSelector(state => state.param.theme);\n    const { transfer } = useAppSelector(state => state.param.stn_list[selectedStation]);\n\n    const getOSINameFields = (setIndex: number): RmgFieldsField[] => [\n        {\n            type: 'input',\n            label: t('StationSidePanel.interchange.stationZhName'),\n            value: transfer.osi_names[setIndex]?.[0],\n            onChange: value =>\n                dispatch(updateStationOsiName(selectedStation, setIndex, [value, transfer.osi_names[setIndex]?.[1]])),\n        },\n        {\n            type: 'input',\n            label: t('StationSidePanel.interchange.stationEnName'),\n            value: transfer.osi_names[setIndex]?.[1],\n            onChange: value =>\n                dispatch(updateStationOsiName(selectedStation, setIndex, [transfer.osi_names[setIndex]?.[0], value])),\n        },\n    ];\n\n    const handleAdd = (i: number) => (info: InterchangeInfo) => {\n        dispatch(addInterchange(selectedStation, i, info));\n    };\n\n    const handleDelete = (i: number) => (j: number) => {\n        dispatch(removeInterchange(selectedStation, i, j));\n    };\n\n    const handleUpdate = (i: number) => (j: number, info: InterchangeInfo) => {\n        dispatch(updateInterchange(selectedStation, i, j, info));\n    };\n\n    const handleAddInterchangeGroup = () => {\n        dispatch(\n            addInterchange(selectedStation, transfer.info.length, [theme[0], '', '#AAAAAA', MonoColour.white, '', ''])\n        );\n    };\n\n    return (\n        <VStack align=\"flex-start\" p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StationSidePanel.interchange.title')}\n            </Heading>\n\n            {transfer.info.map((infoList, i) => (\n                <Fragment key={i}>\n                    <Heading as=\"h6\" size=\"xs\">\n                        {i === 0\n                            ? t('StationSidePanel.interchange.within')\n                            : i === 1\n                            ? t('StationSidePanel.interchange.outStation')\n                            : t('StationSidePanel.interchange.outSystem')}\n                    </Heading>\n\n                    {i !== 0 && <RmgFields fields={getOSINameFields(i - 1)} />}\n\n                    <InterchangeCard\n                        interchangeList={infoList}\n                        onAdd={handleAdd(i)}\n                        onDelete={handleDelete(i)}\n                        onUpdate={handleUpdate(i)}\n                    />\n                </Fragment>\n            ))}\n\n            {transfer.info.length < 3 && (\n                <Button\n                    size=\"xs\"\n                    variant=\"ghost\"\n                    alignSelf=\"flex-end\"\n                    leftIcon={<MdAdd />}\n                    onClick={handleAddInterchangeGroup}\n                >\n                    {t('StationSidePanel.interchange.addGroup')}\n                </Button>\n            )}\n        </VStack>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport { Button, ButtonGroup } from '@chakra-ui/react';\n\ntype ButtonGroupSelection<T> = {\n    label: string;\n    value: T;\n    disabled?: boolean;\n};\n\ntype RmgButtonGroupSingleSelectProps<T> = {\n    selections: ButtonGroupSelection<T>[];\n    defaultValue: T;\n    onChange?: (value: T) => void;\n    multiSelect?: false;\n};\n\ntype RmgButtonGroupMultiSelectProps<T> = {\n    selections: ButtonGroupSelection<T>[];\n    defaultValue: T[];\n    onChange?: (value: T[]) => void;\n    multiSelect: true;\n};\n\ntype RmgButtonGroupProps<T> = RmgButtonGroupSingleSelectProps<T> | RmgButtonGroupMultiSelectProps<T>;\n\nexport default function RmgButtonGroup<T extends string | boolean>(props: RmgButtonGroupProps<T>) {\n    const { selections, defaultValue, onChange, multiSelect } = props;\n\n    const [value, setValue] = useState(defaultValue);\n\n    useEffect(() => {\n        defaultValue.toString() && setValue(defaultValue);\n    }, [defaultValue.toString()]);\n\n    const handleToggle = (val: T) => {\n        if (multiSelect) {\n            const prevValue = value as T[];\n            const nextValue = prevValue.includes(val) ? prevValue.filter(v => v !== val) : [...prevValue, val];\n\n            setValue(nextValue);\n            (onChange as RmgButtonGroupMultiSelectProps<T>['onChange'])?.(nextValue);\n        } else {\n            setValue(val);\n            (onChange as RmgButtonGroupSingleSelectProps<T>['onChange'])?.(val);\n        }\n    };\n\n    return (\n        <ButtonGroup size=\"xs\" isAttached colorScheme=\"teal\" variant=\"outline\">\n            {selections.map((selection, i) => {\n                const isSelected =\n                    (typeof value === 'object' && value.includes(selection.value)) || value === selection.value;\n\n                // TODO: fix overlapped/missing border\n                const mr = i !== selections.length - 1 && !isSelected ? '-px' : undefined;\n\n                return (\n                    <Button\n                        key={selection.value.toString()}\n                        variant={isSelected ? 'solid' : 'outline'}\n                        mr={mr}\n                        isDisabled={selection.disabled}\n                        onClick={() => handleToggle(selection.value)}\n                    >\n                        {selection.label}\n                    </Button>\n                );\n            })}\n        </ButtonGroup>\n    );\n}\n\ninterface RmgBooleanButtonGroupProps {\n    defaultValue: boolean;\n    onChange?: (value: boolean) => void;\n}\n\nexport const RmgBooleanButtonGroup = (props: RmgBooleanButtonGroupProps) => {\n    const selections = [\n        {\n            label: 'Yes',\n            value: true,\n        },\n        {\n            label: 'No',\n            value: false,\n        },\n    ];\n\n    return <RmgButtonGroup selections={selections} {...props} />;\n};\n","import { Box, Heading } from '@chakra-ui/react';\nimport React from 'react';\nimport RmgButtonGroup from '../../common/rmg-button-group';\nimport { useAppSelector } from '../../../redux';\nimport { Facilities, RmgStyle, Services } from '../../../constants/constants';\nimport { useDispatch } from 'react-redux';\nimport { updateStationFacility, updateStationLoopPivot, updateStationServices } from '../../../redux/param/action';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function MoreSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const selectedStation = useAppSelector(state => state.app.selectedStation);\n    const style = useAppSelector(state => state.param.style);\n    const { services, facility, loop_pivot } = useAppSelector(state => state.param.stn_list[selectedStation]);\n\n    const serviceSelections = Object.values(Services).map(service => {\n        return {\n            label: t('StationSidePanel.more.' + service),\n            value: service,\n            disabled: service === Services.local && style !== RmgStyle.SHMetro,\n        };\n    });\n\n    const mtrFacilityOptions = {\n        [Facilities.none]: t('StationSidePanel.more.none'),\n        [Facilities.airport]: t('StationSidePanel.more.airport'),\n        [Facilities.hsr]: t('StationSidePanel.more.hsr'),\n        [Facilities.disney]: t('StationSidePanel.more.disney'),\n    };\n\n    const shmetroFacilityOptions = {\n        [Facilities.none]: t('StationSidePanel.more.none'),\n        [Facilities.airport]: t('StationSidePanel.more.airport'),\n        [Facilities.railway]: t('StationSidePanel.more.railway'),\n        [Facilities.disney]: t('StationSidePanel.more.disney'),\n    };\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('StationSidePanel.more.service'),\n            component: (\n                <RmgButtonGroup\n                    selections={serviceSelections}\n                    defaultValue={services}\n                    onChange={services => dispatch(updateStationServices(selectedStation, services))}\n                    multiSelect\n                />\n            ),\n            hidden: ![RmgStyle.GZMTR, RmgStyle.SHMetro].includes(style),\n        },\n        {\n            type: 'select',\n            label: t('StationSidePanel.more.facility'),\n            value: facility,\n            options: style === RmgStyle.MTR ? mtrFacilityOptions : shmetroFacilityOptions,\n            onChange: value => dispatch(updateStationFacility(selectedStation, value as Facilities)),\n            hidden: ![RmgStyle.MTR, RmgStyle.SHMetro].includes(style),\n        },\n        {\n            type: 'switch',\n            label: t('StationSidePanel.more.pivot'),\n            isChecked: loop_pivot,\n            onChange: checked => dispatch(updateStationLoopPivot(selectedStation, checked)),\n            hidden: ![RmgStyle.SHMetro].includes(style),\n            minW: 'full',\n            oneLine: true,\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StationSidePanel.more.title')}\n            </Heading>\n\n            <RmgFields fields={fields} />\n        </Box>\n    );\n}\n","import { Box, Heading, Text } from '@chakra-ui/react';\nimport React from 'react';\nimport { BranchStyle, Direction } from '../../../constants/constants';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from '../../../redux';\nimport {\n    flipStationBranchPosition,\n    updateStationBranchFirstStation,\n    updateStationBranchType,\n} from '../../../redux/param/action';\nimport { RmgCard, RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function BranchSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const selectedStation = useAppSelector(state => state.app.selectedStation);\n    const stationList = useAppSelector(state => state.param.stn_list);\n    const { parents, children, branch } = stationList[selectedStation];\n\n    const branchOptions = {\n        [BranchStyle.through]: t('StationSidePanel.branch.through'),\n        [BranchStyle.nonThrough]: t('StationSidePanel.branch.nonThrough'),\n    };\n\n    const getFirstStationOptions = (direction: Direction) => {\n        return (direction === Direction.left ? parents : children).reduce<Record<string, string>>(\n            (acc, cur) => ({ ...acc, [cur]: stationList[cur].name.join(' ') }),\n            {}\n        );\n    };\n\n    const positionOptions = {\n        upper: t('StationSidePanel.branch.upper'),\n        lower: t('StationSidePanel.branch.lower'),\n    };\n\n    const getFields = (direction: Direction): RmgFieldsField[] => {\n        if (branch[direction].length) {\n            return [\n                {\n                    type: 'select',\n                    label: t('StationSidePanel.branch.type'),\n                    options: branchOptions,\n                    value: branch[direction][0],\n                    onChange: value =>\n                        dispatch(updateStationBranchType(selectedStation, direction, value as BranchStyle)),\n                },\n                {\n                    type: 'select',\n                    label: t('StationSidePanel.branch.firstStation'),\n                    options: getFirstStationOptions(direction),\n                    value: branch[direction][1],\n                    onChange: value =>\n                        dispatch(updateStationBranchFirstStation(selectedStation, direction, value as string)),\n                },\n                {\n                    type: 'select',\n                    label: t('StationSidePanel.branch.position'),\n                    options: positionOptions,\n                    value:\n                        (direction === Direction.left ? parents : children).indexOf(branch[direction][1]!) === 0\n                            ? 'upper'\n                            : 'lower',\n                    onChange: () => dispatch(flipStationBranchPosition(selectedStation, direction)),\n                },\n            ];\n        } else {\n            return [];\n        }\n    };\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StationSidePanel.branch.title')}\n            </Heading>\n\n            <Heading as=\"h6\" size=\"xs\">\n                {t('StationSidePanel.branch.left')}\n            </Heading>\n\n            <RmgCard direction=\"column\">\n                {parents.length === 2 ? (\n                    <RmgFields fields={getFields(Direction.left)} />\n                ) : (\n                    <Text as=\"i\" flex={1} align=\"center\" fontSize=\"md\" colorScheme=\"gray\">\n                        {t('StationSidePanel.branch.noBranch')}\n                    </Text>\n                )}\n            </RmgCard>\n\n            <Heading as=\"h6\" size=\"xs\">\n                {t('StationSidePanel.branch.left')}\n            </Heading>\n\n            <RmgCard direction=\"column\">\n                {children.length === 2 ? (\n                    <RmgFields fields={getFields(Direction.right)} />\n                ) : (\n                    <Text as=\"i\" flex={1} align=\"center\" fontSize=\"md\" colorScheme=\"gray\">\n                        {t('StationSidePanel.branch.noBranch')}\n                    </Text>\n                )}\n            </RmgCard>\n        </Box>\n    );\n}\n","import { Divider } from '@chakra-ui/react';\nimport React from 'react';\nimport InfoSection from './info-section';\nimport InterchangeSection from './interchange-section';\nimport MoreSection from './more-section';\nimport BranchSection from './branch-section';\nimport { RmgSidePanelBody } from '@railmapgen/rmg-components';\n\nexport default function StationSidePanel() {\n    return (\n        <RmgSidePanelBody>\n            <InfoSection />\n\n            <Divider />\n\n            <InterchangeSection />\n\n            <Divider />\n\n            <BranchSection />\n\n            <Divider />\n\n            <MoreSection />\n        </RmgSidePanelBody>\n    );\n}\n","import React from 'react';\nimport { Box, Heading } from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from '../../../redux';\nimport { canvasConfig, RmgStyle } from '../../../constants/constants';\nimport {\n    setBranchSpacing,\n    setDirectionIndicatorX,\n    setDirectionIndicatorY,\n    setPaddingPercentage,\n    setSvgHeight,\n    setSvgWidth,\n    setYPercentage,\n} from '../../../redux/param/action';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\n\nexport default function LayoutSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const {\n        style: rmgStyle,\n        svgWidth,\n        svg_height,\n        y_pc,\n        branch_spacing,\n        padding,\n        direction_gz_x,\n        direction_gz_y,\n    } = useAppSelector(state => state.param);\n\n    const fields: RmgFieldsField[] = [\n        ...canvasConfig[rmgStyle].map<RmgFieldsField>(canvas => ({\n            type: 'input',\n            label: t(`StyleSidePanel.layout.${canvas}Width`),\n            value: svgWidth[canvas].toString(),\n            onChange: val => dispatch(setSvgWidth(Number(val), canvas)),\n        })),\n        {\n            type: 'input',\n            label: t('StyleSidePanel.layout.canvasHeight'),\n            value: svg_height.toString(),\n            onChange: val => dispatch(setSvgHeight(Number(val))),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.verticalPosition'),\n            value: y_pc,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setYPercentage(val)),\n            hidden: ![RmgStyle.MTR, RmgStyle.GZMTR].includes(rmgStyle),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.branchSpacing'),\n            value: branch_spacing,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setBranchSpacing(val)),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.padding'),\n            value: padding,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setPaddingPercentage(val)),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.directionGzX'),\n            value: direction_gz_x,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setDirectionIndicatorX(val)),\n            hidden: ![RmgStyle.GZMTR].includes(rmgStyle),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.layout.directionGzY'),\n            value: direction_gz_y,\n            min: 0,\n            max: 100,\n            onChange: val => dispatch(setDirectionIndicatorY(val)),\n            hidden: ![RmgStyle.GZMTR].includes(rmgStyle),\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.layout.title')}\n            </Heading>\n\n            <RmgFields fields={fields} minW={100} />\n        </Box>\n    );\n}\n","import React, { useState } from 'react';\nimport { Box, Button, Heading, HStack } from '@chakra-ui/react';\nimport { useAppSelector } from '../../../redux';\nimport ThemeButton from '../theme-button';\nimport ColourModal from '../../modal/colour-modal/colour-modal';\nimport { useDispatch } from 'react-redux';\nimport {\n    customiseDestinationName,\n    flipStationNames,\n    setDirection,\n    setLineName,\n    setLineNum,\n    setPanelType,\n    setPlatform,\n    setPsdNum,\n    setTheme,\n    staggerStationNames,\n    toggleLineNameBeforeDestination,\n} from '../../../redux/param/action';\nimport RmgButtonGroup from '../../common/rmg-button-group';\nimport { PanelTypeGZMTR, PanelTypeShmetro, RmgStyle, ShortDirection } from '../../../constants/constants';\nimport { MdSwapVert } from 'react-icons/md';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function DesignSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const {\n        style,\n        theme,\n        line_name: lineName,\n        line_num: lineNum,\n        direction,\n        platform_num: platformNum,\n        psd_num: psdNum,\n        namePosMTR,\n        customiseMTRDest,\n        info_panel_type,\n    } = useAppSelector(state => state.param);\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    const directionSelections = [\n        {\n            label: t('StyleSidePanel.design.left'),\n            value: ShortDirection.left,\n        },\n        {\n            label: t('StyleSidePanel.design.right'),\n            value: ShortDirection.right,\n        },\n    ];\n\n    const panelTypeGZMTROptions = Object.values(PanelTypeGZMTR).reduce<Record<string, string>>(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: t('StyleSidePanel.design.' + cur),\n        }),\n        {}\n    );\n\n    const panelTypeSHMetroOptions = Object.values(PanelTypeShmetro).reduce<Record<string, string>>(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: t('StyleSidePanel.design.' + cur),\n        }),\n        {}\n    );\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('StyleSidePanel.design.colour'),\n            component: <ThemeButton theme={theme} onClick={() => setIsModalOpen(true)} />,\n            minW: '40px',\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.zhLineName'),\n            value: lineName[0],\n            onChange: value => dispatch(setLineName([value, lineName[1]])),\n            minW: '115px',\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.enLineName'),\n            value: lineName[1],\n            onChange: value => dispatch(setLineName([lineName[0], value])),\n            minW: '115px',\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.lineNum'),\n            value: lineNum,\n            onChange: value => dispatch(setLineNum(value)),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.platformNum'),\n            value: platformNum || '',\n            onChange: value => dispatch(setPlatform(value)),\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.psdNum'),\n            value: psdNum,\n            onChange: value => dispatch(setPsdNum(value)),\n            hidden: ![RmgStyle.GZMTR].includes(style),\n        },\n        {\n            type: 'select',\n            label: t('StyleSidePanel.design.panelType'),\n            value: info_panel_type,\n            options: style === RmgStyle.GZMTR ? panelTypeGZMTROptions : panelTypeSHMetroOptions,\n            onChange: value => dispatch(setPanelType(value as PanelTypeGZMTR | PanelTypeShmetro)),\n            hidden: ![RmgStyle.GZMTR, RmgStyle.SHMetro].includes(style),\n        },\n        {\n            type: 'custom',\n            label: t('StyleSidePanel.design.direction'),\n            component: (\n                <RmgButtonGroup\n                    selections={directionSelections}\n                    defaultValue={direction}\n                    onChange={nextDirection => dispatch(setDirection(nextDirection))}\n                />\n            ),\n            minW: 'full',\n            oneLine: true,\n        },\n    ];\n\n    const staggerNameSelections = [\n        {\n            label: t('StyleSidePanel.design.alternatively'),\n            value: true,\n        },\n        {\n            label: t('StyleSidePanel.design.onOneSide'),\n            value: false,\n        },\n    ];\n\n    const mtrSpecifiedFields: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: t('StyleSidePanel.design.nameDisplay'),\n            component: (\n                <HStack>\n                    <RmgButtonGroup\n                        selections={staggerNameSelections}\n                        defaultValue={namePosMTR.isStagger}\n                        onChange={value => dispatch(staggerStationNames(value))}\n                    />\n                    <Button\n                        size=\"xs\"\n                        variant=\"ghost\"\n                        leftIcon={<MdSwapVert />}\n                        onClick={() => dispatch(flipStationNames())}\n                    >\n                        {t('StyleSidePanel.design.flip')}\n                    </Button>\n                </HStack>\n            ),\n            minW: 'full',\n            oneLine: true,\n            hidden: ![RmgStyle.MTR].includes(style),\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.design.legacyDestination'),\n            isChecked: customiseMTRDest.isLegacy,\n            onChange: checked => dispatch(toggleLineNameBeforeDestination(checked)),\n            hidden: ![RmgStyle.MTR].includes(style),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.design.overrideTerminal'),\n            isChecked: customiseMTRDest.terminal !== false,\n            onChange: checked => dispatch(customiseDestinationName(checked ? ['', ''] : false)),\n            hidden: ![RmgStyle.MTR].includes(style),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.terminalZhName'),\n            value: customiseMTRDest.terminal ? customiseMTRDest.terminal[0] : '',\n            placeholder: '',\n            onChange: value =>\n                dispatch(\n                    customiseDestinationName([value, customiseMTRDest.terminal ? customiseMTRDest.terminal[1] : ''])\n                ),\n            hidden: ![RmgStyle.MTR].includes(style) || customiseMTRDest.terminal === false,\n        },\n        {\n            type: 'input',\n            label: t('StyleSidePanel.design.terminalEnName'),\n            value: customiseMTRDest.terminal ? customiseMTRDest.terminal[1] : '',\n            placeholder: 'Airport and AsiaWorld-Expo',\n            onChange: value =>\n                dispatch(\n                    customiseDestinationName([customiseMTRDest.terminal ? customiseMTRDest.terminal[0] : '', value])\n                ),\n            hidden: ![RmgStyle.MTR].includes(style) || customiseMTRDest.terminal === false,\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.design.title')}\n            </Heading>\n\n            <RmgFields fields={[...fields, ...mtrSpecifiedFields]} minW=\"110px\" />\n\n            <ColourModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                defaultTheme={theme}\n                onUpdate={nextTheme => dispatch(setTheme(nextTheme))}\n            />\n        </Box>\n    );\n}\n","import React from 'react';\nimport { Box, Heading } from '@chakra-ui/react';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from '../../../redux';\nimport { setLoop, setLoopBank, setLoopLeftAndRightFactor, setLoopBottomFactor } from '../../../redux/param/action';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\nexport default function LoopSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const { branches } = useAppSelector(state => state.helper);\n    const { loop, loop_info } = useAppSelector(state => state.param);\n    const { bank, left_and_right_factor, bottom_factor } = loop_info;\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.loop.isLoop'),\n            isChecked: loop,\n            onChange: checked => dispatch(setLoop(checked)),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.loop.isBank'),\n            isChecked: bank,\n            isDisabled: true,\n            onChange: checked => dispatch(setLoopBank(checked)),\n            minW: 'full',\n            oneLine: true,\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.loop.leftRightFactor'),\n            value: left_and_right_factor,\n            min: 0,\n            max: Math.floor((branches[0].length - bottom_factor * 2) / 2),\n            onChange: val => dispatch(setLoopLeftAndRightFactor(Math.floor(val))),\n            hidden: !loop,\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.loop.bottomFactor'),\n            value: bottom_factor,\n            min: 1,\n            max: Math.floor((branches[0].length - left_and_right_factor * 2) / 2),\n            onChange: val => dispatch(setLoopBottomFactor(Math.floor(val))),\n            hidden: !loop,\n        },\n    ];\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.loop.title')}\n            </Heading>\n\n            <RmgFields fields={fields} />\n        </Box>\n    );\n}\n","import React from 'react';\nimport { HStack, IconButton } from '@chakra-ui/react';\nimport { Note } from '../../../constants/constants';\nimport { MdDelete } from 'react-icons/md';\nimport { RmgCard, RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\ninterface GZMTRNoteCardProps {\n    note: Note;\n    onUpdate?: (value: Note) => void;\n    onDelete?: () => void;\n}\n\nexport default function GZMTRNoteCard(props: GZMTRNoteCardProps) {\n    const { note, onUpdate, onDelete } = props;\n    const { t } = useTranslation();\n\n    const fields1: RmgFieldsField[] = [\n        {\n            type: 'textarea',\n            label: t('StyleSidePanel.note.zhNote'),\n            value: note[0],\n            onChange: value => onUpdate?.([value, note[1], note[2], note[3], note[4]]),\n        },\n        {\n            type: 'textarea',\n            label: t('StyleSidePanel.note.enNote'),\n            value: note[1],\n            onChange: value => onUpdate?.([note[0], value, note[2], note[3], note[4]]),\n        },\n        {\n            type: 'switch',\n            label: t('StyleSidePanel.note.border'),\n            isChecked: note[4],\n            onChange: value => onUpdate?.([note[0], note[1], note[2], note[3], value]),\n            oneLine: true,\n        },\n    ];\n\n    const fields2: RmgFieldsField[] = [\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.note.positionX'),\n            value: note[2],\n            min: 0,\n            max: 100,\n            onChange: value => onUpdate?.([note[0], note[1], value, note[3], note[4]]),\n        },\n        {\n            type: 'slider',\n            label: t('StyleSidePanel.note.positionY'),\n            value: note[3],\n            min: 0,\n            max: 100,\n            onChange: value => onUpdate?.([note[0], note[1], note[2], value, note[4]]),\n        },\n    ];\n\n    return (\n        <RmgCard direction=\"column\">\n            <RmgFields fields={fields1} minW=\"full\" />\n            <HStack spacing={0.5}>\n                <RmgFields fields={fields2} />\n\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label={t('StyleSidePanel.note.remove')}\n                    onClick={() => onDelete?.()}\n                    icon={<MdDelete />}\n                />\n            </HStack>\n        </RmgCard>\n    );\n}\n","import React from 'react';\nimport { Box, Button, Heading, VStack } from '@chakra-ui/react';\nimport GZMTRNoteCard from './gzmtr-note-card';\nimport { addNote, removeNote, updateNote } from '../../../redux/param/action';\nimport { MdAdd } from 'react-icons/md';\nimport { useAppSelector } from '../../../redux';\nimport { useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nexport default function GZMTRNoteSection() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const notesGZMTR = useAppSelector(state => state.param.notesGZMTR);\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('StyleSidePanel.note.title')}\n            </Heading>\n\n            <VStack spacing={0.5}>\n                {notesGZMTR.map((note, i) => (\n                    <GZMTRNoteCard\n                        key={i}\n                        note={note}\n                        onUpdate={value => dispatch(updateNote(i, value))}\n                        onDelete={() => dispatch(removeNote(i))}\n                    />\n                ))}\n\n                <Button\n                    size=\"xs\"\n                    variant=\"ghost\"\n                    leftIcon={<MdAdd />}\n                    alignSelf=\"flex-end\"\n                    onClick={() => dispatch(addNote())}\n                >\n                    {t('StyleSidePanel.note.add')}\n                </Button>\n            </VStack>\n        </Box>\n    );\n}\n","import { Divider } from '@chakra-ui/react';\nimport React from 'react';\nimport { useAppSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport LayoutSection from './layout-section';\nimport DesignSection from './design-section';\nimport LoopSection from './loop-section';\nimport { RmgSidePanelBody } from '@railmapgen/rmg-components';\nimport GZMTRNoteSection from './gzmtr-note-section';\n\nexport default function StyleSidePanel() {\n    const { style } = useAppSelector(state => state.param);\n\n    return (\n        <RmgSidePanelBody>\n            <LayoutSection />\n\n            <Divider />\n\n            <DesignSection />\n\n            {style === RmgStyle.GZMTR && (\n                <>\n                    <Divider />\n\n                    <GZMTRNoteSection />\n                </>\n            )}\n\n            {style === RmgStyle.SHMetro && (\n                <>\n                    <Divider />\n\n                    <LoopSection />\n                </>\n            )}\n        </RmgSidePanelBody>\n    );\n}\n","import { StationDict } from './constants/constants';\n\n/**\n * Vertical position (in shares) of station icon if using MTR style (for consistency of method `RMGLine.newStnPossibleLoc()`).\n */\nexport const getYShareMTR = (stnId: string, stnList: StationDict): -1 | 0 | 1 => {\n    if (\n        ['linestart', 'lineend'].includes(stnId) ||\n        stnList[stnId].parents.length > 1 ||\n        stnList[stnId].children.length > 1\n    ) {\n        return 0;\n    }\n    var stnPred = stnList[stnId].parents[0];\n    if (stnPred) {\n        // parent exist\n        if (stnList[stnPred].children.length === 1) {\n            // no sibling, then y same as parent\n            return getYShareMTR(stnPred, stnList);\n        } else {\n            // sibling exists, then y depends on its idx of being children\n            return stnList[stnPred].children.indexOf(stnId) === 0 ? 1 : -1;\n        }\n    } else {\n        // no parent, must be linestart\n        return 0;\n    }\n};\n","import React, { RefObject } from 'react';\nimport {\n    AlertDialog,\n    AlertDialogBody,\n    AlertDialogContent,\n    AlertDialogFooter,\n    AlertDialogHeader,\n    AlertDialogOverlay,\n    Button,\n} from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\n\ninterface RemoveConfirmModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    cancelRef?: RefObject<HTMLButtonElement>;\n    onConfirm: () => void;\n}\n\nexport default function RemoveConfirmModal(props: RemoveConfirmModalProps) {\n    const { isOpen, onClose, cancelRef, onConfirm } = props;\n    const { t } = useTranslation();\n\n    return (\n        <AlertDialog isOpen={isOpen} leastDestructiveRef={cancelRef} onClose={onClose}>\n            <AlertDialogOverlay>\n                <AlertDialogContent>\n                    <AlertDialogHeader fontSize=\"lg\" fontWeight=\"bold\">\n                        {t('RemoveConfirmModal.title')}\n                    </AlertDialogHeader>\n\n                    <AlertDialogBody>Are you sure to remove station? You cannot undo this action.</AlertDialogBody>\n\n                    <AlertDialogFooter>\n                        <Button ref={cancelRef} onClick={onClose}>\n                            {t('RemoveConfirmModal.cancel')}\n                        </Button>\n                        <Button colorScheme=\"teal\" onClick={onConfirm} ml={3}>\n                            {t('RemoveConfirmModal.confirm')}\n                        </Button>\n                    </AlertDialogFooter>\n                </AlertDialogContent>\n            </AlertDialogOverlay>\n        </AlertDialog>\n    );\n}\n","import { Button, HStack } from '@chakra-ui/react';\nimport { RmgSidePanelFooter } from '@railmapgen/rmg-components';\nimport React, { useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { removeInvalidColineOnRemoveStation } from '../../../redux/param/coline-action';\nimport { checkStationCouldBeRemoved, removeStation } from '../../../redux/param/remove-station-action';\nimport { useAppSelector } from '../../../redux';\nimport { setGlobalAlert, setSelectedStation, setSidePanelMode } from '../../../redux/app/action';\nimport RemoveConfirmModal from '../../modal/remove-confirm-modal';\nimport { setCurrentStation } from '../../../redux/param/action';\nimport { SidePanelMode } from '../../../constants/constants';\nimport { useTranslation } from 'react-i18next';\n\nexport default function StationSidePanelFooter() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const selectedStation = useAppSelector(state => state.app.selectedStation);\n\n    const [isRemoveModalOpen, setIsRemoveModalOpen] = useState(false);\n\n    const handleDelete = () => {\n        if (dispatch(checkStationCouldBeRemoved(selectedStation))) {\n            // close side panel\n            dispatch(setSidePanelMode(SidePanelMode.CLOSE));\n\n            // reset selected station\n            dispatch(setSelectedStation('linestart'));\n\n            dispatch(removeInvalidColineOnRemoveStation(selectedStation));\n            dispatch(removeStation(selectedStation));\n            setIsRemoveModalOpen(false);\n        } else {\n            dispatch(setGlobalAlert({ status: 'error', message: t('StationSidePanel.footer.errorOnRemove') }));\n        }\n    };\n\n    return (\n        <RmgSidePanelFooter>\n            <HStack>\n                <Button size=\"sm\" variant=\"outline\" onClick={() => dispatch(setCurrentStation(selectedStation))}>\n                    {t('StationSidePanel.footer.current')}\n                </Button>\n                <Button size=\"sm\" variant=\"outline\" onClick={() => setIsRemoveModalOpen(true)}>\n                    {t('StationSidePanel.footer.remove')}\n                </Button>\n            </HStack>\n\n            <RemoveConfirmModal\n                isOpen={isRemoveModalOpen}\n                onClose={() => setIsRemoveModalOpen(false)}\n                onConfirm={handleDelete}\n            />\n        </RmgSidePanelFooter>\n    );\n}\n","import { AppDispatch, RootState } from '../index';\nimport { getYShareMTR } from '../../methods';\nimport { StationDict } from '../../constants/constants';\nimport { setStationsBulk } from './action';\n\n/**\n * Return false when current algo can not handle this kind of station removal.\n * MUST BE CALLED AND CHECKED BEFORE removeStation!!!\n */\nexport const checkStationCouldBeRemoved = (stationId: string) => {\n    return (dispatch: AppDispatch, getState: () => RootState): boolean => {\n        const stationList = getState().param.stn_list;\n\n        const { parents, children } = stationList[stationId];\n\n        if (Object.keys(stationList).length === 4) {\n            console.log('removeStation():: failed as only 2 stations remaining');\n            return false;\n        } else if (parents.length === 2 && children.length === 2) {\n            // Todo: rewrite, join two branches rather than reject?\n            console.log('removeStation():: failed as branches on both sides cannot be combined');\n            return false;\n        }\n\n        // reject if station is the last one on main branch\n        const isNotLastMainBranchStn = Object.keys(stationList).some(\n            id => ![stationId, 'linestart', 'lineend'].includes(id) && getYShareMTR(id, stationList) === 0\n        );\n        if (!isNotLastMainBranchStn) {\n            console.log('removeStation():: failed as selected station is the only station without siblings');\n            return false;\n        }\n\n        return true;\n    };\n};\n\nexport const removeStation = (stationId: string) => {\n    // checkStationCouldBeRemoved BEFORE removeStation!!!\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const stationList = getState().param.stn_list;\n        const { parents, children } = stationList[stationId];\n\n        let newStnList = JSON.parse(JSON.stringify(stationList)) as StationDict;\n\n        if (parents.length === 2 || children.length === 2) {\n            /**\n             * stn1 - stn2 - stn3\n             *         ^   \\\n             *               stn4\n             */\n            parents.forEach(parId => {\n                newStnList[parId].children = children;\n            });\n            children.forEach(childId => {\n                newStnList[childId].parents = parents;\n            });\n            if (parents.length === 1) {\n                newStnList[parents[0]].branch.right = newStnList[stationId].branch.right;\n            }\n            if (children.length === 1) {\n                newStnList[children[0]].branch.left = newStnList[stationId].branch.left;\n            }\n        } else if (stationList[parents[0]].children.length === 2 && stationList[children[0]].parents.length === 2) {\n            /**\n             * stn1 -     stn2    - stn3\n             *      \\      ^      /\n             *        stn4 - stn5\n             */\n            newStnList = {\n                ...stationList,\n                [parents[0]]: {\n                    ...stationList[parents[0]],\n                    children: stationList[parents[0]].children.filter(id => id !== stationId),\n                    branch: {\n                        ...stationList[parents[0]].branch,\n                        right: [],\n                    },\n                },\n                [children[0]]: {\n                    ...stationList[children[0]],\n                    parents: stationList[children[0]].parents.filter(id => id !== stationId),\n                    branch: {\n                        ...stationList[children[0]].branch,\n                        left: [],\n                    },\n                },\n            };\n        } else {\n            /**\n             * stn1 - stn2\n             *      \\\n             *        stn3 - stn4\n             *         ^\n             */\n\n            // parents have length 1\n            parents.forEach(parId => {\n                var idx = newStnList[parId].children.indexOf(stationId);\n                if (children.length) {\n                    newStnList[parId].children[idx] = children[0];\n                } else {\n                    // Right dest\n                    newStnList[parId].children.splice(idx, 1);\n                }\n\n                if (newStnList[parId].branch.right[1] === stationId) {\n                    newStnList[parId].branch.right[1] = children[0];\n                }\n            });\n\n            // children have length 1\n            children.forEach(childId => {\n                var idx = newStnList[childId].parents.indexOf(stationId);\n                if (parents.length) {\n                    newStnList[childId].parents[idx] = parents[0];\n                } else {\n                    // Left dest\n                    newStnList[childId].parents.splice(idx, 1);\n                }\n\n                if (newStnList[childId].branch.left[1] === stationId) {\n                    newStnList[childId].branch.left[1] = parents[0];\n                }\n            });\n        }\n\n        delete newStnList[stationId];\n        dispatch(setStationsBulk(newStnList));\n    };\n};\n","import { RmgCard, RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport React, { useState } from 'react';\nimport { ColineInfo, InterchangeInfo, Theme } from '../../../constants/constants';\nimport ThemeButton from '../theme-button';\nimport ColourModal from '../../modal/colour-modal/colour-modal';\nimport { HStack, IconButton } from '@chakra-ui/react';\nimport { MdDelete } from 'react-icons/md';\n\ninterface ColineCardProps {\n    colineInfo: ColineInfo;\n    routeOptions: Record<string, string>;\n    onUpdateRoute?: (route: string) => void;\n    onUpdateColourInfo?: (colourInfo: InterchangeInfo) => void;\n    onDelete?: (colourIndex: number) => void;\n}\n\nexport default function ColineCard(props: ColineCardProps) {\n    const { colineInfo, routeOptions, onUpdateRoute, onUpdateColourInfo, onDelete } = props;\n\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    const fields1: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: 'Route',\n            value: [colineInfo.from, colineInfo.to].join(','),\n            options: routeOptions,\n            onChange: value => onUpdateRoute?.(value as string),\n        },\n    ];\n\n    const fields2: RmgFieldsField[] = [\n        {\n            type: 'custom',\n            label: 'Colour',\n            component: (\n                <ThemeButton\n                    theme={[\n                        colineInfo.colors[0][0],\n                        colineInfo.colors[0][1],\n                        colineInfo.colors[0][2],\n                        colineInfo.colors[0][3],\n                    ]}\n                    onClick={() => setIsModalOpen(true)}\n                />\n            ),\n        },\n        {\n            type: 'input',\n            label: 'Chinese name',\n            value: colineInfo.colors[0][4],\n            minW: '95px',\n            onChange: value =>\n                onUpdateColourInfo?.([\n                    colineInfo.colors[0][0],\n                    colineInfo.colors[0][1],\n                    colineInfo.colors[0][2],\n                    colineInfo.colors[0][3],\n                    value,\n                    colineInfo.colors[0][5],\n                ]),\n        },\n        {\n            type: 'input',\n            label: 'English name',\n            value: colineInfo.colors[0][5],\n            minW: '95px',\n            onChange: value =>\n                onUpdateColourInfo?.([\n                    colineInfo.colors[0][0],\n                    colineInfo.colors[0][1],\n                    colineInfo.colors[0][2],\n                    colineInfo.colors[0][3],\n                    colineInfo.colors[0][4],\n                    value,\n                ]),\n        },\n    ];\n\n    return (\n        <RmgCard direction=\"column\">\n            <RmgFields fields={fields1} minW=\"full\" />\n            <HStack spacing={0.5}>\n                <RmgFields fields={fields2} />\n\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label=\"Delete colour for route\"\n                    onClick={() => onDelete?.(0)}\n                    icon={<MdDelete />}\n                />\n            </HStack>\n\n            <ColourModal\n                isOpen={isModalOpen}\n                onClose={() => setIsModalOpen(false)}\n                defaultTheme={colineInfo.colors[0].slice(0, 4) as Theme}\n                onUpdate={theme => onUpdateColourInfo?.([...theme, colineInfo.colors[0][4], colineInfo.colors[0][5]])}\n            />\n        </RmgCard>\n    );\n}\n","import React from 'react';\nimport { Button, Heading, VStack } from '@chakra-ui/react';\nimport { useAppDispatch, useAppSelector } from '../../../redux';\nimport {\n    addColine,\n    findAllColinesInBranch,\n    getPossibleCombinations,\n    removeColineColor,\n    updateColine,\n    updateColineColor,\n} from '../../../redux/param/coline-action';\nimport ColineCard from './coline-card';\nimport { MdAdd } from 'react-icons/md';\nimport { MonoColour } from '../../../constants/constants';\nimport { setGlobalAlert } from '../../../redux/app/action';\nimport { useTranslation } from 'react-i18next';\n\nexport default function ColineSection() {\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const selectedBranch = useAppSelector(state => state.app.selectedBranch);\n    const { theme, stn_list: stationList } = useAppSelector(state => state.param);\n\n    const colineInfoList = dispatch(findAllColinesInBranch(selectedBranch));\n    const possibleCombinations = dispatch(getPossibleCombinations(selectedBranch));\n\n    const getStationPairDisplayName = (pair: [string, string]) => {\n        return pair.map(id => stationList[id].name.join(' - ')).join(' ~ ');\n    };\n\n    const routeOptions = possibleCombinations.reduce<Record<string, string>>(\n        (acc, cur) => ({\n            ...acc,\n            [cur.join(',')]: getStationPairDisplayName(cur),\n        }),\n        {}\n    );\n\n    const handleAddTrackSharing = () => {\n        console.log(\n            `ColineSection.handleAddTrackSharing():: Adding track sharing to branch ${selectedBranch} with default combination`,\n            possibleCombinations[0]\n        );\n        dispatch(\n            addColine(possibleCombinations[0][0], possibleCombinations[0][1], [\n                [theme[0], '', '#AAAAAA', MonoColour.white, '', ''],\n            ])\n        );\n    };\n\n    const handleUpdateRoute = (colineId: string) => (route: string) => {\n        const [from, to] = route.split(',');\n        console.log(`ColineSection.handleUpdateRoute():: Updating route, colineId=${colineId}, from=${from}, to=${to}`);\n\n        try {\n            dispatch(updateColine(colineId, from, to));\n        } catch {\n            dispatch(setGlobalAlert({ status: 'error', message: 'Unable to draw this share track.' }));\n        }\n    };\n\n    const handleDeleteColour = (colineId: string, colourIndex: number) => {\n        dispatch(removeColineColor(colineId, colourIndex));\n    };\n\n    return (\n        <VStack align=\"flex-start\" p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('BranchSidePanel.coline.title')}\n            </Heading>\n\n            {Object.entries(colineInfoList).map(([id, colineInfo]) => (\n                <ColineCard\n                    key={id}\n                    colineInfo={colineInfo}\n                    routeOptions={routeOptions}\n                    onUpdateRoute={handleUpdateRoute(id)}\n                    onUpdateColourInfo={colourInfo => dispatch(updateColineColor(id, 0, colourInfo))}\n                    onDelete={colourIndex => handleDeleteColour(id, colourIndex)}\n                />\n            ))}\n\n            {(selectedBranch === 0 || Object.keys(colineInfoList).length === 0) && (\n                <Button\n                    size=\"xs\"\n                    variant=\"ghost\"\n                    alignSelf=\"flex-end\"\n                    leftIcon={<MdAdd />}\n                    onClick={handleAddTrackSharing}\n                >\n                    {t('BranchSidePanel.coline.add')}\n                </Button>\n            )}\n        </VStack>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\nimport { useAppDispatch, useAppSelector } from '../../redux';\nimport { RmgStyle } from '../../constants/constants';\nimport { isColineBranch } from '../../redux/param/coline-action';\nimport { autoNumbering } from '../../redux/param/action';\n\ninterface AutoNumModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function AutoNumModal(props: AutoNumModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const selectedBranch = useAppSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useAppSelector(state => state.param);\n    const branches = useAppSelector(state => state.helper.branches);\n\n    const [where, setWhere] = useState(selectedBranch);\n    const [from, setFrom] = useState('1');\n    const [maxLength, setMaxLength] = useState('2');\n    const [sort, setSort] = useState<'asc' | 'desc'>('asc');\n\n    useEffect(() => {\n        setWhere(selectedBranch);\n    }, [selectedBranch]);\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('AutoNumModal.where'),\n            value: where,\n            options: {\n                ...branches.reduce(\n                    (acc, cur, idx) => ({\n                        ...acc,\n                        [idx]:\n                            idx === 0\n                                ? t('AutoNumModal.main')\n                                : style !== RmgStyle.SHMetro || !isColineBranch(cur, stationList)\n                                ? t('AutoNumModal.branch') + ' ' + idx\n                                : t('AutoNumModal.external') + ' ' + idx,\n                    }),\n                    {}\n                ),\n            },\n            onChange: value => setWhere(value as number),\n        },\n        {\n            type: 'input',\n            label: t('AutoNumModal.from'),\n            value: from,\n            validator: value => !isNaN(Number(value)),\n            onChange: setFrom,\n            debouncedDelay: 0,\n        },\n        {\n            type: 'input',\n            label: t('AutoNumModal.maxLength'),\n            validator: value => !isNaN(Number(value)),\n            value: maxLength,\n            onChange: setMaxLength,\n            debouncedDelay: 0,\n        },\n        {\n            type: 'select',\n            label: t('AutoNumModal.sort'),\n            value: sort,\n            options: {\n                asc: t('AutoNumModal.asc'),\n                desc: t('AutoNumModal.desc'),\n            },\n            onChange: value => setSort(value as 'asc' | 'desc'),\n        },\n    ];\n\n    const handleSubmit = () => {\n        dispatch(autoNumbering(where, Number(from), Number(maxLength), sort));\n        onClose();\n    };\n\n    const isSubmitDisabled = !from || !maxLength || isNaN(Number(from)) || isNaN(Number(maxLength));\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('AutoNumModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"teal\" isDisabled={isSubmitDisabled} onClick={handleSubmit}>\n                        {t('AutoNumModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { useState } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { Box, Button, Flex, Heading } from '@chakra-ui/react';\nimport { MdCached, MdFilter1 } from 'react-icons/md';\nimport AutoNumModal from '../../modal/auto-num-modal';\nimport { useAppDispatch, useAppSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport { reverseStations } from '../../../redux/param/action';\n\nexport default function ActionSection() {\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const style = useAppSelector(state => state.param.style);\n\n    const [isAutoNumModalOpen, setIsAutoNumModalOpen] = useState(false);\n\n    return (\n        <Box p={1}>\n            <Heading as=\"h5\" size=\"sm\">\n                {t('BranchSidePanel.action.title')}\n            </Heading>\n\n            <Flex\n                wrap=\"wrap\"\n                sx={{\n                    p: 1,\n\n                    '&> *': {\n                        flexShrink: 0,\n                        flexBasis: '100%',\n\n                        '&:not(:first-child)': {\n                            marginTop: 2,\n                        },\n                    },\n                }}\n            >\n                {style === RmgStyle.GZMTR && (\n                    <Button\n                        size=\"sm\"\n                        variant=\"outline\"\n                        leftIcon={<MdFilter1 />}\n                        alignSelf=\"flex-end\"\n                        onClick={() => setIsAutoNumModalOpen(true)}\n                    >\n                        {t('BranchSidePanel.action.autoNum')}\n                    </Button>\n                )}\n\n                <Button\n                    size=\"sm\"\n                    variant=\"outline\"\n                    leftIcon={<MdCached />}\n                    alignSelf=\"flex-end\"\n                    onClick={() => dispatch(reverseStations(style === RmgStyle.SHMetro))}\n                >\n                    {style === RmgStyle.SHMetro\n                        ? t('BranchSidePanel.action.flip')\n                        : t('BranchSidePanel.action.reverse')}\n                </Button>\n            </Flex>\n\n            <AutoNumModal isOpen={isAutoNumModalOpen} onClose={() => setIsAutoNumModalOpen(false)} />\n        </Box>\n    );\n}\n","import { RmgSidePanelBody } from '@railmapgen/rmg-components';\nimport React from 'react';\nimport ColineSection from './coline-section';\nimport { Divider } from '@chakra-ui/react';\nimport ActionSection from './action-section';\nimport { useAppSelector } from '../../../redux';\nimport { RmgStyle } from '../../../constants/constants';\nimport { isColineBranch } from '../../../redux/param/coline-action';\n\nexport default function BranchSidePanel() {\n    const selectedBranch = useAppSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useAppSelector(state => state.param);\n    const branches = useAppSelector(state => state.helper.branches);\n\n    return (\n        <RmgSidePanelBody>\n            {style === RmgStyle.SHMetro &&\n                (selectedBranch === 0 || isColineBranch(branches[selectedBranch], stationList)) && (\n                    <>\n                        <ColineSection />\n                        <Divider />\n                    </>\n                )}\n\n            <ActionSection />\n        </RmgSidePanelBody>\n    );\n}\n","import React, { ReactNode } from 'react';\nimport { useAppSelector } from '../../redux';\nimport { setSidePanelMode } from '../../redux/app/action';\nimport { useDispatch } from 'react-redux';\nimport { SidePanelMode } from '../../constants/constants';\nimport StationSidePanel from './station-side-panel/station-side-panel';\nimport StyleSidePanel from './style-side-panel/style-side-panel';\nimport { RmgMultiLineString, RmgSidePanel, RmgSidePanelHeader } from '@railmapgen/rmg-components';\nimport StationSidePanelFooter from './station-side-panel/station-side-panel-footer';\nimport BranchSidePanel from './branch-side-panel/branch-side-panel';\nimport { useTranslation } from 'react-i18next';\n\nconst SIDE_PANEL_WIDTH = 320;\n\nexport default function SidePanel() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const { sidePanelMode, selectedStation } = useAppSelector(state => state.app);\n    const name = useAppSelector(state => state.param.stn_list[selectedStation]?.name);\n\n    const mode: Record<SidePanelMode, { header: ReactNode; body?: ReactNode; footer?: ReactNode }> = {\n        STATION: {\n            header: <RmgMultiLineString text={name?.join(' - ') || ''} />,\n            body: <StationSidePanel />,\n            footer: <StationSidePanelFooter />,\n        },\n        STYLE: { header: t('StyleSidePanel.header'), body: <StyleSidePanel /> },\n        BRANCH: { header: t('BranchSidePanel.header'), body: <BranchSidePanel /> },\n        CLOSE: { header: 'Close' },\n    };\n\n    const handleClose = () => {\n        dispatch(setSidePanelMode(SidePanelMode.CLOSE));\n    };\n\n    return (\n        <RmgSidePanel isOpen={sidePanelMode !== SidePanelMode.CLOSE} width={SIDE_PANEL_WIDTH} header=\"Dummy header\">\n            <RmgSidePanelHeader onClose={handleClose}>{mode[sidePanelMode].header}</RmgSidePanelHeader>\n            {mode[sidePanelMode]?.body}\n            {mode[sidePanelMode]?.footer}\n        </RmgSidePanel>\n    );\n}\n","export const downloadAs = (filename: string, type: string, data: any) => {\n    const blob = new Blob([data], { type });\n    downloadBlobAs(filename, blob);\n};\n\nexport const downloadBlobAs = (filename: string, blob: Blob) => {\n    const url = window.URL.createObjectURL(blob);\n\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = filename;\n    document.body.appendChild(a);\n    a.click();\n\n    document.body.removeChild(a);\n    window.URL.revokeObjectURL(url);\n};\n\nexport const readFileAsText = (file: File) => {\n    return new Promise((resolve: (text: string) => void) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsText(file);\n    });\n};\n","import { CanvasType, RmgStyle } from '../constants/constants';\n\nexport const cloneSvgCanvas = async (\n    canvas: CanvasType,\n    rmgStyle: RmgStyle,\n    isTransparent?: boolean,\n    isShowBorder?: boolean,\n    scale?: number\n): Promise<SVGSVGElement> => {\n    let [, thisSVGHeight] = ['--rmg-svg-width', '--rmg-svg-height']\n        .map(\n            key =>\n                (document.querySelector(`svg#${canvas}`) as SVGSVGElement).style.getPropertyValue(key).match(/\\d+/g)![0]\n        )\n        .map(Number);\n\n    const elem = document.querySelector(`svg#${canvas}`)!.cloneNode(true) as SVGSVGElement;\n    // elem.setAttribute('width', (thisSVGWidth * scaleFactor).toString());\n    elem.setAttribute('height', ((thisSVGHeight * (scale || 100)) / 100).toString());\n    elem.style.setProperty('all', 'initial');\n\n    ['share', canvas]\n        .map(tag =>\n            [\n                ...(\n                    [...document.querySelectorAll('link')].filter(l => l.id === 'css_' + tag)[0]?.sheet as CSSStyleSheet\n                ).cssRules,\n            ]\n                .map(rule => rule.cssText)\n                .join(' ')\n        )\n        .forEach(txt => {\n            let s = document.createElement('style');\n            s.textContent = txt;\n            elem.prepend(s);\n        });\n\n    elem.querySelector('rect#canvas-border')?.setAttribute('stroke', isShowBorder ? 'black' : 'none');\n    elem.querySelector('rect#canvas-bg')?.setAttribute('fill', isTransparent ? 'none' : 'white');\n\n    if (rmgStyle === RmgStyle.MTR) {\n        try {\n            const uris = await getBase64FontFace(elem);\n            const s = document.createElement('style');\n            s.textContent = uris.join('\\n');\n            elem.prepend(s);\n        } catch (err) {\n            alert('Failed to fonts. Fonts in the exported PNG will be missing.');\n            console.error(err);\n        }\n    }\n\n    return elem;\n};\n\n/**\n * Convert a `Blob` into Base64 data URL.\n * @param blob\n */\nconst readBlobAsDataURL = (blob: Blob): Promise<string> => {\n    return new Promise((resolve: (value: string) => void) => {\n        const reader = new FileReader();\n        reader.onloadend = () => resolve(reader.result as string);\n        reader.readAsDataURL(blob);\n    });\n};\n\nconst matchCssRuleByFontFace = (rules: CSSFontFaceRule[], font: FontFace): CSSFontFaceRule | undefined => {\n    return rules.find(rule => {\n        const cssStyle = rule.style as any;\n        return (\n            cssStyle.fontFamily.replace(/^\"(.+)\"$/, '$1') === font.family && cssStyle.unicodeRange === font.unicodeRange\n        );\n    });\n};\n\nexport const getBase64FontFace = async (svgEl: SVGSVGElement): Promise<string[]> => {\n    const uniqueCharacters = Array.from(\n        new Set(\n            [\n                ...svgEl.querySelectorAll<SVGElement>('.rmg-name__zh'),\n                ...svgEl.querySelectorAll<SVGElement>('.rmg-name__en'),\n            ]\n                .map(el => el.innerHTML)\n                .join('')\n                .replace(/[\\s]/g, '')\n        )\n    ).join('');\n\n    const fontFaceList = await document.fonts.load('80px GenYoMin TW, Vegur', uniqueCharacters);\n    const cssRules = Array.from(\n        (document.querySelector<HTMLLinkElement>('link#css_share')!.sheet!.cssRules[0] as CSSImportRule).styleSheet\n            .cssRules\n    ) as CSSFontFaceRule[];\n    const distinctCssRules = fontFaceList.reduce<CSSFontFaceRule[]>((acc, cur) => {\n        const matchedRule = matchCssRuleByFontFace(cssRules, cur);\n        if (matchedRule) {\n            const existence = acc.find(rule => {\n                const ruleStyle = rule.style as any;\n                const matchedStyle = matchedRule.style as any;\n                return (\n                    ruleStyle.fontFamily === matchedStyle.fontFamily &&\n                    ruleStyle.unicodeRange === matchedStyle.unicodeRange\n                );\n            });\n            return existence ? acc : acc.concat(matchedRule);\n        } else {\n            return acc;\n        }\n    }, []);\n\n    return await Promise.all(\n        distinctCssRules.map(async cssRule => {\n            try {\n                const ruleStyleSrc = (cssRule.style as any).src;\n                const isSafari = navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome');\n                const url = isSafari\n                    ? ruleStyleSrc.replace(/^url\\(([\\S]+)\\).*$/, '$1')\n                    : process.env.PUBLIC_URL + '/styles/' + ruleStyleSrc.match(/^url\\(\"([\\S*]+)\"\\)/)?.[1];\n\n                const fontResp = await fetch(url);\n                const fontDataUri = await readBlobAsDataURL(await fontResp.blob());\n                return cssRule.cssText.replace(/src:[ \\w('\",\\-:/.)]+;/g, `src: url('${fontDataUri}'); `);\n            } catch (err) {\n                console.error(err);\n                return '';\n            }\n        })\n    );\n};\n\nexport const test = async (svgEl: SVGSVGElement, scale: number): Promise<Blob> => {\n    let svgW = svgEl.viewBox.baseVal.width;\n    let svgH = svgEl.viewBox.baseVal.height;\n\n    // svgEl.removeAttribute('height');\n\n    let canvas = document.querySelectorAll('canvas')[0];\n    canvas.width = Number(svgW) * window.devicePixelRatio * scale;\n    canvas.height = Number(svgH) * window.devicePixelRatio * scale;\n\n    svgEl.setAttribute('width', canvas.width.toString());\n    svgEl.setAttribute('height', canvas.height.toString());\n\n    let ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n    // bypass Chrome min font size (to be improved)\n\n    svgEl.querySelectorAll('.rmg-name__en.rmg-name__mtr--station').forEach(el => el.setAttribute('font-size', '11px'));\n\n    svgEl.querySelectorAll('.rmg-name__zh.IntName').forEach(el => el.setAttribute('font-size', '10px'));\n\n    svgEl.querySelectorAll('.rmg-name__en.rmg-name__mtr--osi').forEach(el => el.setAttribute('font-size', '9px'));\n\n    svgEl\n        .querySelectorAll('.rmg-name__en.rmg-name__gzmtr--next2-dest')\n        .forEach(el => el.setAttribute('font-size', '8.5px'));\n\n    svgEl.querySelectorAll('.rmg-name__en.IntName').forEach(el => el.setAttribute('font-size', '7px'));\n\n    // svgEl\n    //     .querySelectorAll('text:not([font-size]), tspan:not([font-size])')\n    //     .forEach((el) => el.setAttribute('font-size', window.getComputedStyle(el).fontSize));\n\n    svgEl.querySelectorAll('text, tspan').forEach(el => {\n        let elStyle = window.getComputedStyle(el);\n        el.setAttribute('font-family', elStyle.fontFamily);\n        el.setAttribute('fill', elStyle.fill);\n        el.setAttribute('dominant-baseline', elStyle.dominantBaseline);\n        el.setAttribute('text-anchor', elStyle.textAnchor || '');\n        // el.removeAttribute('class');\n    });\n\n    // https://stackoverflow.com/questions/46399223/async-await-in-image-loading/52851789\n    return new Promise((resolve, reject) => {\n        const img = new Image();\n        img.onload = () => {\n            ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n            canvas.toBlob(blob => resolve(blob!), 'image/png');\n            // return resolve(canvas.toDataURL('image/png'));\n        };\n        img.onerror = reject;\n        img.src = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(svgEl.outerHTML)));\n    });\n};\n","import React, { useState } from 'react';\nimport {\n    Button,\n    HStack,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { canvasConfig, CanvasType, RmgStyle } from '../../constants/constants';\nimport { useAppSelector } from '../../redux';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport JSZip from 'jszip';\nimport { setCurrentStation } from '../../redux/param/action';\nimport { useDispatch } from 'react-redux';\nimport { cloneSvgCanvas, test } from '../../util/export-utils';\nimport { downloadAs, downloadBlobAs } from '../../util/utils';\nimport { useTranslation } from 'react-i18next';\n\ninterface DownloadModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function DownloadModal(props: DownloadModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n\n    const dispatch = useDispatch();\n\n    const [canvasToDownload, setCanvasToDownload] = useState('');\n    const [isTransparent, setIsTransparent] = useState(false);\n    const [isShowBorder, setIsShowBorder] = useState(false);\n    const [scale, setScale] = useState(100);\n    const [format, setFormat] = useState('png');\n\n    const {\n        style,\n        stn_list: stationList,\n        current_stn_idx: currentStationId,\n        line_name: lineName,\n    } = useAppSelector(state => state.param);\n\n    const canvasOptions = canvasConfig[style].reduce<Record<string, string>>(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: cur,\n        }),\n        { '': t('DownloadModal.pleaseSelect') }\n    );\n\n    const scaleOptions = [25, 33, 50, 67, 75, 80, 90, 100, 110, 125, 150, 175, 200, 250, 300, 400, 500].reduce<\n        Record<number, string>\n    >(\n        (acc, cur) => ({\n            ...acc,\n            [cur]: `${cur}%`,\n        }),\n        {}\n    );\n\n    const formatOptions = {\n        png: t('DownloadModal.png'),\n        svg: t('DownloadModal.svg'),\n    };\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('DownloadModal.canvas'),\n            value: canvasToDownload,\n            options: canvasOptions,\n            disabledOptions: [''],\n            onChange: value => setCanvasToDownload(value as CanvasType),\n            minW: 'full',\n        },\n        {\n            type: 'switch',\n            label: t('DownloadModal.transparent'),\n            isChecked: isTransparent,\n            onChange: setIsTransparent,\n            oneLine: true,\n            minW: 'full',\n        },\n        {\n            type: 'switch',\n            label: t('DownloadModal.showBorder'),\n            isChecked: isShowBorder,\n            onChange: setIsShowBorder,\n            oneLine: true,\n            minW: 'full',\n        },\n        {\n            type: 'select',\n            label: t('DownloadModal.scale'),\n            value: scale,\n            options: scaleOptions,\n            onChange: value => setScale(value as number),\n        },\n        {\n            type: 'select',\n            label: t('DownloadModal.format'),\n            value: format,\n            options: formatOptions,\n            onChange: value => setFormat(value as string),\n        },\n    ];\n\n    const handleDownload = async (option: 'current' | 'all') => {\n        const stationIdListToDownload =\n            option === 'current'\n                ? [currentStationId]\n                : Object.keys(stationList).filter(id => !['linestart', 'lineend'].includes(id));\n\n        const zip = new JSZip();\n\n        for (const stnId of stationIdListToDownload) {\n            // wait for svg elements updated for station A before we dispatch the current station to B.\n            await dispatch(setCurrentStation(stnId));\n\n            const elem = await cloneSvgCanvas(\n                canvasToDownload as CanvasType,\n                style,\n                isTransparent,\n                isShowBorder,\n                scale\n            );\n\n            // append svg to the document so the bbox will be loaded correctly\n            // (but not for gzmtr and have no idea why)\n            document.body.appendChild(elem);\n\n            const filename = `rmg.${stnId}.${stationList[stnId].name[0]}.${stationList[stnId].name[1]}`.replaceAll(\n                ' ',\n                '_'\n            );\n            if (format === 'png') {\n                const blob = await test(elem, scale / 100);\n                if (navigator.userAgent.includes('Safari') && !navigator.userAgent.includes('Chrome')) {\n                    await new Promise<void>(resolve => {\n                        setTimeout(() => {\n                            console.log('Sleep 1 second for Safari');\n                            resolve();\n                        }, 1000);\n                    });\n                }\n\n                if (stationIdListToDownload.length > 1) {\n                    // batch download and split base64 for this\n                    // https://stackoverflow.com/questions/31305485/export-resized-image-in-canvas-to-new-jszip-package\n                    zip.file(`${filename}.png`, blob);\n                } else {\n                    downloadBlobAs(`${filename}.png`, blob);\n                }\n            } else if (format === 'svg') {\n                elem.removeAttribute('height');\n                const data = 'data:image/svg+xml;base64,' + btoa(unescape(encodeURIComponent(elem.outerHTML)));\n\n                if (stationIdListToDownload.length > 1) {\n                    zip.file(`${filename}.svg`, data.split('base64,')[1], { base64: true });\n                } else {\n                    downloadAs(filename + '.svg', 'image/svg+xml', elem.outerHTML);\n                }\n            }\n\n            // don't forget to release it after use\n            document.body.removeChild(elem);\n        }\n\n        // generate the zip for batch download\n        if (stationIdListToDownload.length > 1) {\n            const zipData = await zip.generateAsync({ type: 'blob' });\n            const filename = `rmg.${lineName[0]}.${lineName[1]}.zip`.replaceAll(' ', '_');\n            downloadBlobAs(filename, zipData);\n        }\n\n        // revert to original station\n        await dispatch(setCurrentStation(currentStationId));\n        onClose();\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('DownloadModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <HStack>\n                        <Button\n                            colorScheme=\"teal\"\n                            variant=\"outline\"\n                            size=\"sm\"\n                            onClick={() => handleDownload('current')}\n                            disabled={!canvasToDownload}\n                        >\n                            {t('DownloadModal.downloadOne')}\n                        </Button>\n                        {style !== RmgStyle.GZMTR && (\n                            <Button\n                                colorScheme=\"teal\"\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={() => handleDownload('all')}\n                                disabled={!canvasToDownload}\n                            >\n                                {t('DownloadModal.downloadAll')}\n                            </Button>\n                        )}\n                    </HStack>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { useState } from 'react';\nimport { Button, Menu, MenuButton, MenuList, MenuItem } from '@chakra-ui/react';\nimport { MdExpandMore } from 'react-icons/md';\nimport { downloadAs } from '../../util/utils';\nimport { useAppSelector } from '../../redux';\nimport { useTranslation } from 'react-i18next';\nimport DownloadModal from '../modal/download-modal';\n\nexport default function DownloadActions() {\n    const { t } = useTranslation();\n\n    const [isDownloadModalOpen, setIsDownloadModalOpen] = useState(false);\n\n    const param = useAppSelector(state => state.param);\n\n    const handleDownloadJson = () => {\n        downloadAs(`RMG_${new Date().valueOf()}.json`, 'application/json', JSON.stringify(param));\n    };\n\n    return (\n        <Menu>\n            <MenuButton as={Button} variant=\"ghost\" size=\"sm\" rightIcon={<MdExpandMore />}>\n                {t('DownloadActions.downloads')}\n            </MenuButton>\n            <MenuList>\n                <MenuItem onClick={handleDownloadJson}>{t('DownloadActions.configFile')}</MenuItem>\n                <MenuItem onClick={() => setIsDownloadModalOpen(true)}>{t('DownloadActions.images')}</MenuItem>\n            </MenuList>\n\n            <DownloadModal isOpen={isDownloadModalOpen} onClose={() => setIsDownloadModalOpen(false)} />\n        </Menu>\n    );\n}\n","import { LanguageCode, Translation } from './constants';\n\nexport enum CompanyCode {\n    basic = 'basic',\n    bjsubway = 'bjsubway',\n    fmetro = 'fmetro',\n    gzmtr = 'gzmtr',\n    kmrailtransit = 'kmrailtransit',\n    kvtransit = 'kvtransit',\n    mlm = 'mlm',\n    mtr = 'mtr',\n    njmetro = 'njmetro',\n    shmetro = 'shmetro',\n    saopaulometro = 'saopaulometro',\n    szmetro = 'szmetro',\n    zzmetro = 'zzmetro',\n}\n\ninterface CompanyEntry {\n    id: CompanyCode;\n    name: Translation;\n}\n\nexport const companies: CompanyEntry[] = [\n    {\n        id: CompanyCode.basic,\n        name: {\n            [LanguageCode.English]: 'Basic',\n            [LanguageCode.Chinese]: '',\n        },\n    },\n\n    // Templates with styles supported\n    {\n        id: CompanyCode.mtr,\n        name: {\n            [LanguageCode.English]: 'MTR',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n    {\n        id: CompanyCode.gzmtr,\n        name: {\n            [LanguageCode.English]: 'Guangzhou Metro',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n    {\n        id: CompanyCode.shmetro,\n        name: {\n            [LanguageCode.English]: 'Shanghai Metro',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n\n    // Third-party templates\n    {\n        id: CompanyCode.bjsubway,\n        name: {\n            [LanguageCode.English]: 'Beijing Subway',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n    {\n        id: CompanyCode.fmetro,\n        name: {\n            en: 'Foshan Metro',\n            'zh-Hans': '',\n            'zh-Hant': '',\n        },\n    },\n    {\n        id: CompanyCode.kmrailtransit,\n        name: {\n            en: 'Kunming Metro',\n            'zh-Hans': '',\n            'zh-Hant': '',\n        },\n    },\n    {\n        id: CompanyCode.kvtransit,\n        name: {\n            [LanguageCode.English]: 'Klang Valley Integrated Transit System',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n    {\n        id: CompanyCode.mlm,\n        name: {\n            [LanguageCode.English]: 'Macao LRT',\n            [LanguageCode.Portuguese]: 'Metro Ligeiro de Macau',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n    {\n        id: CompanyCode.njmetro,\n        name: {\n            [LanguageCode.English]: 'Nanjing Metro',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n    {\n        id: CompanyCode.saopaulometro,\n        name: {\n            en: 'So Paulo Metro',\n            pt: 'Metr de So Paulo',\n            'zh-Hans': '',\n            'zh-Hant': '',\n        },\n    },\n    {\n        id: CompanyCode.szmetro,\n        name: {\n            [LanguageCode.English]: 'Shenzhen Metro',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n    {\n        id: CompanyCode.zzmetro,\n        name: {\n            [LanguageCode.English]: 'Zhenzhou Metro',\n            [LanguageCode.ChineseSimp]: '',\n            [LanguageCode.ChineseTrad]: '',\n        },\n    },\n];\n","import React, { RefObject } from 'react';\nimport {\n    AlertDialog,\n    AlertDialogBody,\n    AlertDialogContent,\n    AlertDialogFooter,\n    AlertDialogHeader,\n    AlertDialogOverlay,\n    Button,\n} from '@chakra-ui/react';\nimport { MonoColour, RMGParam } from '../../constants/constants';\nimport { RmgLineBadge } from '@railmapgen/rmg-components';\nimport { useTranslation } from 'react-i18next';\n\ninterface UploadConfirmModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    cancelRef?: RefObject<HTMLButtonElement>;\n    uploadedParam?: RMGParam;\n    onOpenParam: (param: Record<string, any>) => void;\n}\n\nexport default function UploadConfirmModal(props: UploadConfirmModalProps) {\n    const { isOpen, onClose, cancelRef, uploadedParam, onOpenParam } = props;\n    const { t } = useTranslation();\n\n    const handleConfirm = () => {\n        if (uploadedParam) {\n            onOpenParam(uploadedParam);\n        }\n        onClose();\n    };\n\n    return (\n        <AlertDialog isOpen={isOpen} leastDestructiveRef={cancelRef} onClose={onClose}>\n            <AlertDialogOverlay>\n                <AlertDialogContent>\n                    <AlertDialogHeader fontSize=\"lg\" fontWeight=\"bold\">\n                        {t('UploadConfirmModal.title')}\n                    </AlertDialogHeader>\n\n                    <AlertDialogBody>\n                        {t('UploadConfirmModal.message1')}\n                        <RmgLineBadge\n                            name={uploadedParam?.line_name?.join(' ') || ''}\n                            fg={uploadedParam?.theme?.[3] || MonoColour.white}\n                            bg={uploadedParam?.theme?.[2] || '#AAAAAA'}\n                        />\n                        {t('UploadConfirmModal.message2') +\n                            (uploadedParam ? Object.keys(uploadedParam.stn_list).length - 2 : 0) +\n                            t('UploadConfirmModal.message3')}\n                    </AlertDialogBody>\n\n                    <AlertDialogFooter>\n                        <Button ref={cancelRef} onClick={onClose}>\n                            {t('UploadConfirmModal.cancel')}\n                        </Button>\n                        <Button colorScheme=\"teal\" onClick={handleConfirm} ml={3}>\n                            {t('UploadConfirmModal.confirm')}\n                        </Button>\n                    </AlertDialogFooter>\n                </AlertDialogContent>\n            </AlertDialogOverlay>\n        </AlertDialog>\n    );\n}\n","import React from 'react';\nimport {\n    Button,\n    Flex,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalHeader,\n    ModalOverlay,\n    Tab,\n    TabList,\n    TabPanel,\n    TabPanels,\n    Tabs,\n} from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\nimport { companies } from '../../constants/company-config';\nimport { templateList } from '../../constants/templates/data';\nimport { translateText } from '../../i18n/config';\n\ninterface TemplateModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onOpenParam: (param: Record<string, any>) => void;\n}\n\nexport default function TemplateModal(props: TemplateModalProps) {\n    const { isOpen, onClose, onOpenParam } = props;\n\n    const { t } = useTranslation();\n\n    const handleSelect = async (company: string, filename: string) => {\n        const module = await import(\n            /* webpackChunkName: \"templates\" */ `../../constants/templates/${company}/${filename}`\n        );\n        onOpenParam(module.default);\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('TemplateModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <Tabs isLazy size=\"sm\" orientation=\"vertical\">\n                        <TabList maxW={150}>\n                            {companies.map(company => (\n                                <Tab key={company.id}>{translateText(company.name)}</Tab>\n                            ))}\n                        </TabList>\n\n                        <TabPanels maxW={250}>\n                            {Object.entries(templateList)\n                                .sort(\n                                    (a, b) =>\n                                        companies.findIndex(c => c.id === a[0]) -\n                                        companies.findIndex(c => c.id === b[0])\n                                )\n                                .map(([company, templates]) => (\n                                    <TabPanel key={company} as={Flex} flexDirection=\"column\" py={0} px={1}>\n                                        {templates.map(template => (\n                                            <Button\n                                                key={template.filename}\n                                                variant=\"ghost\"\n                                                size=\"sm\"\n                                                justifyContent=\"flex-start\"\n                                                overflow=\"hidden\"\n                                                onClick={() => handleSelect(company, template.filename)}\n                                            >\n                                                {translateText(template.name)}\n                                            </Button>\n                                        ))}\n                                    </TabPanel>\n                                ))}\n                        </TabPanels>\n                    </Tabs>\n                </ModalBody>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { ChangeEvent, useRef, useState } from 'react';\nimport { Button, Menu, MenuButton, MenuItem, MenuList } from '@chakra-ui/react';\nimport { MdExpandMore, MdInsertDriveFile, MdUpload } from 'react-icons/md';\nimport { useTranslation } from 'react-i18next';\nimport { updateParam } from '../../utils';\nimport { readFileAsText } from '../../util/utils';\nimport UploadConfirmModal from '../modal/upload-confirm-modal';\nimport { useDispatch } from 'react-redux';\nimport { setGlobalAlert } from '../../redux/app/action';\nimport { RMGParam } from '../../constants/constants';\nimport TemplateModal from '../modal/template-modal';\nimport { openFromNewParam } from '../../redux/param/open-new-action';\n\nexport default function OpenActions() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const [isUploadModalOpen, setIsUploadModalOpen] = useState(false);\n    const [isTemplateModalOpen, setIsTemplateModalOpen] = useState(false);\n    const [uploadedParam, setUploadedParam] = useState<RMGParam | undefined>(undefined);\n\n    const uploadModalCloseRef = useRef<HTMLButtonElement | null>(null);\n    const fileInputRef = useRef<HTMLInputElement | null>(null);\n\n    const handleUpload = async (event: ChangeEvent<HTMLInputElement>) => {\n        const file = event.target.files?.[0];\n        console.log('OpenActions.handleUpload():: received file', file);\n\n        if (file?.type !== 'application/json') {\n            dispatch(\n                setGlobalAlert({\n                    status: 'error',\n                    message: t('OpenActions.invalidType'),\n                })\n            );\n        } else {\n            try {\n                const paramStr = await readFileAsText(file);\n                const updatedParam = updateParam(JSON.parse(paramStr));\n                setUploadedParam(updatedParam as RMGParam);\n                setIsUploadModalOpen(true);\n            } catch (err) {\n                dispatch(\n                    setGlobalAlert({\n                        status: 'error',\n                        message: t('OpenActions.unknownError'),\n                    })\n                );\n                console.error(\n                    'OpenActions.handleUpload():: Unknown error occurred while parsing the uploaded file',\n                    err\n                );\n            }\n        }\n\n        // clear field for next upload\n        event.target.value = '';\n    };\n\n    const handleOpenParam = (param: Record<string, any>) => {\n        dispatch(openFromNewParam(param));\n    };\n\n    return (\n        <Menu>\n            <MenuButton as={Button} variant=\"ghost\" size=\"sm\" rightIcon={<MdExpandMore />}>\n                {t('OpenActions.openFrom')}\n            </MenuButton>\n            <MenuList>\n                <input ref={fileInputRef} type=\"file\" accept=\".json\" hidden={true} onChange={handleUpload} />\n                <MenuItem icon={<MdUpload />} onClick={() => fileInputRef?.current?.click()}>\n                    {t('OpenActions.upload')}\n                </MenuItem>\n\n                <MenuItem icon={<MdInsertDriveFile />} onClick={() => setIsTemplateModalOpen(true)}>\n                    {t('OpenActions.templates')}\n                </MenuItem>\n            </MenuList>\n\n            <UploadConfirmModal\n                isOpen={isUploadModalOpen}\n                onClose={() => setIsUploadModalOpen(false)}\n                cancelRef={uploadModalCloseRef}\n                uploadedParam={uploadedParam}\n                onOpenParam={handleOpenParam}\n            />\n\n            <TemplateModal\n                isOpen={isTemplateModalOpen}\n                onClose={() => setIsTemplateModalOpen(false)}\n                onOpenParam={handleOpenParam}\n            />\n        </Menu>\n    );\n}\n","import { AppDispatch, RootState } from '../index';\nimport { updateParam } from '../../utils';\nimport { AllCanvas, canvasConfig, RMGParam, SidePanelMode } from '../../constants/constants';\nimport { selectCanvas, setSelectedStation, setSidePanelMode } from '../app/action';\nimport { reRenderApp } from '../../index';\n\nexport const openFromNewParam = (param: Record<string, any>) => {\n    return async (dispatch: AppDispatch, getState: () => RootState) => {\n        const updatedParam = updateParam(param) as RMGParam;\n        await window.rmgStorage.writeFile('rmgParam', JSON.stringify(updatedParam));\n\n        // close side panel, reset selection\n        dispatch(setSidePanelMode(SidePanelMode.CLOSE));\n        dispatch(setSelectedStation('linestart'));\n\n        // reset to AllCanvas if the current canvas is not supported in the new style\n        const canvasToShow = getState().app.canvasToShow;\n        const canvas = canvasConfig[updatedParam.style].some(c => c === canvasToShow) ? canvasToShow : AllCanvas;\n        await dispatch(selectCanvas(canvas));\n        reRenderApp(updatedParam);\n    };\n};\n","import React from 'react';\nimport { HStack, Button } from '@chakra-ui/react';\nimport DownloadActions from './download-actions';\nimport { MdPalette } from 'react-icons/md';\nimport { useDispatch } from 'react-redux';\nimport { SidePanelMode } from '../../constants/constants';\nimport { setSidePanelMode } from '../../redux/app/action';\nimport { useTranslation } from 'react-i18next';\nimport OpenActions from './open-actions';\n\nexport default function HeaderActions() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    return (\n        <HStack ml=\"auto\">\n            <DownloadActions />\n\n            <OpenActions />\n\n            <Button\n                variant=\"solid\"\n                size=\"sm\"\n                colorScheme=\"teal\"\n                leftIcon={<MdPalette />}\n                onClick={() => dispatch(setSidePanelMode(SidePanelMode.STYLE))}\n            >\n                {t('HeaderActions.editStyle')}\n            </Button>\n        </HStack>\n    );\n}\n","import React from 'react';\nimport { Flex } from '@chakra-ui/react';\nimport HeaderActions from './header-actions';\nimport RmgButtonGroup from '../common/rmg-button-group';\nimport { selectCanvas } from '../../redux/app/action';\nimport { AllCanvas, canvasConfig, CanvasType } from '../../constants/constants';\nimport { useTranslation } from 'react-i18next';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from '../../redux';\nimport { RmgLabel } from '@railmapgen/rmg-components';\n\nexport default function PageHeader() {\n    const { t } = useTranslation();\n    const dispatch = useDispatch();\n\n    const canvasToShow = useAppSelector(state => state.app.canvasToShow);\n    const style = useAppSelector(state => state.param.style);\n\n    const canvasSelections = [AllCanvas, ...canvasConfig[style]].map(canvas => ({\n        label: t('CanvasButtonGroup.' + canvas),\n        value: canvas,\n    }));\n\n    return (\n        <Flex align=\"center\" wrap=\"wrap\" pl={2} pr={3}>\n            <RmgLabel label={t('CanvasButtonGroup.label')}>\n                <RmgButtonGroup\n                    selections={canvasSelections}\n                    defaultValue={canvasToShow}\n                    onChange={canvas => dispatch(selectCanvas(canvas as CanvasType | typeof AllCanvas))}\n                />\n            </RmgLabel>\n\n            <HeaderActions />\n        </Flex>\n    );\n}\n","import packageJson from '../../package.json';\n\nexport enum Environments {\n    DEV = 'DEV',\n    UAT = 'UAT',\n    PRD = 'PRD',\n}\n\nexport const getEnvironment = () => {\n    if (window.location.hostname === 'localhost') {\n        return Environments.DEV;\n    } else if (window.location.hostname.includes('uat')) {\n        return Environments.UAT;\n    } else {\n        return Environments.PRD;\n    }\n};\n\nexport const getVersion = () => {\n    return packageJson.version;\n};\n","import React from 'react';\nimport { Badge, Flex, Heading, HStack, IconButton, Menu, MenuButton, MenuItem, MenuList } from '@chakra-ui/react';\nimport { Environments, getEnvironment, getVersion } from '../util/config';\nimport { useTranslation } from 'react-i18next';\nimport { MdHelp, MdLocationCity, MdTranslate, MdZoomIn, MdZoomOut } from 'react-icons/md';\nimport { LanguageCode, RmgStyle } from '../constants/constants';\nimport { useDispatch } from 'react-redux';\nimport { setStyle } from '../redux/param/action';\nimport { Link } from 'react-router-dom';\nimport { zoomIn, zoomOut } from '../redux/app/action';\n\nexport default function WindowHeader() {\n    const { t, i18n } = useTranslation();\n    const dispatch = useDispatch();\n\n    const environment = getEnvironment();\n    const getBadgeColour = (env: Environments) => {\n        switch (env) {\n            case Environments.DEV:\n                return 'red';\n            case Environments.UAT:\n                return 'orange';\n            case Environments.PRD:\n                return 'green';\n        }\n    };\n\n    const handleChangeLanguage = async (language: LanguageCode) => {\n        const t = await i18n.changeLanguage(language);\n        document.documentElement.lang = language;\n        document.title = t('WindowHeader.heading');\n    };\n\n    return (\n        <Flex pl={2} pr={2} align=\"center\">\n            <Heading as=\"h4\" size=\"md\">\n                {t('WindowHeader.heading')}\n                <Badge ml={1} colorScheme={getBadgeColour(environment)}>\n                    {environment === Environments.PRD ? getVersion() : environment}\n                </Badge>\n            </Heading>\n\n            <HStack ml=\"auto\">\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label=\"Zoom out\"\n                    icon={<MdZoomOut />}\n                    onClick={() => dispatch(zoomOut())}\n                />\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label=\"Zoom in\"\n                    icon={<MdZoomIn />}\n                    onClick={() => dispatch(zoomIn())}\n                />\n\n                <Menu>\n                    <MenuButton as={IconButton} icon={<MdLocationCity />} variant=\"ghost\" size=\"sm\" />\n                    <MenuList>\n                        {Object.values(RmgStyle).map(style => (\n                            <Link key={style} to={style}>\n                                <MenuItem onClick={() => dispatch(setStyle(style))}>\n                                    {t('WindowHeader.' + style)}\n                                </MenuItem>\n                            </Link>\n                        ))}\n                    </MenuList>\n                </Menu>\n\n                <Menu>\n                    <MenuButton as={IconButton} icon={<MdTranslate />} variant=\"ghost\" size=\"sm\" />\n                    <MenuList>\n                        <MenuItem onClick={() => handleChangeLanguage(LanguageCode.English)}>English</MenuItem>\n                        <MenuItem onClick={() => handleChangeLanguage(LanguageCode.ChineseSimp)}></MenuItem>\n                        <MenuItem onClick={() => handleChangeLanguage(LanguageCode.ChineseTrad)}></MenuItem>\n                    </MenuList>\n                </Menu>\n\n                <IconButton\n                    size=\"sm\"\n                    variant=\"ghost\"\n                    aria-label=\"Help\"\n                    icon={<MdHelp />}\n                    onClick={() => window.open('https://github.com/railmapgen/rmg', '_blank')}\n                />\n            </HStack>\n        </Flex>\n    );\n}\n","import { AppDispatch, RootState } from '../index';\nimport { getRandomId } from './station-list-util';\nimport { BranchStyle, Facilities, Services, ShortDirection, StationDict, StationInfo } from '../../constants/constants';\nimport { getYShareMTR } from '../../methods';\nimport { setStationsBulk } from './action';\nimport { nanoid } from 'nanoid';\n\nconst getStationTemplate = (id: string): StationInfo => ({\n    name: [' ' + id, 'Unnamed ' + id],\n    secondaryName: false,\n    num: '00',\n    services: [Services.local],\n    parents: [],\n    children: [],\n    branch: { left: [], right: [] },\n    transfer: {\n        info: [[]],\n        // type: 'none',\n        tick_direc: ShortDirection.right,\n        paid_area: true,\n        osi_names: [],\n    },\n    facility: Facilities.none,\n    loop_pivot: false,\n});\n\n/**\n * @deprecated For V3 legacy support\n */\nexport const addStationLegacy = (\n    prep: 'before' | 'after',\n    pivotStationId: string,\n    loc: 'centre' | 'upper' | 'lower' | 'newupper' | 'newlower',\n    end: string\n) => {\n    // return new station id\n    return (dispatch: AppDispatch, getState: () => RootState): string => {\n        const stationList = getState().param.stn_list;\n        // get new id\n        let newId = getRandomId();\n        while (Object.keys(stationList).includes(newId)) {\n            newId = getRandomId();\n        }\n        let newInfo: StationInfo = {\n            name: [' ' + newId, 'Unnamed ' + newId],\n            secondaryName: false,\n            num: '00',\n            services: [Services.local],\n            parents: [],\n            children: [],\n            branch: {\n                left: [],\n                right: [],\n            },\n            transfer: {\n                info: [[]],\n                // type: 'none',\n                tick_direc: ShortDirection.right,\n                paid_area: true,\n                osi_names: [],\n            },\n            facility: Facilities.none,\n            loop_pivot: false,\n        };\n\n        let newStnList = JSON.parse(JSON.stringify(stationList)) as StationDict;\n\n        if (prep === 'before') {\n            if (loc === 'centre') {\n                newInfo.parents = stationList[pivotStationId].parents;\n                if (\n                    stationList[pivotStationId].parents.length === 0 &&\n                    getYShareMTR(pivotStationId, stationList) !== 0\n                ) {\n                    // todo: is this case really exist?\n                    newInfo.children = stationList.linestart.children;\n                } else if (getYShareMTR(pivotStationId, stationList) !== 0) {\n                    // pivot on branch\n                    newInfo.children = stationList[stationList[pivotStationId].parents[0]].children.slice();\n                    newInfo.branch.right = stationList[newInfo.parents[0]].branch.right;\n                    newStnList[newInfo.parents[0]].branch.right = [];\n                } else {\n                    // pivot on main\n                    newInfo.children = [pivotStationId];\n                    newInfo.branch.left = stationList[pivotStationId].branch.left;\n                    newStnList[pivotStationId].branch.left = [];\n                }\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n            } else if (loc === 'upper') {\n                if (stationList[pivotStationId].parents.length === 2) {\n                    if (stationList[pivotStationId].branch.left[1] === stationList[pivotStationId].parents[0]) {\n                        newStnList[pivotStationId].branch.left[1] = newId;\n                    }\n\n                    newInfo.parents = stationList[pivotStationId].parents.slice(0, 1);\n                    newInfo.children = [pivotStationId];\n                    newInfo.parents.forEach(par => {\n                        newStnList[par].children = [newId];\n                    });\n                    newStnList[pivotStationId].parents[0] = newId;\n                } else {\n                    // already on branch\n                    newInfo.parents = stationList[pivotStationId].parents;\n                    newInfo.children = [pivotStationId];\n                    newInfo.parents.forEach(par => {\n                        newStnList[par].children[0] = newId;\n\n                        if (stationList[par].branch.right[1] === pivotStationId) {\n                            newStnList[par].branch.right[1] = newId;\n                        }\n                    });\n                    newInfo.children.forEach(child => {\n                        newStnList[child].parents = [newId];\n                    });\n                }\n            } else if (loc === 'lower') {\n                if (stationList[pivotStationId].parents.length === 2) {\n                    if (stationList[pivotStationId].branch.left[1] === stationList[pivotStationId].parents[1]) {\n                        newStnList[pivotStationId].branch.left[1] = newId;\n                    }\n\n                    newInfo.parents = stationList[pivotStationId].parents.slice(1);\n                    newInfo.children = [pivotStationId];\n                    newInfo.parents.forEach(par => {\n                        newStnList[par].children = [newId];\n                    });\n                    newStnList[pivotStationId].parents[1] = newId;\n                } else {\n                    // already on branch\n                    newInfo.parents = stationList[pivotStationId].parents;\n                    newInfo.children = [pivotStationId];\n                    newInfo.parents.forEach(par => {\n                        let parChildLen = stationList[par].children.length;\n                        newStnList[par].children[parChildLen - 1] = newId;\n\n                        if (stationList[par].branch.right[1] === pivotStationId) {\n                            newStnList[par].branch.right[1] = newId;\n                        }\n                    });\n                    newInfo.children.forEach(child => {\n                        newStnList[child].parents = [newId];\n                    });\n                }\n            } else {\n                newStnList[pivotStationId].branch.left = [BranchStyle.through, newId];\n                newStnList[end].branch.right = [BranchStyle.through, newId];\n                newInfo.parents = [end];\n                newInfo.children = [pivotStationId];\n\n                if (loc === 'newupper') {\n                    newStnList[end].children.unshift(newId);\n                    newStnList[pivotStationId].parents.unshift(newId);\n                } else {\n                    newStnList[end].children.push(newId);\n                    newStnList[pivotStationId].parents.push(newId);\n                }\n            }\n        } else {\n            if (loc === 'centre') {\n                newInfo.children = stationList[pivotStationId].children;\n                if (\n                    stationList[pivotStationId].children.length === 0 &&\n                    getYShareMTR(pivotStationId, stationList) !== 0\n                ) {\n                    newInfo.parents = stationList.lineend.parents;\n                } else if (getYShareMTR(pivotStationId, stationList) !== 0) {\n                    // pivot on branch\n                    newInfo.parents = stationList[stationList[pivotStationId].children[0]].parents;\n                    newInfo.branch.left = stationList[newInfo.children[0]].branch.left;\n                    newStnList[newInfo.children[0]].branch.left = [];\n                } else {\n                    // pivot on main\n                    newInfo.parents = [pivotStationId];\n                    newInfo.branch.right = stationList[pivotStationId].branch.right;\n                    newStnList[pivotStationId].branch.right = [];\n                }\n                newInfo.children.forEach(child => {\n                    newStnList[child].parents = [newId];\n                });\n                newInfo.parents.forEach(par => {\n                    newStnList[par].children = [newId];\n                });\n            } else if (loc === 'upper') {\n                if (stationList[pivotStationId].children.length === 2) {\n                    if (stationList[pivotStationId].branch.right[1] === stationList[pivotStationId].children[0]) {\n                        newStnList[pivotStationId].branch.right[1] = newId;\n                    }\n\n                    newInfo.children = stationList[pivotStationId].children.slice(0, 1);\n                    newInfo.parents = [pivotStationId];\n                    newInfo.children.forEach(child => {\n                        newStnList[child].parents = [newId];\n                    });\n                    newStnList[pivotStationId].children[0] = newId;\n                } else {\n                    // already on branch\n                    newInfo.children = stationList[pivotStationId].children;\n                    newInfo.parents = [pivotStationId];\n                    newInfo.children.forEach(child => {\n                        newStnList[child].parents[0] = newId;\n\n                        if (stationList[child].branch.left[1] === pivotStationId) {\n                            newStnList[child].branch.left[1] = newId;\n                        }\n                    });\n                    newInfo.parents.forEach(par => {\n                        newStnList[par].children = [newId];\n                    });\n                }\n            } else if (loc === 'lower') {\n                if (stationList[pivotStationId].children.length === 2) {\n                    if (stationList[pivotStationId].branch.right[1] === stationList[pivotStationId].children[1]) {\n                        newStnList[pivotStationId].branch.right[1] = newId;\n                    }\n\n                    newInfo.children = stationList[pivotStationId].children.slice(1);\n                    newInfo.parents = [pivotStationId];\n                    newInfo.children.forEach(child => {\n                        newStnList[child].parents = [newId];\n                    });\n                    newStnList[pivotStationId].children[1] = newId;\n                } else {\n                    // already on branch\n                    newInfo.children = stationList[pivotStationId].children;\n                    newInfo.parents = [pivotStationId];\n                    newInfo.children.forEach(child => {\n                        newStnList[child].parents[stationList[child].parents.length === 1 ? 0 : 1] = newId;\n\n                        if (stationList[child].branch.left[1] === pivotStationId) {\n                            newStnList[child].branch.left[1] = newId;\n                        }\n                    });\n                    newInfo.parents.forEach(par => {\n                        newStnList[par].children = [newId];\n                    });\n                }\n            } else {\n                newStnList[pivotStationId].branch.right = [BranchStyle.through, newId];\n                newStnList[end].branch.left = [BranchStyle.through, newId];\n\n                newInfo.children = [end];\n                newInfo.parents = [pivotStationId];\n\n                if (loc === 'newupper') {\n                    newStnList[end].parents.unshift(newId);\n                    newStnList[pivotStationId].children.unshift(newId);\n                } else {\n                    newStnList[end].parents.push(newId);\n                    newStnList[pivotStationId].children.push(newId);\n                }\n            }\n        }\n\n        dispatch(\n            setStationsBulk({\n                ...newStnList,\n                [newId]: newInfo,\n            })\n        );\n        return newId;\n    };\n};\n\nexport const addStation = (where: `${number}` | 'new', from: string, to: string, position?: 'upper' | 'lower') => {\n    return (dispatch: AppDispatch, getState: () => RootState): string | false => {\n        const stationList = getState().param.stn_list;\n\n        // get new id\n        const newId = nanoid(6);\n        const newStationInfo = getStationTemplate(newId);\n\n        if (where !== 'new') {\n            const nextStationList = {\n                ...stationList,\n                [from]: {\n                    ...stationList[from],\n                    children: stationList[from].children.map(id => (id === to ? newId : id)),\n                    branch: {\n                        left: stationList[from].branch.left,\n                        right:\n                            stationList[from].branch.right.length && stationList[from].branch.right[1] === to\n                                ? ([stationList[from].branch.right[0], newId] as [BranchStyle, string])\n                                : stationList[from].branch.right,\n                    },\n                },\n                [to]: {\n                    ...stationList[to],\n                    parents: stationList[to].parents.map(id => (id === from ? newId : id)),\n                    branch: {\n                        left:\n                            stationList[to].branch.left.length && stationList[to].branch.left[1] === from\n                                ? ([stationList[to].branch.left[0], newId] as [BranchStyle, string])\n                                : stationList[to].branch.left,\n                        right: stationList[to].branch.right,\n                    },\n                },\n                [newId]: {\n                    ...newStationInfo,\n                    parents: [from],\n                    children: [to],\n                },\n            };\n            dispatch(setStationsBulk(nextStationList));\n            return newId;\n        } else {\n            if (!position) {\n                return false;\n            }\n\n            const nextStationList = {\n                ...stationList,\n                [from]: {\n                    ...stationList[from],\n                    children:\n                        position === 'upper'\n                            ? [newId, stationList[from].children[0]]\n                            : [stationList[from].children[0], newId],\n                    branch: {\n                        left: stationList[from].branch.left,\n                        right: [BranchStyle.through, newId] as [BranchStyle, string],\n                    },\n                },\n                [to]: {\n                    ...stationList[to],\n                    parents:\n                        position === 'upper'\n                            ? [newId, stationList[to].parents[0]]\n                            : [stationList[to].parents[0], newId],\n                    branch: {\n                        left: [BranchStyle.through, newId] as [BranchStyle, string],\n                        right: stationList[to].branch.right,\n                    },\n                },\n                [newId]: {\n                    ...newStationInfo,\n                    parents: [from],\n                    children: [to],\n                },\n            };\n            dispatch(setStationsBulk(nextStationList));\n            return newId;\n        }\n    };\n};\n\nexport const addStationToExistingBranch = (where: number, preposition: 'before' | 'after', pivot: string) => {\n    return (dispatch: AppDispatch, getState: () => RootState): false | string => {\n        const branches = getState().helper.branches;\n        const branch = branches[where];\n\n        if (branch?.length) {\n            if (preposition === 'before') {\n                const from = branch[branch.indexOf(pivot) - 1];\n                return dispatch(addStation(where.toString() as `${number}`, from, pivot));\n            } else {\n                const to = branch[branch.indexOf(pivot) + 1];\n                return dispatch(addStation(where.toString() as `${number}`, pivot, to));\n            }\n        } else {\n            return false;\n        }\n    };\n};\n\nexport const getNewBranchAllowedEnds = () => {\n    return (dispatch: AppDispatch, getState: () => RootState): string[] => {\n        const stationList = getState().param.stn_list;\n        const branches = getState().helper.branches;\n\n        return branches[0].filter(id => {\n            const isTwoSidedBranchOut = stationList[id].parents.length + stationList[id].children.length === 4;\n            const isYShare0 = getYShareMTR(id, stationList) === 0;\n\n            return !isTwoSidedBranchOut && isYShare0;\n        });\n    };\n};\n\nexport const verifyNewBranchEnds = (from: string, to: string) => {\n    return (dispatch: AppDispatch, getState: () => RootState): string => {\n        const stationList = getState().param.stn_list;\n        const branches = getState().helper.branches;\n\n        // should be included in main line\n        if (!branches[0].includes(from) || !branches[0].includes(to)) {\n            return 'Branch should end at main line';\n        }\n\n        // from should come before to\n        if (branches[0].indexOf(from) > branches[0].indexOf(to)) {\n            return 'Not in correct ordering';\n        }\n\n        // should not be open jaw from the first station\n        if (from === 'linestart' && branches[0].indexOf(to) === 1) {\n            return 'Branch should not be open jaw from the first station';\n        }\n\n        // should not be open jaw from the last station\n        if (to === 'lineend' && branches[0].indexOf(from) === branches[0].length - 2) {\n            return 'Branch should not be open jaw from the last station';\n        }\n\n        // from has one child, to has one parent\n        if (stationList[from].children.length > 1 || stationList[to].parents.length > 1) {\n            return 'Branch already exist';\n        }\n\n        // end station won't be a middle station of any branch except main line\n        const isExistBranchIncludesEndStation = branches\n            .slice(1)\n            .some(branch => branch.slice(1, -1).includes(from) || branch.slice(1, -1).includes(to));\n        if (isExistBranchIncludesEndStation) {\n            return 'Cannot branch out from existing branch';\n        }\n\n        // stations between both ends should be stations which isn't branching out\n        const isStationsBetweenNotBranchOut = branches[0]\n            .slice(branches[0].indexOf(from) + 1, branches[0].indexOf(to))\n            .every(id => stationList[id].parents.length === 1 && stationList[id].children.length === 1);\n        if (!isStationsBetweenNotBranchOut) {\n            return 'One or more stations between both ends are branching out';\n        }\n\n        return '';\n    };\n};\n","import React, { useEffect, useState } from 'react';\nimport {\n    Alert,\n    AlertIcon,\n    Box,\n    Button,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useAppDispatch, useAppSelector } from '../../redux';\nimport { RmgStyle, SidePanelMode } from '../../constants/constants';\nimport { isColineBranch } from '../../redux/param/coline-action';\nimport { useTranslation } from 'react-i18next';\nimport { addStationToExistingBranch } from '../../redux/param/add-station-action';\nimport { setSelectedStation, setSidePanelMode } from '../../redux/app/action';\n\ninterface AddStationModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function AddStationModal(props: AddStationModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const selectedBranch = useAppSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useAppSelector(state => state.param);\n    const branches = useAppSelector(state => state.helper.branches);\n\n    const [where, setWhere] = useState(selectedBranch);\n    const [preposition, setPreposition] = useState<'before' | 'after'>('before');\n    const [pivot, setPivot] = useState('');\n    const [error, setError] = useState(false);\n\n    useEffect(() => {\n        setWhere(selectedBranch);\n    }, [selectedBranch]);\n\n    useEffect(() => {\n        if (!isOpen) {\n            setError(false);\n        }\n    }, [isOpen]);\n\n    const selectableStations = branches[Number(where)]?.slice(1, -1) ?? [];\n\n    const getStationOptions = (stationIdList: string[]): Record<string, string> => {\n        return stationIdList.reduce(\n            (acc, cur) => ({\n                ...acc,\n                [cur]: stationList[cur]?.name.join(' - '),\n            }),\n            { '': t('AddStationModal.pleaseSelect') }\n        );\n    };\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('AddStationModal.where'),\n            value: where,\n            options: {\n                ...branches.reduce(\n                    (acc, cur, idx) => ({\n                        ...acc,\n                        [idx]:\n                            idx === 0\n                                ? t('AddStationModal.main')\n                                : style !== RmgStyle.SHMetro || !isColineBranch(cur, stationList)\n                                ? t('AddStationModal.branch') + ' ' + idx\n                                : t('AddStationModal.external') + ' ' + idx,\n                    }),\n                    {}\n                ),\n            },\n            onChange: value => handleSelectWhere(value as number),\n            minW: 'full',\n        },\n        {\n            type: 'select',\n            label: t('AddStationModal.preposition'),\n            value: preposition,\n            options: {\n                before: t('AddStationModal.before'),\n                after: t('AddStationModal.after'),\n            },\n            onChange: value => setPreposition(value as 'before' | 'after'),\n        },\n        {\n            type: 'select',\n            label: t('AddStationModal.pivot'),\n            value: pivot,\n            options: getStationOptions(selectableStations),\n            disabledOptions: [''],\n            onChange: value => setPivot(value as string),\n        },\n    ];\n\n    const handleSelectWhere = (value: number) => {\n        setWhere(value);\n        setPivot('');\n    };\n\n    const handleSubmit = () => {\n        const result = dispatch(addStationToExistingBranch(where, preposition, pivot));\n        if (result) {\n            onClose();\n\n            dispatch(setSelectedStation(result));\n            dispatch(setSidePanelMode(SidePanelMode.STATION));\n        } else {\n            console.log('false here');\n            setError(true);\n        }\n    };\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                {error && (\n                    <Alert status=\"error\" variant=\"solid\" size=\"xs\">\n                        <AlertIcon />\n                        {t('AddStationModal.error')}\n                    </Alert>\n                )}\n                <Box position=\"relative\">\n                    <ModalHeader>{t('AddStationModal.title')}</ModalHeader>\n                    <ModalCloseButton />\n                </Box>\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button colorScheme=\"teal\" onClick={handleSubmit} disabled={!pivot}>\n                        {t('AddStationModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { useEffect, useState } from 'react';\nimport {\n    Button,\n    Modal,\n    ModalBody,\n    ModalCloseButton,\n    ModalContent,\n    ModalFooter,\n    ModalHeader,\n    ModalOverlay,\n} from '@chakra-ui/react';\nimport { RmgFields, RmgFieldsField } from '@railmapgen/rmg-components';\nimport { useAppDispatch, useAppSelector } from '../../redux';\nimport { addStation, getNewBranchAllowedEnds, verifyNewBranchEnds } from '../../redux/param/add-station-action';\nimport { RmgStyle } from '../../constants/constants';\nimport { useTranslation } from 'react-i18next';\n\ninterface NewBranchModalProps {\n    isOpen: boolean;\n    onClose: () => void;\n}\n\nexport default function NewBranchModal(props: NewBranchModalProps) {\n    const { isOpen, onClose } = props;\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const [where, setWhere] = useState<'new' | 'ext'>('new');\n    const [from, setFrom] = useState('');\n    const [to, setTo] = useState('');\n    const [position, setPosition] = useState<'upper' | 'lower'>('upper');\n\n    const [fromError, setFromError] = useState('');\n    const [toError, setToError] = useState('');\n\n    const { style, stn_list: stationList } = useAppSelector(state => state.param);\n\n    useEffect(() => {\n        // reset whenever modal is closed\n        if (!isOpen) {\n            setWhere('new');\n            setFrom('');\n            setTo('');\n        }\n    }, [isOpen]);\n\n    const getStationOptions = (stationIdList: string[]): Record<string, string> => {\n        return stationIdList.reduce(\n            (acc, cur) => ({\n                ...acc,\n                [cur]: stationList[cur]?.name.join(' - '),\n            }),\n            { '': t('NewBranchModal.pleaseSelect') }\n        );\n    };\n\n    const newBranchEndStationOptions = getStationOptions(dispatch(getNewBranchAllowedEnds()));\n\n    const fields: RmgFieldsField[] = [\n        {\n            type: 'select',\n            label: t('NewBranchModal.where'),\n            value: where,\n            options: {\n                new: t('NewBranchModal.new'),\n                ext: t('NewBranchModal.ext'),\n            },\n            disabledOptions: style === RmgStyle.SHMetro ? [] : ['ext'],\n            onChange: value => handleSelectWhere(value as 'new' | 'ext'),\n            minW: 'full',\n        },\n        {\n            type: 'select',\n            label: t('NewBranchModal.from'),\n            value: from,\n            options: newBranchEndStationOptions,\n            disabledOptions: [''],\n            onChange: value => handleSelectFrom(value as string),\n            isInvalid: Boolean(fromError),\n        },\n        {\n            type: 'select',\n            label: t('NewBranchModal.to'),\n            value: to,\n            options: newBranchEndStationOptions,\n            disabledOptions: [''],\n            onChange: value => handleSelectTo(value as string),\n            isInvalid: Boolean(toError),\n        },\n        {\n            type: 'select',\n            label: t('NewBranchModal.position'),\n            value: position,\n            options: {\n                upper: t('NewBranchModal.upper'),\n                lower: t('NewBranchModal.lower'),\n            },\n            onChange: value => setPosition(value as 'upper' | 'lower'),\n            minW: 'full',\n            hidden: where !== 'new' || style === RmgStyle.SHMetro,\n        },\n    ];\n\n    const handleSelectWhere = (value: 'new' | 'ext') => {\n        setWhere(value);\n        setFrom('');\n        setTo('');\n        setFromError('');\n        setToError('');\n    };\n\n    const handleSelectFrom = (value: string) => {\n        setFrom(value);\n        setFromError('');\n\n        if (value && to) {\n            setToError(dispatch(verifyNewBranchEnds(value, to)));\n        }\n    };\n\n    const handleSelectTo = (value: string) => {\n        setTo(value);\n        setToError('');\n\n        if (from && value) {\n            setFromError(dispatch(verifyNewBranchEnds(from, value)));\n        }\n    };\n\n    const handleSubmit = () => {\n        let result: false | string;\n        if (where === 'ext') {\n            // SHMetro specific - treat lower branch as external line\n            result = dispatch(addStation('new', from, to, 'lower'));\n        } else {\n            if (style === RmgStyle.SHMetro) {\n                result = dispatch(addStation('new', from, to, 'upper'));\n            } else {\n                result = dispatch(addStation('new', from, to, position));\n            }\n        }\n\n        if (result) {\n            onClose();\n        }\n    };\n\n    const isSubmitDisabled = Boolean(!from || !to || fromError || toError);\n\n    return (\n        <Modal isOpen={isOpen} onClose={onClose}>\n            <ModalOverlay />\n            <ModalContent>\n                <ModalHeader>{t('NewBranchModal.title')}</ModalHeader>\n                <ModalCloseButton />\n\n                <ModalBody>\n                    <RmgFields fields={fields} />\n                </ModalBody>\n\n                <ModalFooter>\n                    <Button\n                        colorScheme=\"teal\"\n                        title={isSubmitDisabled ? fromError || toError : t('NewBranchModal.submit')}\n                        onClick={handleSubmit}\n                        disabled={isSubmitDisabled}\n                    >\n                        {t('NewBranchModal.submit')}\n                    </Button>\n                </ModalFooter>\n            </ModalContent>\n        </Modal>\n    );\n}\n","import React, { lazy, Suspense, useState } from 'react';\nimport { Box, Button, HStack, IconButton, Progress, Tab, TabList, TabPanel, TabPanels, Tabs } from '@chakra-ui/react';\nimport { MdAdd } from 'react-icons/md';\nimport AddStationModal from '../modal/add-station-modal';\nimport { useAppDispatch, useAppSelector } from '../../redux';\nimport { RmgStyle, SidePanelMode } from '../../constants/constants';\nimport { isColineBranch } from '../../redux/param/coline-action';\nimport { setSelectedBranch, setSidePanelMode } from '../../redux/app/action';\nimport { useTranslation } from 'react-i18next';\nimport NewBranchModal from '../modal/new-branch-modal';\nimport ErrorBoundary from '../../error-boundary';\n\nconst StationAgGrid = lazy(() => import(/* webpackChunkName: \"StationAgGrid\" */ './station-ag-grid'));\n\nexport default function GridTabs() {\n    const { t } = useTranslation();\n    const dispatch = useAppDispatch();\n\n    const [isAddStationModalOpen, setIsAddStationModalOpen] = useState(false);\n    const [isNewBranchModalOpen, setIsNewBranchModalOpen] = useState(false);\n\n    const selectedBranch = useAppSelector(state => state.app.selectedBranch);\n    const { style, stn_list: stationList } = useAppSelector(state => state.param);\n    const branches = useAppSelector(state => state.helper.branches);\n\n    const handleEditLineSection = () => {\n        dispatch(setSidePanelMode(SidePanelMode.BRANCH));\n    };\n\n    return (\n        <Box flex={1} overflow=\"hidden\">\n            <Tabs\n                height=\"100%\"\n                display=\"flex\"\n                flexDirection=\"column\"\n                overflow=\"hidden\"\n                index={selectedBranch}\n                onChange={index => dispatch(setSelectedBranch(index))}\n            >\n                <TabList>\n                    {branches.map((branch, i) => {\n                        if (i === 0) {\n                            return <Tab key={i}>{t('GridTabs.main')}</Tab>;\n                        } else {\n                            if (style !== RmgStyle.SHMetro || !isColineBranch(branch, stationList)) {\n                                return <Tab key={i}>{t('GridTabs.branch') + ' ' + i}</Tab>;\n                            } else {\n                                return <Tab key={i}>{t('GridTabs.external') + ' ' + i}</Tab>;\n                            }\n                        }\n                    })}\n                    <IconButton\n                        size=\"sm\"\n                        variant=\"ghost\"\n                        alignSelf=\"center\"\n                        aria-label=\"New branch\"\n                        onClick={() => setIsNewBranchModalOpen(true)}\n                        icon={<MdAdd />}\n                    />\n\n                    <HStack marginLeft=\"auto\" marginRight={1}>\n                        <Button\n                            variant=\"outline\"\n                            size=\"xs\"\n                            leftIcon={<MdAdd />}\n                            onClick={() => setIsAddStationModalOpen(true)}\n                        >\n                            {t('GridTabs.addStation')}\n                        </Button>\n                        <Button size=\"xs\" colorScheme=\"teal\" onClick={handleEditLineSection}>\n                            {t('GridTabs.editLine')}\n                        </Button>\n                    </HStack>\n                </TabList>\n\n                <TabPanels flex={1} overflowY=\"auto\">\n                    {branches.map((_, i) => (\n                        <TabPanel key={i} padding={0} h=\"100%\">\n                            <Suspense fallback={<Progress isIndeterminate />}>\n                                <ErrorBoundary>\n                                    <StationAgGrid branchIndex={i} />\n                                </ErrorBoundary>\n                            </Suspense>\n                        </TabPanel>\n                    ))}\n                </TabPanels>\n            </Tabs>\n\n            <AddStationModal isOpen={isAddStationModalOpen} onClose={() => setIsAddStationModalOpen(false)} />\n            <NewBranchModal isOpen={isNewBranchModalOpen} onClose={() => setIsNewBranchModalOpen(false)} />\n        </Box>\n    );\n}\n","import React, { useEffect } from 'react';\nimport SvgRouter from '../svgs/svg-router';\nimport SidePanel from './side-panel/side-panel';\nimport PageHeader from './page-header/page-header';\nimport WindowHeader from './window-header';\nimport { Alert, AlertIcon, Box, CloseButton, Flex } from '@chakra-ui/react';\nimport { useDispatch } from 'react-redux';\nimport { useAppSelector } from '../redux';\nimport { setGlobalAlert } from '../redux/app/action';\nimport GridTabs from './ag-grid/grid-tabs';\n\nexport default function AppRoot() {\n    const dispatch = useDispatch();\n\n    const globalAlert = useAppSelector(state => state.app.globalAlert);\n    const param = useAppSelector(state => state.param);\n    const paramString = JSON.stringify(param);\n\n    useEffect(() => {\n        window.rmgStorage.writeFile('rmgParam', paramString).then();\n    }, [paramString]);\n\n    return (\n        <Flex direction=\"column\" height=\"100%\" overflow=\"hidden\">\n            <WindowHeader />\n            <Flex direction=\"column\" flex={1} overflow=\"hidden\">\n                <PageHeader />\n                <Flex flex={1} overflow=\"hidden\" position=\"relative\">\n                    <Flex as=\"section\" direction=\"column\" flex={1} ml={1} mr={1} overflow=\"hidden\">\n                        {globalAlert && (\n                            <Alert status={globalAlert.status} variant=\"solid\" size=\"xs\" pl={3} pr={1} pb={0} pt={0}>\n                                <AlertIcon />\n                                {globalAlert.message}\n                                <CloseButton ml=\"auto\" onClick={() => dispatch(setGlobalAlert())} />\n                            </Alert>\n                        )}\n\n                        <Box>\n                            <SvgRouter />\n                        </Box>\n                        <GridTabs />\n                    </Flex>\n\n                    <SidePanel />\n                </Flex>\n            </Flex>\n\n            <canvas style={{ display: 'none' }} />\n        </Flex>\n    );\n}\n","import { Translation } from '../constants';\nimport { CompanyCode } from '../company-config';\n\nexport const templateList: Record<CompanyCode, { filename: string; name: Translation }[]> = {\n    basic: [\n        {\n            filename: 'blank',\n            name: {\n                en: 'Blank',\n                zh: '',\n            },\n        },\n        {\n            filename: 'default',\n            name: {\n                en: 'Default',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'coline',\n            name: {\n                en: 'Track Share',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'loop',\n            name: {\n                en: 'Loop Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n    ],\n\n    bjsubway: [\n        {\n            filename: 'bj1',\n            name: {\n                en: 'Line 1 by AnDanJuneUnderline',\n                'zh-Hans': '1  AnDanJuneUnderline',\n                'zh-Hant': '1  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj2',\n            name: {\n                en: 'Line 2 by AnDanJuneUnderline',\n                'zh-Hans': '2  AnDanJuneUnderline',\n                'zh-Hant': '2  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj4',\n            name: {\n                en: 'Line 4 by AnDanJuneUnderline',\n                'zh-Hans': '4  AnDanJuneUnderline',\n                'zh-Hant': '4  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj5',\n            name: {\n                en: 'Line 5 by AnDanJuneUnderline',\n                'zh-Hans': '5  AnDanJuneUnderline',\n                'zh-Hant': '5  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj6',\n            name: {\n                en: 'Line 6 by AnDanJuneUnderline',\n                'zh-Hans': '6  AnDanJuneUnderline',\n                'zh-Hant': '6  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj7',\n            name: {\n                en: 'Line 7 by AnDanJuneUnderline',\n                'zh-Hans': '7  AnDanJuneUnderline',\n                'zh-Hant': '7  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj8',\n            name: {\n                en: 'Line 8 by Jay20081229',\n                'zh-Hans': '8  Jay20081229',\n                'zh-Hant': '8  Jay20081229',\n            },\n        },\n        {\n            filename: 'bj9',\n            name: {\n                en: 'Line 9 by AnDanJuneUnderline',\n                'zh-Hans': '9  AnDanJuneUnderline',\n                'zh-Hant': '9  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj10',\n            name: {\n                en: 'Line 10 by 52PD',\n                'zh-Hans': '10  52PD',\n                'zh-Hant': '10  52PD',\n            },\n        },\n        {\n            filename: 'bj11',\n            name: {\n                en: 'Line 11 by Jay20081229',\n                'zh-Hans': '11  Jay20081229',\n                'zh-Hant': '11  Jay20081229',\n            },\n        },\n        {\n            filename: 'bj13',\n            name: {\n                en: 'Line 13 by AnDanJuneUnderline',\n                'zh-Hans': '13  AnDanJuneUnderline',\n                'zh-Hant': '13  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 'bj14',\n            name: {\n                en: 'Line 14 by Jay20081229',\n                'zh-Hans': '14  Jay20081229',\n                'zh-Hant': '14  Jay20081229',\n            },\n        },\n        {\n            filename: 'yzl',\n            name: {\n                en: 'Yizhuang Line by AnDanJuneUnderline',\n                'zh-Hans': '  AnDanJuneUnderline',\n                'zh-Hant': '  AnDanJuneUnderline',\n            },\n        },\n        {\n            filename: 't1l',\n            name: {\n                en: 'Yizhuang T1 Line by AnDanJuneUnderline',\n                'zh-Hans': 'T1  AnDanJuneUnderline',\n                'zh-Hant': 'T1  AnDanJuneUnderline',\n            },\n        },\n    ],\n\n    fmetro: [\n        {\n            filename: 'fs2',\n            name: {\n                en: 'Line 2 by Dingdong2334',\n                'zh-Hans': '2  Dingdong2334',\n                'zh-Hant': '2  Dingdong2334',\n            },\n        },\n        {\n            filename: 'tnh1',\n            name: {\n                en: 'Nanhai Tram Line 1 by clearng-kly',\n                'zh-Hans': '1  clearng-kly',\n                'zh-Hant': '1  clearng-kly',\n            },\n        },\n        {\n            filename: 'tgm1',\n            name: {\n                en: 'Gaoming Tram by clearng-kly',\n                'zh-Hans': '  clearng-kly',\n                'zh-Hant': '  clearng-kly',\n            },\n        },\n    ],\n\n    gzmtr: [\n        {\n            filename: 'gz1',\n            name: {\n                en: 'Line 1',\n                'zh-Hans': '1',\n                'zh-Hant': '1',\n            },\n        },\n        {\n            filename: 'gz2',\n            name: {\n                en: 'Line 2',\n                'zh-Hans': '2',\n                'zh-Hant': '2',\n            },\n        },\n        {\n            filename: 'gz3',\n            name: {\n                en: 'Line 3',\n                'zh-Hans': '3',\n                'zh-Hant': '3',\n            },\n        },\n        {\n            filename: 'gz4',\n            name: {\n                en: 'Line 4',\n                'zh-Hans': '4',\n                'zh-Hant': '4',\n            },\n        },\n        {\n            filename: 'gz5',\n            name: {\n                en: 'Line 5',\n                'zh-Hans': '5',\n                'zh-Hant': '5',\n            },\n        },\n        {\n            filename: 'gz6',\n            name: {\n                en: 'Line 6',\n                'zh-Hans': '6',\n                'zh-Hant': '6',\n            },\n        },\n        {\n            filename: 'gz7',\n            name: {\n                en: 'Line 7',\n                'zh-Hans': '7',\n                'zh-Hant': '7',\n            },\n        },\n        {\n            filename: 'gz8',\n            name: {\n                en: 'Line 8',\n                'zh-Hans': '8',\n                'zh-Hant': '8',\n            },\n        },\n        {\n            filename: 'gz9',\n            name: {\n                en: 'Line 9',\n                'zh-Hans': '9',\n                'zh-Hant': '9',\n            },\n        },\n        {\n            filename: 'gz13',\n            name: {\n                en: 'Line 13 by Dingdong2334',\n                'zh-Hans': '13  Dingdong2334',\n                'zh-Hant': '13  Dingdong2334',\n            },\n        },\n        {\n            filename: 'gz14',\n            name: {\n                en: 'Line 14',\n                'zh-Hans': '14',\n                'zh-Hant': '14',\n            },\n        },\n        {\n            filename: 'gz18',\n            name: {\n                en: 'Line 18 by Dingdong2334',\n                'zh-Hans': '18  Dingdong2334',\n                'zh-Hant': '18  Dingdong2334',\n            },\n        },\n        {\n            filename: 'gz21',\n            name: {\n                en: 'Line 21',\n                'zh-Hans': '21',\n                'zh-Hant': '21',\n            },\n        },\n        {\n            filename: 'gz22',\n            name: {\n                en: 'Line 22',\n                'zh-Hans': '22',\n                'zh-Hant': '22',\n            },\n        },\n        {\n            filename: 'gf',\n            name: {\n                en: 'Guangfo Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'apm',\n            name: {\n                en: 'APM Line by Dingdong2334',\n                'zh-Hans': 'APM  Dingdong2334',\n                'zh-Hant': 'APM  Dingdong2334',\n            },\n        },\n        {\n            filename: 'thz1',\n            name: {\n                en: 'Haizhu Tram Line 1',\n                'zh-Hans': '1  clearng-kly',\n                'zh-Hant': '1  clearng-kly',\n            },\n        },\n        {\n            filename: 'thp1',\n            name: {\n                en: 'Huangpu Tram Line 1',\n                'zh-Hans': '1  clearng-kly',\n                'zh-Hant': '1  clearng-kly',\n            },\n        },\n    ],\n\n    kmrailtransit: [\n        {\n            filename: 'km1',\n            name: {\n                en: 'Line 1 by 52PD',\n                'zh-Hans': '1  52PD',\n                'zh-Hant': '1  52PD',\n            },\n        },\n        {\n            filename: 'km2',\n            name: {\n                en: 'Line 2 by 52PD',\n                'zh-Hans': '2  52PD',\n                'zh-Hant': '2  52PD',\n            },\n        },\n        {\n            filename: 'km3',\n            name: {\n                en: 'Line 3 by 52PD',\n                'zh-Hans': '3  52PD',\n                'zh-Hant': '3  52PD',\n            },\n        },\n        {\n            filename: 'km4',\n            name: {\n                en: 'Line 4 by 52PD',\n                'zh-Hans': '4  52PD',\n                'zh-Hant': '4  52PD',\n            },\n        },\n        {\n            filename: 'km5',\n            name: {\n                en: 'Line 5 by 52PD',\n                'zh-Hans': '5  52PD',\n                'zh-Hant': '5  52PD',\n            },\n        },\n        {\n            filename: 'km6',\n            name: {\n                en: 'Line 6 by 52PD',\n                'zh-Hans': '6  52PD',\n                'zh-Hant': '6  52PD',\n            },\n        },\n    ],\n\n    kvtransit: [\n        {\n            filename: 'klMonorail',\n            name: {\n                en: 'KL Monorail',\n                ms: 'KL Monorail',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'lrtAmpang',\n            name: {\n                en: 'Ampang Line',\n                ms: 'Laluan Ampang',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'lrtKelanaJaya',\n            name: {\n                en: 'Kelana Jaya Line',\n                ms: 'Laluan Kelana Jaya',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'lrtSriPataling',\n            name: {\n                en: 'Sri Pataling Line',\n                ms: 'Laluan Sri Pataling',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'mrtKajang',\n            name: {\n                en: 'Kajang Line',\n                ms: 'Laluan Kajang',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n    ],\n\n    mlm: [\n        {\n            filename: 'taipa',\n            name: {\n                en: 'Taipa Line',\n                pt: 'Linha Taipa',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n    ],\n\n    mtr: [\n        {\n            filename: 'twl',\n            name: {\n                en: 'Tsuen Wan Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'ktl',\n            name: {\n                en: 'Kwun Tong Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'isl',\n            name: {\n                en: 'Island Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'tkl',\n            name: {\n                en: 'Tseung Kwan O Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'sile',\n            name: {\n                en: 'South Island Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'eal',\n            name: {\n                en: 'East Rail Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'drl',\n            name: {\n                en: 'Disneyland Resort Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'ael',\n            name: {\n                en: 'Airport Express',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n        {\n            filename: 'tml',\n            name: {\n                en: 'Tuen Ma Line',\n                'zh-Hans': '',\n                'zh-Hant': '',\n            },\n        },\n    ],\n\n    njmetro: [\n        {\n            filename: 'nj1',\n            name: {\n                en: 'Line 1 by linchen1965',\n                'zh-Hans': '1  linchen1965',\n                'zh-Hant': '1  linchen1965',\n            },\n        },\n        {\n            filename: 'nj2',\n            name: {\n                en: 'Line 2 by linchen1965',\n                'zh-Hans': '2  linchen1965',\n                'zh-Hant': '2  linchen1965',\n            },\n        },\n        {\n            filename: 'nj3',\n            name: {\n                en: 'Line 3 by linchen1965',\n                'zh-Hans': '3  linchen1965',\n                'zh-Hant': '3  linchen1965',\n            },\n        },\n        {\n            filename: 'nj4',\n            name: {\n                en: 'Line 4 by linchen1965',\n                'zh-Hans': '4  linchen1965',\n                'zh-Hant': '4  linchen1965',\n            },\n        },\n        {\n            filename: 'nj10',\n            name: {\n                en: 'Line 10 by linchen1965',\n                'zh-Hans': '10  linchen1965',\n                'zh-Hant': '10  linchen1965',\n            },\n        },\n    ],\n\n    shmetro: [\n        {\n            filename: 'sh1',\n            name: {\n                en: 'Line 1',\n                'zh-Hans': '1',\n                'zh-Hant': '1',\n            },\n        },\n        {\n            filename: 'sh2',\n            name: {\n                en: 'Line 2',\n                'zh-Hans': '2',\n                'zh-Hant': '2',\n            },\n        },\n        {\n            filename: 'sh3',\n            name: {\n                en: 'Line 3',\n                'zh-Hans': '3',\n                'zh-Hant': '3',\n            },\n        },\n        {\n            filename: 'sh4',\n            name: {\n                en: 'Line 4',\n                'zh-Hans': '4',\n                'zh-Hant': '4',\n            },\n        },\n        {\n            filename: 'sh5',\n            name: {\n                en: 'Line 5 by Tianxiu11111',\n                'zh-Hans': '5  Tianxiu11111',\n                'zh-Hant': '5  Tianxiu11111',\n            },\n        },\n        {\n            filename: 'sh6',\n            name: {\n                en: 'Line 6 by Thomastzc',\n                'zh-Hans': '6  Thomastzc',\n                'zh-Hant': '6  Thomastzc',\n            },\n        },\n        {\n            filename: 'sh7',\n            name: {\n                en: 'Line 7 by Thomastzc',\n                'zh-Hans': '7  Thomastzc',\n                'zh-Hant': '7  Thomastzc',\n            },\n        },\n        {\n            filename: 'sh8',\n            name: {\n                en: 'Line 8 by Thomastzc',\n                'zh-Hans': '8  Thomastzc',\n                'zh-Hant': '8  Thomastzc',\n            },\n        },\n        {\n            filename: 'sh9',\n            name: {\n                en: 'Line 9',\n                'zh-Hans': '9',\n                'zh-Hant': '9',\n            },\n        },\n        {\n            filename: 'sh10',\n            name: {\n                en: 'Line 10',\n                'zh-Hans': '10',\n                'zh-Hant': '10',\n            },\n        },\n        {\n            filename: 'sh11',\n            name: {\n                en: 'Line 11 by Tianxiu11111',\n                'zh-Hans': '11  Tianxiu11111',\n                'zh-Hant': '11  Tianxiu11111',\n            },\n        },\n        {\n            filename: 'sh12',\n            name: {\n                en: 'Line 12 by Andy1782010',\n                'zh-Hans': '12  Andy1782010',\n                'zh-Hant': '12  Andy1782010',\n            },\n        },\n        {\n            filename: 'sh13',\n            name: {\n                en: 'Line 13 by Andy1782010',\n                'zh-Hans': '13  Andy1782010',\n                'zh-Hant': '13  Andy1782010',\n            },\n        },\n        {\n            filename: 'sh14',\n            name: {\n                en: 'Line 14',\n                'zh-Hans': '14',\n                'zh-Hant': '14',\n            },\n        },\n        {\n            filename: 'sh15',\n            name: {\n                en: 'Line 15 by Thomastzc',\n                'zh-Hans': '15  Thomastzc',\n                'zh-Hant': '15  Thomastzc',\n            },\n        },\n        {\n            filename: 'sh16',\n            name: {\n                en: 'Line 16',\n                'zh-Hans': '16',\n                'zh-Hant': '16',\n            },\n        },\n        {\n            filename: 'sh17',\n            name: {\n                en: 'Line 17 by Thomastzc',\n                'zh-Hans': '17  Thomastzc',\n                'zh-Hant': '17  Thomastzc',\n            },\n        },\n        {\n            filename: 'sh18',\n            name: {\n                en: 'Line 18 by Tianxiu11111',\n                'zh-Hans': '18  Tianxiu11111',\n                'zh-Hant': '18  Tianxiu11111',\n            },\n        },\n    ],\n\n    saopaulometro: [\n        {\n            filename: 'sp1',\n            name: {\n                en: 'Line 1',\n                pt: 'Linha 1',\n                'zh-Hans': '1',\n                'zh-Hant': '1',\n            },\n        },\n        {\n            filename: 'sp2',\n            name: {\n                en: 'Line 2',\n                pt: 'Linha 2',\n                'zh-Hans': '2',\n                'zh-Hant': '2',\n            },\n        },\n        {\n            filename: 'sp3',\n            name: {\n                en: 'Line 3',\n                pt: 'Linha 3',\n                'zh-Hans': '3',\n                'zh-Hant': '3',\n            },\n        },\n        {\n            filename: 'sp4',\n            name: {\n                en: 'Line 4',\n                pt: 'Linha 4',\n                'zh-Hans': '4',\n                'zh-Hant': '4',\n            },\n        },\n        {\n            filename: 'sp5',\n            name: {\n                en: 'Line 5',\n                pt: 'Linha 5',\n                'zh-Hans': '5',\n                'zh-Hant': '5',\n            },\n        },\n        {\n            filename: 'sp7',\n            name: {\n                en: 'Line 7',\n                pt: 'Linha 7',\n                'zh-Hans': '7',\n                'zh-Hant': '7',\n            },\n        },\n        {\n            filename: 'sp8',\n            name: {\n                en: 'Line 8',\n                pt: 'Linha 8',\n                'zh-Hans': '8',\n                'zh-Hant': '8',\n            },\n        },\n        {\n            filename: 'sp9',\n            name: {\n                en: 'Line 9',\n                pt: 'Linha 9',\n                'zh-Hans': '9',\n                'zh-Hant': '9',\n            },\n        },\n        {\n            filename: 'sp10',\n            name: {\n                en: 'Line 10',\n                pt: 'Linha 10',\n                'zh-Hans': '10',\n                'zh-Hant': '10',\n            },\n        },\n        {\n            filename: 'sp11',\n            name: {\n                en: 'Line 11',\n                pt: 'Linha 11',\n                'zh-Hans': '11',\n                'zh-Hant': '11',\n            },\n        },\n        {\n            filename: 'sp12',\n            name: {\n                en: 'Line 12',\n                pt: 'Linha 12',\n                'zh-Hans': '12',\n                'zh-Hant': '12',\n            },\n        },\n        {\n            filename: 'sp13',\n            name: {\n                en: 'Line 13',\n                pt: 'Linha 13',\n                'zh-Hans': '13',\n                'zh-Hant': '13',\n            },\n        },\n        {\n            filename: 'sp15',\n            name: {\n                en: 'Line 15',\n                pt: 'Linha 15',\n                'zh-Hans': '15',\n                'zh-Hant': '15',\n            },\n        },\n    ],\n\n    szmetro: [\n        {\n            filename: 'sz1',\n            name: {\n                en: 'Line 1',\n                'zh-Hans': '1',\n                'zh-Hant': '1',\n            },\n        },\n        {\n            filename: 'sz3',\n            name: {\n                en: 'Line 3',\n                'zh-Hans': '3',\n                'zh-Hant': '3',\n            },\n        },\n        {\n            filename: 'sz4',\n            name: {\n                en: 'Line 4',\n                'zh-Hans': '4',\n                'zh-Hant': '4',\n            },\n        },\n    ],\n\n    zzmetro: [\n        {\n            filename: 'zz1',\n            name: {\n                en: 'Line 1',\n                'zh-Hans': '1',\n                'zh-Hant': '1',\n            },\n        },\n        {\n            filename: 'zz3',\n            name: {\n                en: 'Line 3',\n                'zh-Hans': '3',\n                'zh-Hant': '3',\n            },\n        },\n        {\n            filename: 'zz4',\n            name: {\n                en: 'Line 4',\n                'zh-Hans': '4',\n                'zh-Hant': '4',\n            },\n        },\n        {\n            filename: 'zz6',\n            name: {\n                en: 'Line 6',\n                'zh-Hans': '6',\n                'zh-Hant': '6',\n            },\n        },\n        {\n            filename: 'zz14',\n            name: {\n                en: 'Line 14',\n                'zh-Hans': '14',\n                'zh-Hant': '14',\n            },\n        },\n    ],\n};\n","import { AppDispatch, RootState } from '../index';\nimport { ColineInfo, InterchangeInfo, StationDict } from '../../constants/constants';\nimport { setColineBulk } from './action';\nimport { nanoid } from 'nanoid';\n\n// Cartesian product of multiple arrays in JavaScript\n// https://stackoverflow.com/questions/12303989/cartesian-product-of-multiple-arrays-in-javascript\n// Equivalent typescript version\n// https://gist.github.com/ssippe/1f92625532eef28be6974f898efb23ef?permalink_comment_id=3364149#gistcomment-3364149\nfunction cartesian<T>(...allEntries: T[][]): T[][] {\n    return allEntries.reduce<T[][]>(\n        (results, entries) =>\n            results\n                .map(result => entries.map(entry => result.concat([entry])))\n                .reduce((subResults, result) => subResults.concat(result), []),\n        [[]]\n    );\n}\n\n/**\n * Coline branch is also known as the lower branch.\n */\nexport const isColineBranch = (branch: string[], stnList: StationDict) =>\n    stnList[branch[0]].children.indexOf(branch[1]) ? true : false;\n\nexport const getPossibleStnIdsFromMainLine = (branches: string[][], stnList: StationDict) => [\n    branches[0][1], // skip linestart\n    branches[0][branches[0].length - 2], // skip lineend\n    ...branches[0].filter(stnId =>\n        // for every station in the main line, find if it branches out at this station\n        branches\n            .slice(1)\n            .filter(branch => isColineBranch(branch, stnList))\n            // branches after the first/main line may not have linestart or lineend\n            .map(branch => branch.filter(stnId => !['linestart', 'lineend'].includes(stnId)))\n            // only stations at both ends need to be taken into consideration\n            .map(branch => [branch[0], branch[branch.length - 1]])\n            .flat()\n            .includes(stnId)\n    ),\n];\n\nexport const getPossibleStnIdsFromBranchLine = (branches: string[][], stnList: StationDict) =>\n    branches\n        .slice(1)\n        .filter(branch => isColineBranch(branch, stnList))\n        .map(branch => branch.filter(stnId => !['linestart', 'lineend'].includes(stnId)))\n        .map(branch => [branch[0], branch[branch.length - 1]]);\n\nexport const getPossibleCombinations = (branchIndex: number) => {\n    return (dispatch: AppDispatch, getState: () => RootState): [string, string][] => {\n        const branches = getState().helper.branches;\n\n        if (branchIndex === 0) {\n            const stnList = getState().param.stn_list;\n            const possibleStnIdsFromMainLine = getPossibleStnIdsFromMainLine(branches, stnList);\n            return cartesian(possibleStnIdsFromMainLine, possibleStnIdsFromMainLine).filter(\n                val => val[0] !== val[1]\n            ) as [string, string][];\n        } else {\n            const branch = branches[branchIndex];\n            if (branch) {\n                const b = branch.filter(id => !['linestart', 'lineend'].includes(id));\n                return [[b[0], b.slice(-1)[0]]];\n            } else {\n                return [];\n            }\n        }\n    };\n};\n\n/**\n * Calculate row span for displaying track sharing column in StationAgGrid\n * @param stationId id of station that begins to span rows\n * @param branchIndex index of branch that the grid is displaying\n */\nexport const getRowSpanForColine = (stationId: string, branchIndex: number) => {\n    return (dispatch: AppDispatch, getState: () => RootState): [number, string | undefined] => {\n        const coline = getState().param.coline;\n        const branch = getState().helper.branches[branchIndex];\n\n        for (let [clId, cl] of Object.entries(coline)) {\n            if (cl.from === stationId && branch.includes(cl.to)) {\n                const thisIndex = branch.indexOf(stationId);\n                const thatIndex = branch.indexOf(cl.to);\n                if (thatIndex > thisIndex) {\n                    return [thatIndex - thisIndex + 1, clId];\n                }\n            } else if (cl.to === stationId && branch.includes(cl.to)) {\n                const thisIndex = branch.indexOf(stationId);\n                const thatIndex = branch.indexOf(cl.from);\n                if (thatIndex > thisIndex) {\n                    return [thatIndex - thisIndex + 1, clId];\n                }\n            }\n        }\n        return [0, undefined];\n    };\n};\n\n/**\n * Verify station selections from table are consecutive, which is the prerequisite for track sharing.\n * @param selectedIds IDs of the selected stations (get by gridApi)\n * @param branchIndex\n */\nexport const verifyAreSelectionsConsecutive = (selectedIds: string[], branchIndex: number) => {\n    return (dispatch: AppDispatch, getState: () => RootState): boolean => {\n        const branch = getState().helper.branches[branchIndex];\n\n        const from = selectedIds[0];\n        const to = selectedIds.slice(-1)[0];\n\n        const areConsecutiveSelections =\n            branch.slice(branch.indexOf(from), branch.indexOf(to) + 1).toString() === selectedIds.toString();\n        if (!areConsecutiveSelections) {\n            console.log('verifyAreSelectionsConsecutive():: Selections are NOT consecutive');\n            return false;\n        } else {\n            return true;\n        }\n    };\n};\n\n/**\n *  Checks the validity of from and to. Currently we accept coline if it:\n 1. Start from either ends of the mainline or branch stations and\n terminate at either ends of the mainline or branch stations.\n 2. Start from the one end of the branch line and\n terminate at the other end of the same branch line.\n\n * @param from station id from\n * @param to station id to\n */\nexport const checkColineValidity = (from: string, to: string) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const stnList = getState().param.stn_list;\n        const branches = getState().helper.branches;\n\n        if (from === to) {\n            throw new Error('addColine():: failed for same stnId');\n        }\n        // calculate if coline is in the main line\n        const colineInMainLine = getPossibleStnIdsFromMainLine(branches, stnList).filter(stnId =>\n            [from, to].includes(stnId)\n        );\n        // calculate if coline is in one branch line\n        const colineInBranches = getPossibleStnIdsFromBranchLine(branches, stnList).filter(terminals =>\n            [from, to].every(stnId => terminals.includes(stnId))\n        );\n        // see if coline is in the main line\n        if (colineInMainLine.length === 2 && colineInBranches.length > 0) {\n            throw new Error('addColine():: failed');\n        }\n        // see if coline is in one branch line\n        if (colineInMainLine.length !== 2 && colineInBranches.length !== 1) {\n            throw new Error('addColine():: failed');\n        }\n    };\n};\n\nexport const findAllColinesInBranch = (branchIndex: number) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const coline = getState().param.coline;\n        const branches = getState().helper.branches;\n        const branch = branches[branchIndex];\n\n        if (branch) {\n            return Object.entries(coline).reduce<Record<string, ColineInfo>>((acc, cur) => {\n                if (branch.includes(cur[1].from) && branch.includes(cur[1].to)) {\n                    return { ...acc, [cur[0]]: cur[1] };\n                } else {\n                    return { ...acc };\n                }\n            }, {});\n        } else {\n            return {};\n        }\n    };\n};\n\n/**\n * Remove related coline when the deleteStn is the coline `from` or `to` station.\n */\nexport const removeInvalidColineOnRemoveStation = (deleteStnId: string) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (Object.keys(colineInfo).length === 0) return;\n\n        const nextColine = Object.entries(colineInfo).reduce<Record<string, ColineInfo>>((acc, cur) => {\n            if (cur[1].from !== deleteStnId && cur[1].to !== deleteStnId) {\n                return { ...acc, [cur[0]]: cur[1] };\n            } else {\n                return { ...acc };\n            }\n        }, {});\n\n        dispatch(setColineBulk(nextColine));\n    };\n};\n\nexport const addColine = (from: string, to: string, colors: InterchangeInfo[], display: boolean = true) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        dispatch(checkColineValidity(from, to));\n        dispatch(\n            setColineBulk({\n                ...colineInfo,\n                [nanoid(4)]: { from: from, to: to, colors: colors, display: display },\n            })\n        );\n    };\n};\n\nexport const updateColine = (colineId: string, from: string, to: string, display = true) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo) {\n            dispatch(checkColineValidity(from, to));\n\n            const newColineInfo = {\n                ...colineInfo,\n                [colineId]: { ...colineInfo[colineId], from, to, display },\n            };\n\n            dispatch(setColineBulk(newColineInfo));\n        }\n    };\n};\n\nexport const removeColine = (colineId: string) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo) {\n            const { [colineId]: _, ...nextColine } = colineInfo;\n            dispatch(setColineBulk(nextColine));\n        }\n    };\n};\n\n/**\n *\n * @param colineId\n * @param interchangeInfo\n */\nexport const addColineColor = (colineId: string, interchangeInfo: InterchangeInfo) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        colineInfo[colineId].colors = [...colineInfo[colineId].colors, interchangeInfo];\n\n        dispatch(setColineBulk(colineInfo));\n    };\n};\n\nexport const removeColineColor = (colineId: string, interchangeIndex: number) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo && colineInfo[colineId].colors.length > interchangeIndex) {\n            const nextColours = colineInfo[colineId].colors.filter((_, colineIdx) => colineIdx !== interchangeIndex);\n            if (nextColours.length === 0) {\n                // remove entire coline\n                const { [colineId]: _, ...nextColine } = colineInfo;\n                dispatch(setColineBulk(nextColine));\n            } else {\n                // update coline colour list\n                const nextColine = {\n                    ...colineInfo,\n                    [colineId]: { ...colineInfo[colineId], colors: nextColours },\n                };\n                dispatch(setColineBulk(nextColine));\n            }\n        }\n    };\n};\n\nexport const updateColineColor = (colineId: string, interchangeIndex: number, interchangeInfo: InterchangeInfo) => {\n    return (dispatch: AppDispatch, getState: () => RootState) => {\n        const colineInfo = getState().param.coline;\n\n        if (colineId in colineInfo && colineInfo[colineId].colors.length > interchangeIndex) {\n            colineInfo[colineId].colors = colineInfo[colineId].colors.map((int, colineIdx) =>\n                colineIdx === interchangeIndex\n                    ? ([0, 1, 2, 3, 4, 5].map(i =>\n                          interchangeInfo[i] === undefined ? int[i] : interchangeInfo[i]\n                      ) as InterchangeInfo)\n                    : int\n            );\n\n            dispatch(setColineBulk(colineInfo));\n        }\n    };\n};\n\n// DEBUG PROXY\n// declare const window: any;\n// window.addColine = addColine;\n// window.updateColine = updateColine;\n// window.removeColine = removeColine;\n// window.rmgStore.dispatch(window.removeColine(2))\n// let t = ['shanghai', 'sh4', '#5F259F', '#fff', '4', 'Line 4']\n// window.rmgStore.dispatch(window.addColine('s9tt', 'l1mz', [t]))\n","var map = {\n\t\"./basic/blank\": [\n\t\t8107,\n\t\t8014\n\t],\n\t\"./basic/blank.ts\": [\n\t\t8107,\n\t\t8014\n\t],\n\t\"./basic/coline\": [\n\t\t255,\n\t\t9410\n\t],\n\t\"./basic/coline.ts\": [\n\t\t255,\n\t\t9410\n\t],\n\t\"./basic/default\": [\n\t\t25,\n\t\t6230\n\t],\n\t\"./basic/default.ts\": [\n\t\t25,\n\t\t6230\n\t],\n\t\"./basic/loop\": [\n\t\t7861,\n\t\t1188\n\t],\n\t\"./basic/loop.ts\": [\n\t\t7861,\n\t\t1188\n\t],\n\t\"./bjsubway/bj1\": [\n\t\t8731,\n\t\t6698\n\t],\n\t\"./bjsubway/bj1.ts\": [\n\t\t8731,\n\t\t6698\n\t],\n\t\"./bjsubway/bj10\": [\n\t\t8009,\n\t\t2773\n\t],\n\t\"./bjsubway/bj10.ts\": [\n\t\t8009,\n\t\t2773\n\t],\n\t\"./bjsubway/bj11\": [\n\t\t4050,\n\t\t7680\n\t],\n\t\"./bjsubway/bj11.ts\": [\n\t\t4050,\n\t\t7680\n\t],\n\t\"./bjsubway/bj13\": [\n\t\t9248,\n\t\t9259\n\t],\n\t\"./bjsubway/bj13.ts\": [\n\t\t9248,\n\t\t9259\n\t],\n\t\"./bjsubway/bj14\": [\n\t\t203,\n\t\t9797\n\t],\n\t\"./bjsubway/bj14.ts\": [\n\t\t203,\n\t\t9797\n\t],\n\t\"./bjsubway/bj2\": [\n\t\t6466,\n\t\t3981\n\t],\n\t\"./bjsubway/bj2.ts\": [\n\t\t6466,\n\t\t3981\n\t],\n\t\"./bjsubway/bj4\": [\n\t\t2428,\n\t\t7200\n\t],\n\t\"./bjsubway/bj4.ts\": [\n\t\t2428,\n\t\t7200\n\t],\n\t\"./bjsubway/bj5\": [\n\t\t3968,\n\t\t2244\n\t],\n\t\"./bjsubway/bj5.ts\": [\n\t\t3968,\n\t\t2244\n\t],\n\t\"./bjsubway/bj6\": [\n\t\t4140,\n\t\t7149\n\t],\n\t\"./bjsubway/bj6.ts\": [\n\t\t4140,\n\t\t7149\n\t],\n\t\"./bjsubway/bj7\": [\n\t\t9755,\n\t\t6452\n\t],\n\t\"./bjsubway/bj7.ts\": [\n\t\t9755,\n\t\t6452\n\t],\n\t\"./bjsubway/bj8\": [\n\t\t2013,\n\t\t2200\n\t],\n\t\"./bjsubway/bj8.ts\": [\n\t\t2013,\n\t\t2200\n\t],\n\t\"./bjsubway/bj9\": [\n\t\t7639,\n\t\t9950\n\t],\n\t\"./bjsubway/bj9.ts\": [\n\t\t7639,\n\t\t9950\n\t],\n\t\"./bjsubway/t1l\": [\n\t\t9891,\n\t\t6583\n\t],\n\t\"./bjsubway/t1l.ts\": [\n\t\t9891,\n\t\t6583\n\t],\n\t\"./bjsubway/yzl\": [\n\t\t8602,\n\t\t4015\n\t],\n\t\"./bjsubway/yzl.ts\": [\n\t\t8602,\n\t\t4015\n\t],\n\t\"./data\": [\n\t\t9794\n\t],\n\t\"./data.ts\": [\n\t\t9794\n\t],\n\t\"./fmetro/fs2\": [\n\t\t4188,\n\t\t2846\n\t],\n\t\"./fmetro/fs2.ts\": [\n\t\t4188,\n\t\t2846\n\t],\n\t\"./fmetro/tgm1\": [\n\t\t3231,\n\t\t8924\n\t],\n\t\"./fmetro/tgm1.ts\": [\n\t\t3231,\n\t\t8924\n\t],\n\t\"./fmetro/tnh1\": [\n\t\t7549,\n\t\t2100\n\t],\n\t\"./fmetro/tnh1.ts\": [\n\t\t7549,\n\t\t2100\n\t],\n\t\"./gzmtr/apm\": [\n\t\t5540,\n\t\t199\n\t],\n\t\"./gzmtr/apm.ts\": [\n\t\t5540,\n\t\t199\n\t],\n\t\"./gzmtr/gf\": [\n\t\t5670,\n\t\t8512\n\t],\n\t\"./gzmtr/gf.ts\": [\n\t\t5670,\n\t\t8512\n\t],\n\t\"./gzmtr/gz1\": [\n\t\t4867,\n\t\t9655\n\t],\n\t\"./gzmtr/gz1.ts\": [\n\t\t4867,\n\t\t9655\n\t],\n\t\"./gzmtr/gz13\": [\n\t\t5811,\n\t\t6555\n\t],\n\t\"./gzmtr/gz13.ts\": [\n\t\t5811,\n\t\t6555\n\t],\n\t\"./gzmtr/gz14\": [\n\t\t8492,\n\t\t2663\n\t],\n\t\"./gzmtr/gz14.ts\": [\n\t\t8492,\n\t\t2663\n\t],\n\t\"./gzmtr/gz18\": [\n\t\t8778,\n\t\t6080\n\t],\n\t\"./gzmtr/gz18.ts\": [\n\t\t8778,\n\t\t6080\n\t],\n\t\"./gzmtr/gz2\": [\n\t\t4887,\n\t\t8724\n\t],\n\t\"./gzmtr/gz2.ts\": [\n\t\t4887,\n\t\t8724\n\t],\n\t\"./gzmtr/gz21\": [\n\t\t5884,\n\t\t4694\n\t],\n\t\"./gzmtr/gz21.ts\": [\n\t\t5884,\n\t\t4694\n\t],\n\t\"./gzmtr/gz22\": [\n\t\t7653,\n\t\t5074\n\t],\n\t\"./gzmtr/gz22.ts\": [\n\t\t7653,\n\t\t5074\n\t],\n\t\"./gzmtr/gz3\": [\n\t\t3328,\n\t\t4754\n\t],\n\t\"./gzmtr/gz3.ts\": [\n\t\t3328,\n\t\t4754\n\t],\n\t\"./gzmtr/gz4\": [\n\t\t8505,\n\t\t2490\n\t],\n\t\"./gzmtr/gz4.ts\": [\n\t\t8505,\n\t\t2490\n\t],\n\t\"./gzmtr/gz5\": [\n\t\t3691,\n\t\t5910\n\t],\n\t\"./gzmtr/gz5.ts\": [\n\t\t3691,\n\t\t5910\n\t],\n\t\"./gzmtr/gz6\": [\n\t\t8793,\n\t\t403\n\t],\n\t\"./gzmtr/gz6.ts\": [\n\t\t8793,\n\t\t403\n\t],\n\t\"./gzmtr/gz7\": [\n\t\t3208,\n\t\t1180\n\t],\n\t\"./gzmtr/gz7.ts\": [\n\t\t3208,\n\t\t1180\n\t],\n\t\"./gzmtr/gz8\": [\n\t\t1796,\n\t\t1899\n\t],\n\t\"./gzmtr/gz8.ts\": [\n\t\t1796,\n\t\t1899\n\t],\n\t\"./gzmtr/gz9\": [\n\t\t9086,\n\t\t6899\n\t],\n\t\"./gzmtr/gz9.ts\": [\n\t\t9086,\n\t\t6899\n\t],\n\t\"./gzmtr/thp1\": [\n\t\t1663,\n\t\t1471\n\t],\n\t\"./gzmtr/thp1.ts\": [\n\t\t1663,\n\t\t1471\n\t],\n\t\"./gzmtr/thz1\": [\n\t\t4742,\n\t\t6293\n\t],\n\t\"./gzmtr/thz1.ts\": [\n\t\t4742,\n\t\t6293\n\t],\n\t\"./kmrailtransit/km1\": [\n\t\t3390,\n\t\t5680\n\t],\n\t\"./kmrailtransit/km1.ts\": [\n\t\t3390,\n\t\t5680\n\t],\n\t\"./kmrailtransit/km2\": [\n\t\t6465,\n\t\t852\n\t],\n\t\"./kmrailtransit/km2.ts\": [\n\t\t6465,\n\t\t852\n\t],\n\t\"./kmrailtransit/km3\": [\n\t\t6934,\n\t\t758\n\t],\n\t\"./kmrailtransit/km3.ts\": [\n\t\t6934,\n\t\t758\n\t],\n\t\"./kmrailtransit/km4\": [\n\t\t9884,\n\t\t7855\n\t],\n\t\"./kmrailtransit/km4.ts\": [\n\t\t9884,\n\t\t7855\n\t],\n\t\"./kmrailtransit/km5\": [\n\t\t2968,\n\t\t4387\n\t],\n\t\"./kmrailtransit/km5.ts\": [\n\t\t2968,\n\t\t4387\n\t],\n\t\"./kmrailtransit/km6\": [\n\t\t6496,\n\t\t4996\n\t],\n\t\"./kmrailtransit/km6.ts\": [\n\t\t6496,\n\t\t4996\n\t],\n\t\"./kvtransit/klMonorail\": [\n\t\t4423,\n\t\t6569\n\t],\n\t\"./kvtransit/klMonorail.ts\": [\n\t\t4423,\n\t\t6569\n\t],\n\t\"./kvtransit/lrtAmpang\": [\n\t\t8096,\n\t\t3692\n\t],\n\t\"./kvtransit/lrtAmpang.ts\": [\n\t\t8096,\n\t\t3692\n\t],\n\t\"./kvtransit/lrtKelanaJaya\": [\n\t\t8971,\n\t\t2791\n\t],\n\t\"./kvtransit/lrtKelanaJaya.ts\": [\n\t\t8971,\n\t\t2791\n\t],\n\t\"./kvtransit/lrtSriPataling\": [\n\t\t175,\n\t\t4254\n\t],\n\t\"./kvtransit/lrtSriPataling.ts\": [\n\t\t175,\n\t\t4254\n\t],\n\t\"./kvtransit/mrtKajang\": [\n\t\t1683,\n\t\t74\n\t],\n\t\"./kvtransit/mrtKajang.ts\": [\n\t\t1683,\n\t\t74\n\t],\n\t\"./mlm/taipa\": [\n\t\t9897,\n\t\t3456\n\t],\n\t\"./mlm/taipa.ts\": [\n\t\t9897,\n\t\t3456\n\t],\n\t\"./mtr/ael\": [\n\t\t6641,\n\t\t7211\n\t],\n\t\"./mtr/ael.ts\": [\n\t\t6641,\n\t\t7211\n\t],\n\t\"./mtr/drl\": [\n\t\t27,\n\t\t7769\n\t],\n\t\"./mtr/drl.ts\": [\n\t\t27,\n\t\t7769\n\t],\n\t\"./mtr/eal\": [\n\t\t6301,\n\t\t1475\n\t],\n\t\"./mtr/eal.ts\": [\n\t\t6301,\n\t\t1475\n\t],\n\t\"./mtr/isl\": [\n\t\t8173,\n\t\t7321\n\t],\n\t\"./mtr/isl.ts\": [\n\t\t8173,\n\t\t7321\n\t],\n\t\"./mtr/ktl\": [\n\t\t9023,\n\t\t7910\n\t],\n\t\"./mtr/ktl.ts\": [\n\t\t9023,\n\t\t7910\n\t],\n\t\"./mtr/sile\": [\n\t\t9776,\n\t\t6153\n\t],\n\t\"./mtr/sile.ts\": [\n\t\t9776,\n\t\t6153\n\t],\n\t\"./mtr/tkl\": [\n\t\t4254,\n\t\t6568\n\t],\n\t\"./mtr/tkl.ts\": [\n\t\t4254,\n\t\t6568\n\t],\n\t\"./mtr/tml\": [\n\t\t2593,\n\t\t8476\n\t],\n\t\"./mtr/tml.ts\": [\n\t\t2593,\n\t\t8476\n\t],\n\t\"./mtr/twl\": [\n\t\t457,\n\t\t8330\n\t],\n\t\"./mtr/twl.ts\": [\n\t\t457,\n\t\t8330\n\t],\n\t\"./njmetro/nj1\": [\n\t\t2530,\n\t\t8615\n\t],\n\t\"./njmetro/nj1.ts\": [\n\t\t2530,\n\t\t8615\n\t],\n\t\"./njmetro/nj10\": [\n\t\t1931,\n\t\t5797\n\t],\n\t\"./njmetro/nj10.ts\": [\n\t\t1931,\n\t\t5797\n\t],\n\t\"./njmetro/nj2\": [\n\t\t6630,\n\t\t388\n\t],\n\t\"./njmetro/nj2.ts\": [\n\t\t6630,\n\t\t388\n\t],\n\t\"./njmetro/nj3\": [\n\t\t9413,\n\t\t1074\n\t],\n\t\"./njmetro/nj3.ts\": [\n\t\t9413,\n\t\t1074\n\t],\n\t\"./njmetro/nj4\": [\n\t\t9002,\n\t\t3437\n\t],\n\t\"./njmetro/nj4.ts\": [\n\t\t9002,\n\t\t3437\n\t],\n\t\"./saopaulometro/sp1\": [\n\t\t7216,\n\t\t6010\n\t],\n\t\"./saopaulometro/sp1.ts\": [\n\t\t7216,\n\t\t6010\n\t],\n\t\"./saopaulometro/sp10\": [\n\t\t2468,\n\t\t5458\n\t],\n\t\"./saopaulometro/sp10.ts\": [\n\t\t2468,\n\t\t5458\n\t],\n\t\"./saopaulometro/sp11\": [\n\t\t8094,\n\t\t6432\n\t],\n\t\"./saopaulometro/sp11.ts\": [\n\t\t8094,\n\t\t6432\n\t],\n\t\"./saopaulometro/sp12\": [\n\t\t7121,\n\t\t5391\n\t],\n\t\"./saopaulometro/sp12.ts\": [\n\t\t7121,\n\t\t5391\n\t],\n\t\"./saopaulometro/sp13\": [\n\t\t731,\n\t\t2259\n\t],\n\t\"./saopaulometro/sp13.ts\": [\n\t\t731,\n\t\t2259\n\t],\n\t\"./saopaulometro/sp15\": [\n\t\t6637,\n\t\t3969\n\t],\n\t\"./saopaulometro/sp15.ts\": [\n\t\t6637,\n\t\t3969\n\t],\n\t\"./saopaulometro/sp2\": [\n\t\t2032,\n\t\t1416\n\t],\n\t\"./saopaulometro/sp2.ts\": [\n\t\t2032,\n\t\t1416\n\t],\n\t\"./saopaulometro/sp3\": [\n\t\t4985,\n\t\t2856\n\t],\n\t\"./saopaulometro/sp3.ts\": [\n\t\t4985,\n\t\t2856\n\t],\n\t\"./saopaulometro/sp4\": [\n\t\t3619,\n\t\t45\n\t],\n\t\"./saopaulometro/sp4.ts\": [\n\t\t3619,\n\t\t45\n\t],\n\t\"./saopaulometro/sp5\": [\n\t\t4700,\n\t\t7425\n\t],\n\t\"./saopaulometro/sp5.ts\": [\n\t\t4700,\n\t\t7425\n\t],\n\t\"./saopaulometro/sp7\": [\n\t\t6199,\n\t\t4636\n\t],\n\t\"./saopaulometro/sp7.ts\": [\n\t\t6199,\n\t\t4636\n\t],\n\t\"./saopaulometro/sp8\": [\n\t\t7222,\n\t\t9538\n\t],\n\t\"./saopaulometro/sp8.ts\": [\n\t\t7222,\n\t\t9538\n\t],\n\t\"./saopaulometro/sp9\": [\n\t\t6612,\n\t\t4985\n\t],\n\t\"./saopaulometro/sp9.ts\": [\n\t\t6612,\n\t\t4985\n\t],\n\t\"./shmetro/sh1\": [\n\t\t3056,\n\t\t2198\n\t],\n\t\"./shmetro/sh1.ts\": [\n\t\t3056,\n\t\t2198\n\t],\n\t\"./shmetro/sh10\": [\n\t\t1809,\n\t\t9963\n\t],\n\t\"./shmetro/sh10.ts\": [\n\t\t1809,\n\t\t9963\n\t],\n\t\"./shmetro/sh11\": [\n\t\t9749,\n\t\t9714\n\t],\n\t\"./shmetro/sh11.ts\": [\n\t\t9749,\n\t\t9714\n\t],\n\t\"./shmetro/sh12\": [\n\t\t3035,\n\t\t7866\n\t],\n\t\"./shmetro/sh12.ts\": [\n\t\t3035,\n\t\t7866\n\t],\n\t\"./shmetro/sh13\": [\n\t\t784,\n\t\t9874\n\t],\n\t\"./shmetro/sh13.ts\": [\n\t\t784,\n\t\t9874\n\t],\n\t\"./shmetro/sh14\": [\n\t\t7883,\n\t\t5503\n\t],\n\t\"./shmetro/sh14.ts\": [\n\t\t7883,\n\t\t5503\n\t],\n\t\"./shmetro/sh15\": [\n\t\t8178,\n\t\t8832\n\t],\n\t\"./shmetro/sh15.ts\": [\n\t\t8178,\n\t\t8832\n\t],\n\t\"./shmetro/sh16\": [\n\t\t4303,\n\t\t2808\n\t],\n\t\"./shmetro/sh16.ts\": [\n\t\t4303,\n\t\t2808\n\t],\n\t\"./shmetro/sh17\": [\n\t\t8987,\n\t\t2494\n\t],\n\t\"./shmetro/sh17.ts\": [\n\t\t8987,\n\t\t2494\n\t],\n\t\"./shmetro/sh18\": [\n\t\t7594,\n\t\t5758\n\t],\n\t\"./shmetro/sh18.ts\": [\n\t\t7594,\n\t\t5758\n\t],\n\t\"./shmetro/sh2\": [\n\t\t2039,\n\t\t1456\n\t],\n\t\"./shmetro/sh2.ts\": [\n\t\t2039,\n\t\t1456\n\t],\n\t\"./shmetro/sh3\": [\n\t\t1280,\n\t\t4655\n\t],\n\t\"./shmetro/sh3.ts\": [\n\t\t1280,\n\t\t4655\n\t],\n\t\"./shmetro/sh4\": [\n\t\t1608,\n\t\t854\n\t],\n\t\"./shmetro/sh4.ts\": [\n\t\t1608,\n\t\t854\n\t],\n\t\"./shmetro/sh5\": [\n\t\t1912,\n\t\t5364\n\t],\n\t\"./shmetro/sh5.ts\": [\n\t\t1912,\n\t\t5364\n\t],\n\t\"./shmetro/sh6\": [\n\t\t269,\n\t\t8424\n\t],\n\t\"./shmetro/sh6.ts\": [\n\t\t269,\n\t\t8424\n\t],\n\t\"./shmetro/sh7\": [\n\t\t231,\n\t\t1756\n\t],\n\t\"./shmetro/sh7.ts\": [\n\t\t231,\n\t\t1756\n\t],\n\t\"./shmetro/sh8\": [\n\t\t3760,\n\t\t5091\n\t],\n\t\"./shmetro/sh8.ts\": [\n\t\t3760,\n\t\t5091\n\t],\n\t\"./shmetro/sh9\": [\n\t\t2179,\n\t\t3510\n\t],\n\t\"./shmetro/sh9.ts\": [\n\t\t2179,\n\t\t3510\n\t],\n\t\"./szmetro/sz1\": [\n\t\t5794,\n\t\t4615\n\t],\n\t\"./szmetro/sz1.ts\": [\n\t\t5794,\n\t\t4615\n\t],\n\t\"./szmetro/sz3\": [\n\t\t9290,\n\t\t3236\n\t],\n\t\"./szmetro/sz3.ts\": [\n\t\t9290,\n\t\t3236\n\t],\n\t\"./szmetro/sz4\": [\n\t\t4750,\n\t\t2605\n\t],\n\t\"./szmetro/sz4.ts\": [\n\t\t4750,\n\t\t2605\n\t],\n\t\"./zzmetro/zz1\": [\n\t\t4586,\n\t\t9912\n\t],\n\t\"./zzmetro/zz1.ts\": [\n\t\t4586,\n\t\t9912\n\t],\n\t\"./zzmetro/zz14\": [\n\t\t5633,\n\t\t875\n\t],\n\t\"./zzmetro/zz14.ts\": [\n\t\t5633,\n\t\t875\n\t],\n\t\"./zzmetro/zz3\": [\n\t\t2873,\n\t\t9387\n\t],\n\t\"./zzmetro/zz3.ts\": [\n\t\t2873,\n\t\t9387\n\t],\n\t\"./zzmetro/zz4\": [\n\t\t3284,\n\t\t5402\n\t],\n\t\"./zzmetro/zz4.ts\": [\n\t\t3284,\n\t\t5402\n\t],\n\t\"./zzmetro/zz6\": [\n\t\t3577,\n\t\t9708\n\t],\n\t\"./zzmetro/zz6.ts\": [\n\t\t3577,\n\t\t9708\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function() { return Object.keys(map); };\nwebpackAsyncContext.id = 2770;\nmodule.exports = webpackAsyncContext;"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","t","keys","Object","module","exports","SvgWrapper","props","type","style","svgWidth","svgHeight","canvasScale","theme","children","useEffect","document","getElementById","href","process","xmlns","xmlnsXlink","height","viewBox","colorInterpolationFilters","fill","width","fallback","isIndeterminate","strokeWidth","stroke","flexDirection","overflowX","content","margin","flex","border","SvgRouter","location","useLocation","navigate","useNavigate","dispatch","useDispatch","useAppSelector","state","app","canvasToShow","param","svgWidths","svg_height","rmgStyle","pathname","nextStyle","split","slice","values","RmgStyle","includes","setStyle","filteredCanvas","canvasList","filter","canvas","sx","RunInGZMTR","lazy","RailMapGZMTR","DestinationMTR","RailMapMTR","DestinationSHMetro","RunInSHMetro","RailMapSHMetro","IndoorSHMetro","CanvasType","InfoSection","useTranslation","selectedStation","console","log","stn_list","num","name","secondaryName","fields","label","value","placeholder","onChange","updateStationNum","hidden","updateStationName","updateStationSecondaryName","p","as","size","minW","RmgAutoComplete","data","displayValue","displayHandler","predicate","defaultValue","isInvalid","wrapperRef","useRef","useState","inputValue","setInputValue","isDropdownOpen","setIsDropdownOpen","useOutsideClick","ref","handler","JSON","stringify","placement","isOpen","autoFocus","onDebouncedChange","val","onFocus","w","direction","maxH","overflowY","item","variant","justifyContent","flexShrink","role","onClick","handleSelect","FlagSvgEmoji","countryCode","svgFilename","undefined","src","setSrc","default","catch","err","error","message","alt","h","mr","CityPicker","defaultValueId","i18n","cityList","currentItem","find","languages","lng","isCensorTWFlag","country","LanguageCode","language","isWindowsClient","navigator","platform","flagSvg","countryList","flagEmoji","input","some","ColourPicker","city","paletteList","cityCode","setPaletteList","usePalette","palette","displayName","fg","MonoColour","bg","colour","ColourModal","onClose","defaultTheme","onUpdate","setCityCode","lineCode","setLineCode","bgColour","setBgColour","fgColour","setFgColour","toString","paletteFields","component","line","customFields","CityCode","options","isSubmitEnabled","isFitted","colorScheme","defaultIndex","fontSize","marginRight","color","isExternal","MdOpenInNew","disabled","ColourUtil","hex","parseInt","alpha","this","hexToRgb","join","hex1","hex2","reduce","acc","cur","idx","Math","pow","ThemeButton","mt","_hover","fade","icon","InterchangeCard","interchangeList","onAdd","onDelete","isModalOpen","setIsModalOpen","selectedIndex","setSelectedIndex","interchangeFields","it","i","length","spacing","align","noLabel","InterchangeSection","transfer","getOSINameFields","setIndex","osi_names","updateStationOsiName","handleAdd","info","addInterchange","handleDelete","j","removeInterchange","handleUpdate","updateInterchange","infoList","Fragment","alignSelf","leftIcon","RmgButtonGroup","selections","multiSelect","setValue","isAttached","selection","isSelected","isDisabled","prevValue","nextValue","v","handleToggle","MoreSection","services","facility","loop_pivot","serviceSelections","Services","service","mtrFacilityOptions","Facilities","shmetroFacilityOptions","updateStationServices","updateStationFacility","isChecked","checked","updateStationLoopPivot","oneLine","BranchSection","stationList","parents","branch","branchOptions","BranchStyle","getFirstStationOptions","Direction","positionOptions","upper","lower","getFields","updateStationBranchType","updateStationBranchFirstStation","indexOf","flipStationBranchPosition","StationSidePanel","LayoutSection","y_pc","branch_spacing","padding","direction_gz_x","direction_gz_y","canvasConfig","setSvgWidth","Number","setSvgHeight","min","max","setYPercentage","setBranchSpacing","setPaddingPercentage","setDirectionIndicatorX","setDirectionIndicatorY","DesignSection","lineName","line_name","lineNum","line_num","platformNum","platform_num","psdNum","psd_num","namePosMTR","customiseMTRDest","info_panel_type","directionSelections","ShortDirection","panelTypeGZMTROptions","PanelTypeGZMTR","panelTypeSHMetroOptions","PanelTypeShmetro","setLineName","setLineNum","setPlatform","setPsdNum","setPanelType","nextDirection","setDirection","staggerNameSelections","mtrSpecifiedFields","isStagger","staggerStationNames","flipStationNames","isLegacy","toggleLineNameBeforeDestination","terminal","customiseDestinationName","nextTheme","setTheme","LoopSection","branches","helper","loop","loop_info","bank","left_and_right_factor","bottom_factor","setLoop","setLoopBank","floor","setLoopLeftAndRightFactor","setLoopBottomFactor","GZMTRNoteCard","note","fields1","fields2","GZMTRNoteSection","notesGZMTR","updateNote","removeNote","addNote","StyleSidePanel","getYShareMTR","stnId","stnList","stnPred","RemoveConfirmModal","cancelRef","onConfirm","leastDestructiveRef","fontWeight","ml","StationSidePanelFooter","isRemoveModalOpen","setIsRemoveModalOpen","setCurrentStation","stationId","getState","setSidePanelMode","SidePanelMode","setSelectedStation","removeInvalidColineOnRemoveStation","newStnList","parse","forEach","parId","childId","right","left","splice","setStationsBulk","removeStation","setGlobalAlert","status","ColineCard","colineInfo","routeOptions","onUpdateRoute","onUpdateColourInfo","from","to","colors","ColineSection","useAppDispatch","selectedBranch","colineInfoList","findAllColinesInBranch","possibleCombinations","getPossibleCombinations","entries","colineId","route","updateColine","colourInfo","updateColineColor","colourIndex","removeColineColor","handleDeleteColour","addColine","AutoNumModal","where","setWhere","setFrom","maxLength","setMaxLength","sort","setSort","isColineBranch","validator","isNaN","debouncedDelay","asc","desc","isSubmitDisabled","autoNumbering","ActionSection","isAutoNumModalOpen","setIsAutoNumModalOpen","wrap","flexBasis","marginTop","reverseStations","BranchSidePanel","SidePanel","sidePanelMode","mode","STATION","header","text","body","footer","STYLE","BRANCH","CLOSE","downloadAs","filename","blob","Blob","downloadBlobAs","url","window","URL","createObjectURL","a","createElement","download","appendChild","click","removeChild","revokeObjectURL","readFileAsText","file","reader","FileReader","onloadend","result","readAsText","cloneSvgCanvas","isTransparent","isShowBorder","scale","key","querySelector","getPropertyValue","match","thisSVGHeight","elem","cloneNode","setAttribute","setProperty","tag","querySelectorAll","l","sheet","cssRules","rule","cssText","txt","s","textContent","prepend","getBase64FontFace","uris","alert","readBlobAsDataURL","readAsDataURL","svgEl","uniqueCharacters","Array","Set","el","innerHTML","replace","fonts","load","fontFaceList","styleSheet","distinctCssRules","font","matchedRule","cssStyle","fontFamily","family","unicodeRange","ruleStyle","matchedStyle","concat","all","cssRule","ruleStyleSrc","isSafari","userAgent","fetch","fontResp","fontDataUri","test","svgW","baseVal","svgH","devicePixelRatio","ctx","getContext","clearRect","elStyle","getComputedStyle","dominantBaseline","textAnchor","reject","img","Image","onload","drawImage","toBlob","onerror","btoa","unescape","encodeURIComponent","outerHTML","DownloadModal","canvasToDownload","setCanvasToDownload","setIsTransparent","setIsShowBorder","setScale","format","setFormat","currentStationId","current_stn_idx","canvasOptions","scaleOptions","formatOptions","png","svg","disabledOptions","handleDownload","option","stationIdListToDownload","zip","JSZip","replaceAll","setTimeout","removeAttribute","base64","generateAsync","zipData","DownloadActions","isDownloadModalOpen","setIsDownloadModalOpen","Button","rightIcon","Date","valueOf","CompanyCode","UploadConfirmModal","uploadedParam","onOpenParam","companies","basic","mtr","gzmtr","shmetro","bjsubway","fmetro","en","kmrailtransit","kvtransit","mlm","njmetro","saopaulometro","pt","szmetro","zzmetro","TemplateModal","company","isLazy","orientation","maxW","translateText","templateList","b","findIndex","c","templates","Flex","py","px","template","overflow","OpenActions","isUploadModalOpen","setIsUploadModalOpen","isTemplateModalOpen","setIsTemplateModalOpen","setUploadedParam","uploadModalCloseRef","fileInputRef","handleUpload","event","target","files","paramStr","updatedParam","updateParam","handleOpenParam","rmgStorage","writeFile","AllCanvas","selectCanvas","reRenderApp","openFromNewParam","accept","current","HeaderActions","PageHeader","canvasSelections","pl","pr","Environments","WindowHeader","environment","hostname","DEV","UAT","PRD","handleChangeLanguage","changeLanguage","documentElement","lang","title","env","getBadgeColour","packageJson","zoomOut","zoomIn","IconButton","open","addStation","position","newId","nanoid","newStationInfo","tick_direc","paid_area","nextStationList","verifyNewBranchEnds","every","AddStationModal","preposition","setPreposition","pivot","setPivot","setError","stationIdList","selectableStations","handleSelectWhere","before","after","addStationToExistingBranch","NewBranchModal","setTo","setPosition","fromError","setFromError","toError","setToError","newBranchEndStationOptions","isTwoSidedBranchOut","isYShare0","new","ext","handleSelectFrom","Boolean","handleSelectTo","StationAgGrid","GridTabs","isAddStationModalOpen","setIsAddStationModalOpen","isNewBranchModalOpen","setIsNewBranchModalOpen","display","index","setSelectedBranch","marginLeft","_","Suspense","branchIndex","AppRoot","globalAlert","paramString","pb","zh","ms","getPossibleStnIdsFromMainLine","flat","possibleStnIdsFromMainLine","allEntries","results","entry","subResults","cartesian","getRowSpanForColine","coline","clId","cl","thisIndex","thatIndex","checkColineValidity","colineInMainLine","colineInBranches","getPossibleStnIdsFromBranchLine","terminals","deleteStnId","nextColine","setColineBulk","newColineInfo","interchangeIndex","nextColours","colineIdx","interchangeInfo","int"],"sourceRoot":""}